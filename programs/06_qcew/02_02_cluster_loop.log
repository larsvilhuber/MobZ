
  ___  ____  ____  ____  ____ (R)
 /__    /   ____/   /   ____/
___/   /   /___/   /   /___/   14.2   Copyright 1985-2015 StataCorp LLC
  Statistics/Data Analysis            StataCorp
                                      4905 Lakeway Drive
                                      College Station, Texas 77845 USA
                                      800-STATA-PC        http://www.stata.com
                                      979-696-4600        stata@stata.com
                                      979-696-4601 (fax)

8-user Stata network perpetual license:
       Serial number:  501406244326
         Licensed to:  ECCO Cornell University
                       Ithaca, NY

Notes:
      1.  Stata is running in batch mode.
      2.  Unicode is supported; see help unicode_advice.

. do 02_02_cluster_loop.do 

. /**********************
> This is the do-file loop
> 
> It has three steps
> 
> 1. Calculate the aggregate data
>         (national level)
> 
> 2. Decide which czone defn to use
> 
> 3. Aggregate cty data to czone
> 
> 4. Run regressions of delM on delIPW, 
>         store regressions.
>         
> ***************************/
. include "../config.do"

. /*  config.do */
. 
. 
. 
. if ( "`c(hostname)'" == "ecco.vrdc.cornell.edu" ) {
. global root "/ssgprojects/project0002/MobZ.new"
. }

. 
. if ( "`c(username)'" == "vilhuber" ) {
. global root "/home/vilhuber/Workspace/git/larsvilhuber/MobZ"
. }

. 
. if ( "`c(hostname)'" == "some.server.at.census" ) {
. global root "/made/up/path/Mobz"
. }

. 
. /* check if the author creates a log file. If not, adjust the following code 
> fragment */
. 
. local c_date = c(current_date)

. local cdate = subinstr("`c_date'", " ", "_", .)

. local c_time = c(current_time)

. local ctime = subinstr("`c_time'", ":", "_", .)

. 
. // log using "${root}/logfile_`cdate'-`ctime'.log", replace text
. 
. /* It will provide some info about how and when the program was run */
. /* See https://www.stata.com/manuals13/pcreturn.pdf#pcreturn */
. local variant = cond(c(MP),"MP",cond(c(SE),"SE",c(flavor)) )  

. // alternatively, you could use 
. // local variant = cond(c(stata_version)>13,c(real_flavor),"NA")  
. 
. di "=== SYSTEM DIAGNOSTICS ==="
=== SYSTEM DIAGNOSTICS ===

. di "Stata version: `c(stata_version)'"
Stata version: 14.2

. di "Updated as of: `c(born_date)'"
Updated as of: 19 Dec 2017

. di "Variant:       `variant'"
Variant:       IC

. di "Processors:    `c(processors)'"
Processors:    1

. di "OS:            `c(os)' `c(osdtl)'"
OS:            Unix 

. di "Machine type:  `c(machine_type)'"
Machine type:  PC (64-bit x86-64)

. di "=========================="
==========================

. 
. 
. 
. 
. /* define relative libraries */
. 
. global paperdir "${root}/paper"

. global interwrk "${root}/data/interwrk"

. global raw "${root}/raw"

. global temp "${root}/temp"

. global outputs "${root}/data"

. global programs "${root}/programs"

. global outgraphs "${root}/figures"

. global logdir "${programs}/logs"

. 
. cap mkdir "$logdir"

. log using "${logdir}/logfile_`cdate'-`ctime'.log", replace text
(note: file /ssgprojects/project0002/MobZ.new/programs/logs/logfile__1_Sep_2020
> -16_31_56.log not found)
-------------------------------------------------------------------------------
      name:  <unnamed>
       log:  /ssgprojects/project0002/MobZ.new/programs/logs/logfile__1_Sep_202
> 0-16_31_56.log
  log type:  text
 opened on:   1 Sep 2020, 16:31:56

. cap mkdir "$temp"

. cap mkdir "${root}/data"

. cap mkdir "$interwrk"

. cap mkdir "$raw"

. cap mkdir "$outputs"

. 
. /* install any packages locally */
. capture mkdir "${programs}/ado"

. sysdir set PERSONAL "${programs}/ado/personal"

. sysdir set PLUS     "${programs}/ado/plus"

. sysdir set SITE     "${programs}/ado/site"

. sysdir
   STATA:  /usr/local/stata14/
    BASE:  /usr/local/stata14/ado/base/
    SITE:  /ssgprojects/project0002/MobZ.new/programs/ado/site/
    PLUS:  /ssgprojects/project0002/MobZ.new/programs/ado/plus/
PERSONAL:  /ssgprojects/project0002/MobZ.new/programs/ado/personal/
OLDPLACE:  ~/ado/

. 
. /* define data sources */
. 
. /* QCEW */
. /* data/working/mobz/qcew */
.     global qcewdata "${raw}/qcew"  

. /* /data/working/mobz/outputs */
.     global czonedata "$outputs"  

. 
. /* ADH */
.     global adhdata "${raw}/adh_data/Public Release Data/dta"

. /* CZONE */
.     global czonedata "${raw}/adh_data/"

. /* files provided separately by David Dorn */
.     global dorndata "${raw}/ddorn/"

. 
. /* CBP */
.     /* this is where the raw Stata versions of CBP data reside */
.    global cbpdata "/data/clean/cbp"

. 
. 
. 
. local czonedataset = "${outputs}/clusters_cutoff_jtw1990.dta"

. global czone_iteration = "${interwrk}/czones_cutoff.dta"

. local ipw_regs "${interwrk}/06_qcew_cutoff_post.dta"

. // local qcewdata = "$qcewdata/qcew_county.dta"
.  global qcewfile = "$outputs/qcew_county.dta"

. 
. /* create shell here */
.  #delimit ; 
delimiter now ;
. use $qcewfile, clear;

. //destring naics2, force replace;
> rename naics2 naics2char;

. egen naics2 = group(naics2char);

. compress fips;
  (0 bytes saved)

. tempfile qcewdata;

. save `qcewdata';
file /tmp/St18055.000001 saved

.  use `qcewdata', clear;

.   //  destring naics2, replace ;
>  collapse (first) fips, by(naics2 year) ;

.  keep naics2 year ;

.  tempfile shell;

.  save `shell', replace;
(note: file /tmp/St18055.000002 not found)
file /tmp/St18055.000002 saved

.   /* create industry-year data here */
>  use `qcewdata', clear;

.  // destring naics2, force replace ; 
>  collapse (sum) EMP_jt = annual_avg_emplvl, by(naics2 year) ;

. sort naics2 year ;

.  xtset naics2 year ;
       panel variable:  naics2 (strongly balanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

. gen delta_emp_jt = log(EMP_jt) - log(L.EMP_jt) ;
(19 missing values generated)

. tempfile industry_by_year ;

. save `industry_by_year' , replace ;
(note: file /tmp/St18055.000003 not found)
file /tmp/St18055.000003 saved

.  use "`czonedataset'", clear ;

. /***********************
> Creating string of values to 
> loop over
> ***********************/
> local values = "" ;

. foreach clus of varlist clus* { ;
  2.         di "`clus'" ;
  3.         local val = real(subinstr("`clus'","clus","",.)) ;
  4.         di "`val'" ;
  5.         local values = "`values' `val'" ;
  6. } ;
clus9000
9000
clus9005
9005
clus9010
9010
clus9015
9015
clus9020
9020
clus9025
9025
clus9030
9030
clus9035
9035
clus9040
9040
clus9045
9045
clus9050
9050
clus9055
9055
clus9060
9060
clus9065
9065
clus9070
9070
clus9075
9075
clus9080
9080
clus9085
9085
clus9090
9090
clus9095
9095
clus9100
9100
clus9105
9105
clus9110
9110
clus9115
9115
clus9120
9120
clus9125
9125
clus9130
9130
clus9135
9135
clus9140
9140
clus9145
9145
clus9150
9150
clus9155
9155
clus9160
9160
clus9165
9165
clus9170
9170
clus9175
9175
clus9180
9180
clus9185
9185
clus9190
9190
clus9195
9195
clus9200
9200
clus9205
9205
clus9210
9210
clus9215
9215
clus9220
9220
clus9225
9225
clus9230
9230
clus9235
9235
clus9240
9240
clus9245
9245
clus9250
9250
clus9255
9255
clus9260
9260
clus9265
9265
clus9270
9270
clus9275
9275
clus9280
9280
clus9285
9285
clus9290
9290
clus9295
9295
clus9300
9300
clus9305
9305
clus9310
9310
clus9315
9315
clus9320
9320
clus9325
9325
clus9330
9330
clus9335
9335
clus9340
9340
clus9345
9345
clus9350
9350
clus9355
9355
clus9360
9360
clus9365
9365
clus9370
9370
clus9375
9375
clus9380
9380
clus9385
9385
clus9390
9390
clus9395
9395
clus9400
9400
clus9405
9405
clus9410
9410
clus9415
9415
clus9420
9420
clus9425
9425
clus9430
9430
clus9435
9435
clus9440
9440
clus9445
9445
clus9450
9450
clus9455
9455
clus9460
9460
clus9465
9465
clus9470
9470
clus9475
9475
clus9480
9480
clus9485
9485
clus9490
9490
clus9495
9495
clus9500
9500
clus9505
9505
clus9510
9510
clus9515
9515
clus9520
9520
clus9525
9525
clus9530
9530
clus9535
9535
clus9540
9540
clus9545
9545
clus9550
9550
clus9555
9555
clus9560
9560
clus9565
9565
clus9570
9570
clus9575
9575
clus9580
9580
clus9585
9585
clus9590
9590
clus9595
9595
clus9600
9600
clus9605
9605
clus9610
9610
clus9615
9615
clus9620
9620
clus9625
9625
clus9630
9630
clus9635
9635
clus9640
9640
clus9645
9645
clus9650
9650
clus9655
9655
clus9660
9660
clus9665
9665
clus9670
9670
clus9675
9675
clus9680
9680
clus9685
9685
clus9690
9690
clus9695
9695
clus9700
9700

. tempname czoneresults;

. tempfile bartik_regs;

. postfile `czoneresults' cutoff beta se mean_ui sd_ui mean_bartik sd_bartik us
> ing `bartik_regs', replace;
(note: file /tmp/St18055.000004 not found)

. foreach i in `values' { ;
  2.          di "`i'";
  3.          local cutoff= `i'/10000 ;
  4.                 use "`czonedataset'", clear;
  5.                 egen czone = group(clus`i') ;
  6.                 keep fips czone;
  7.                 sort fips ;
  8.                                 save "$czone_iteration", replace;
  9.                 collapse (first) fips, by(czone) ;
 10.                 cross using `shell' ;
 11.                 tempfile shell2 ;
 12.                 save `shell2', replace ;
 13.          include "$programs/06_qcew/zz_bartik_merge.do" ;
 14.          xtset czone year ;
 15.          areg log_uireceipt L.bartik_it i.year ,absorb(czone)  cluster(czo
> ne) ;
 16.          sum log_uireceipt ;
 17.          local ui_mean = r(mean);
 18.          local ui_sd = r(sd) ;
 19.          sum L.bartik_it ;
 20.           local bartik_mean = r(mean);
 21.          local bartik_sd = r(sd) ;
 22.          post `czoneresults' (`cutoff') (_b[L.bartik_it]) (_se[L.bartik_it
> ]) 
>                             (`ui_mean') (`ui_sd') (`bartik_mean') (`bartik_sd
> ');
 23.           cap erase `bartik' ;
 24.           cap erase `base_year' ;
 25.           cap erase `mergefile' ;
 26.                         } ;
9000
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.000005 not found)
file /tmp/St18055.000005 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.000006 not found)
file /tmp/St18055.000006 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(915 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.000007 not found)
file /tmp/St18055.000007 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.000008 not found)
file /tmp/St18055.000008 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(38 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     35,019
                                                F(  25,   1400)   =    2071.49
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9794
                                                Adj R-squared     =     0.9786
                                                Root MSE          =     0.2654

                              (Std. Err. adjusted for 1,401 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -6.358626   .4266007   -14.91   0.000    -7.195471    -5.52178
             |
        year |
       1992  |   .1697275   .0123755    13.71   0.000     .1454511    .1940039
       1993  |   .6719227   .0068732    97.76   0.000     .6584398    .6854055
       1994  |   .6708891   .0096305    69.66   0.000     .6519973    .6897809
       1995  |   .4074037   .0133515    30.51   0.000     .3812126    .4335948
       1996  |   .3601256   .0129276    27.86   0.000      .334766    .3854851
       1997  |   .3871513   .0113004    34.26   0.000     .3649837    .4093188
       1998  |   .3403318   .0126345    26.94   0.000     .3155472    .3651164
       1999  |   .3240929   .0122157    26.53   0.000     .3001298     .348056
       2000  |   .3379949   .0119441    28.30   0.000     .3145647    .3614251
       2001  |   .3248045    .011047    29.40   0.000      .303134    .3464749
       2002  |    .720177   .0129086    55.79   0.000     .6948547    .7454993
       2003  |   .8593191   .0154901    55.48   0.000     .8289328    .8897055
       2004  |   .9908745   .0126937    78.06   0.000     .9659738    1.015775
       2005  |   .7845543   .0115561    67.89   0.000     .7618852    .8072234
       2006  |    .674876   .0135861    49.67   0.000     .6482247    .7015272
       2007  |   .6119494   .0126373    48.42   0.000     .5871593    .6367394
       2008  |   .6279651   .0121731    51.59   0.000     .6040855    .6518447
       2009  |   .9347314   .0134026    69.74   0.000       .90844    .9610228
       2010  |   1.486376   .0324877    45.75   0.000     1.422646    1.550106
       2011  |   1.840386   .0156009   117.97   0.000     1.809782    1.870989
       2012  |   1.798145   .0147538   121.88   0.000     1.769203    1.827087
       2013  |   1.578982   .0154038   102.51   0.000     1.548765    1.609199
       2014  |   1.241335   .0135168    91.84   0.000      1.21482    1.267851
       2015  |   .7504193   .0150531    49.85   0.000     .7208903    .7799484
             |
       _cons |    7.94813   .0076877  1033.88   0.000     7.933049     7.96321
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1401 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     36,446    8.640903    1.817996   1.098612   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     36,764    .0057744    .0233011  -.1254411   .1925471
9005
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.00000a not found)
file /tmp/St18055.00000a saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.00000b not found)
file /tmp/St18055.00000b saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(915 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.00000c not found)
file /tmp/St18055.00000c saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.00000d not found)
file /tmp/St18055.00000d saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(38 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     34,819
                                                F(  25,   1392)   =    2061.47
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9794
                                                Adj R-squared     =     0.9785
                                                Root MSE          =     0.2651

                              (Std. Err. adjusted for 1,393 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -6.404352    .437469   -14.64   0.000    -7.262522   -5.546183
             |
        year |
       1992  |   .1681986   .0126801    13.26   0.000     .1433244    .1930728
       1993  |   .6707796   .0068919    97.33   0.000     .6572599    .6842993
       1994  |   .6701363   .0097451    68.77   0.000     .6510196    .6892529
       1995  |   .4072471    .013603    29.94   0.000     .3805625    .4339317
       1996  |    .360972   .0131689    27.41   0.000      .335139    .3868049
       1997  |   .3875237   .0114938    33.72   0.000     .3649766    .4100707
       1998  |   .3403613   .0128398    26.51   0.000     .3151739    .3655486
       1999  |   .3241435   .0124333    26.07   0.000     .2997535    .3485335
       2000  |   .3378155   .0121273    27.86   0.000     .3140259    .3616052
       2001  |   .3256602   .0111577    29.19   0.000     .3037726    .3475479
       2002  |   .7212832   .0130143    55.42   0.000     .6957536    .7468129
       2003  |   .8575676   .0156726    54.72   0.000     .8268231    .8883121
       2004  |   .9885801   .0127898    77.29   0.000     .9634908    1.013669
       2005  |   .7835457   .0116074    67.50   0.000     .7607757    .8063157
       2006  |   .6740775   .0136565    49.36   0.000      .647288    .7008669
       2007  |   .6117218   .0127132    48.12   0.000     .5867827    .6366608
       2008  |   .6273978   .0122135    51.37   0.000     .6034389    .6513567
       2009  |   .9337411   .0134916    69.21   0.000     .9072749    .9602072
       2010  |   1.482106    .033251    44.57   0.000     1.416878    1.547333
       2011  |   1.838052   .0157363   116.80   0.000     1.807182    1.868921
       2012  |   1.797415   .0148198   121.28   0.000     1.768343    1.826487
       2013  |   1.578438   .0155272   101.66   0.000     1.547979    1.608897
       2014  |   1.240552   .0135951    91.25   0.000     1.213883    1.267221
       2015  |     .75029    .015204    49.35   0.000     .7204647    .7801152
             |
       _cons |   7.960407   .0077099  1032.49   0.000     7.945283    7.975531
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1393 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     36,238    8.652437    1.813132   1.098612   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     36,556    .0057526    .0232561  -.1254411   .1925471
9010
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.00000f not found)
file /tmp/St18055.00000f saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.00000g not found)
file /tmp/St18055.00000g saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(915 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.00000h not found)
file /tmp/St18055.00000h saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.00000i not found)
file /tmp/St18055.00000i saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(38 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     34,669
                                                F(  25,   1386)   =    2053.55
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9793
                                                Adj R-squared     =     0.9784
                                                Root MSE          =     0.2649

                              (Std. Err. adjusted for 1,387 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -6.391365   .4382009   -14.59   0.000    -7.250974   -5.531756
             |
        year |
       1992  |   .1693633   .0126868    13.35   0.000     .1444758    .1942507
       1993  |   .6712997   .0068872    97.47   0.000     .6577893    .6848101
       1994  |   .6701918   .0097355    68.84   0.000     .6510938    .6892897
       1995  |   .4067684   .0136173    29.87   0.000     .3800557    .4334812
       1996  |   .3600434   .0131832    27.31   0.000     .3341823    .3859045
       1997  |   .3865749   .0115039    33.60   0.000      .364008    .4091419
       1998  |   .3395739   .0128604    26.40   0.000     .3143459    .3648019
       1999  |    .323637   .0124464    26.00   0.000     .2992212    .3480528
       2000  |   .3366868   .0121369    27.74   0.000     .3128781    .3604954
       2001  |   .3248383   .0111669    29.09   0.000     .3029325    .3467441
       2002  |   .7204022   .0130405    55.24   0.000      .694821    .7459834
       2003  |   .8574207   .0157089    54.58   0.000      .826605    .8882364
       2004  |   .9877896    .012832    76.98   0.000     .9626175    1.012962
       2005  |   .7822802   .0116332    67.25   0.000     .7594597    .8051007
       2006  |   .6729176   .0136892    49.16   0.000     .6460638    .6997714
       2007  |   .6109322   .0127355    47.97   0.000     .5859492    .6359151
       2008  |    .626761    .012248    51.17   0.000     .6027343    .6507877
       2009  |   .9334722   .0135376    68.95   0.000     .9069159    .9600285
       2010  |   1.482496   .0333295    44.48   0.000     1.417115    1.547878
       2011  |   1.837576   .0157875   116.39   0.000     1.806606    1.868546
       2012  |    1.79687   .0148619   120.90   0.000     1.767716    1.826025
       2013  |   1.577367    .015569   101.31   0.000     1.546825    1.607908
       2014  |   1.239466   .0136254    90.97   0.000     1.212737    1.266194
       2015  |   .7482383   .0152191    49.16   0.000     .7183833    .7780933
             |
       _cons |   7.969196   .0077313  1030.77   0.000      7.95403    7.984363
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1387 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     36,082    8.660755    1.806748   1.098612   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     36,400    .0057497    .0232629  -.1254411   .1925471
9015
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.00000k not found)
file /tmp/St18055.00000k saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.00000l not found)
file /tmp/St18055.00000l saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(915 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.00000m not found)
file /tmp/St18055.00000m saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.00000n not found)
file /tmp/St18055.00000n saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(38 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     34,544
                                                F(  25,   1381)   =    2041.95
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9793
                                                Adj R-squared     =     0.9784
                                                Root MSE          =     0.2649

                              (Std. Err. adjusted for 1,382 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -6.384237    .438811   -14.55   0.000    -7.245045   -5.523428
             |
        year |
       1992  |   .1694156   .0126988    13.34   0.000     .1445046    .1943265
       1993  |   .6714686   .0069035    97.26   0.000     .6579261     .685011
       1994  |   .6703882   .0097558    68.72   0.000     .6512505    .6895259
       1995  |   .4071179   .0136426    29.84   0.000     .3803554    .4338804
       1996  |   .3602057    .013206    27.28   0.000     .3342998    .3861116
       1997  |   .3868225   .0115268    33.56   0.000     .3642106    .4094344
       1998  |   .3394823   .0128844    26.35   0.000     .3142072    .3647574
       1999  |   .3237522    .012467    25.97   0.000      .299296    .3482085
       2000  |   .3371037   .0121577    27.73   0.000     .3132541    .3609533
       2001  |   .3248133   .0111924    29.02   0.000     .3028573    .3467693
       2002  |   .7202263   .0130902    55.02   0.000     .6945474    .7459052
       2003  |   .8575006   .0157255    54.53   0.000     .8266523     .888349
       2004  |   .9879196    .012852    76.87   0.000     .9627081    1.013131
       2005  |   .7821816   .0116604    67.08   0.000     .7593077    .8050556
       2006  |   .6721327   .0136916    49.09   0.000     .6452742    .6989912
       2007  |   .6107367   .0127657    47.84   0.000     .5856944     .635779
       2008  |   .6268328   .0122808    51.04   0.000     .6027417     .650924
       2009  |   .9334812   .0135648    68.82   0.000     .9068714     .960091
       2010  |   1.482737   .0333659    44.44   0.000     1.417284     1.54819
       2011  |   1.837442   .0158178   116.16   0.000     1.806412    1.868471
       2012  |   1.796517   .0148955   120.61   0.000     1.767296    1.825737
       2013  |   1.577135   .0156028   101.08   0.000     1.546527    1.607743
       2014  |   1.239342   .0136594    90.73   0.000     1.212547    1.266138
       2015  |   .7486472   .0152526    49.08   0.000     .7187265     .778568
             |
       _cons |   7.973871    .007748  1029.15   0.000     7.958672     7.98907
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1382 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     35,952    8.665372    1.808137   1.098612   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     36,270    .0057674     .023261  -.1254411   .1925471
9020
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.00000p not found)
file /tmp/St18055.00000p saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.00000q not found)
file /tmp/St18055.00000q saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(915 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.00000r not found)
file /tmp/St18055.00000r saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.00000s not found)
file /tmp/St18055.00000s saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(38 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     34,419
                                                F(  25,   1376)   =    2046.04
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9793
                                                Adj R-squared     =     0.9784
                                                Root MSE          =     0.2649

                              (Std. Err. adjusted for 1,377 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -6.404407   .4402559   -14.55   0.000    -7.268053   -5.540762
             |
        year |
       1992  |   .1694775   .0127307    13.31   0.000     .1445039    .1944511
       1993  |   .6723111   .0069037    97.38   0.000     .6587682     .685854
       1994  |   .6714777   .0097677    68.74   0.000     .6523164    .6906389
       1995  |   .4081437   .0136748    29.85   0.000      .381318    .4349693
       1996  |   .3611357   .0132341    27.29   0.000     .3351744     .387097
       1997  |   .3875969   .0115523    33.55   0.000     .3649348     .410259
       1998  |    .340086   .0129157    26.33   0.000     .3147494    .3654226
       1999  |   .3238737   .0124951    25.92   0.000     .2993621    .3483852
       2000  |   .3371574   .0121841    27.67   0.000      .313256    .3610587
       2001  |   .3247906   .0112162    28.96   0.000     .3027879    .3467933
       2002  |   .7203495   .0131313    54.86   0.000       .69459    .7461091
       2003  |   .8566131   .0157602    54.35   0.000     .8256966    .8875297
       2004  |   .9875752   .0128816    76.67   0.000     .9623055    1.012845
       2005  |   .7822898   .0116912    66.91   0.000     .7593554    .8052243
       2006  |   .6721744   .0137366    48.93   0.000     .6452273    .6991214
       2007  |   .6106608   .0128087    47.68   0.000     .5855341    .6357874
       2008  |   .6267478   .0123133    50.90   0.000     .6025929    .6509028
       2009  |   .9335169    .013604    68.62   0.000       .90683    .9602038
       2010  |   1.482113   .0334693    44.28   0.000     1.416457     1.54777
       2011  |   1.837898   .0158635   115.86   0.000     1.806779    1.869018
       2012  |    1.79727   .0149382   120.31   0.000     1.767966    1.826574
       2013  |   1.578269   .0156427   100.90   0.000     1.547583    1.608955
       2014  |   1.239782   .0136966    90.52   0.000     1.212914    1.266651
       2015  |   .7488639   .0152876    48.99   0.000     .7188744    .7788535
             |
       _cons |   7.980742     .00777  1027.13   0.000       7.9655    7.995984
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1377 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     35,822    8.672327    1.807526   1.098612   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     36,140    .0057771    .0232581  -.1254411   .1925471
9025
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.00000u not found)
file /tmp/St18055.00000u saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.00000v not found)
file /tmp/St18055.00000v saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(915 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.00000w not found)
file /tmp/St18055.00000w saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.00000x not found)
file /tmp/St18055.00000x saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(38 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     34,219
                                                F(  25,   1368)   =    2077.97
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9794
                                                Adj R-squared     =     0.9785
                                                Root MSE          =     0.2629

                              (Std. Err. adjusted for 1,369 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -6.387256    .437227   -14.61   0.000    -7.244964   -5.529547
             |
        year |
       1992  |   .1700126    .012658    13.43   0.000     .1451815    .1948437
       1993  |    .672861   .0069222    97.20   0.000     .6592816    .6864403
       1994  |   .6717469   .0097465    68.92   0.000     .6526273    .6908665
       1995  |   .4073231   .0136078    29.93   0.000     .3806288    .4340174
       1996  |   .3601812   .0131901    27.31   0.000     .3343063    .3860561
       1997  |   .3868316   .0115299    33.55   0.000     .3642135    .4094498
       1998  |   .3395363    .012866    26.39   0.000     .3142971    .3647754
       1999  |     .32348    .012473    25.93   0.000     .2990118    .3479482
       2000  |   .3366618   .0121677    27.67   0.000     .3127924    .3605313
       2001  |   .3242394   .0112008    28.95   0.000     .3022669    .3462119
       2002  |   .7200951   .0131519    54.75   0.000     .6942951    .7458951
       2003  |   .8572162   .0155389    55.17   0.000     .8267336    .8876988
       2004  |   .9884865   .0126828    77.94   0.000     .9636067    1.013366
       2005  |   .7822042   .0116817    66.96   0.000     .7592882    .8051202
       2006  |   .6723682   .0136755    49.17   0.000      .645541    .6991954
       2007  |   .6102623   .0128151    47.62   0.000     .5851229    .6354016
       2008  |   .6276638   .0122067    51.42   0.000      .603718    .6516096
       2009  |   .9347081   .0134244    69.63   0.000     .9083734    .9610427
       2010  |   1.484448   .0330051    44.98   0.000     1.419702    1.549194
       2011  |    1.83915   .0156845   117.26   0.000     1.808382    1.869918
       2012  |   1.797661   .0149684   120.10   0.000     1.768297    1.827024
       2013  |    1.57889   .0156764   100.72   0.000     1.548137    1.609642
       2014  |   1.241466   .0136511    90.94   0.000     1.214687    1.268246
       2015  |   .7489733   .0153297    48.86   0.000      .718901    .7790456
             |
       _cons |   7.993803   .0077378  1033.09   0.000     7.978624    8.008982
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1369 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     35,614    8.685718    1.799466   1.098612   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     35,932    .0057752    .0232679  -.1254411   .1925471
9030
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.000011 not found)
file /tmp/St18055.000011 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.000012 not found)
file /tmp/St18055.000012 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(915 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.000013 not found)
file /tmp/St18055.000013 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.000014 not found)
file /tmp/St18055.000014 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(38 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     34,019
                                                F(  25,   1360)   =    2069.90
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9795
                                                Adj R-squared     =     0.9786
                                                Root MSE          =     0.2630

                              (Std. Err. adjusted for 1,361 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -6.418294   .4428864   -14.49   0.000    -7.287109   -5.549479
             |
        year |
       1992  |   .1695804   .0127945    13.25   0.000     .1444812    .1946796
       1993  |   .6732062   .0069396    97.01   0.000     .6595926    .6868197
       1994  |   .6720254   .0098311    68.36   0.000     .6527397    .6913111
       1995  |   .4078726   .0137521    29.66   0.000      .380895    .4348502
       1996  |   .3608563   .0133312    27.07   0.000     .3347043    .3870083
       1997  |   .3874483   .0116367    33.30   0.000     .3646204    .4102762
       1998  |   .3400861   .0129993    26.16   0.000     .3145852    .3655871
       1999  |   .3237995   .0125974    25.70   0.000     .2990871    .3485119
       2000  |   .3371151   .0122698    27.48   0.000     .3130454    .3611849
       2001  |   .3253551   .0112748    28.86   0.000     .3032373     .347473
       2002  |   .7207473   .0132329    54.47   0.000     .6947882    .7467063
       2003  |   .8568013   .0156492    54.75   0.000     .8261021    .8875005
       2004  |   .9886182   .0127492    77.54   0.000      .963608    1.013628
       2005  |   .7826901    .011733    66.71   0.000     .7596733    .8057069
       2006  |   .6732104   .0137572    48.94   0.000     .6462228    .7001981
       2007  |   .6108105   .0128851    47.40   0.000     .5855337    .6360874
       2008  |   .6277232   .0122551    51.22   0.000     .6036822    .6517642
       2009  |   .9346015   .0134887    69.29   0.000     .9081405    .9610625
       2010  |   1.483122   .0334077    44.39   0.000     1.417586    1.548658
       2011  |   1.839378    .015786   116.52   0.000     1.808411    1.870346
       2012  |   1.798967   .0150451   119.57   0.000     1.769453    1.828481
       2013  |   1.580078   .0157806   100.13   0.000     1.549121    1.611035
       2014  |   1.242249   .0137312    90.47   0.000     1.215312    1.269185
       2015  |   .7489936   .0154402    48.51   0.000     .7187045    .7792827
             |
       _cons |   7.998413   .0077681  1029.65   0.000     7.983174    8.013651
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1361 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     35,406    8.690524    1.803305   1.098612   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     35,724    .0057758    .0232646  -.1254411   .1925471
9035
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.000016 not found)
file /tmp/St18055.000016 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.000017 not found)
file /tmp/St18055.000017 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(915 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.000018 not found)
file /tmp/St18055.000018 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.000019 not found)
file /tmp/St18055.000019 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(38 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     33,769
                                                F(  25,   1350)   =    2074.91
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9795
                                                Adj R-squared     =     0.9786
                                                Root MSE          =     0.2625

                              (Std. Err. adjusted for 1,351 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -6.398563   .4423506   -14.46   0.000    -7.266332   -5.530793
             |
        year |
       1992  |   .1703773   .0127804    13.33   0.000     .1453056     .195449
       1993  |   .6732352   .0069684    96.61   0.000     .6595652    .6869053
       1994  |   .6714583    .009862    68.09   0.000     .6521118    .6908048
       1995  |   .4069718   .0137439    29.61   0.000       .38001    .4339335
       1996  |   .3596836   .0133118    27.02   0.000     .3335696    .3857976
       1997  |   .3867211   .0116617    33.16   0.000      .363844    .4095981
       1998  |   .3392731   .0129782    26.14   0.000     .3138134    .3647328
       1999  |   .3231366   .0126207    25.60   0.000     .2983783    .3478949
       2000  |   .3366133   .0122652    27.44   0.000     .3125524    .3606743
       2001  |     .32573   .0112688    28.91   0.000     .3036238    .3478362
       2002  |   .7231374   .0132321    54.65   0.000     .6971797     .749095
       2003  |   .8587474   .0156725    54.79   0.000     .8280022    .8894925
       2004  |   .9904579   .0127663    77.58   0.000     .9654139    1.015502
       2005  |   .7838704    .011763    66.64   0.000     .7607946    .8069461
       2006  |   .6739851   .0137936    48.86   0.000     .6469258    .7010444
       2007  |   .6126644   .0129122    47.45   0.000     .5873341    .6379946
       2008  |   .6296241   .0122859    51.25   0.000     .6055225    .6537257
       2009  |    .937234   .0134993    69.43   0.000      .910752    .9637159
       2010  |   1.486623   .0333642    44.56   0.000     1.421171    1.552074
       2011  |   1.842325   .0157964   116.63   0.000     1.811337    1.873313
       2012  |   1.801158   .0150778   119.46   0.000     1.771579    1.830736
       2013  |   1.581977   .0158119   100.05   0.000     1.550959    1.612996
       2014  |   1.244591   .0137543    90.49   0.000     1.217609    1.271573
       2015  |   .7507292   .0154754    48.51   0.000     .7203708    .7810876
             |
       _cons |    8.00912   .0077953  1027.43   0.000     7.993828    8.024413
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1351 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     35,146    8.702253    1.799994   1.098612   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     35,464    .0057822    .0232664  -.1254411   .1925471
9040
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.00001b not found)
file /tmp/St18055.00001b saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.00001c not found)
file /tmp/St18055.00001c saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(915 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.00001d not found)
file /tmp/St18055.00001d saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.00001e not found)
file /tmp/St18055.00001e saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(38 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     33,569
                                                F(  25,   1342)   =    2066.87
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9794
                                                Adj R-squared     =     0.9786
                                                Root MSE          =     0.2626

                              (Std. Err. adjusted for 1,343 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -6.393801   .4452855   -14.36   0.000    -7.267332   -5.520269
             |
        year |
       1992  |   .1712009   .0128478    13.33   0.000     .1459969    .1964048
       1993  |   .6740114   .0069824    96.53   0.000     .6603138    .6877091
       1994  |   .6725649   .0098965    67.96   0.000     .6531505    .6919793
       1995  |   .4078938   .0138162    29.52   0.000     .3807901    .4349975
       1996  |   .3604165   .0133839    26.93   0.000     .3341608    .3866722
       1997  |   .3870606   .0117256    33.01   0.000      .364058    .4100632
       1998  |    .339339   .0130577    25.99   0.000     .3137232    .3649548
       1999  |   .3228267   .0127029    25.41   0.000      .297907    .3477465
       2000  |   .3366713   .0123373    27.29   0.000     .3124688    .3608737
       2001  |   .3257801   .0113228    28.77   0.000     .3035677    .3479924
       2002  |   .7238673   .0133015    54.42   0.000     .6977732    .7499613
       2003  |   .8602955   .0157568    54.60   0.000      .829385    .8912061
       2004  |   .9913759   .0128322    77.26   0.000     .9662026    1.016549
       2005  |   .7846352   .0118215    66.37   0.000     .7614445     .807826
       2006  |   .6749539   .0138667    48.67   0.000     .6477512    .7021566
       2007  |    .613687   .0129765    47.29   0.000     .5882307    .6391434
       2008  |   .6300382   .0123461    51.03   0.000     .6058185     .654258
       2009  |   .9381624   .0135735    69.12   0.000     .9115348      .96479
       2010  |    1.48793   .0335821    44.31   0.000     1.422051    1.553809
       2011  |   1.843638   .0158818   116.08   0.000     1.812483    1.874794
       2012  |   1.801958    .015148   118.96   0.000     1.772242    1.831675
       2013  |   1.582964   .0158937    99.60   0.000     1.551785    1.614143
       2014  |   1.245097   .0138165    90.12   0.000     1.217992    1.272201
       2015  |   .7507896   .0155525    48.27   0.000     .7202798    .7812994
             |
       _cons |   8.019395   .0078338  1023.69   0.000     8.004027    8.034763
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1343 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     34,938     8.71317    1.798541   1.098612   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     35,256    .0057926    .0232612  -.1254411   .1925471
9045
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.00001g not found)
file /tmp/St18055.00001g saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.00001h not found)
file /tmp/St18055.00001h saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(915 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.00001i not found)
file /tmp/St18055.00001i saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.00001j not found)
file /tmp/St18055.00001j saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(38 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     33,419
                                                F(  25,   1336)   =    2065.05
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9795
                                                Adj R-squared     =     0.9786
                                                Root MSE          =     0.2624

                              (Std. Err. adjusted for 1,337 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -6.409855   .4481663   -14.30   0.000    -7.289042   -5.530669
             |
        year |
       1992  |   .1709524   .0129159    13.24   0.000     .1456147    .1962901
       1993  |   .6741701   .0069849    96.52   0.000     .6604675    .6878727
       1994  |   .6725084   .0099194    67.80   0.000     .6530492    .6919676
       1995  |    .407717   .0138648    29.41   0.000     .3805178    .4349162
       1996  |   .3600257   .0134481    26.77   0.000      .333644    .3864073
       1997  |    .387154   .0117571    32.93   0.000     .3640896    .4102184
       1998  |    .339483   .0131132    25.89   0.000     .3137584    .3652077
       1999  |   .3227434   .0127377    25.34   0.000     .2977554    .3477314
       2000  |   .3362952   .0123588    27.21   0.000     .3120505    .3605399
       2001  |   .3252588   .0113481    28.66   0.000     .3029967    .3475209
       2002  |   .7243845   .0133481    54.27   0.000     .6981989      .75057
       2003  |    .860048   .0158311    54.33   0.000     .8289915    .8911045
       2004  |   .9912866   .0128755    76.99   0.000     .9660281    1.016545
       2005  |   .7853754    .011835    66.36   0.000     .7621583    .8085926
       2006  |   .6758077   .0138761    48.70   0.000     .6485863    .7030291
       2007  |   .6141341   .0129839    47.30   0.000     .5886632    .6396051
       2008  |    .630248   .0123516    51.03   0.000     .6060173    .6544787
       2009  |   .9383512   .0136225    68.88   0.000     .9116274    .9650751
       2010  |   1.487122   .0338027    43.99   0.000     1.420809    1.553434
       2011  |   1.843859   .0159573   115.55   0.000     1.812555    1.875163
       2012  |   1.802873   .0151951   118.65   0.000     1.773064    1.832682
       2013  |   1.583801   .0159502    99.30   0.000     1.552511    1.615091
       2014  |   1.245424   .0138477    89.94   0.000     1.218259     1.27259
       2015  |   .7513563   .0155848    48.21   0.000     .7207829    .7819298
             |
       _cons |   8.026292   .0078451  1023.10   0.000     8.010902    8.041682
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1337 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     34,782    8.720099    1.798054   1.098612   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     35,100    .0057964    .0232575  -.1254411   .1925471
9050
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.00001l not found)
file /tmp/St18055.00001l saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.00001m not found)
file /tmp/St18055.00001m saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(915 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.00001n not found)
file /tmp/St18055.00001n saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.00001o not found)
file /tmp/St18055.00001o saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(38 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     33,219
                                                F(  25,   1328)   =    2060.06
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9793
                                                Adj R-squared     =     0.9784
                                                Root MSE          =     0.2622

                              (Std. Err. adjusted for 1,329 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |   -6.41362   .4501955   -14.25   0.000    -7.296792   -5.530448
             |
        year |
       1992  |   .1707893   .0129703    13.17   0.000     .1453448    .1962338
       1993  |   .6744542   .0069825    96.59   0.000     .6607562    .6881522
       1994  |   .6730115   .0099506    67.63   0.000     .6534908    .6925321
       1995  |    .408086   .0138708    29.42   0.000     .3808749    .4352971
       1996  |   .3597635     .01346    26.73   0.000     .3333585    .3861686
       1997  |   .3866757   .0117797    32.83   0.000     .3635668    .4097845
       1998  |    .338829   .0131408    25.78   0.000       .31305    .3646079
       1999  |   .3223816    .012759    25.27   0.000     .2973516    .3474117
       2000  |   .3359125    .012358    27.18   0.000     .3116691    .3601558
       2001  |   .3248545   .0113577    28.60   0.000     .3025734    .3471355
       2002  |   .7238806   .0133703    54.14   0.000     .6976513    .7501098
       2003  |    .859267   .0158741    54.13   0.000      .828126    .8904081
       2004  |   .9905534   .0129106    76.72   0.000      .965226    1.015881
       2005  |   .7839974   .0118553    66.13   0.000     .7607401    .8072546
       2006  |   .6745215   .0139131    48.48   0.000     .6472274    .7018156
       2007  |   .6134264   .0130181    47.12   0.000     .5878881    .6389648
       2008  |   .6292396   .0123739    50.85   0.000      .604965    .6535142
       2009  |   .9377876   .0136594    68.65   0.000     .9109912     .964584
       2010  |   1.486169   .0339528    43.77   0.000     1.419562    1.552776
       2011  |   1.843236   .0160001   115.20   0.000     1.811847    1.874624
       2012  |   1.802567   .0152355   118.31   0.000     1.772679    1.832455
       2013  |   1.583834   .0160008    98.98   0.000     1.552444    1.615223
       2014  |   1.245271   .0138893    89.66   0.000     1.218023    1.272518
       2015  |    .750674   .0156393    48.00   0.000     .7199936    .7813543
             |
       _cons |   8.042505   .0078578  1023.50   0.000      8.02709    8.057921
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1329 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     34,574    8.735905    1.787883   1.098612   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     34,892    .0057895      .02326  -.1254411   .1925471
9055
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.00001q not found)
file /tmp/St18055.00001q saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.00001r not found)
file /tmp/St18055.00001r saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(915 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.00001s not found)
file /tmp/St18055.00001s saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.00001t not found)
file /tmp/St18055.00001t saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(38 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     33,069
                                                F(  25,   1322)   =    2056.84
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9792
                                                Adj R-squared     =     0.9784
                                                Root MSE          =     0.2616

                              (Std. Err. adjusted for 1,323 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -6.443289   .4524379   -14.24   0.000    -7.330863   -5.555714
             |
        year |
       1992  |   .1700438   .0130255    13.05   0.000     .1444909    .1955967
       1993  |   .6742901   .0070095    96.20   0.000     .6605391    .6880411
       1994  |   .6732332   .0099964    67.35   0.000     .6536226    .6928438
       1995  |   .4084715   .0139256    29.33   0.000     .3811527    .4357902
       1996  |   .3597685   .0135006    26.65   0.000     .3332835    .3862535
       1997  |   .3866336   .0118071    32.75   0.000     .3634709    .4097962
       1998  |   .3389654   .0131721    25.73   0.000      .313125    .3648058
       1999  |   .3223084   .0127862    25.21   0.000      .297225    .3473918
       2000  |   .3350726   .0123739    27.08   0.000     .3107981    .3593472
       2001  |   .3243254   .0113696    28.53   0.000     .3020211    .3466297
       2002  |    .723938   .0134035    54.01   0.000     .6976436    .7502325
       2003  |   .8581836   .0159106    53.94   0.000     .8269708    .8893963
       2004  |   .9900205   .0129247    76.60   0.000     .9646653    1.015376
       2005  |   .7838183    .011871    66.03   0.000     .7605302    .8071063
       2006  |    .673977   .0138971    48.50   0.000     .6467142    .7012398
       2007  |   .6136666   .0130354    47.08   0.000     .5880944    .6392389
       2008  |   .6292904   .0123968    50.76   0.000     .6049708      .65361
       2009  |     .93804   .0136638    68.65   0.000     .9112349    .9648451
       2010  |   1.484393   .0340942    43.54   0.000     1.417508    1.551277
       2011  |   1.842929   .0160096   115.11   0.000     1.811522    1.874336
       2012  |   1.803627   .0152292   118.43   0.000     1.773751    1.833504
       2013  |   1.584835   .0160339    98.84   0.000      1.55338    1.616289
       2014  |   1.245448   .0139307    89.40   0.000     1.218119    1.272777
       2015  |   .7499869   .0156829    47.82   0.000     .7192209    .7807529
             |
       _cons |   8.053547   .0078608  1024.52   0.000     8.038126    8.068968
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1323 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     34,418    8.746671     1.78343   1.098612   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     34,736    .0057803    .0232596  -.1254411   .1925471
9060
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.00001v not found)
file /tmp/St18055.00001v saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.00001w not found)
file /tmp/St18055.00001w saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(915 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.00001x not found)
file /tmp/St18055.00001x saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.000020 not found)
file /tmp/St18055.000020 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(38 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     32,894
                                                F(  25,   1315)   =    2060.27
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9792
                                                Adj R-squared     =     0.9784
                                                Root MSE          =     0.2617

                              (Std. Err. adjusted for 1,316 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -6.451138   .4547854   -14.19   0.000    -7.343322   -5.558954
             |
        year |
       1992  |   .1700924   .0130954    12.99   0.000     .1444023    .1957825
       1993  |   .6746564   .0070371    95.87   0.000     .6608512    .6884616
       1994  |   .6733569   .0100444    67.04   0.000      .653652    .6930618
       1995  |   .4086943   .0139984    29.20   0.000     .3812327     .436156
       1996  |   .3594636   .0135731    26.48   0.000     .3328364    .3860909
       1997  |   .3861464    .011869    32.53   0.000     .3628622    .4094306
       1998  |    .338423   .0132373    25.57   0.000     .3124544    .3643916
       1999  |   .3219533   .0128506    25.05   0.000     .2967434    .3471631
       2000  |   .3346252     .01243    26.92   0.000     .3102404      .35901
       2001  |   .3234153   .0114006    28.37   0.000     .3010499    .3457807
       2002  |   .7238975    .013467    53.75   0.000     .6974783    .7503166
       2003  |   .8577175    .015987    53.65   0.000     .8263548    .8890802
       2004  |    .989793   .0129831    76.24   0.000     .9643232    1.015263
       2005  |   .7834213   .0119153    65.75   0.000     .7600463    .8067964
       2006  |   .6734248   .0139542    48.26   0.000       .64605    .7007997
       2007  |   .6129139   .0130831    46.85   0.000     .5872478      .63858
       2008  |   .6285278   .0124476    50.49   0.000     .6041084    .6529472
       2009  |   .9375795    .013719    68.34   0.000      .910666    .9644929
       2010  |   1.484404   .0342889    43.29   0.000     1.417137    1.551671
       2011  |   1.843346   .0160769   114.66   0.000     1.811807    1.874885
       2012  |   1.804084   .0152713   118.14   0.000     1.774125    1.834042
       2013  |    1.58497   .0160915    98.50   0.000     1.553402    1.616537
       2014  |   1.245464    .013979    89.10   0.000     1.218041    1.272888
       2015  |   .7500426   .0157306    47.68   0.000     .7191828    .7809023
             |
       _cons |   8.060088   .0078899  1021.57   0.000      8.04461    8.075567
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1316 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     34,236    8.752984    1.784051   1.098612   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     34,554      .00578    .0232682  -.1254411   .1925471
9065
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.000022 not found)
file /tmp/St18055.000022 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.000023 not found)
file /tmp/St18055.000023 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(915 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.000024 not found)
file /tmp/St18055.000024 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.000025 not found)
file /tmp/St18055.000025 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(38 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     32,769
                                                F(  25,   1310)   =    2047.46
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9792
                                                Adj R-squared     =     0.9783
                                                Root MSE          =     0.2615

                              (Std. Err. adjusted for 1,311 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -6.570862   .4568495   -14.38   0.000    -7.467099   -5.674625
             |
        year |
       1992  |   .1669287    .013102    12.74   0.000     .1412254    .1926319
       1993  |   .6745013   .0070474    95.71   0.000      .660676    .6883267
       1994  |   .6751426   .0101348    66.62   0.000     .6552603    .6950249
       1995  |   .4113121   .0142156    28.93   0.000     .3834243    .4391999
       1996  |   .3620079   .0137484    26.33   0.000     .3350366    .3889791
       1997  |   .3881638   .0120041    32.34   0.000     .3646145    .4117131
       1998  |    .340761    .013375    25.48   0.000     .3145223    .3669998
       1999  |   .3240748   .0129287    25.07   0.000     .2987116    .3494379
       2000  |   .3361784   .0125625    26.76   0.000     .3115335    .3608233
       2001  |   .3245381   .0115187    28.17   0.000      .301941    .3471351
       2002  |   .7261589   .0135217    53.70   0.000     .6996324    .7526854
       2003  |   .8550326    .015974    53.53   0.000     .8236951    .8863701
       2004  |   .9871775   .0128703    76.70   0.000     .9619288    1.012426
       2005  |   .7831368    .011981    65.36   0.000     .7596327    .8066408
       2006  |   .6739308   .0140387    48.01   0.000       .64639    .7014716
       2007  |   .6129979   .0131496    46.62   0.000     .5872013    .6387945
       2008  |   .6279695   .0124606    50.40   0.000     .6035246    .6524144
       2009  |   .9353954   .0136472    68.54   0.000     .9086226    .9621682
       2010  |   1.474961   .0342382    43.08   0.000     1.407794    1.542129
       2011  |   1.840155   .0159864   115.11   0.000     1.808793    1.871517
       2012  |   1.804945   .0153707   117.43   0.000     1.774792    1.835099
       2013  |   1.586577   .0162374    97.71   0.000     1.554723    1.618431
       2014  |   1.246431   .0140889    88.47   0.000     1.218792    1.274071
       2015  |   .7517462   .0158851    47.32   0.000     .7205831    .7829093
             |
       _cons |   8.068574   .0078734  1024.80   0.000     8.053128     8.08402
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1311 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     34,106    8.760822    1.780423   1.098612   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     34,424    .0057851    .0232404  -.1254411   .1925471
9070
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.000027 not found)
file /tmp/St18055.000027 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.000028 not found)
file /tmp/St18055.000028 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(915 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.000029 not found)
file /tmp/St18055.000029 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.00002a not found)
file /tmp/St18055.00002a saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(38 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     32,594
                                                F(  25,   1303)   =    2030.78
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9790
                                                Adj R-squared     =     0.9781
                                                Root MSE          =     0.2612

                              (Std. Err. adjusted for 1,304 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -6.584441    .462496   -14.24   0.000    -7.491759   -5.677122
             |
        year |
       1992  |     .16637   .0132435    12.56   0.000     .1403891    .1923509
       1993  |   .6737465   .0070266    95.89   0.000     .6599618    .6875312
       1994  |   .6745084   .0102119    66.05   0.000     .6544749    .6945419
       1995  |   .4106735   .0143665    28.59   0.000     .3824895    .4388576
       1996  |   .3617882   .0139069    26.02   0.000     .3345059    .3890705
       1997  |   .3876727    .012114    32.00   0.000     .3639076    .4114378
       1998  |   .3404988   .0135107    25.20   0.000     .3139937     .367004
       1999  |   .3233093   .0130451    24.78   0.000     .2977177    .3489009
       2000  |   .3352841    .012644    26.52   0.000     .3104793    .3600889
       2001  |   .3251099   .0115808    28.07   0.000     .3023909    .3478289
       2002  |   .7269986   .0135587    53.62   0.000     .7003994    .7535978
       2003  |   .8550588   .0161088    53.08   0.000     .8234566    .8866609
       2004  |   .9864376   .0128728    76.63   0.000      .961184    1.011691
       2005  |   .7826593   .0119689    65.39   0.000     .7591789    .8061398
       2006  |   .6744516   .0140478    48.01   0.000     .6468927    .7020104
       2007  |   .6131867   .0131795    46.53   0.000     .5873314    .6390421
       2008  |   .6283672   .0124176    50.60   0.000     .6040065    .6527279
       2009  |   .9350866   .0136562    68.47   0.000     .9082961    .9618771
       2010  |   1.473231   .0346455    42.52   0.000     1.405264    1.541198
       2011  |   1.839355   .0160686   114.47   0.000     1.807832    1.870879
       2012  |   1.805006   .0154258   117.01   0.000     1.774744    1.835268
       2013  |   1.586497   .0163162    97.23   0.000     1.554488    1.618506
       2014  |   1.246727   .0140961    88.44   0.000     1.219073     1.27438
       2015  |   .7509277   .0159864    46.97   0.000     .7195658    .7822896
             |
       _cons |   8.082307   .0078602  1028.26   0.000     8.066887    8.097727
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1304 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     33,924    8.774258    1.771669   1.098612   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     34,242    .0057691    .0232481  -.1254411   .1925471
9075
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.00002c not found)
file /tmp/St18055.00002c saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.00002d not found)
file /tmp/St18055.00002d saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(915 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.00002e not found)
file /tmp/St18055.00002e saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.00002f not found)
file /tmp/St18055.00002f saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(38 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     32,344
                                                F(  25,   1293)   =    2014.95
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9791
                                                Adj R-squared     =     0.9782
                                                Root MSE          =     0.2613

                              (Std. Err. adjusted for 1,294 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -6.576558   .4640051   -14.17   0.000    -7.486843   -5.666273
             |
        year |
       1992  |   .1659919   .0132824    12.50   0.000     .1399344    .1920493
       1993  |   .6726959    .007046    95.47   0.000     .6588731    .6865186
       1994  |   .6733564   .0102444    65.73   0.000     .6532589     .693454
       1995  |   .4097253   .0144188    28.42   0.000     .3814384    .4380122
       1996  |   .3606213   .0139614    25.83   0.000     .3332319    .3880108
       1997  |   .3869393   .0121647    31.81   0.000     .3630746    .4108041
       1998  |   .3402537   .0135602    25.09   0.000     .3136512    .3668561
       1999  |   .3228272   .0130926    24.66   0.000     .2971422    .3485122
       2000  |   .3346064   .0126948    26.36   0.000     .3097018    .3595111
       2001  |   .3254365   .0116446    27.95   0.000     .3025921     .348281
       2002  |   .7275917   .0136232    53.41   0.000     .7008657    .7543177
       2003  |   .8554754   .0161728    52.90   0.000     .8237475    .8872032
       2004  |   .9865462   .0129423    76.23   0.000     .9611561    1.011936
       2005  |   .7828549   .0120368    65.04   0.000     .7592412    .8064686
       2006  |   .6747768   .0141358    47.74   0.000     .6470451    .7025085
       2007  |   .6135944   .0132532    46.30   0.000     .5875944    .6395945
       2008  |   .6285567   .0124909    50.32   0.000     .6040521    .6530613
       2009  |   .9351306   .0137425    68.05   0.000     .9081706    .9620906
       2010  |   1.473835   .0347686    42.39   0.000     1.405626    1.542044
       2011  |   1.838987   .0161577   113.81   0.000     1.807289    1.870686
       2012  |   1.804113   .0155069   116.34   0.000     1.773692    1.834535
       2013  |   1.585463   .0163939    96.71   0.000     1.553302    1.617625
       2014  |   1.246048   .0141762    87.90   0.000     1.218238    1.273859
       2015  |   .7506555   .0160513    46.77   0.000     .7191661     .782145
             |
       _cons |   8.085695    .007913  1021.83   0.000     8.070171    8.101219
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1294 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     33,664    8.777405     1.77328   1.098612   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     33,982    .0057765    .0232518  -.1254411   .1925471
9080
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.00002h not found)
file /tmp/St18055.00002h saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.00002i not found)
file /tmp/St18055.00002i saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(915 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.00002j not found)
file /tmp/St18055.00002j saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.00002k not found)
file /tmp/St18055.00002k saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(38 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     32,119
                                                F(  25,   1284)   =    2008.43
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9791
                                                Adj R-squared     =     0.9782
                                                Root MSE          =     0.2611

                              (Std. Err. adjusted for 1,285 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -6.607662   .4690786   -14.09   0.000    -7.527906   -5.687417
             |
        year |
       1992  |   .1652863   .0134027    12.33   0.000     .1389927    .1915798
       1993  |   .6736001   .0070556    95.47   0.000     .6597583    .6874419
       1994  |   .6746857   .0103193    65.38   0.000     .6544411    .6949303
       1995  |   .4120063   .0145374    28.34   0.000     .3834867    .4405259
       1996  |   .3628903   .0140689    25.79   0.000     .3352897    .3904909
       1997  |   .3883295    .012255    31.69   0.000     .3642873    .4123716
       1998  |   .3416358   .0136686    24.99   0.000     .3148206    .3684511
       1999  |   .3239674   .0131872    24.57   0.000     .2980966    .3498382
       2000  |   .3357593   .0127763    26.28   0.000     .3106946    .3608241
       2001  |   .3261948   .0117052    27.87   0.000     .3032313    .3491583
       2002  |   .7282772     .01371    53.12   0.000     .7013807    .7551736
       2003  |   .8550571   .0162574    52.60   0.000     .8231632     .886951
       2004  |    .986556   .0129837    75.98   0.000     .9610845    1.012028
       2005  |    .783781   .0120852    64.85   0.000     .7600721    .8074899
       2006  |   .6755658   .0142077    47.55   0.000      .647693    .7034386
       2007  |   .6146833   .0133135    46.17   0.000     .5885647    .6408019
       2008  |   .6294487   .0125304    50.23   0.000     .6048663     .654031
       2009  |   .9353897   .0137921    67.82   0.000     .9083322    .9624473
       2010  |   1.472606   .0350915    41.96   0.000     1.403763    1.541449
       2011  |   1.839345   .0162225   113.38   0.000      1.80752    1.871171
       2012  |   1.805121   .0155666   115.96   0.000     1.774583     1.83566
       2013  |    1.58702   .0164728    96.34   0.000     1.554704    1.619337
       2014  |   1.246987   .0142066    87.77   0.000     1.219116    1.274858
       2015  |   .7519241   .0160936    46.72   0.000     .7203515    .7834967
             |
       _cons |   8.096515    .007922  1022.03   0.000     8.080973    8.112056
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1285 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     33,430    8.788735    1.773916   1.098612   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     33,748    .0057972    .0232397  -.1254411   .1925471
9085
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.00002m not found)
file /tmp/St18055.00002m saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.00002n not found)
file /tmp/St18055.00002n saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(915 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.00002o not found)
file /tmp/St18055.00002o saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.00002p not found)
file /tmp/St18055.00002p saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(38 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     32,019
                                                F(  25,   1280)   =    2003.23
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9791
                                                Adj R-squared     =     0.9782
                                                Root MSE          =     0.2612

                              (Std. Err. adjusted for 1,281 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -6.635781   .4722979   -14.05   0.000    -7.562344   -5.709218
             |
        year |
       1992  |    .164608   .0134962    12.20   0.000     .1381308    .1910852
       1993  |   .6738204   .0070711    95.29   0.000     .6599481    .6876927
       1994  |    .675659   .0103516    65.27   0.000     .6553511     .695967
       1995  |   .4132991   .0146032    28.30   0.000     .3846503     .441948
       1996  |   .3639619    .014138    25.74   0.000     .3362257    .3916981
       1997  |   .3890715   .0123111    31.60   0.000     .3649192    .4132237
       1998  |   .3421735   .0137346    24.91   0.000     .3152288    .3691182
       1999  |   .3247207   .0132475    24.51   0.000     .2987316    .3507099
       2000  |   .3365156   .0128304    26.23   0.000     .3113447    .3616865
       2001  |   .3268346   .0117464    27.82   0.000     .3037903    .3498789
       2002  |   .7291069   .0137527    53.02   0.000     .7021266    .7560873
       2003  |   .8548004   .0163245    52.36   0.000     .8227747     .886826
       2004  |   .9868281   .0130176    75.81   0.000     .9612899    1.012366
       2005  |   .7847147   .0121084    64.81   0.000     .7609603    .8084691
       2006  |   .6763706   .0142499    47.47   0.000      .648415    .7043263
       2007  |   .6155247   .0133456    46.12   0.000     .5893431    .6417063
       2008  |   .6301744   .0125518    50.21   0.000     .6055501    .6547987
       2009  |   .9355846   .0138336    67.63   0.000     .9084456    .9627235
       2010  |   1.470994   .0353232    41.64   0.000     1.401696    1.540292
       2011  |   1.839123   .0162783   112.98   0.000     1.807188    1.871058
       2012  |   1.805704   .0156038   115.72   0.000     1.775092    1.836316
       2013  |    1.58805   .0165186    96.14   0.000     1.555643    1.620456
       2014  |   1.247846   .0142353    87.66   0.000     1.219918    1.275773
       2015  |   .7528432   .0161395    46.65   0.000     .7211805     .784506
             |
       _cons |   8.099843   .0079328  1021.06   0.000     8.084281    8.115406
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1281 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     33,326    8.792378    1.775448   1.098612   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     33,644    .0057991    .0232362  -.1254411   .1925471
9090
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.00002r not found)
file /tmp/St18055.00002r saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.00002s not found)
file /tmp/St18055.00002s saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(915 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.00002t not found)
file /tmp/St18055.00002t saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.00002u not found)
file /tmp/St18055.00002u saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(38 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     31,819
                                                F(  25,   1272)   =    2007.40
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9792
                                                Adj R-squared     =     0.9783
                                                Root MSE          =     0.2605

                              (Std. Err. adjusted for 1,273 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -6.608378   .4718197   -14.01   0.000    -7.534009   -5.682748
             |
        year |
       1992  |   .1658754   .0135055    12.28   0.000     .1393798    .1923709
       1993  |   .6749062   .0070901    95.19   0.000     .6609967    .6888157
       1994  |    .676531   .0103717    65.23   0.000     .6561834    .6968785
       1995  |   .4139895    .014626    28.31   0.000     .3852957    .4426833
       1996  |   .3643175   .0141232    25.80   0.000     .3366103    .3920248
       1997  |   .3890849    .012312    31.60   0.000     .3649307     .413239
       1998  |    .342114   .0137247    24.93   0.000     .3151884    .3690396
       1999  |   .3243888   .0132379    24.50   0.000     .2984183    .3503594
       2000  |   .3364717    .012833    26.22   0.000     .3112957    .3616478
       2001  |   .3271303   .0117622    27.81   0.000     .3040549    .3502057
       2002  |   .7285789   .0137912    52.83   0.000      .701523    .7556349
       2003  |   .8555113   .0162767    52.56   0.000     .8235792    .8874434
       2004  |   .9876378   .0129635    76.19   0.000     .9622057     1.01307
       2005  |   .7846731   .0121506    64.58   0.000     .7608355    .8085106
       2006  |   .6753048   .0142965    47.24   0.000     .6472575    .7033521
       2007  |   .6148523   .0134054    45.87   0.000     .5885532    .6411515
       2008  |   .6300302   .0125901    50.04   0.000     .6053306    .6547298
       2009  |   .9359533   .0138726    67.47   0.000     .9087376    .9631689
       2010  |   1.473849   .0352568    41.80   0.000     1.404681    1.543017
       2011  |   1.841157    .016261   113.23   0.000     1.809256    1.873058
       2012  |   1.806879   .0156593   115.39   0.000     1.776158      1.8376
       2013  |   1.589514   .0165892    95.82   0.000     1.556969    1.622059
       2014  |   1.248819   .0142841    87.43   0.000     1.220796    1.276843
       2015  |   .7539128    .016179    46.60   0.000     .7221723    .7856533
             |
       _cons |   8.108946     .00796  1018.72   0.000      8.09333    8.124562
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1273 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     33,118    8.802085    1.773227   1.098612   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     33,436    .0058048    .0232395  -.1254411   .1925471
9095
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.00002w not found)
file /tmp/St18055.00002w saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.00002x not found)
file /tmp/St18055.00002x saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(915 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.000030 not found)
file /tmp/St18055.000030 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.000031 not found)
file /tmp/St18055.000031 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(38 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     31,719
                                                F(  25,   1268)   =    2006.99
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9792
                                                Adj R-squared     =     0.9783
                                                Root MSE          =     0.2601

                              (Std. Err. adjusted for 1,269 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -6.618831   .4729571   -13.99   0.000    -7.546696   -5.690967
             |
        year |
       1992  |   .1653843   .0135342    12.22   0.000     .1388325    .1919362
       1993  |   .6751389   .0071002    95.09   0.000     .6612094    .6890685
       1994  |   .6769499      .0104    65.09   0.000     .6565468    .6973529
       1995  |   .4142186   .0146741    28.23   0.000     .3854304    .4430068
       1996  |     .36447   .0141666    25.73   0.000     .3366775    .3922625
       1997  |   .3893375   .0123514    31.52   0.000     .3651061     .413569
       1998  |   .3425818   .0137677    24.88   0.000     .3155718    .3695919
       1999  |   .3250647   .0132552    24.52   0.000     .2990602    .3510692
       2000  |   .3374061    .012858    26.24   0.000     .3121808    .3626315
       2001  |   .3275561   .0117949    27.77   0.000     .3044165    .3506958
       2002  |   .7287057    .013846    52.63   0.000     .7015421    .7558693
       2003  |   .8557596    .016298    52.51   0.000     .8237856    .8877336
       2004  |   .9880042   .0129831    76.10   0.000     .9625335    1.013475
       2005  |    .785392   .0121739    64.51   0.000     .7615088    .8092752
       2006  |   .6760908   .0143376    47.16   0.000     .6479629    .7042188
       2007  |   .6149689   .0134355    45.77   0.000     .5886107    .6413271
       2008  |   .6302499   .0126028    50.01   0.000     .6055253    .6549746
       2009  |   .9356721   .0138635    67.49   0.000     .9084742      .96287
       2010  |   1.472356   .0352486    41.77   0.000     1.403204    1.541508
       2011  |   1.841293   .0162817   113.09   0.000     1.809351    1.873235
       2012  |   1.806805   .0156808   115.22   0.000     1.776041    1.837568
       2013  |   1.589751   .0166399    95.54   0.000     1.557106    1.622396
       2014  |    1.25003   .0142919    87.46   0.000     1.221991    1.278068
       2015  |   .7553855   .0161931    46.65   0.000     .7236172    .7871537
             |
       _cons |   8.111958   .0079725  1017.50   0.000     8.096318    8.127599
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1269 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     33,014    8.805298     1.77225   1.098612   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     33,332    .0058118    .0232388  -.1254411   .1925471
9100
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.000033 not found)
file /tmp/St18055.000033 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.000034 not found)
file /tmp/St18055.000034 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(915 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.000035 not found)
file /tmp/St18055.000035 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.000036 not found)
file /tmp/St18055.000036 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(38 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     31,569
                                                F(  25,   1262)   =    1995.53
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9792
                                                Adj R-squared     =     0.9784
                                                Root MSE          =     0.2602

                              (Std. Err. adjusted for 1,263 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -6.622815   .4745713   -13.96   0.000    -7.553851    -5.69178
             |
        year |
       1992  |   .1653114    .013565    12.19   0.000     .1386989    .1919239
       1993  |   .6751643   .0071208    94.82   0.000     .6611944    .6891341
       1994  |    .677218   .0104343    64.90   0.000     .6567476    .6976885
       1995  |   .4147235   .0147198    28.17   0.000     .3858455    .4436015
       1996  |   .3646005    .014206    25.67   0.000     .3367304    .3924705
       1997  |   .3895437   .0123768    31.47   0.000     .3652623    .4138252
       1998  |   .3432822   .0138148    24.85   0.000     .3161798    .3703846
       1999  |   .3258231    .013294    24.51   0.000     .2997423    .3519039
       2000  |    .338241   .0129105    26.20   0.000     .3129127    .3635693
       2001  |   .3275361   .0118133    27.73   0.000     .3043602     .350712
       2002  |   .7295771   .0139058    52.47   0.000      .702296    .7568582
       2003  |   .8563279   .0163291    52.44   0.000     .8242928    .8883631
       2004  |    .988626   .0130132    75.97   0.000     .9630961    1.014156
       2005  |   .7861037   .0122171    64.34   0.000     .7621356    .8100718
       2006  |   .6767546    .014394    47.02   0.000     .6485158    .7049933
       2007  |    .615522    .013486    45.64   0.000     .5890645    .6419796
       2008  |   .6307741   .0126534    49.85   0.000     .6059501     .655598
       2009  |   .9358169   .0139118    67.27   0.000     .9085242    .9631096
       2010  |   1.472654   .0353361    41.68   0.000      1.40333    1.541978
       2011  |   1.841387   .0163331   112.74   0.000     1.809344     1.87343
       2012  |   1.806643   .0157366   114.81   0.000     1.775771    1.837516
       2013  |    1.58972    .016709    95.14   0.000     1.556939      1.6225
       2014  |   1.250358   .0143501    87.13   0.000     1.222205     1.27851
       2015  |   .7567875   .0162448    46.59   0.000     .7249178    .7886572
             |
       _cons |   8.114441   .0079992  1014.41   0.000     8.098748    8.130134
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1263 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     32,858    8.808036     1.77409   1.098612   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     33,176    .0058338    .0232302  -.1254411   .1925471
9105
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.000038 not found)
file /tmp/St18055.000038 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.000039 not found)
file /tmp/St18055.000039 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(915 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.00003a not found)
file /tmp/St18055.00003a saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.00003b not found)
file /tmp/St18055.00003b saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(38 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     31,394
                                                F(  25,   1255)   =    1980.70
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9793
                                                Adj R-squared     =     0.9784
                                                Root MSE          =     0.2598

                              (Std. Err. adjusted for 1,256 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -6.622733   .4783358   -13.85   0.000    -7.561159   -5.684307
             |
        year |
       1992  |   .1658152   .0136558    12.14   0.000     .1390246    .1926058
       1993  |   .6756687   .0071204    94.89   0.000     .6616995    .6896379
       1994  |   .6771205     .01048    64.61   0.000     .6565602    .6976807
       1995  |   .4139599   .0148133    27.95   0.000     .3848983    .4430216
       1996  |   .3637077   .0143076    25.42   0.000     .3356383    .3917772
       1997  |   .3885187   .0124582    31.19   0.000     .3640775    .4129599
       1998  |   .3422927   .0139073    24.61   0.000     .3150085    .3695768
       1999  |   .3238372   .0133601    24.24   0.000     .2976267    .3500477
       2000  |   .3354841   .0129232    25.96   0.000     .3101307    .3608375
       2001  |   .3257329   .0118594    27.47   0.000     .3024664    .3489995
       2002  |   .7286698   .0139432    52.26   0.000     .7013152    .7560244
       2003  |   .8559361   .0164234    52.12   0.000     .8237157    .8881564
       2004  |   .9881841   .0130697    75.61   0.000     .9625432    1.013825
       2005  |   .7852579   .0122228    64.25   0.000     .7612786    .8092373
       2006  |   .6763194   .0144101    46.93   0.000     .6480488      .70459
       2007  |   .6149572   .0134839    45.61   0.000     .5885038    .6414106
       2008  |   .6301692   .0126565    49.79   0.000      .605339    .6549993
       2009  |   .9351513   .0139579    67.00   0.000     .9077679    .9625348
       2010  |   1.471891   .0356297    41.31   0.000     1.401991    1.541792
       2011  |   1.840647   .0164246   112.07   0.000     1.808424    1.872869
       2012  |   1.805868   .0157727   114.49   0.000     1.774924    1.836812
       2013  |   1.588907   .0167534    94.84   0.000     1.556039    1.621774
       2014  |   1.249609   .0143875    86.85   0.000     1.221383    1.277835
       2015  |   .7558231   .0162992    46.37   0.000     .7238464    .7877999
             |
       _cons |   8.124802   .0080093  1014.42   0.000     8.109089    8.140515
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1256 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     32,676    8.817583    1.772462   1.098612   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     32,994    .0058428    .0232206  -.1254411   .1925471
9110
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.00003d not found)
file /tmp/St18055.00003d saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.00003e not found)
file /tmp/St18055.00003e saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(915 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.00003f not found)
file /tmp/St18055.00003f saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.00003g not found)
file /tmp/St18055.00003g saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(38 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     31,269
                                                F(  25,   1250)   =    1968.18
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9793
                                                Adj R-squared     =     0.9784
                                                Root MSE          =     0.2600

                              (Std. Err. adjusted for 1,251 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -6.635291   .4798368   -13.83   0.000    -7.576665   -5.693916
             |
        year |
       1992  |    .165456   .0137005    12.08   0.000     .1385775    .1923345
       1993  |   .6758499    .007145    94.59   0.000     .6618323    .6898675
       1994  |   .6773519   .0105071    64.47   0.000     .6567384    .6979654
       1995  |   .4143664   .0148494    27.90   0.000     .3852338     .443499
       1996  |   .3640801   .0143456    25.38   0.000     .3359359    .3922243
       1997  |   .3889863   .0124896    31.14   0.000     .3644834    .4134893
       1998  |   .3428335    .013946    24.58   0.000     .3154733    .3701936
       1999  |   .3243268   .0133946    24.21   0.000     .2980485    .3506051
       2000  |   .3361711   .0129515    25.96   0.000      .310762    .3615802
       2001  |   .3261874   .0118892    27.44   0.000     .3028625    .3495124
       2002  |   .7293853   .0139984    52.11   0.000     .7019224    .7568482
       2003  |   .8560322   .0164573    52.02   0.000     .8237452    .8883191
       2004  |    .988552   .0131009    75.46   0.000     .9628498    1.014254
       2005  |   .7859397   .0122646    64.08   0.000     .7618781    .8100012
       2006  |   .6772214   .0144625    46.83   0.000     .6488479    .7055949
       2007  |   .6157136    .013532    45.50   0.000     .5891657    .6422615
       2008  |   .6310268   .0126991    49.69   0.000     .6061129    .6559407
       2009  |   .9357241    .014002    66.83   0.000     .9082542     .963194
       2010  |   1.471804   .0357357    41.19   0.000     1.401695    1.541912
       2011  |   1.841227   .0164731   111.77   0.000     1.808909    1.873545
       2012  |   1.806897   .0158204   114.21   0.000     1.775859    1.837934
       2013  |   1.590181   .0167967    94.67   0.000     1.557229    1.623134
       2014  |   1.251154    .014415    86.80   0.000     1.222874    1.279434
       2015  |   .7574092   .0163386    46.36   0.000     .7253551    .7894633
             |
       _cons |   8.125146   .0080253  1012.44   0.000     8.109401     8.14089
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1251 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     32,546    8.818384    1.774221   1.098612   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     32,864    .0058493    .0232206  -.1254411   .1925471
9115
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.00003i not found)
file /tmp/St18055.00003i saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.00003j not found)
file /tmp/St18055.00003j saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(915 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.00003k not found)
file /tmp/St18055.00003k saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.00003l not found)
file /tmp/St18055.00003l saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(38 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     31,094
                                                F(  25,   1243)   =    1953.16
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9793
                                                Adj R-squared     =     0.9784
                                                Root MSE          =     0.2600

                              (Std. Err. adjusted for 1,244 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -6.676503   .4833551   -13.81   0.000    -7.624785   -5.728221
             |
        year |
       1992  |   .1644997   .0137935    11.93   0.000     .1374386    .1915607
       1993  |   .6757688   .0071652    94.31   0.000     .6617115     .689826
       1994  |   .6783902   .0105411    64.36   0.000     .6577099    .6990705
       1995  |   .4155734    .014929    27.84   0.000     .3862845    .4448622
       1996  |   .3652439   .0144167    25.33   0.000     .3369601    .3935277
       1997  |   .3899135   .0125398    31.09   0.000     .3653119     .414515
       1998  |   .3442884   .0140089    24.58   0.000     .3168047    .3717721
       1999  |   .3255183   .0134424    24.22   0.000      .299146    .3518907
       2000  |   .3367263   .0129903    25.92   0.000     .3112411    .3622116
       2001  |   .3270068   .0119113    27.45   0.000     .3036383    .3503754
       2002  |   .7304212   .0140441    52.01   0.000     .7028685    .7579739
       2003  |    .854855   .0165543    51.64   0.000     .8223776    .8873324
       2004  |   .9874557   .0131411    75.14   0.000     .9616746    1.013237
       2005  |   .7860446   .0122902    63.96   0.000     .7619327    .8101565
       2006  |   .6780913   .0145065    46.74   0.000     .6496314    .7065512
       2007  |   .6169726   .0135662    45.48   0.000     .5903574    .6435877
       2008  |   .6318631   .0127312    49.63   0.000     .6068861    .6568402
       2009  |   .9359275   .0140557    66.59   0.000     .9083521    .9635029
       2010  |   1.469132   .0359935    40.82   0.000     1.398517    1.539747
       2011  |   1.840582   .0165551   111.18   0.000     1.808103    1.873061
       2012  |   1.807838    .015879   113.85   0.000     1.776686    1.838991
       2013  |   1.591304   .0168667    94.35   0.000     1.558214    1.624395
       2014  |   1.251838   .0144672    86.53   0.000     1.223455    1.280221
       2015  |   .7578004   .0164112    46.18   0.000     .7256036    .7899972
             |
       _cons |   8.134197   .0080401  1011.70   0.000     8.118424    8.149971
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1244 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     32,364    8.827629     1.77376   1.098612   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     32,682    .0058403    .0232223  -.1254411   .1925471
9120
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.00003n not found)
file /tmp/St18055.00003n saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.00003o not found)
file /tmp/St18055.00003o saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(915 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.00003p not found)
file /tmp/St18055.00003p saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.00003q not found)
file /tmp/St18055.00003q saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(38 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     30,994
                                                F(  25,   1239)   =    1948.74
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9792
                                                Adj R-squared     =     0.9783
                                                Root MSE          =     0.2601

                              (Std. Err. adjusted for 1,240 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -6.660237   .4836641   -13.77   0.000    -7.609128   -5.711345
             |
        year |
       1992  |   .1650385   .0138071    11.95   0.000     .1379507    .1921263
       1993  |   .6759156   .0071833    94.10   0.000     .6618228    .6900084
       1994  |   .6781575    .010566    64.18   0.000     .6574284    .6988866
       1995  |   .4151364   .0149578    27.75   0.000     .3857909    .4444818
       1996  |   .3646431     .01444    25.25   0.000     .3363136    .3929727
       1997  |   .3894469   .0125691    30.98   0.000     .3647879    .4141059
       1998  |   .3439415   .0140362    24.50   0.000     .3164042    .3714788
       1999  |   .3250463    .013471    24.13   0.000     .2986179    .3514747
       2000  |   .3362794   .0130219    25.82   0.000      .310732    .3618269
       2001  |   .3265209   .0119363    27.36   0.000     .3031033    .3499385
       2002  |   .7300233   .0140857    51.83   0.000     .7023888    .7576579
       2003  |   .8553193   .0165684    51.62   0.000     .8228141    .8878245
       2004  |   .9874259   .0131593    75.04   0.000      .961609    1.013243
       2005  |   .7856058   .0123193    63.77   0.000     .7614369    .8097747
       2006  |   .6776029    .014543    46.59   0.000     .6490712    .7061345
       2007  |    .616555   .0135957    45.35   0.000     .5898818    .6432282
       2008  |   .6313136   .0127578    49.48   0.000     .6062844    .6563428
       2009  |   .9360338   .0140815    66.47   0.000     .9084075      .96366
       2010  |   1.470169   .0360195    40.82   0.000     1.399503    1.540835
       2011  |   1.841388   .0165797   111.06   0.000      1.80886    1.873915
       2012  |   1.808269   .0159159   113.61   0.000     1.777044    1.839494
       2013  |   1.591435   .0169048    94.14   0.000      1.55827      1.6246
       2014  |   1.251655   .0145018    86.31   0.000     1.223204    1.280106
       2015  |   .7569589    .016438    46.05   0.000     .7247094    .7892084
             |
       _cons |   8.138185   .0080614  1009.53   0.000      8.12237    8.154001
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1240 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     32,260    8.831536    1.771848   1.098612   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     32,578     .005849    .0232246  -.1254411   .1925471
9125
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.00003s not found)
file /tmp/St18055.00003s saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.00003t not found)
file /tmp/St18055.00003t saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(915 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.00003u not found)
file /tmp/St18055.00003u saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.00003v not found)
file /tmp/St18055.00003v saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(38 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     30,744
                                                F(  25,   1229)   =    1925.42
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9792
                                                Adj R-squared     =     0.9784
                                                Root MSE          =     0.2604

                              (Std. Err. adjusted for 1,230 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -6.679371   .4857831   -13.75   0.000    -7.632427   -5.726315
             |
        year |
       1992  |   .1648123   .0138445    11.90   0.000     .1376508    .1919739
       1993  |   .6766056   .0072183    93.74   0.000     .6624441    .6907671
       1994  |   .6789602   .0106296    63.87   0.000     .6581061    .6998143
       1995  |   .4165166   .0150304    27.71   0.000     .3870285    .4460046
       1996  |   .3659767   .0145059    25.23   0.000     .3375175    .3944358
       1997  |   .3906573   .0126344    30.92   0.000     .3658699    .4154447
       1998  |   .3451574   .0141117    24.46   0.000     .3174717     .372843
       1999  |   .3266428   .0135389    24.13   0.000     .3000809    .3532048
       2000  |    .337712   .0130904    25.80   0.000       .31203     .363394
       2001  |   .3273572   .0120102    27.26   0.000     .3037945    .3509199
       2002  |    .730954   .0141806    51.55   0.000     .7031331    .7587748
       2003  |   .8553576   .0166097    51.50   0.000     .8227711    .8879442
       2004  |   .9876077   .0132065    74.78   0.000     .9616979    1.013517
       2005  |   .7865389   .0123864    63.50   0.000      .762238    .8108398
       2006  |     .67866   .0146329    46.38   0.000     .6499518    .7073682
       2007  |   .6172495   .0136797    45.12   0.000     .5904113    .6440877
       2008  |   .6316164   .0128301    49.23   0.000     .6064451    .6567878
       2009  |   .9363349   .0141474    66.18   0.000     .9085793    .9640906
       2010  |   1.469624   .0361436    40.66   0.000     1.398714    1.540534
       2011  |   1.841772   .0166582   110.56   0.000      1.80909    1.874453
       2012  |   1.808854   .0160163   112.94   0.000     1.777432    1.840276
       2013  |   1.592367   .0170032    93.65   0.000     1.559008    1.625725
       2014  |   1.252684   .0145868    85.88   0.000     1.224066    1.281301
       2015  |    .757649   .0165242    45.85   0.000     .7252302    .7900678
             |
       _cons |   8.146447   .0081051  1005.10   0.000     8.130545    8.162348
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1230 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     32,000    8.840263     1.77504   1.098612   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     32,318    .0058721    .0232193  -.1254411   .1925471
9130
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.00003x not found)
file /tmp/St18055.00003x saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.000040 not found)
file /tmp/St18055.000040 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(915 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.000041 not found)
file /tmp/St18055.000041 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.000042 not found)
file /tmp/St18055.000042 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(38 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     30,644
                                                F(  25,   1225)   =    1928.48
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9793
                                                Adj R-squared     =     0.9784
                                                Root MSE          =     0.2602

                              (Std. Err. adjusted for 1,226 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -6.676938   .4867549   -13.72   0.000    -7.631904   -5.721973
             |
        year |
       1992  |   .1646208   .0138509    11.89   0.000     .1374468    .1917948
       1993  |   .6765466    .007207    93.87   0.000     .6624072    .6906861
       1994  |   .6783858    .010626    63.84   0.000     .6575387     .699233
       1995  |   .4156351   .0150394    27.64   0.000     .3861292     .445141
       1996  |   .3651678   .0145168    25.15   0.000     .3366873    .3936482
       1997  |   .3901384   .0126467    30.85   0.000     .3653268    .4149499
       1998  |    .344494   .0141396    24.36   0.000     .3167534    .3722345
       1999  |    .325995   .0135678    24.03   0.000     .2993763    .3526138
       2000  |   .3372124   .0131187    25.70   0.000     .3114748      .36295
       2001  |   .3272106     .01204    27.18   0.000     .3035893     .350832
       2002  |   .7312588   .0142266    51.40   0.000     .7033476      .75917
       2003  |   .8554068   .0166387    51.41   0.000     .8227633    .8880503
       2004  |   .9874801   .0132374    74.60   0.000     .9615097    1.013451
       2005  |   .7868347   .0124188    63.36   0.000     .7624703    .8111991
       2006  |   .6790431   .0146738    46.28   0.000     .6502544    .7078317
       2007  |   .6177591   .0137086    45.06   0.000     .5908641    .6446541
       2008  |   .6323419   .0128564    49.19   0.000      .607119    .6575648
       2009  |   .9371646   .0141743    66.12   0.000     .9093561    .9649732
       2010  |   1.470254   .0362057    40.61   0.000     1.399222    1.541286
       2011  |   1.841896   .0166966   110.32   0.000     1.809139    1.874653
       2012  |   1.809214   .0160629   112.63   0.000       1.7777    1.840728
       2013  |   1.592862   .0170438    93.46   0.000     1.559424      1.6263
       2014  |    1.25344   .0146249    85.71   0.000     1.224748    1.282133
       2015  |   .7584508   .0165619    45.79   0.000     .7259579    .7909437
             |
       _cons |   8.151324   .0081263  1003.08   0.000      8.13538    8.167267
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1226 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     31,896    8.845111    1.774602   1.098612   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     32,214    .0058863    .0232158  -.1254411   .1925471
9135
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.000044 not found)
file /tmp/St18055.000044 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.000045 not found)
file /tmp/St18055.000045 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(915 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.000046 not found)
file /tmp/St18055.000046 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.000047 not found)
file /tmp/St18055.000047 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(38 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     30,444
                                                F(  25,   1217)   =    1914.02
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9794
                                                Adj R-squared     =     0.9785
                                                Root MSE          =     0.2597

                              (Std. Err. adjusted for 1,218 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -6.671246   .4869883   -13.70   0.000    -7.626676   -5.715816
             |
        year |
       1992  |   .1649521   .0138546    11.91   0.000     .1377706    .1921337
       1993  |   .6768546   .0072437    93.44   0.000      .662643    .6910661
       1994  |   .6786479   .0106521    63.71   0.000     .6577494    .6995464
       1995  |   .4159112   .0150528    27.63   0.000     .3863788    .4454436
       1996  |   .3653447   .0145197    25.16   0.000     .3368583     .393831
       1997  |   .3904643    .012659    30.84   0.000     .3656285    .4153002
       1998  |   .3448333   .0141489    24.37   0.000     .3170744    .3725922
       1999  |   .3269958   .0136226    24.00   0.000     .3002694    .3537222
       2000  |   .3382061   .0131701    25.68   0.000     .3123674    .3640447
       2001  |   .3278189   .0120879    27.12   0.000     .3041034    .3515344
       2002  |   .7318461   .0143189    51.11   0.000     .7037536    .7599385
       2003  |   .8566346   .0165776    51.67   0.000     .8241108    .8891585
       2004  |   .9887479   .0132043    74.88   0.000     .9628421    1.014654
       2005  |   .7876167   .0124645    63.19   0.000     .7631624     .812071
       2006  |   .6797851   .0147505    46.09   0.000     .6508459    .7087243
       2007  |   .6181311   .0137755    44.87   0.000     .5911048    .6451573
       2008  |   .6327242   .0129063    49.02   0.000     .6074031    .6580452
       2009  |   .9377606    .014179    66.14   0.000     .9099426    .9655785
       2010  |   1.471618   .0361236    40.74   0.000     1.400746    1.542489
       2011  |   1.842882   .0166843   110.46   0.000     1.810149    1.875615
       2012  |   1.810331    .016134   112.21   0.000     1.778678    1.841985
       2013  |   1.593869   .0171118    93.14   0.000     1.560298    1.627441
       2014  |   1.254354   .0146858    85.41   0.000     1.225542    1.283166
       2015  |   .7590877   .0166143    45.69   0.000     .7264919    .7916835
             |
       _cons |   8.158322   .0081465  1001.46   0.000     8.142339    8.174304
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1218 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     31,688     8.85271    1.775916   1.098612   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     32,006    .0058983    .0232072  -.1254411   .1925471
9140
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.000049 not found)
file /tmp/St18055.000049 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.00004a not found)
file /tmp/St18055.00004a saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(915 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.00004b not found)
file /tmp/St18055.00004b saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.00004c not found)
file /tmp/St18055.00004c saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(38 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     30,194
                                                F(  25,   1207)   =    1895.70
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9793
                                                Adj R-squared     =     0.9785
                                                Root MSE          =     0.2594

                              (Std. Err. adjusted for 1,208 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -6.882923   .4626797   -14.88   0.000    -7.790669   -5.975177
             |
        year |
       1992  |   .1589341   .0132598    11.99   0.000     .1329194    .1849489
       1993  |   .6765811   .0072767    92.98   0.000     .6623047    .6908576
       1994  |    .682022   .0104308    65.39   0.000     .6615575    .7024865
       1995  |   .4217566   .0145498    28.99   0.000     .3932109    .4503023
       1996  |   .3707121   .0139692    26.54   0.000     .3433055    .3981188
       1997  |   .3940575   .0123094    32.01   0.000     .3699072    .4182078
       1998  |   .3495442   .0138394    25.26   0.000     .3223923    .3766961
       1999  |   .3310082   .0133831    24.73   0.000     .3047514    .3572649
       2000  |   .3417372   .0128652    26.56   0.000     .3164965    .3669779
       2001  |   .3305861   .0120124    27.52   0.000     .3070187    .3541535
       2002  |   .7347924   .0141347    51.99   0.000     .7070611    .7625237
       2003  |    .851109    .016325    52.14   0.000     .8190805    .8831375
       2004  |   .9851246   .0132454    74.37   0.000     .9591381    1.011111
       2005  |   .7888734   .0123532    63.86   0.000     .7646373    .8131094
       2006  |    .682333   .0145903    46.77   0.000     .6537079    .7109581
       2007  |   .6202183   .0136402    45.47   0.000     .5934571    .6469796
       2008  |   .6333156   .0129092    49.06   0.000     .6079887    .6586425
       2009  |   .9350776   .0141631    66.02   0.000     .9072905    .9628647
       2010  |   1.456126   .0346684    42.00   0.000     1.388109    1.524143
       2011  |   1.838585   .0165744   110.93   0.000     1.806067    1.871103
       2012  |   1.813226   .0160351   113.08   0.000     1.781767    1.844686
       2013  |   1.598194   .0168372    94.92   0.000      1.56516    1.631227
       2014  |   1.257664   .0145444    86.47   0.000     1.229129    1.286199
       2015  |   .7639267   .0163428    46.74   0.000     .7318632    .7959901
             |
       _cons |   8.171616   .0082002   996.51   0.000     8.155528    8.187704
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1208 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     31,428    8.865818    1.773045   1.098612   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     31,720    .0058811    .0231519  -.1254411   .1306634
9145
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.00004e not found)
file /tmp/St18055.00004e saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.00004f not found)
file /tmp/St18055.00004f saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(915 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.00004g not found)
file /tmp/St18055.00004g saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.00004h not found)
file /tmp/St18055.00004h saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(32 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     29,975
                                                F(  25,   1198)   =    1880.41
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9795
                                                Adj R-squared     =     0.9786
                                                Root MSE          =     0.2584

                              (Std. Err. adjusted for 1,199 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -6.877774   .4677093   -14.71   0.000    -7.795394   -5.960153
             |
        year |
       1992  |   .1599199   .0133442    11.98   0.000     .1337392    .1861005
       1993  |   .6774036   .0073063    92.72   0.000     .6630691    .6917381
       1994  |   .6826787   .0104619    65.25   0.000      .662153    .7032045
       1995  |   .4218107    .014655    28.78   0.000     .3930583    .4505631
       1996  |   .3710053   .0140879    26.34   0.000     .3433655     .398645
       1997  |   .3943775   .0124226    31.75   0.000     .3700051      .41875
       1998  |   .3500574   .0139489    25.10   0.000     .3226903    .3774244
       1999  |   .3312108   .0134814    24.57   0.000     .3047609    .3576607
       2000  |   .3421149   .0129273    26.46   0.000     .3167521    .3674776
       2001  |   .3315333   .0120692    27.47   0.000     .3078541    .3552125
       2002  |   .7355428   .0142312    51.69   0.000     .7076219    .7634637
       2003  |    .854691    .016252    52.59   0.000     .8228054    .8865766
       2004  |   .9876328   .0132816    74.36   0.000      .961575    1.013691
       2005  |   .7908383    .012425    63.65   0.000     .7664612    .8152154
       2006  |    .684585   .0146934    46.59   0.000     .6557573    .7134126
       2007  |   .6233847   .0136875    45.54   0.000     .5965307    .6502387
       2008  |   .6372934    .012781    49.86   0.000     .6122178     .662369
       2009  |   .9380271   .0141339    66.37   0.000      .910297    .9657571
       2010  |   1.458545   .0348987    41.79   0.000     1.390075    1.527014
       2011  |   1.841143   .0165379   111.33   0.000     1.808697    1.873589
       2012  |   1.815165   .0161749   112.22   0.000      1.78343    1.846899
       2013  |   1.599662   .0169905    94.15   0.000     1.566328    1.632996
       2014  |   1.260079   .0146639    85.93   0.000     1.231309    1.288849
       2015  |   .7656277   .0164833    46.45   0.000     .7332884    .7979671
             |
       _cons |   8.181044   .0082262   994.51   0.000     8.164905    8.197184
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1199 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     31,200     8.87689     1.77126   1.098612   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     31,486      .00589    .0231301  -.1254411   .1306634
9150
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.00004j not found)
file /tmp/St18055.00004j saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.00004k not found)
file /tmp/St18055.00004k saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(915 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.00004l not found)
file /tmp/St18055.00004l saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.00004m not found)
file /tmp/St18055.00004m saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(32 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     29,750
                                                F(  25,   1189)   =    1872.78
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9795
                                                Adj R-squared     =     0.9787
                                                Root MSE          =     0.2585

                              (Std. Err. adjusted for 1,190 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -6.908034   .4706203   -14.68   0.000    -7.831373   -5.984695
             |
        year |
       1992  |   .1587818   .0134094    11.84   0.000     .1324731    .1850904
       1993  |   .6766806   .0073262    92.36   0.000     .6623068    .6910544
       1994  |   .6829328   .0105219    64.91   0.000     .6622893    .7035764
       1995  |   .4226878   .0147366    28.68   0.000     .3937751    .4516005
       1996  |   .3722783   .0141658    26.28   0.000     .3444855    .4000711
       1997  |   .3957959   .0124936    31.68   0.000     .3712841    .4203078
       1998  |   .3515482   .0140241    25.07   0.000     .3240335    .3790629
       1999  |   .3330512   .0135353    24.61   0.000     .3064955    .3596069
       2000  |   .3443063   .0129505    26.59   0.000      .318898    .3697146
       2001  |   .3334232   .0120879    27.58   0.000     .3097073    .3571391
       2002  |   .7379043   .0142909    51.63   0.000     .7098661    .7659425
       2003  |   .8556225   .0163211    52.42   0.000     .8236011    .8876439
       2004  |   .9891471   .0133344    74.18   0.000     .9629856    1.015309
       2005  |      .7932   .0124838    63.54   0.000     .7687073    .8176928
       2006  |   .6870579   .0147802    46.48   0.000     .6580597    .7160561
       2007  |   .6255993   .0137616    45.46   0.000     .5985997     .652599
       2008  |   .6391273   .0128372    49.79   0.000     .6139413    .6643133
       2009  |   .9390857   .0141918    66.17   0.000     .9112419    .9669295
       2010  |   1.457437   .0350767    41.55   0.000     1.388618    1.526256
       2011  |   1.841407   .0165993   110.93   0.000      1.80884    1.873974
       2012  |   1.816598   .0162553   111.75   0.000     1.784706     1.84849
       2013  |   1.601555   .0170821    93.76   0.000     1.568041     1.63507
       2014  |   1.261704   .0147406    85.59   0.000     1.232783    1.290624
       2015  |   .7673261   .0165693    46.31   0.000     .7348177    .7998344
             |
       _cons |   8.187447   .0082593   991.30   0.000     8.171243    8.203651
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1190 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     30,966    8.884247    1.775091   1.098612   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     31,252    .0059038    .0231223  -.1254411   .1306634
9155
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.00004o not found)
file /tmp/St18055.00004o saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.00004p not found)
file /tmp/St18055.00004p saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(915 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.00004q not found)
file /tmp/St18055.00004q saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.00004r not found)
file /tmp/St18055.00004r saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(32 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     29,675
                                                F(  25,   1186)   =    1867.00
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9794
                                                Adj R-squared     =     0.9786
                                                Root MSE          =     0.2582

                              (Std. Err. adjusted for 1,187 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -6.950586   .4742568   -14.66   0.000    -7.881062    -6.02011
             |
        year |
       1992  |   .1577615   .0135216    11.67   0.000     .1312326    .1842904
       1993  |   .6756109    .007256    93.11   0.000     .6613748     .689847
       1994  |   .6830683   .0105825    64.55   0.000     .6623058    .7038308
       1995  |   .4238255   .0148009    28.64   0.000     .3947867    .4528643
       1996  |   .3731959   .0142374    26.21   0.000     .3452626    .4011291
       1997  |   .3964682   .0125346    31.63   0.000     .3718758    .4210605
       1998  |    .352045   .0140999    24.97   0.000     .3243816    .3797084
       1999  |   .3330178   .0136049    24.48   0.000     .3063254    .3597101
       2000  |   .3438601   .0130011    26.45   0.000     .3183524    .3693677
       2001  |    .333648   .0121093    27.55   0.000       .30989     .357406
       2002  |   .7385257   .0142934    51.67   0.000     .7104825     .766569
       2003  |   .8543576   .0164302    52.00   0.000     .8221221     .886593
       2004  |   .9881065   .0133813    73.84   0.000     .9618528     1.01436
       2005  |   .7930883   .0125168    63.36   0.000     .7685308    .8176459
       2006  |   .6865237   .0147759    46.46   0.000     .6575338    .7155135
       2007  |   .6256983   .0137854    45.39   0.000     .5986517    .6527449
       2008  |    .639312   .0128571    49.72   0.000     .6140869    .6645371
       2009  |   .9391063   .0142386    65.96   0.000     .9111707     .967042
       2010  |   1.454844   .0353589    41.15   0.000     1.385471    1.524217
       2011  |   1.841258   .0166686   110.46   0.000     1.808555    1.873961
       2012  |   1.817809   .0162982   111.53   0.000     1.785832    1.849785
       2013  |   1.602684   .0171405    93.50   0.000     1.569055    1.636313
       2014  |   1.262087   .0147783    85.40   0.000     1.233093    1.291082
       2015  |   .7676034   .0166302    46.16   0.000     .7349755    .8002313
             |
       _cons |   8.196265   .0082776   990.18   0.000     8.180025    8.212505
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1187 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     30,888    8.892833    1.768664   1.098612   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     31,174    .0058957    .0231106  -.1254411   .1306634
9160
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.00004t not found)
file /tmp/St18055.00004t saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.00004u not found)
file /tmp/St18055.00004u saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(915 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.00004v not found)
file /tmp/St18055.00004v saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.00004w not found)
file /tmp/St18055.00004w saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(32 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     29,550
                                                F(  25,   1181)   =    1860.01
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9793
                                                Adj R-squared     =     0.9785
                                                Root MSE          =     0.2581

                              (Std. Err. adjusted for 1,182 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -6.945092   .4750678   -14.62   0.000    -7.877163   -6.013021
             |
        year |
       1992  |   .1580736   .0135199    11.69   0.000     .1315479    .1845994
       1993  |   .6753548   .0072598    93.03   0.000     .6611113    .6895983
       1994  |   .6826819    .010613    64.32   0.000     .6618595    .7035044
       1995  |   .4237008   .0148329    28.56   0.000     .3945991    .4528026
       1996  |   .3726527   .0142551    26.14   0.000     .3446846    .4006209
       1997  |   .3963528   .0125605    31.56   0.000     .3717095    .4209961
       1998  |   .3518546   .0141264    24.91   0.000     .3241391    .3795702
       1999  |   .3326567   .0136321    24.40   0.000     .3059109    .3594024
       2000  |   .3434416   .0130134    26.39   0.000     .3179096    .3689736
       2001  |   .3334071   .0121287    27.49   0.000     .3096109    .3572034
       2002  |   .7385145   .0143002    51.64   0.000     .7104579     .766571
       2003  |   .8547223   .0164173    52.06   0.000      .822512    .8869326
       2004  |   .9880387   .0133927    73.77   0.000     .9617626    1.014315
       2005  |   .7930603   .0125478    63.20   0.000     .7684418    .8176787
       2006  |   .6875205   .0147796    46.52   0.000     .6585233    .7165176
       2007  |   .6266407   .0137961    45.42   0.000      .599573    .6537083
       2008  |   .6400645    .012869    49.74   0.000     .6148159    .6653131
       2009  |   .9401476   .0142243    66.09   0.000       .91224    .9680553
       2010  |   1.455546   .0354022    41.11   0.000     1.386088    1.525004
       2011  |   1.841218   .0166771   110.40   0.000     1.808498    1.873938
       2012  |   1.817502   .0163395   111.23   0.000     1.785444     1.84956
       2013  |   1.602307   .0171869    93.23   0.000     1.568587    1.636028
       2014  |   1.262391   .0147993    85.30   0.000     1.233355    1.291426
       2015  |   .7675992   .0166818    46.01   0.000       .73487    .8003284
             |
       _cons |   8.205653   .0082786   991.19   0.000      8.18941    8.221895
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1182 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     30,758    8.902368    1.764303   1.098612   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     31,044    .0058877     .023117  -.1254411   .1306634
9165
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.000050 not found)
file /tmp/St18055.000050 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.000051 not found)
file /tmp/St18055.000051 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(915 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.000052 not found)
file /tmp/St18055.000052 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.000053 not found)
file /tmp/St18055.000053 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(32 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     29,350
                                                F(  25,   1173)   =    1856.02
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9793
                                                Adj R-squared     =     0.9784
                                                Root MSE          =     0.2578

                              (Std. Err. adjusted for 1,174 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -6.958388   .4757628   -14.63   0.000    -7.891829   -6.024947
             |
        year |
       1992  |   .1580065   .0135585    11.65   0.000      .131405    .1846081
       1993  |    .675756   .0072786    92.84   0.000     .6614755    .6900366
       1994  |   .6831844   .0106508    64.14   0.000     .6622876    .7040811
       1995  |    .423808   .0148643    28.51   0.000     .3946444    .4529716
       1996  |   .3726954   .0142832    26.09   0.000     .3446719    .4007189
       1997  |   .3968036   .0125952    31.50   0.000     .3720919    .4215152
       1998  |   .3526121   .0141336    24.95   0.000     .3248822    .3803421
       1999  |   .3335049   .0136485    24.44   0.000     .3067266    .3602831
       2000  |   .3436773   .0130682    26.30   0.000     .3180376     .369317
       2001  |   .3336742   .0121775    27.40   0.000     .3097821    .3575663
       2002  |   .7393297   .0143359    51.57   0.000     .7112028    .7674567
       2003  |   .8553285   .0164172    52.10   0.000     .8231181    .8875389
       2004  |   .9887823   .0133735    73.94   0.000     .9625438    1.015021
       2005  |   .7942634   .0125905    63.08   0.000      .769561    .8189657
       2006  |   .6889562   .0148451    46.41   0.000     .6598303    .7180821
       2007  |   .6277501     .01386    45.29   0.000     .6005569    .6549432
       2008  |   .6411327   .0129192    49.63   0.000     .6157854      .66648
       2009  |   .9410908   .0142627    65.98   0.000     .9131075    .9690741
       2010  |    1.45524   .0354308    41.07   0.000     1.385725    1.524755
       2011  |   1.841672   .0167151   110.18   0.000     1.808877    1.874466
       2012  |   1.818434   .0164112   110.80   0.000     1.786235    1.850633
       2013  |   1.602887   .0172575    92.88   0.000     1.569027    1.636746
       2014  |   1.262786   .0148619    84.97   0.000     1.233628    1.291945
       2015  |   .7676475   .0167719    45.77   0.000     .7347412    .8005539
             |
       _cons |   8.213484   .0083096   988.44   0.000     8.197181    8.229787
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1174 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     30,550    8.910675    1.761343   1.098612   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     30,836    .0058853     .023125  -.1254411   .1306634
9170
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.000055 not found)
file /tmp/St18055.000055 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.000056 not found)
file /tmp/St18055.000056 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(915 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.000057 not found)
file /tmp/St18055.000057 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.000058 not found)
file /tmp/St18055.000058 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(31 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     29,250
                                                F(  25,   1169)   =    1849.16
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9792
                                                Adj R-squared     =     0.9784
                                                Root MSE          =     0.2575

                              (Std. Err. adjusted for 1,170 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -7.086085   .4686205   -15.12   0.000    -8.005516   -6.166653
             |
        year |
       1992  |    .154967   .0134401    11.53   0.000     .1285975    .1813365
       1993  |   .6759892    .007304    92.55   0.000     .6616588    .6903196
       1994  |   .6855939   .0105499    64.99   0.000     .6648951    .7062928
       1995  |   .4276678   .0146482    29.20   0.000     .3989281    .4564074
       1996  |   .3757701   .0142307    26.41   0.000     .3478494    .4036907
       1997  |    .399157   .0124886    31.96   0.000     .3746545    .4236596
       1998  |   .3555204   .0139317    25.52   0.000     .3281865    .3828542
       1999  |   .3360109   .0135257    24.84   0.000     .3094736    .3625482
       2000  |   .3451765   .0130506    26.45   0.000     .3195712    .3707818
       2001  |   .3360628   .0121193    27.73   0.000     .3122849    .3598408
       2002  |   .7407285   .0143736    51.53   0.000     .7125276    .7689294
       2003  |   .8521356   .0160911    52.96   0.000     .8205649    .8837062
       2004  |    .986068   .0132421    74.46   0.000      .960087    1.012049
       2005  |   .7943706   .0126517    62.79   0.000     .7695479    .8191933
       2006  |   .6902688   .0148949    46.34   0.000     .6610451    .7194926
       2007  |    .628976   .0139153    45.20   0.000     .6016743    .6562778
       2008  |   .6416741   .0129633    49.50   0.000     .6162402    .6671079
       2009  |   .9394308   .0142297    66.02   0.000     .9115121    .9673495
       2010  |   1.445691   .0348309    41.51   0.000     1.377353    1.514029
       2011  |   1.838709   .0165549   111.07   0.000     1.806228     1.87119
       2012  |   1.819925   .0164582   110.58   0.000     1.787634    1.852216
       2013  |   1.604688   .0172844    92.84   0.000     1.570776      1.6386
       2014  |   1.263985   .0148991    84.84   0.000     1.234753    1.293217
       2015  |    .769632   .0168071    45.79   0.000     .7366565    .8026074
             |
       _cons |   8.220982   .0083279   987.17   0.000     8.204643    8.237321
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1170 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     30,446    8.917826    1.756261   1.098612   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     30,680    .0059022    .0231066  -.1254411   .1306634
9175
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.00005a not found)
file /tmp/St18055.00005a saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.00005b not found)
file /tmp/St18055.00005b saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(915 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.00005c not found)
file /tmp/St18055.00005c saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.00005d not found)
file /tmp/St18055.00005d saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(31 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     29,075
                                                F(  25,   1162)   =    1855.87
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9794
                                                Adj R-squared     =     0.9785
                                                Root MSE          =     0.2571

                              (Std. Err. adjusted for 1,163 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -7.072682   .4696434   -15.06   0.000    -7.994126   -6.151238
             |
        year |
       1992  |    .155572    .013462    11.56   0.000     .1291595    .1819844
       1993  |   .6763091   .0073256    92.32   0.000     .6619361    .6906821
       1994  |   .6855207   .0105733    64.84   0.000     .6647758    .7062656
       1995  |    .428093   .0146845    29.15   0.000      .399282     .456904
       1996  |   .3760261   .0142576    26.37   0.000     .3480526    .4039996
       1997  |   .3994262   .0125192    31.91   0.000     .3748634    .4239889
       1998  |   .3556562    .013973    25.45   0.000      .328241    .3830714
       1999  |   .3363931   .0135564    24.81   0.000     .3097953    .3629909
       2000  |   .3461536   .0130996    26.42   0.000      .320452    .3718551
       2001  |   .3369101   .0121535    27.72   0.000     .3130649    .3607554
       2002  |   .7413183   .0144337    51.36   0.000     .7129992    .7696373
       2003  |   .8524164   .0160875    52.99   0.000     .8208527    .8839802
       2004  |   .9861996   .0132542    74.41   0.000     .9601947    1.012205
       2005  |   .7944255   .0126758    62.67   0.000     .7695554    .8192955
       2006  |    .690651   .0149385    46.23   0.000     .6613416    .7199603
       2007  |    .629384   .0139698    45.05   0.000     .6019751    .6567929
       2008  |   .6419075   .0130098    49.34   0.000     .6163822    .6674328
       2009  |   .9395264   .0142575    65.90   0.000     .9115531    .9674997
       2010  |      1.447   .0348099    41.57   0.000     1.378702    1.515297
       2011  |   1.839065   .0165195   111.33   0.000     1.806654    1.871476
       2012  |   1.819731   .0164887   110.36   0.000      1.78738    1.852082
       2013  |   1.603698   .0173518    92.42   0.000     1.569654    1.637742
       2014  |   1.263145    .014953    84.47   0.000     1.233807    1.292483
       2015  |    .768946    .016864    45.60   0.000     .7358588    .8020333
             |
       _cons |    8.22906   .0083419   986.48   0.000     8.212693    8.245427
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1163 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     30,264    8.926101    1.758003   1.098612   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     30,498    .0059142    .0231032  -.1254411   .1306634
9180
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.00005f not found)
file /tmp/St18055.00005f saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.00005g not found)
file /tmp/St18055.00005g saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(915 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.00005h not found)
file /tmp/St18055.00005h saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.00005i not found)
file /tmp/St18055.00005i saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(31 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     28,800
                                                F(  25,   1151)   =    1846.98
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9795
                                                Adj R-squared     =     0.9786
                                                Root MSE          =     0.2570

                              (Std. Err. adjusted for 1,152 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -7.117304    .483568   -14.72   0.000    -8.066078   -6.168531
             |
        year |
       1992  |   .1537577   .0137878    11.15   0.000     .1267056    .1808097
       1993  |   .6756002   .0073169    92.33   0.000     .6612442    .6899561
       1994  |   .6861912   .0107436    63.87   0.000      .665112    .7072704
       1995  |   .4294122   .0150266    28.58   0.000     .3999297    .4588948
       1996  |   .3768224   .0145925    25.82   0.000     .3481915    .4054533
       1997  |   .3998248   .0127635    31.33   0.000     .3747825     .424867
       1998  |   .3561004   .0142691    24.96   0.000     .3281041    .3840968
       1999  |   .3367694   .0138227    24.36   0.000     .3096488      .36389
       2000  |   .3464339   .0133048    26.04   0.000     .3203295    .3725383
       2001  |   .3368443   .0123149    27.35   0.000     .3126823    .3610064
       2002  |   .7407268   .0146323    50.62   0.000     .7120178    .7694357
       2003  |   .8508365   .0163038    52.19   0.000     .8188479     .882825
       2004  |   .9845422   .0133117    73.96   0.000     .9584244     1.01066
       2005  |   .7937083   .0127299    62.35   0.000     .7687318    .8186848
       2006  |    .690087   .0150654    45.81   0.000     .6605284    .7196457
       2007  |   .6284241   .0140848    44.62   0.000     .6007894    .6560588
       2008  |   .6402268   .0130569    49.03   0.000     .6146088    .6658447
       2009  |   .9368996   .0143285    65.39   0.000     .9087867    .9650125
       2010  |   1.442108   .0357181    40.37   0.000     1.372028    1.512188
       2011  |   1.836796   .0166668   110.21   0.000     1.804095    1.869497
       2012  |   1.818999   .0166005   109.57   0.000     1.786428     1.85157
       2013  |   1.603206   .0175343    91.43   0.000     1.568803    1.637608
       2014  |   1.262423    .015056    83.85   0.000     1.232883    1.291963
       2015  |   .7690338   .0170445    45.12   0.000      .735592    .8024755
             |
       _cons |   8.236859    .008331   988.70   0.000     8.220514    8.253205
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1152 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     29,978    8.932988    1.762067   1.098612   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     30,212    .0059226    .0230789  -.1254411   .1306634
9185
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.00005k not found)
file /tmp/St18055.00005k saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.00005l not found)
file /tmp/St18055.00005l saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(706 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.00005m not found)
file /tmp/St18055.00005m saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.00005n not found)
file /tmp/St18055.00005n saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(31 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     28,575
                                                F(  25,   1142)   =    1836.62
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9796
                                                Adj R-squared     =     0.9787
                                                Root MSE          =     0.2564

                              (Std. Err. adjusted for 1,143 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -7.134062   .4891604   -14.58   0.000    -8.093816   -6.174309
             |
        year |
       1992  |   .1533359   .0139051    11.03   0.000     .1260534    .1806184
       1993  |   .6760154   .0073287    92.24   0.000     .6616363    .6903946
       1994  |    .686812   .0108682    63.19   0.000     .6654882    .7081358
       1995  |   .4297525   .0152104    28.25   0.000      .399909     .459596
       1996  |   .3764215   .0147609    25.50   0.000     .3474599     .405383
       1997  |   .3990715   .0128802    30.98   0.000     .3738001    .4243429
       1998  |   .3552118   .0144247    24.63   0.000     .3269099    .3835136
       1999  |   .3357764   .0139521    24.07   0.000     .3084019    .3631509
       2000  |   .3455914    .013419    25.75   0.000     .3192628      .37192
       2001  |   .3368638   .0123162    27.35   0.000     .3126989    .3610287
       2002  |   .7394577   .0147084    50.27   0.000     .7105991    .7683164
       2003  |   .8495424   .0164498    51.64   0.000     .8172671    .8818176
       2004  |    .982273   .0133682    73.48   0.000     .9560441    1.008502
       2005  |   .7917929    .012762    62.04   0.000     .7667533    .8168326
       2006  |   .6875846   .0150718    45.62   0.000      .658013    .7171563
       2007  |   .6264079   .0140882    44.46   0.000     .5987663    .6540495
       2008  |   .6387544   .0130763    48.85   0.000     .6130981    .6644107
       2009  |   .9349956   .0143931    64.96   0.000     .9067556    .9632355
       2010  |    1.43951   .0360969    39.88   0.000     1.368686    1.510333
       2011  |   1.835499   .0167856   109.35   0.000     1.802565    1.868433
       2012  |   1.818509   .0166695   109.09   0.000     1.785803    1.851216
       2013  |   1.603252    .017626    90.96   0.000     1.568669    1.637835
       2014  |   1.262564   .0151448    83.37   0.000     1.232849    1.292278
       2015  |   .7692078   .0171527    44.84   0.000     .7355535     .802862
             |
       _cons |   8.248494   .0083658   985.98   0.000      8.23208    8.264908
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1143 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     29,744    8.943443    1.761936   1.098612   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     29,978    .0059589     .023075  -.1254411   .1306634
9190
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.00005p not found)
file /tmp/St18055.00005p saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.00005q not found)
file /tmp/St18055.00005q saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(706 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.00005r not found)
file /tmp/St18055.00005r saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.00005s not found)
file /tmp/St18055.00005s saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(31 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     28,350
                                                F(  25,   1133)   =    1827.81
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9798
                                                Adj R-squared     =     0.9789
                                                Root MSE          =     0.2546

                              (Std. Err. adjusted for 1,134 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -7.214175   .4903476   -14.71   0.000    -8.176267   -6.252084
             |
        year |
       1992  |    .151623    .013955    10.87   0.000     .1242424    .1790036
       1993  |   .6763136   .0073578    91.92   0.000     .6618772      .69075
       1994  |   .6881742   .0108818    63.24   0.000     .6668235    .7095249
       1995  |   .4315866   .0152591    28.28   0.000     .4016474    .4615258
       1996  |   .3779362   .0148054    25.53   0.000     .3488871    .4069854
       1997  |   .4006486   .0129445    30.95   0.000     .3752508    .4260464
       1998  |   .3577755   .0144641    24.74   0.000     .3293962    .3861549
       1999  |   .3378916   .0139902    24.15   0.000      .310442    .3653412
       2000  |   .3474351   .0134597    25.81   0.000     .3210265    .3738438
       2001  |   .3391268   .0122986    27.57   0.000     .3149962    .3632574
       2002  |    .743884   .0143597    51.80   0.000     .7157094    .7720586
       2003  |    .849655   .0165612    51.30   0.000     .8171609    .8821491
       2004  |   .9829472   .0134328    73.18   0.000     .9565912    1.009303
       2005  |   .7948855   .0125405    63.39   0.000     .7702802    .8194908
       2006  |   .6924461   .0145035    47.74   0.000     .6639893    .7209029
       2007  |   .6288161   .0140148    44.87   0.000     .6013182    .6563139
       2008  |   .6401172   .0130495    49.05   0.000     .6145132    .6657212
       2009  |   .9356346   .0144369    64.81   0.000     .9073086    .9639606
       2010  |   1.435589   .0363077    39.54   0.000     1.364351    1.506827
       2011  |   1.835255   .0168772   108.74   0.000     1.802141    1.868369
       2012  |   1.820691   .0166551   109.32   0.000     1.788013     1.85337
       2013  |   1.605969   .0175811    91.35   0.000     1.571474    1.640464
       2014  |   1.265118   .0150985    83.79   0.000     1.235494    1.294742
       2015  |   .7709637   .0171104    45.06   0.000      .737392    .8045354
             |
       _cons |   8.260999   .0083546   988.80   0.000     8.244607    8.277391
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1134 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     29,510     8.95676     1.75974   2.079442   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     29,744    .0059845    .0230542  -.1254411   .1306634
9195
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.00005u not found)
file /tmp/St18055.00005u saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.00005v not found)
file /tmp/St18055.00005v saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(706 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.00005w not found)
file /tmp/St18055.00005w saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.00005x not found)
file /tmp/St18055.00005x saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(31 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     28,150
                                                F(  25,   1125)   =    1810.89
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9799
                                                Adj R-squared     =     0.9791
                                                Root MSE          =     0.2542

                              (Std. Err. adjusted for 1,126 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -7.254061   .4950169   -14.65   0.000    -8.225321     -6.2828
             |
        year |
       1992  |    .151249   .0140602    10.76   0.000     .1236619    .1788362
       1993  |   .6768856   .0073912    91.58   0.000     .6623834    .6913877
       1994  |   .6895577   .0109598    62.92   0.000     .6680538    .7110617
       1995  |   .4332007   .0153762    28.17   0.000     .4030314      .46337
       1996  |   .3793913   .0149297    25.41   0.000     .3500981    .4086845
       1997  |   .4019123   .0130519    30.79   0.000     .3763034    .4275211
       1998  |   .3593124   .0145801    24.64   0.000     .3307052    .3879196
       1999  |   .3389763   .0140977    24.04   0.000     .3113156     .366637
       2000  |   .3481977   .0135509    25.70   0.000     .3216097    .3747857
       2001  |   .3403846   .0123682    27.52   0.000     .3161172     .364652
       2002  |   .7457954   .0144566    51.59   0.000     .7174303    .7741604
       2003  |   .8500143   .0166614    51.02   0.000     .8173235    .8827052
       2004  |   .9833825   .0134928    72.88   0.000     .9569087    1.009856
       2005  |     .79652   .0125858    63.29   0.000     .7718258    .8212142
       2006  |   .6942038   .0145659    47.66   0.000     .6656244    .7227833
       2007  |   .6304642   .0140752    44.79   0.000     .6028475    .6580808
       2008  |   .6418432   .0131014    48.99   0.000     .6161373    .6675491
       2009  |   .9369264   .0144999    64.62   0.000     .9084766    .9653762
       2010  |   1.433994   .0366134    39.17   0.000     1.362155    1.505832
       2011  |   1.836565   .0169551   108.32   0.000     1.803298    1.869833
       2012  |   1.823054   .0166726   109.34   0.000     1.790341    1.855767
       2013  |   1.608225    .017652    91.11   0.000      1.57359    1.642859
       2014  |   1.265857   .0151842    83.37   0.000     1.236064    1.295649
       2015  |    .771646   .0172229    44.80   0.000     .7378533    .8054386
             |
       _cons |   8.268647   .0083942   985.05   0.000     8.252177    8.285117
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1126 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     29,302    8.965082    1.763445   2.079442   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     29,536    .0060076    .0230391  -.1254411   .1306634
9200
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.000061 not found)
file /tmp/St18055.000061 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.000062 not found)
file /tmp/St18055.000062 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(706 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.000063 not found)
file /tmp/St18055.000063 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.000064 not found)
file /tmp/St18055.000064 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(31 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     27,850
                                                F(  25,   1113)   =    1790.34
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9798
                                                Adj R-squared     =     0.9790
                                                Root MSE          =     0.2532

                              (Std. Err. adjusted for 1,114 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -7.225204   .4951567   -14.59   0.000     -8.19675   -6.253658
             |
        year |
       1992  |    .151747   .0140946    10.77   0.000     .1240921    .1794019
       1993  |   .6762683   .0074185    91.16   0.000     .6617124    .6908242
       1994  |   .6893308    .010981    62.78   0.000     .6677851    .7108766
       1995  |   .4328797   .0153877    28.13   0.000     .4026874    .4630719
       1996  |   .3790484   .0149504    25.35   0.000     .3497142    .4083826
       1997  |   .4015743   .0130541    30.76   0.000      .375961    .4271876
       1998  |   .3586623   .0145752    24.61   0.000     .3300644    .3872602
       1999  |   .3397278   .0141258    24.05   0.000     .3120116    .3674439
       2000  |   .3488065    .013583    25.68   0.000     .3221553    .3754578
       2001  |   .3407175   .0123947    27.49   0.000      .316398     .365037
       2002  |   .7482362   .0145069    51.58   0.000     .7197722    .7767002
       2003  |   .8538331   .0165706    51.53   0.000     .8213199    .8863463
       2004  |   .9864587   .0134539    73.32   0.000     .9600609    1.012857
       2005  |   .7986837   .0126509    63.13   0.000     .7738614    .8235061
       2006  |   .6958334   .0146225    47.59   0.000     .6671426    .7245242
       2007  |   .6331108   .0141388    44.78   0.000      .605369    .6608526
       2008  |   .6456597   .0131434    49.12   0.000      .619871    .6714484
       2009  |   .9413821   .0144426    65.18   0.000     .9130444    .9697199
       2010  |   1.439079   .0365196    39.41   0.000     1.367424    1.510734
       2011  |   1.840564   .0169079   108.86   0.000     1.807389    1.873739
       2012  |   1.825753   .0167591   108.94   0.000      1.79287    1.858636
       2013  |   1.610937   .0177617    90.70   0.000     1.576087    1.645787
       2014  |   1.268508   .0152547    83.16   0.000     1.238577    1.298439
       2015  |   .7738671   .0173046    44.72   0.000     .7399137    .8078204
             |
       _cons |   8.292653   .0084204   984.83   0.000     8.276132    8.309175
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1114 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     28,990    8.990796      1.7523   2.079442   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     29,224    .0060163    .0230315  -.1254411   .1306634
9205
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.000066 not found)
file /tmp/St18055.000066 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.000067 not found)
file /tmp/St18055.000067 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(500 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.000068 not found)
file /tmp/St18055.000068 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.000069 not found)
file /tmp/St18055.000069 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(31 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     27,525
                                                F(  25,   1100)   =    1767.92
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9798
                                                Adj R-squared     =     0.9789
                                                Root MSE          =     0.2529

                              (Std. Err. adjusted for 1,101 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |   -7.26431   .4984023   -14.58   0.000    -8.242236   -6.286383
             |
        year |
       1992  |   .1510995   .0142034    10.64   0.000     .1232306    .1789683
       1993  |   .6766117   .0074579    90.72   0.000     .6619784    .6912449
       1994  |   .6905669   .0110815    62.32   0.000     .6688236    .7123101
       1995  |   .4341239   .0154488    28.10   0.000     .4038115    .4644363
       1996  |   .3808585   .0150137    25.37   0.000     .3513997    .4103173
       1997  |   .4031898    .013091    30.80   0.000     .3775037     .428876
       1998  |   .3603611    .014587    24.70   0.000     .3317396    .3889827
       1999  |   .3410967   .0141415    24.12   0.000     .3133493    .3688441
       2000  |   .3492613    .013653    25.58   0.000     .3224724    .3760502
       2001  |   .3404469    .012411    27.43   0.000      .316095    .3647988
       2002  |   .7498401    .014606    51.34   0.000     .7211813    .7784989
       2003  |   .8536018   .0166511    51.26   0.000     .8209303    .8862732
       2004  |   .9866309     .01352    72.98   0.000      .960103    1.013159
       2005  |   .7998336   .0127325    62.82   0.000     .7748508    .8248163
       2006  |   .6970003   .0146774    47.49   0.000     .6682016    .7257991
       2007  |   .6349889   .0142048    44.70   0.000     .6071173    .6628604
       2008  |   .6473519   .0132136    48.99   0.000     .6214251    .6732787
       2009  |   .9426196   .0145436    64.81   0.000     .9140832     .971156
       2010  |   1.437579   .0368246    39.04   0.000     1.365324    1.509833
       2011  |   1.841018   .0170197   108.17   0.000     1.807623    1.874413
       2012  |    1.82737   .0168659   108.35   0.000     1.794277    1.860463
       2013  |   1.613435   .0178931    90.17   0.000     1.578326    1.648543
       2014  |   1.270704   .0153667    82.69   0.000     1.240552    1.300855
       2015  |   .7762569   .0174575    44.47   0.000     .7420032    .8105106
             |
       _cons |   8.303245    .008464   981.01   0.000     8.286638    8.319853
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1101 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     28,652    9.001971    1.746957   2.079442   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     28,886    .0060498    .0230139  -.1254411   .1306634
9210
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.00006b not found)
file /tmp/St18055.00006b saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.00006c not found)
file /tmp/St18055.00006c saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(1 missing value generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.00006d not found)
file /tmp/St18055.00006d saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.00006e not found)
file /tmp/St18055.00006e saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(31 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     27,300
                                                F(  25,   1091)   =    1751.01
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9797
                                                Adj R-squared     =     0.9788
                                                Root MSE          =     0.2526

                              (Std. Err. adjusted for 1,092 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -7.410247   .5056114   -14.66   0.000    -8.402328   -6.418166
             |
        year |
       1992  |   .1467106   .0143908    10.19   0.000     .1184739    .1749473
       1993  |   .6760531   .0074847    90.32   0.000      .661367    .6907392
       1994  |   .6914546   .0112531    61.45   0.000     .6693743    .7135348
       1995  |    .436283   .0157348    27.73   0.000      .405409     .467157
       1996  |   .3832868   .0153355    24.99   0.000     .3531964    .4133771
       1997  |   .4055629   .0133172    30.45   0.000     .3794326    .4316932
       1998  |   .3628409   .0147963    24.52   0.000     .3338086    .3918733
       1999  |    .343145   .0143718    23.88   0.000     .3149455    .3713445
       2000  |   .3508488   .0138235    25.38   0.000     .3237252    .3779724
       2001  |   .3426483   .0124179    27.59   0.000     .3182827     .367014
       2002  |   .7512823   .0147086    51.08   0.000     .7224219    .7801427
       2003  |   .8486436    .016839    50.40   0.000     .8156032    .8816841
       2004  |   .9826651   .0135344    72.61   0.000     .9561088    1.009221
       2005  |   .8000024   .0128135    62.43   0.000     .7748605    .8251444
       2006  |   .6982037   .0147785    47.24   0.000     .6692062    .7272012
       2007  |   .6357414   .0142783    44.52   0.000     .6077254    .6637575
       2008  |   .6475981   .0132703    48.80   0.000     .6215598    .6736363
       2009  |   .9401396   .0145895    64.44   0.000     .9115129    .9687663
       2010  |   1.425854   .0373158    38.21   0.000     1.352636    1.499073
       2011  |    1.83708   .0171499   107.12   0.000     1.803429     1.87073
       2012  |   1.828391   .0169607   107.80   0.000     1.795112     1.86167
       2013  |   1.615607   .0180141    89.69   0.000     1.580261    1.650954
       2014  |   1.272046   .0154363    82.41   0.000     1.241758    1.302334
       2015  |   .7771871   .0175402    44.31   0.000     .7427709    .8116034
             |
       _cons |   8.318498   .0084824   980.68   0.000     8.301854    8.335141
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1092 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     28,418    9.016203    1.740032   2.079442   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     28,652    .0060528     .022985  -.1191017   .1306634
9215
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.00006g not found)
file /tmp/St18055.00006g saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.00006h not found)
file /tmp/St18055.00006h saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(1 missing value generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.00006i not found)
file /tmp/St18055.00006i saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.00006j not found)
file /tmp/St18055.00006j saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(31 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     27,050
                                                F(  25,   1081)   =    1747.29
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9795
                                                Adj R-squared     =     0.9786
                                                Root MSE          =     0.2525

                              (Std. Err. adjusted for 1,082 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -7.457421   .5096368   -14.63   0.000     -8.45741   -6.457431
             |
        year |
       1992  |   .1456603   .0144799    10.06   0.000     .1172484    .1740721
       1993  |   .6760035   .0074746    90.44   0.000     .6613371    .6906698
       1994  |   .6918984   .0112991    61.23   0.000     .6697277    .7140691
       1995  |   .4370289   .0158286    27.61   0.000     .4059707    .4680871
       1996  |   .3832801   .0154262    24.85   0.000     .3530115    .4135488
       1997  |   .4051856   .0133864    30.27   0.000     .3789193     .431452
       1998  |   .3623477   .0148708    24.37   0.000     .3331688    .3915265
       1999  |    .342587   .0144375    23.73   0.000     .3142584    .3709157
       2000  |   .3498558   .0138978    25.17   0.000     .3225862    .3771255
       2001  |   .3417006   .0124774    27.39   0.000      .317218    .3661832
       2002  |   .7506846   .0147599    50.86   0.000     .7217234    .7796458
       2003  |   .8461436   .0169226    50.00   0.000     .8129388    .8793484
       2004  |   .9808917   .0135446    72.42   0.000      .954315    1.007468
       2005  |   .7986777   .0128119    62.34   0.000     .7735386    .8238168
       2006  |   .6967358   .0148131    47.04   0.000     .6676701    .7258014
       2007  |   .6347404   .0143191    44.33   0.000     .6066441    .6628368
       2008  |   .6463468   .0133005    48.60   0.000      .620249    .6724447
       2009  |   .9386538   .0146451    64.09   0.000     .9099178    .9673899
       2010  |   1.421702   .0375929    37.82   0.000     1.347939    1.495465
       2011  |   1.835941   .0172115   106.67   0.000     1.802169    1.869713
       2012  |   1.828823   .0170134   107.49   0.000      1.79544    1.862206
       2013  |   1.615874   .0180694    89.43   0.000     1.580419    1.651329
       2014  |    1.27086   .0154422    82.30   0.000      1.24056     1.30116
       2015  |   .7753479   .0175936    44.07   0.000     .7408265    .8098694
             |
       _cons |   8.340045   .0084692   984.75   0.000     8.323427    8.356663
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1082 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     28,158    9.036625    1.732794   2.079442   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     28,392    .0060514    .0229891  -.1191017   .1306634
9220
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.00006l not found)
file /tmp/St18055.00006l saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.00006m not found)
file /tmp/St18055.00006m saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(1 missing value generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.00006n not found)
file /tmp/St18055.00006n saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.00006o not found)
file /tmp/St18055.00006o saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(31 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     26,775
                                                F(  25,   1070)   =    1741.15
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9798
                                                Adj R-squared     =     0.9790
                                                Root MSE          =     0.2518

                              (Std. Err. adjusted for 1,071 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -7.459855   .5108012   -14.60   0.000    -8.462141   -6.457569
             |
        year |
       1992  |   .1455388   .0145148    10.03   0.000      .117058    .1740195
       1993  |   .6754289   .0074582    90.56   0.000     .6607946    .6900632
       1994  |   .6914262   .0112532    61.44   0.000     .6693453    .7135071
       1995  |   .4370204   .0158301    27.61   0.000     .4059587     .468082
       1996  |   .3826891   .0154266    24.81   0.000     .3524193     .412959
       1997  |   .4048977   .0133753    30.27   0.000     .3786529    .4311424
       1998  |   .3622667   .0148792    24.35   0.000     .3330709    .3914624
       1999  |   .3429071   .0144644    23.71   0.000     .3145253    .3712888
       2000  |   .3507251   .0139536    25.14   0.000     .3233456    .3781046
       2001  |   .3417902   .0125306    27.28   0.000     .3172028    .3663776
       2002  |   .7507765   .0147974    50.74   0.000     .7217412    .7798118
       2003  |   .8464037   .0170012    49.78   0.000     .8130442    .8797632
       2004  |   .9807568   .0136248    71.98   0.000     .9540225    1.007491
       2005  |   .7987637   .0128701    62.06   0.000     .7735102    .8240173
       2006  |   .6968134   .0148857    46.81   0.000     .6676049    .7260219
       2007  |   .6340555   .0143921    44.06   0.000     .6058155    .6622955
       2008  |   .6451923   .0133516    48.32   0.000     .6189939    .6713907
       2009  |   .9370681   .0147097    63.70   0.000     .9082049    .9659313
       2010  |   1.420313   .0377152    37.66   0.000     1.346309    1.494318
       2011  |   1.834639   .0173049   106.02   0.000     1.800683    1.868594
       2012  |   1.827727   .0170396   107.26   0.000     1.794292    1.861162
       2013  |   1.614465   .0180969    89.21   0.000     1.578955    1.649974
       2014  |   1.269616   .0154788    82.02   0.000     1.239244    1.299988
       2015  |   .7744332   .0176357    43.91   0.000     .7398287    .8090378
             |
       _cons |   8.343892   .0084971   981.97   0.000     8.327219    8.360565
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1071 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     27,872    9.039937    1.741533   2.079442   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     28,106    .0060731     .022977  -.1191017   .1306634
9225
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.00006q not found)
file /tmp/St18055.00006q saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.00006r not found)
file /tmp/St18055.00006r saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(1 missing value generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.00006s not found)
file /tmp/St18055.00006s saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.00006t not found)
file /tmp/St18055.00006t saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(31 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     26,500
                                                F(  25,   1059)   =    1728.62
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9799
                                                Adj R-squared     =     0.9790
                                                Root MSE          =     0.2516

                              (Std. Err. adjusted for 1,060 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -7.571653   .5182293   -14.61   0.000    -8.588525    -6.55478
             |
        year |
       1992  |   .1427948   .0147294     9.69   0.000     .1138928    .1716969
       1993  |   .6760499   .0075074    90.05   0.000     .6613188     .690781
       1994  |   .6940342   .0113548    61.12   0.000     .6717536    .7163147
       1995  |   .4404507    .016023    27.49   0.000     .4090102    .4718912
       1996  |   .3857688   .0156082    24.72   0.000     .3551424    .4163953
       1997  |   .4071002   .0135204    30.11   0.000     .3805703      .43363
       1998  |   .3650878   .0150147    24.32   0.000     .3356258    .3945498
       1999  |   .3444652   .0145562    23.66   0.000      .315903    .3730274
       2000  |   .3526073   .0140673    25.07   0.000     .3250043    .3802103
       2001  |   .3436125   .0126293    27.21   0.000     .3188312    .3683938
       2002  |    .753825   .0149231    50.51   0.000     .7245428    .7831072
       2003  |   .8451254   .0171774    49.20   0.000     .8114198    .8788309
       2004  |   .9810139   .0137379    71.41   0.000     .9540573    1.007971
       2005  |   .8009069   .0129619    61.79   0.000      .775473    .8263407
       2006  |   .6999927   .0149908    46.69   0.000     .6705777    .7294077
       2007  |   .6372496   .0144646    44.06   0.000      .608867    .6656322
       2008  |   .6474536   .0134099    48.28   0.000     .6211407    .6737665
       2009  |    .937367    .014801    63.33   0.000     .9083243    .9664096
       2010  |   1.414772   .0382665    36.97   0.000     1.339685    1.489858
       2011  |   1.833924   .0174733   104.96   0.000     1.799638     1.86821
       2012  |   1.829389   .0171261   106.82   0.000     1.795784    1.862994
       2013  |   1.617027   .0182163    88.77   0.000     1.581282    1.652771
       2014  |   1.271925    .015588    81.60   0.000     1.241338    1.302512
       2015  |   .7782236   .0177904    43.74   0.000     .7433151     .813132
             |
       _cons |   8.354194   .0085356   978.75   0.000     8.337445    8.370942
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1060 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     27,586    9.050946     1.74418   2.079442   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     27,820    .0060849    .0229516  -.1191017   .1306634
9230
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.00006v not found)
file /tmp/St18055.00006v saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.00006w not found)
file /tmp/St18055.00006w saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(1 missing value generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.00006x not found)
file /tmp/St18055.00006x saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.000070 not found)
file /tmp/St18055.000070 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(31 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     26,275
                                                F(  25,   1050)   =    1713.67
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9799
                                                Adj R-squared     =     0.9790
                                                Root MSE          =     0.2517

                              (Std. Err. adjusted for 1,051 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -7.630941   .5241231   -14.56   0.000    -8.659389   -6.602493
             |
        year |
       1992  |   .1416708   .0148946     9.51   0.000     .1124441    .1708974
       1993  |   .6759831   .0075575    89.45   0.000     .6611535    .6908127
       1994  |   .6955204   .0114473    60.76   0.000     .6730582    .7179825
       1995  |   .4426888   .0161732    27.37   0.000     .4109533    .4744243
       1996  |   .3883027   .0157506    24.65   0.000     .3573965    .4192089
       1997  |   .4092249   .0136301    30.02   0.000     .3824796    .4359702
       1998  |   .3673143   .0151492    24.25   0.000     .3375881    .3970405
       1999  |    .346631   .0146809    23.61   0.000     .3178237    .3754382
       2000  |   .3547988   .0141748    25.03   0.000     .3269847     .382613
       2001  |   .3454268   .0127196    27.16   0.000     .3204681    .3703854
       2002  |   .7564611   .0150211    50.36   0.000     .7269863    .7859358
       2003  |   .8458483   .0173047    48.88   0.000     .8118926    .8798039
       2004  |   .9825308   .0138089    71.15   0.000     .9554346    1.009627
       2005  |   .8033148   .0130252    61.67   0.000     .7777564    .8288732
       2006  |   .7027685   .0150791    46.61   0.000     .6731798    .7323572
       2007  |   .6389643   .0145513    43.91   0.000     .6104114    .6675172
       2008  |   .6488827   .0134878    48.11   0.000     .6224166    .6753489
       2009  |   .9381603   .0149061    62.94   0.000     .9089112    .9674095
       2010  |   1.412558   .0386925    36.51   0.000     1.336634    1.488481
       2011  |   1.835188   .0176034   104.25   0.000     1.800646     1.86973
       2012  |   1.832531   .0172163   106.44   0.000     1.798748    1.866313
       2013  |   1.620121   .0183383    88.35   0.000     1.584137    1.656105
       2014  |   1.274219   .0156912    81.21   0.000     1.243429    1.305009
       2015  |    .781128   .0179164    43.60   0.000     .7459719    .8162841
             |
       _cons |   8.363991   .0085797   974.86   0.000     8.347156    8.380827
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1051 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     27,352    9.061944    1.744304   2.079442   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     27,586    .0060948     .022955  -.1191017   .1306634
9235
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.000072 not found)
file /tmp/St18055.000072 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.000073 not found)
file /tmp/St18055.000073 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(1 missing value generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.000074 not found)
file /tmp/St18055.000074 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.000075 not found)
file /tmp/St18055.000075 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(31 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     25,975
                                                F(  25,   1038)   =    1709.98
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9796
                                                Adj R-squared     =     0.9788
                                                Root MSE          =     0.2510

                              (Std. Err. adjusted for 1,039 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |   -7.63282    .528872   -14.43   0.000      -8.6706    -6.59504
             |
        year |
       1992  |    .142605   .0149954     9.51   0.000     .1131803    .1720298
       1993  |   .6763275   .0075671    89.38   0.000      .661479     .691176
       1994  |    .696474   .0115567    60.27   0.000     .6737968    .7191512
       1995  |    .443232   .0163482    27.11   0.000     .4111527    .4753112
       1996  |   .3886221   .0159023    24.44   0.000     .3574178    .4198264
       1997  |   .4095445   .0137456    29.79   0.000     .3825721     .436517
       1998  |   .3676842   .0152933    24.04   0.000     .3376749    .3976936
       1999  |   .3466199   .0148358    23.36   0.000     .3175084    .3757313
       2000  |   .3543135   .0142748    24.82   0.000     .3263028    .3823243
       2001  |   .3461527   .0128085    27.03   0.000     .3210192    .3712862
       2002  |   .7584432   .0150599    50.36   0.000     .7288919    .7879945
       2003  |   .8470786   .0174746    48.47   0.000      .812789    .8813681
       2004  |    .982939   .0138486    70.98   0.000     .9557646    1.010113
       2005  |   .8046076   .0130868    61.48   0.000     .7789281    .8302871
       2006  |   .7044776   .0151623    46.46   0.000     .6747254    .7342298
       2007  |   .6403138   .0146362    43.75   0.000      .611594    .6690336
       2008  |   .6500933   .0135297    48.05   0.000     .6235445     .676642
       2009  |   .9404612   .0149799    62.78   0.000     .9110669    .9698554
       2010  |   1.413998   .0390384    36.22   0.000     1.337395    1.490601
       2011  |   1.837342   .0176986   103.81   0.000     1.802613    1.872071
       2012  |   1.834996   .0173064   106.03   0.000     1.801036    1.868955
       2013  |   1.622545   .0184588    87.90   0.000     1.586324    1.658765
       2014  |   1.275376   .0157953    80.74   0.000     1.244381     1.30637
       2015  |   .7812526   .0180685    43.24   0.000     .7457977    .8167075
             |
       _cons |   8.387417   .0086303   971.85   0.000     8.370482    8.404352
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1039 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     27,040    9.086354    1.728846   2.079442   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     27,274    .0060901    .0229628  -.1191017   .1306634
9240
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.000077 not found)
file /tmp/St18055.000077 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.000078 not found)
file /tmp/St18055.000078 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(1 missing value generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.000079 not found)
file /tmp/St18055.000079 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.00007a not found)
file /tmp/St18055.00007a saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(31 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     25,725
                                                F(  25,   1028)   =    1725.31
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9795
                                                Adj R-squared     =     0.9787
                                                Root MSE          =     0.2506

                              (Std. Err. adjusted for 1,029 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -7.667848   .5362047   -14.30   0.000    -8.720029   -6.615668
             |
        year |
       1992  |   .1425485   .0151864     9.39   0.000     .1127485    .1723485
       1993  |   .6772432   .0075725    89.43   0.000     .6623838    .6921026
       1994  |   .6976497   .0116516    59.88   0.000     .6747861    .7205134
       1995  |   .4434114   .0165412    26.81   0.000     .4109531    .4758698
       1996  |   .3886313   .0160821    24.17   0.000     .3570738    .4201889
       1997  |   .4088836   .0138738    29.47   0.000     .3816595    .4361077
       1998  |   .3679693   .0154475    23.82   0.000      .337657    .3982816
       1999  |   .3468514   .0149937    23.13   0.000     .3174296    .3762731
       2000  |   .3544332   .0144231    24.57   0.000     .3261311    .3827353
       2001  |   .3459103   .0129041    26.81   0.000     .3205889    .3712316
       2002  |   .7576724   .0151669    49.96   0.000     .7279108    .7874339
       2003  |   .8447512   .0176237    47.93   0.000     .8101686    .8793337
       2004  |   .9808352   .0139472    70.33   0.000      .953467    1.008203
       2005  |   .8034883   .0131699    61.01   0.000     .7776453    .8293313
       2006  |   .7038747   .0152577    46.13   0.000     .6739349    .7338145
       2007  |   .6398336   .0147071    43.51   0.000     .6109743     .668693
       2008  |   .6498077   .0136037    47.77   0.000     .6231135    .6765018
       2009  |   .9397666   .0151062    62.21   0.000      .910124    .9694092
       2010  |   1.409763   .0395546    35.64   0.000     1.332146     1.48738
       2011  |   1.834429   .0178206   102.94   0.000      1.79946    1.869397
       2012  |   1.833801   .0174146   105.30   0.000     1.799629    1.867973
       2013  |   1.621934   .0186074    87.17   0.000     1.585421    1.658447
       2014  |   1.274619   .0159217    80.06   0.000     1.243376    1.305862
       2015  |    .780344    .018241    42.78   0.000     .7445502    .8161379
             |
       _cons |   8.408177   .0086742   969.33   0.000     8.391156    8.425199
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1029 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     26,780    9.106294    1.721893   2.079442   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     27,014    .0060855    .0229573  -.1191017   .1306634
9245
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.00007c not found)
file /tmp/St18055.00007c saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.00007d not found)
file /tmp/St18055.00007d saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(1 missing value generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.00007e not found)
file /tmp/St18055.00007e saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.00007f not found)
file /tmp/St18055.00007f saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(31 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     25,550
                                                F(  25,   1021)   =    1729.41
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9794
                                                Adj R-squared     =     0.9785
                                                Root MSE          =     0.2496

                              (Std. Err. adjusted for 1,022 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -7.643072   .5445808   -14.03   0.000    -8.711697   -6.574446
             |
        year |
       1992  |   .1436612    .015385     9.34   0.000     .1134715     .173851
       1993  |   .6777332    .007387    91.75   0.000     .6632378    .6922286
       1994  |   .6968252   .0116794    59.66   0.000     .6739068    .7197437
       1995  |   .4425637   .0167367    26.44   0.000     .4097213     .475406
       1996  |   .3877495   .0162437    23.87   0.000     .3558746    .4196244
       1997  |   .4079162   .0139951    29.15   0.000     .3804538    .4353787
       1998  |   .3674244   .0156259    23.51   0.000     .3367618     .398087
       1999  |   .3463382   .0151421    22.87   0.000      .316625    .3760513
       2000  |   .3545009   .0145201    24.41   0.000     .3260083    .3829935
       2001  |   .3462984   .0130006    26.64   0.000     .3207874    .3718095
       2002  |   .7563908   .0152899    49.47   0.000     .7263876    .7863939
       2003  |   .8450347   .0178133    47.44   0.000     .8100799    .8799895
       2004  |   .9808184   .0140529    69.79   0.000     .9532426    1.008394
       2005  |   .8028995   .0131945    60.85   0.000     .7770081    .8287909
       2006  |   .7038057   .0153271    45.92   0.000     .6737296    .7338819
       2007  |    .639587   .0147893    43.25   0.000     .6105662    .6686078
       2008  |   .6494839   .0136326    47.64   0.000     .6227328    .6762351
       2009  |   .9401468    .015191    61.89   0.000     .9103377     .969956
       2010  |     1.4115   .0402079    35.11   0.000       1.3326    1.490399
       2011  |   1.834621   .0179941   101.96   0.000     1.799311     1.86993
       2012  |   1.833782   .0174969   104.81   0.000     1.799448    1.868116
       2013  |   1.621212   .0187458    86.48   0.000     1.584427    1.657996
       2014  |   1.273732   .0160044    79.59   0.000     1.242327    1.305137
       2015  |   .7787002   .0183625    42.41   0.000     .7426676    .8147329
             |
       _cons |   8.421422   .0086909   968.99   0.000     8.404368    8.438476
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1022 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     26,598    9.119493    1.709546   2.079442   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     26,832    .0060812    .0229526  -.1191017   .1306634
9250
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.00007h not found)
file /tmp/St18055.00007h saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.00007i not found)
file /tmp/St18055.00007i saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(1 missing value generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.00007j not found)
file /tmp/St18055.00007j saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.00007k not found)
file /tmp/St18055.00007k saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(31 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     25,425
                                                F(  25,   1016)   =    1723.76
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9794
                                                Adj R-squared     =     0.9785
                                                Root MSE          =     0.2491

                              (Std. Err. adjusted for 1,017 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -7.602393    .544682   -13.96   0.000    -8.671223   -6.533562
             |
        year |
       1992  |   .1444532   .0153697     9.40   0.000     .1142932    .1746133
       1993  |   .6766537   .0073802    91.69   0.000     .6621716    .6911358
       1994  |   .6955322   .0116762    59.57   0.000     .6726199    .7184444
       1995  |   .4412734   .0167471    26.35   0.000     .4084104    .4741363
       1996  |   .3867054   .0162475    23.80   0.000     .3548229    .4185879
       1997  |   .4077233   .0140133    29.10   0.000      .380225    .4352216
       1998  |    .366805   .0156273    23.47   0.000     .3361394    .3974705
       1999  |    .345859   .0151623    22.81   0.000     .3161061     .375612
       2000  |   .3542995   .0145352    24.38   0.000     .3257771     .382822
       2001  |   .3473061   .0130195    26.68   0.000     .3217579    .3728544
       2002  |   .7567018    .015328    49.37   0.000     .7266237    .7867799
       2003  |   .8457691    .017848    47.39   0.000     .8107459    .8807922
       2004  |   .9805155   .0140904    69.59   0.000     .9528659    1.008165
       2005  |   .8024393   .0132188    60.70   0.000        .7765    .8283785
       2006  |    .703605   .0153539    45.83   0.000      .673476    .7337341
       2007  |   .6392501   .0148154    43.15   0.000     .6101777    .6683224
       2008  |   .6492788   .0136676    47.51   0.000     .6224589    .6760987
       2009  |   .9401535   .0152372    61.70   0.000     .9102536    .9700534
       2010  |   1.413214   .0402401    35.12   0.000      1.33425    1.492177
       2011  |   1.834135    .018031   101.72   0.000     1.798752    1.869517
       2012  |   1.832524   .0175035   104.69   0.000     1.798177    1.866871
       2013  |   1.619942   .0187386    86.45   0.000     1.583171    1.656712
       2014  |    1.27289   .0160061    79.53   0.000     1.241481    1.304299
       2015  |   .7772224   .0183363    42.39   0.000      .741241    .8132038
             |
       _cons |   8.430798   .0087114   967.79   0.000     8.413703    8.447892
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1017 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     26,468    9.128706    1.705674   2.079442   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     26,702    .0060891    .0229487  -.1191017   .1306634
9255
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.00007m not found)
file /tmp/St18055.00007m saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.00007n not found)
file /tmp/St18055.00007n saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(1 missing value generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.00007o not found)
file /tmp/St18055.00007o saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.00007p not found)
file /tmp/St18055.00007p saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(31 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     25,175
                                                F(  25,   1006)   =    1717.49
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9795
                                                Adj R-squared     =     0.9786
                                                Root MSE          =     0.2487

                              (Std. Err. adjusted for 1,007 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -7.610593   .5489403   -13.86   0.000    -8.687792   -6.533394
             |
        year |
       1992  |   .1452464   .0154568     9.40   0.000      .114915    .1755777
       1993  |   .6782572   .0073799    91.91   0.000     .6637755    .6927388
       1994  |   .6968565   .0117174    59.47   0.000     .6738632    .7198499
       1995  |   .4412137   .0168459    26.19   0.000     .4081565    .4742708
       1996  |   .3859459   .0163438    23.61   0.000     .3538741    .4180177
       1997  |   .4069397   .0140992    28.86   0.000     .3792724    .4346069
       1998  |   .3656548   .0157285    23.25   0.000     .3347903    .3965192
       1999  |   .3449219   .0152458    22.62   0.000     .3150047    .3748392
       2000  |   .3536138   .0146237    24.18   0.000     .3249174    .3823103
       2001  |   .3461588   .0130885    26.45   0.000      .320475    .3718426
       2002  |   .7560298   .0154128    49.05   0.000     .7257849    .7862748
       2003  |   .8453375   .0179442    47.11   0.000     .8101251    .8805499
       2004  |    .980558   .0141515    69.29   0.000     .9527881    1.008328
       2005  |   .8022513   .0132484    60.55   0.000     .7762537    .8282489
       2006  |   .7028661   .0153978    45.65   0.000     .6726506    .7330815
       2007  |   .6380329   .0148505    42.96   0.000     .6088915    .6671744
       2008  |   .6475989   .0136702    47.37   0.000     .6207735    .6744244
       2009  |   .9394148   .0152858    61.46   0.000     .9094191    .9694106
       2010  |   1.413356   .0405188    34.88   0.000     1.333845    1.492867
       2011  |   1.834963    .018119   101.27   0.000     1.799408    1.870518
       2012  |   1.833782   .0175505   104.49   0.000     1.799343    1.868222
       2013  |   1.621284   .0187902    86.28   0.000     1.584411    1.658156
       2014  |   1.273988   .0160365    79.44   0.000     1.242519    1.305457
       2015  |    .777331   .0183835    42.28   0.000     .7412566    .8134054
             |
       _cons |   8.438979    .008724   967.33   0.000     8.421859    8.456098
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1007 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     26,208      9.1366    1.707595   2.079442   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     26,442    .0061119    .0229343  -.1191017   .1306634
9260
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.00007r not found)
file /tmp/St18055.00007r saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.00007s not found)
file /tmp/St18055.00007s saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(1 missing value generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.00007t not found)
file /tmp/St18055.00007t saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.00007u not found)
file /tmp/St18055.00007u saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(31 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     24,875
                                                F(  25,    994)   =    1718.51
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9794
                                                Adj R-squared     =     0.9786
                                                Root MSE          =     0.2482

                                (Std. Err. adjusted for 995 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -7.686969   .5533256   -13.89   0.000    -8.772789   -6.601149
             |
        year |
       1992  |   .1438308   .0155988     9.22   0.000     .1132204    .1744412
       1993  |   .6788889   .0073665    92.16   0.000     .6644331    .6933446
       1994  |   .6985053   .0116801    59.80   0.000     .6755848    .7214258
       1995  |   .4426257    .016828    26.30   0.000     .4096033    .4756481
       1996  |     .38741   .0162645    23.82   0.000     .3554933    .4193268
       1997  |    .408674   .0140075    29.18   0.000     .3811864    .4361617
       1998  |   .3671839   .0156485    23.46   0.000      .336476    .3978918
       1999  |   .3470361   .0151785    22.86   0.000     .3172505    .3768217
       2000  |   .3552368   .0146202    24.30   0.000     .3265468    .3839269
       2001  |   .3484537   .0130614    26.68   0.000     .3228226    .3740848
       2002  |   .7580219     .01544    49.09   0.000     .7277231    .7883207
       2003  |   .8442235   .0181494    46.52   0.000      .808608     .879839
       2004  |   .9795928   .0142904    68.55   0.000     .9515501    1.007636
       2005  |   .8033772   .0132804    60.49   0.000     .7773164     .829438
       2006  |    .704659   .0154259    45.68   0.000      .674388    .7349301
       2007  |   .6393126   .0148454    43.06   0.000     .6101807    .6684446
       2008  |   .6481613   .0137066    47.29   0.000     .6212642    .6750585
       2009  |   .9387166   .0153885    61.00   0.000     .9085189    .9689143
       2010  |   1.407793    .040917    34.41   0.000       1.3275    1.488087
       2011  |   1.833883   .0182768   100.34   0.000     1.798017    1.869749
       2012  |   1.836087   .0175623   104.55   0.000     1.801624     1.87055
       2013  |   1.623821   .0188105    86.33   0.000     1.586908    1.660734
       2014  |   1.275292   .0160718    79.35   0.000     1.243754    1.306831
       2015  |   .7788224   .0183832    42.37   0.000      .742748    .8148968
             |
       _cons |    8.46121   .0087328   968.90   0.000     8.444074    8.478347
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (995 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     25,896    9.159075    1.700901   2.079442   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     26,130    .0061199    .0229378  -.1191017   .1306634
9265
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.00007w not found)
file /tmp/St18055.00007w saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.00007x not found)
file /tmp/St18055.00007x saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(1 missing value generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.000080 not found)
file /tmp/St18055.000080 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.000081 not found)
file /tmp/St18055.000081 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(31 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     24,675
                                                F(  25,    986)   =    1711.68
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9793
                                                Adj R-squared     =     0.9784
                                                Root MSE          =     0.2481

                                (Std. Err. adjusted for 987 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -7.768691   .5642263   -13.77   0.000    -8.875913   -6.661469
             |
        year |
       1992  |   .1415502   .0158811     8.91   0.000     .1103855    .1727148
       1993  |   .6786334   .0074049    91.65   0.000     .6641022    .6931646
       1994  |   .6995746   .0118372    59.10   0.000     .6763457    .7228036
       1995  |   .4449833   .0171134    26.00   0.000     .4114005    .4785661
       1996  |   .3900766   .0165362    23.59   0.000     .3576263    .4225268
       1997  |   .4101733   .0142068    28.87   0.000     .3822943    .4380524
       1998  |   .3691773   .0158941    23.23   0.000     .3379872    .4003675
       1999  |   .3493138   .0153986    22.68   0.000     .3190959    .3795316
       2000  |   .3569498   .0147774    24.16   0.000     .3279511    .3859486
       2001  |   .3489259   .0132179    26.40   0.000     .3229874    .3748643
       2002  |   .7588279   .0156076    48.62   0.000        .7282    .7894559
       2003  |   .8417122   .0183673    45.83   0.000     .8056688    .8777556
       2004  |   .9785099   .0144002    67.95   0.000     .9502513    1.006768
       2005  |    .803884   .0133792    60.08   0.000     .7776289    .8301391
       2006  |   .7058723   .0155769    45.32   0.000     .6753046      .73644
       2007  |   .6406969   .0149716    42.79   0.000     .6113171    .6700768
       2008  |   .6484107   .0137741    47.07   0.000     .6213808    .6754405
       2009  |   .9376513   .0154351    60.75   0.000     .9073618    .9679408
       2010  |    1.40172   .0416217    33.68   0.000     1.320043    1.483398
       2011  |   1.832693   .0184158    99.52   0.000     1.796554    1.868831
       2012  |    1.83794   .0177152   103.75   0.000     1.803177    1.872704
       2013  |   1.626006   .0190263    85.46   0.000     1.588669    1.663342
       2014  |   1.276642   .0162171    78.72   0.000     1.244818    1.308466
       2015  |   .7804105   .0185943    41.97   0.000     .7439215    .8168995
             |
       _cons |   8.480033    .008759   968.15   0.000     8.462845    8.497222
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (987 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     25,688    9.178066    1.693144   2.079442   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     25,922    .0060989    .0229464  -.1191017   .1306634
9270
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.000083 not found)
file /tmp/St18055.000083 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.000084 not found)
file /tmp/St18055.000084 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(1 missing value generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.000085 not found)
file /tmp/St18055.000085 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.000086 not found)
file /tmp/St18055.000086 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(31 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     24,575
                                                F(  25,    982)   =    1711.33
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9793
                                                Adj R-squared     =     0.9784
                                                Root MSE          =     0.2477

                                (Std. Err. adjusted for 983 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -7.762842   .5662463   -13.71   0.000    -8.874034    -6.65165
             |
        year |
       1992  |   .1413626   .0159089     8.89   0.000     .1101432     .172582
       1993  |   .6779972   .0073582    92.14   0.000     .6635576    .6924369
       1994  |   .6983386   .0118087    59.14   0.000     .6751654    .7215117
       1995  |    .443173   .0170831    25.94   0.000     .4096493    .4766967
       1996  |   .3880695   .0164913    23.53   0.000     .3557072    .4204318
       1997  |   .4080467    .014117    28.90   0.000     .3803437    .4357496
       1998  |   .3673877   .0158254    23.22   0.000     .3363322    .3984431
       1999  |   .3475278   .0153143    22.69   0.000     .3174753    .3775803
       2000  |   .3549969   .0146521    24.23   0.000     .3262438    .3837499
       2001  |   .3468213   .0130383    26.60   0.000     .3212351    .3724076
       2002  |   .7570986   .0155024    48.84   0.000     .7266768    .7875203
       2003  |   .8407607   .0183036    45.93   0.000      .804842    .8766793
       2004  |   .9771925   .0142995    68.34   0.000     .9491313    1.005254
       2005  |   .8022942   .0132475    60.56   0.000     .7762976    .8282908
       2006  |   .7039135   .0154601    45.53   0.000     .6735749     .734252
       2007  |   .6391212   .0148531    43.03   0.000     .6099738    .6682685
       2008  |    .647186   .0136696    47.34   0.000      .620361    .6740109
       2009  |    .936777   .0153882    60.88   0.000     .9065794    .9669745
       2010  |     1.4014   .0417613    33.56   0.000     1.319448    1.483351
       2011  |   1.831797   .0184067    99.52   0.000     1.795676    1.867918
       2012  |   1.836564    .017648   104.07   0.000     1.801932    1.871196
       2013  |   1.624333   .0189481    85.73   0.000      1.58715    1.661517
       2014  |    1.27452   .0160768    79.28   0.000     1.242971    1.306069
       2015  |    .777866   .0185154    42.01   0.000     .7415316    .8142004
             |
       _cons |   8.490459   .0085851   988.97   0.000     8.473611    8.507306
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (983 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     25,584    9.187132    1.690122   2.079442   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     25,818    .0060981    .0229482  -.1191017   .1306634
9275
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.000088 not found)
file /tmp/St18055.000088 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.000089 not found)
file /tmp/St18055.000089 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(1 missing value generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.00008a not found)
file /tmp/St18055.00008a saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.00008b not found)
file /tmp/St18055.00008b saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(31 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     24,375
                                                F(  25,    974)   =    1735.35
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9792
                                                Adj R-squared     =     0.9783
                                                Root MSE          =     0.2470

                                (Std. Err. adjusted for 975 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -7.791352   .5860531   -13.29   0.000    -8.941425    -6.64128
             |
        year |
       1992  |   .1406652   .0164065     8.57   0.000     .1084691    .1728613
       1993  |   .6778539   .0073407    92.34   0.000     .6634484    .6922594
       1994  |   .6980631   .0120745    57.81   0.000     .6743681    .7217581
       1995  |   .4428524   .0175946    25.17   0.000     .4083246    .4773802
       1996  |    .387994   .0169791    22.85   0.000     .3546742    .4213137
       1997  |   .4080376   .0144677    28.20   0.000     .3796462     .436429
       1998  |   .3670132   .0162588    22.57   0.000      .335107    .3989194
       1999  |   .3474977   .0157179    22.11   0.000     .3166528    .3783426
       2000  |   .3553218   .0149722    23.73   0.000     .3259404    .3847032
       2001  |   .3478573   .0132424    26.27   0.000     .3218704    .3738441
       2002  |   .7590111   .0156982    48.35   0.000      .728205    .7898172
       2003  |   .8419507   .0186774    45.08   0.000     .8052981    .8786032
       2004  |   .9788112   .0141728    69.06   0.000     .9509984    1.006624
       2005  |   .8025341   .0133401    60.16   0.000     .7763554    .8287129
       2006  |   .7041866   .0156215    45.08   0.000     .6735308    .7348423
       2007  |   .6400416   .0149419    42.84   0.000     .6107196    .6693636
       2008  |   .6470051   .0137242    47.14   0.000     .6200727    .6739374
       2009  |     .93658   .0155211    60.34   0.000     .9061214    .9670387
       2010  |   1.399515   .0431272    32.45   0.000     1.314882    1.484148
       2011  |   1.831993   .0186156    98.41   0.000     1.795462    1.868525
       2012  |   1.837549   .0177851   103.32   0.000     1.802647     1.87245
       2013  |   1.624654   .0192209    84.53   0.000     1.586934    1.662373
       2014  |   1.274082   .0162479    78.42   0.000     1.242197    1.305967
       2015  |   .7769507    .018819    41.29   0.000     .7400202    .8138812
             |
       _cons |   8.504302   .0085844   990.67   0.000     8.487456    8.521148
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (975 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     25,376    9.201159    1.681699   2.302585   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     25,610    .0060728    .0229312  -.1191017   .1306634
9280
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.00008d not found)
file /tmp/St18055.00008d saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.00008e not found)
file /tmp/St18055.00008e saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(1 missing value generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.00008f not found)
file /tmp/St18055.00008f saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.00008g not found)
file /tmp/St18055.00008g saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(31 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     24,150
                                                F(  25,    965)   =    1714.39
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9792
                                                Adj R-squared     =     0.9783
                                                Root MSE          =     0.2470

                                (Std. Err. adjusted for 966 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -7.828333   .5933484   -13.19   0.000    -8.992735   -6.663931
             |
        year |
       1992  |   .1393888   .0166315     8.38   0.000     .1067508    .1720268
       1993  |   .6757735   .0073194    92.33   0.000     .6614097    .6901373
       1994  |   .6966908   .0121829    57.19   0.000     .6727828    .7205987
       1995  |   .4418495   .0177976    24.83   0.000      .406923    .4767759
       1996  |   .3872757   .0171833    22.54   0.000     .3535547    .4209966
       1997  |   .4073865    .014604    27.90   0.000     .3787271    .4360458
       1998  |   .3664447    .016429    22.30   0.000      .334204    .3986854
       1999  |   .3470571   .0158776    21.86   0.000     .3158985    .3782157
       2000  |   .3551314   .0151325    23.47   0.000      .325435    .3848278
       2001  |   .3483023   .0134024    25.99   0.000     .3220012    .3746034
       2002  |   .7584252   .0157545    48.14   0.000     .7275081    .7893423
       2003  |   .8400993   .0188648    44.53   0.000     .8030786    .8771201
       2004  |   .9768207   .0142624    68.49   0.000     .9488318     1.00481
       2005  |   .8011778   .0134322    59.65   0.000     .7748181    .8275375
       2006  |   .7030188   .0157585    44.61   0.000     .6720941    .7339436
       2007  |   .6399732   .0150613    42.49   0.000     .6104165    .6695298
       2008  |   .6470039   .0137867    46.93   0.000     .6199485    .6740594
       2009  |   .9361041   .0156384    59.86   0.000     .9054148    .9667934
       2010  |   1.396068   .0436958    31.95   0.000     1.310319    1.481818
       2011  |   1.829744    .018768    97.49   0.000     1.792913    1.866575
       2012  |   1.836494   .0179047   102.57   0.000     1.801357     1.87163
       2013  |   1.623027   .0193658    83.81   0.000     1.585024    1.661031
       2014  |   1.271972   .0163363    77.86   0.000     1.239913    1.304031
       2015  |   .7750006   .0189707    40.85   0.000     .7377719    .8122293
             |
       _cons |   8.517874   .0086172   988.47   0.000     8.500963    8.534784
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (966 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     25,142    9.213601    1.682091   2.302585   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     25,376    .0060527    .0229336  -.1191017   .1306634
9285
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.00008i not found)
file /tmp/St18055.00008i saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.00008j not found)
file /tmp/St18055.00008j saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(1 missing value generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.00008k not found)
file /tmp/St18055.00008k saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.00008l not found)
file /tmp/St18055.00008l saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(31 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     23,925
                                                F(  25,    956)   =    1738.21
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9792
                                                Adj R-squared     =     0.9783
                                                Root MSE          =     0.2467

                                (Std. Err. adjusted for 957 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -7.840531   .5974431   -13.12   0.000    -9.012982    -6.66808
             |
        year |
       1992  |   .1397697   .0167404     8.35   0.000     .1069176    .1726219
       1993  |    .676383   .0073672    91.81   0.000     .6619254    .6908407
       1994  |   .6970537   .0122604    56.85   0.000     .6729933    .7211141
       1995  |   .4423656   .0179042    24.71   0.000     .4072296    .4775016
       1996  |   .3878671   .0172954    22.43   0.000     .3539258    .4218085
       1997  |   .4080724   .0147009    27.76   0.000     .3792228    .4369221
       1998  |   .3670061   .0165384    22.19   0.000     .3345503    .3994619
       1999  |   .3472158   .0159729    21.74   0.000     .3158698    .3785619
       2000  |   .3553632   .0152246    23.34   0.000     .3254857    .3852408
       2001  |   .3475673   .0134677    25.81   0.000     .3211378    .3739969
       2002  |   .7588887   .0158788    47.79   0.000     .7277273    .7900501
       2003  |   .8403621   .0189815    44.27   0.000     .8031118    .8776124
       2004  |   .9770852   .0143185    68.24   0.000      .948986    1.005184
       2005  |   .8018198   .0135103    59.35   0.000     .7753066    .8283329
       2006  |   .7038518   .0158629    44.37   0.000     .6727217    .7349819
       2007  |   .6406556   .0151449    42.30   0.000     .6109346    .6703767
       2008  |   .6476502   .0138534    46.75   0.000     .6204637    .6748367
       2009  |   .9369705   .0157088    59.65   0.000     .9061428    .9677982
       2010  |   1.397563   .0439317    31.81   0.000      1.31135    1.483777
       2011  |   1.831838   .0188013    97.43   0.000     1.794941    1.868734
       2012  |   1.838893   .0179748   102.30   0.000     1.803619    1.874168
       2013  |   1.626243   .0194563    83.58   0.000     1.588061    1.664425
       2014  |   1.274439   .0163941    77.74   0.000     1.242267    1.306612
       2015  |   .7767014   .0190621    40.75   0.000      .739293    .8141098
             |
       _cons |   8.532144   .0086465   986.77   0.000     8.515176    8.549113
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (957 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     24,908    9.228649    1.681548   2.302585   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     25,142    .0060511    .0229389  -.1191017   .1306634
9290
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.00008n not found)
file /tmp/St18055.00008n saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.00008o not found)
file /tmp/St18055.00008o saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(1 missing value generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.00008p not found)
file /tmp/St18055.00008p saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.00008q not found)
file /tmp/St18055.00008q saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(31 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     23,650
                                                F(  25,    945)   =    1748.40
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9794
                                                Adj R-squared     =     0.9786
                                                Root MSE          =     0.2429

                                (Std. Err. adjusted for 946 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -7.781412    .605179   -12.86   0.000    -8.969062   -6.593762
             |
        year |
       1992  |   .1411986   .0169477     8.33   0.000     .1079391    .1744581
       1993  |   .6756992   .0073688    91.70   0.000     .6612382    .6901603
       1994  |   .6946375   .0123171    56.40   0.000     .6704654    .7188095
       1995  |   .4391745   .0180834    24.29   0.000     .4036862    .4746628
       1996  |   .3844517   .0174405    22.04   0.000     .3502251    .4186784
       1997  |   .4050351   .0148018    27.36   0.000      .375987    .4340832
       1998  |    .363596   .0167053    21.77   0.000     .3308122    .3963799
       1999  |   .3435846   .0160905    21.35   0.000     .3120074    .3751618
       2000  |   .3508392   .0152397    23.02   0.000     .3209316    .3807467
       2001  |   .3461528   .0134144    25.80   0.000     .3198274    .3724783
       2002  |   .7589377   .0158313    47.94   0.000     .7278691    .7900063
       2003  |     .84353   .0191002    44.16   0.000     .8060462    .8810137
       2004  |    .978717   .0141895    68.97   0.000     .9508705    1.006564
       2005  |   .8010014   .0134966    59.35   0.000     .7745147    .8274881
       2006  |    .704535   .0157815    44.64   0.000     .6735642    .7355058
       2007  |    .639784   .0150675    42.46   0.000     .6102144    .6693536
       2008  |   .6472474   .0136949    47.26   0.000     .6203715    .6741233
       2009  |    .939237   .0154365    60.85   0.000     .9089431    .9695308
       2010  |    1.40172   .0444321    31.55   0.000     1.314524    1.488917
       2011  |   1.834059   .0187465    97.83   0.000     1.797269    1.870849
       2012  |   1.839174   .0179781   102.30   0.000     1.803893    1.874456
       2013  |   1.625071   .0195064    83.31   0.000      1.58679    1.663352
       2014  |   1.273231   .0164713    77.30   0.000     1.240906    1.305555
       2015  |   .7745749   .0192146    40.31   0.000     .7368666    .8122831
             |
       _cons |   8.559686   .0085961   995.77   0.000     8.542816    8.576555
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (946 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     24,622    9.255918    1.665861   2.302585   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     24,856    .0060448    .0229271  -.1191017   .1306634
9295
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.00008s not found)
file /tmp/St18055.00008s saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.00008t not found)
file /tmp/St18055.00008t saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(1 missing value generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.00008u not found)
file /tmp/St18055.00008u saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.00008v not found)
file /tmp/St18055.00008v saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(31 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     23,425
                                                F(  25,    936)   =    1750.67
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9793
                                                Adj R-squared     =     0.9785
                                                Root MSE          =     0.2425

                                (Std. Err. adjusted for 937 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -7.822535   .6101062   -12.82   0.000     -9.01987   -6.625201
             |
        year |
       1992  |   .1401798   .0170515     8.22   0.000     .1067162    .1736434
       1993  |   .6751756   .0074157    91.05   0.000     .6606222     .689729
       1994  |   .6934109   .0124371    55.75   0.000     .6690031    .7178188
       1995  |   .4385362   .0182567    24.02   0.000     .4027073    .4743651
       1996  |   .3841583   .0176172    21.81   0.000     .3495845    .4187321
       1997  |    .404399   .0149468    27.06   0.000     .3750658    .4337322
       1998  |   .3638953   .0168677    21.57   0.000     .3307923    .3969983
       1999  |   .3439983   .0162517    21.17   0.000     .3121043    .3758923
       2000  |   .3499489    .015388    22.74   0.000     .3197499     .380148
       2001  |    .345339   .0135299    25.52   0.000     .3187865    .3718915
       2002  |      .7606   .0159779    47.60   0.000     .7292434    .7919566
       2003  |   .8436764   .0191326    44.10   0.000     .8061286    .8812242
       2004  |   .9789609   .0141647    69.11   0.000     .9511626    1.006759
       2005  |   .8022462   .0135867    59.05   0.000     .7755823      .82891
       2006  |   .7060441   .0158984    44.41   0.000     .6748435    .7372447
       2007  |   .6419393   .0151789    42.29   0.000     .6121506    .6717279
       2008  |   .6489168   .0137608    47.16   0.000     .6219112    .6759224
       2009  |   .9407221   .0154457    60.91   0.000     .9104098    .9710343
       2010  |   1.400467    .044686    31.34   0.000     1.312771    1.488163
       2011  |   1.834746   .0187876    97.66   0.000     1.797876    1.871617
       2012  |   1.840539   .0181106   101.63   0.000     1.804997    1.876081
       2013  |   1.626879   .0196576    82.76   0.000     1.588301    1.665457
       2014  |   1.275081   .0165648    76.98   0.000     1.242573     1.30759
       2015  |   .7767457   .0193338    40.18   0.000     .7388031    .8146882
             |
       _cons |   8.579339    .008613   996.10   0.000     8.562436    8.596242
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (937 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     24,388     9.27574    1.659041   2.302585   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     24,622    .0060509     .022913  -.1191017   .1306634
9300
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.00008x not found)
file /tmp/St18055.00008x saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.000090 not found)
file /tmp/St18055.000090 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(1 missing value generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.000091 not found)
file /tmp/St18055.000091 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.000092 not found)
file /tmp/St18055.000092 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(31 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     23,200
                                                F(  25,    927)   =    1732.38
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9791
                                                Adj R-squared     =     0.9782
                                                Root MSE          =     0.2425

                                (Std. Err. adjusted for 928 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -7.842442   .6193651   -12.66   0.000    -9.057962   -6.626922
             |
        year |
       1992  |   .1403202   .0172604     8.13   0.000     .1064463    .1741942
       1993  |   .6766635   .0074189    91.21   0.000     .6621036    .6912233
       1994  |   .6950973   .0125506    55.38   0.000     .6704664    .7197281
       1995  |   .4404433   .0184702    23.85   0.000     .4041951    .4766915
       1996  |   .3849081   .0178174    21.60   0.000      .349941    .4198752
       1997  |   .4043594   .0151073    26.77   0.000     .3747109    .4340078
       1998  |   .3645073   .0170609    21.37   0.000     .3310248    .3979897
       1999  |   .3445311   .0164369    20.96   0.000     .3122733    .3767889
       2000  |    .350752   .0155146    22.61   0.000     .3203041    .3811998
       2001  |   .3459194   .0136202    25.40   0.000     .3191894    .3726494
       2002  |   .7618503   .0161532    47.16   0.000     .7301492    .7935514
       2003  |   .8445801   .0192782    43.81   0.000     .8067462    .8824141
       2004  |   .9807503   .0142054    69.04   0.000     .9528718    1.008629
       2005  |   .8034254   .0136608    58.81   0.000     .7766157     .830235
       2006  |   .7072344    .016024    44.14   0.000     .6757869     .738682
       2007  |     .64333     .01528    42.10   0.000     .6133426    .6733173
       2008  |   .6494767   .0138398    46.93   0.000     .6223156    .6766377
       2009  |   .9410626   .0155249    60.62   0.000     .9105945    .9715306
       2010  |   1.400433    .045264    30.94   0.000     1.311602    1.489265
       2011  |   1.836211   .0189209    97.05   0.000     1.799078    1.873344
       2012  |   1.842833   .0182443   101.01   0.000     1.807028    1.878638
       2013  |    1.62924   .0198401    82.12   0.000     1.590303    1.668177
       2014  |   1.277223   .0167005    76.48   0.000     1.244448    1.309999
       2015  |   .7791165   .0195131    39.93   0.000     .7408215    .8174115
             |
       _cons |    8.59694   .0086191   997.42   0.000     8.580025    8.613855
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (928 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     24,154    9.293995    1.650074   2.302585   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     24,388    .0060926    .0228903  -.1191017   .1306634
9305
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.000094 not found)
file /tmp/St18055.000094 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.000095 not found)
file /tmp/St18055.000095 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(1 missing value generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.000096 not found)
file /tmp/St18055.000096 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.000097 not found)
file /tmp/St18055.000097 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(31 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     22,950
                                                F(  25,    917)   =    1729.91
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9790
                                                Adj R-squared     =     0.9781
                                                Root MSE          =     0.2417

                                (Std. Err. adjusted for 918 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -7.856109    .623196   -12.61   0.000    -9.079165   -6.633053
             |
        year |
       1992  |   .1402167   .0173601     8.08   0.000     .1061465    .1742869
       1993  |   .6765259   .0074517    90.79   0.000     .6619015    .6911504
       1994  |   .6941299   .0126408    54.91   0.000     .6693217     .718938
       1995  |   .4394039   .0186068    23.62   0.000      .402887    .4759208
       1996  |   .3835718   .0179417    21.38   0.000     .3483602    .4187834
       1997  |   .4025278   .0152099    26.46   0.000     .3726775     .432378
       1998  |   .3636704    .017198    21.15   0.000     .3299184    .3974224
       1999  |   .3434806   .0165573    20.74   0.000      .310986    .3759752
       2000  |   .3493122   .0156307    22.35   0.000     .3186362    .3799882
       2001  |   .3440904   .0137076    25.10   0.000     .3171884    .3709924
       2002  |   .7627892   .0162654    46.90   0.000     .7308676    .7947109
       2003  |   .8457168   .0193341    43.74   0.000     .8077726    .8836609
       2004  |   .9820957   .0142033    69.15   0.000     .9542209    1.009971
       2005  |   .8046534   .0137197    58.65   0.000     .7777277     .831579
       2006  |   .7091829   .0161031    44.04   0.000     .6775797     .740786
       2007  |    .645222   .0153532    42.03   0.000     .6150904    .6753535
       2008  |    .651289   .0138804    46.92   0.000      .624048    .6785301
       2009  |   .9423314    .015589    60.45   0.000      .911737    .9729257
       2010  |   1.401172   .0455604    30.75   0.000     1.311757    1.490587
       2011  |   1.837735    .019001    96.72   0.000     1.800445    1.875025
       2012  |   1.844959   .0182972   100.83   0.000      1.80905    1.880868
       2013  |   1.631448   .0199299    81.86   0.000     1.592335    1.670562
       2014  |   1.279472   .0167686    76.30   0.000     1.246563    1.312382
       2015  |   .7814753   .0196442    39.78   0.000     .7429226    .8200281
             |
       _cons |   8.616747   .0086448   996.76   0.000     8.599781    8.633712
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (918 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     23,894    9.314185    1.640469   2.302585   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     24,128    .0060935    .0229026  -.1191017   .1306634
9310
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.000099 not found)
file /tmp/St18055.000099 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.00009a not found)
file /tmp/St18055.00009a saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(1 missing value generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.00009b not found)
file /tmp/St18055.00009b saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.00009c not found)
file /tmp/St18055.00009c saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(31 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     22,750
                                                F(  25,    909)   =    1714.34
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9791
                                                Adj R-squared     =     0.9782
                                                Root MSE          =     0.2416

                                (Std. Err. adjusted for 910 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -7.867497   .6268375   -12.55   0.000    -9.097714    -6.63728
             |
        year |
       1992  |   .1405172   .0174161     8.07   0.000     .1063368    .1746975
       1993  |   .6768551   .0074666    90.65   0.000     .6622012    .6915089
       1994  |   .6943789   .0127901    54.29   0.000     .6692774    .7194804
       1995  |   .4397067   .0187983    23.39   0.000     .4028136    .4765998
       1996  |   .3836553   .0181121    21.18   0.000     .3481088    .4192017
       1997  |   .4024802   .0153606    26.20   0.000     .3723339    .4326266
       1998  |   .3637766   .0173452    20.97   0.000     .3297353    .3978179
       1999  |   .3433219   .0166963    20.56   0.000     .3105542    .3760897
       2000  |   .3486754   .0157841    22.09   0.000     .3176979    .3796529
       2001  |   .3440891   .0138348    24.87   0.000     .3169373     .371241
       2002  |    .763991   .0163189    46.82   0.000     .7319638    .7960182
       2003  |   .8466895     .01935    43.76   0.000     .8087136    .8846655
       2004  |   .9822117   .0142081    69.13   0.000     .9543273    1.010096
       2005  |   .8044955    .013811    58.25   0.000     .7773903    .8316006
       2006  |    .709627   .0162038    43.79   0.000     .6778258    .7414283
       2007  |   .6456297   .0154351    41.83   0.000     .6153371    .6759223
       2008  |   .6515494   .0139446    46.72   0.000     .6241821    .6789168
       2009  |   .9424629   .0156343    60.28   0.000     .9117793    .9731465
       2010  |   1.400642   .0457435    30.62   0.000     1.310867    1.490417
       2011  |   1.837585   .0190695    96.36   0.000     1.800159     1.87501
       2012  |   1.845526   .0184033   100.28   0.000     1.809408    1.881644
       2013  |   1.632211   .0200518    81.40   0.000     1.592858    1.671565
       2014  |   1.280879   .0168739    75.91   0.000     1.247762    1.313995
       2015  |   .7826374   .0197796    39.57   0.000     .7438183    .8214564
             |
       _cons |   8.630541   .0086802   994.28   0.000     8.613506    8.647577
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (910 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     23,686    9.327922    1.641481   2.302585   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     23,920    .0061314     .022877  -.1191017   .1306634
9315
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.00009e not found)
file /tmp/St18055.00009e saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.00009f not found)
file /tmp/St18055.00009f saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(1 missing value generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.00009g not found)
file /tmp/St18055.00009g saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.00009h not found)
file /tmp/St18055.00009h saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(31 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     22,600
                                                F(  25,    903)   =    1703.89
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9789
                                                Adj R-squared     =     0.9779
                                                Root MSE          =     0.2412

                                (Std. Err. adjusted for 904 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -7.990541   .6368696   -12.55   0.000    -9.240458   -6.740624
             |
        year |
       1992  |   .1373216   .0177199     7.75   0.000     .1025447    .1720985
       1993  |   .6761077   .0075078    90.05   0.000     .6613729    .6908426
       1994  |   .6958066   .0129345    53.79   0.000     .6704215    .7211917
       1995  |   .4421625   .0190305    23.23   0.000     .4048133    .4795118
       1996  |   .3863044   .0183334    21.07   0.000     .3503233    .4222855
       1997  |   .4047559   .0155148    26.09   0.000     .3743066    .4352051
       1998  |   .3668595   .0175209    20.94   0.000      .332473     .401246
       1999  |   .3458729   .0168619    20.51   0.000     .3127798     .378966
       2000  |   .3500998   .0159239    21.99   0.000     .3188476    .3813521
       2001  |   .3455181   .0139478    24.77   0.000     .3181442    .3728919
       2002  |   .7640365   .0164226    46.52   0.000     .7318056    .7962674
       2003  |   .8410164   .0195169    43.09   0.000     .8027126    .8793202
       2004  |   .9782445   .0142677    68.56   0.000     .9502428    1.006246
       2005  |     .80341   .0138712    57.92   0.000     .7761864    .8306336
       2006  |    .708601   .0162737    43.54   0.000     .6766624    .7405397
       2007  |   .6455238    .015536    41.55   0.000     .6150329    .6760146
       2008  |   .6509566   .0140011    46.49   0.000     .6234781    .6784351
       2009  |    .939993   .0157205    59.79   0.000       .90914    .9708461
       2010  |   1.389854   .0464175    29.94   0.000     1.298755    1.480953
       2011  |   1.832573   .0191574    95.66   0.000     1.794975    1.870172
       2012  |   1.844861    .018523    99.60   0.000     1.808508    1.881214
       2013  |   1.632374   .0202196    80.73   0.000     1.592692    1.672057
       2014  |   1.280404   .0169655    75.47   0.000     1.247107      1.3137
       2015  |   .7826215   .0199537    39.22   0.000     .7434605    .8217824
             |
       _cons |   8.647245   .0087014   993.77   0.000     8.630167    8.664322
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (904 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     23,530    9.343427    1.630833   2.302585   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     23,764    .0061101    .0228837  -.1191017   .1306634
9320
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.00009j not found)
file /tmp/St18055.00009j saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.00009k not found)
file /tmp/St18055.00009k saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(1 missing value generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.00009l not found)
file /tmp/St18055.00009l saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.00009m not found)
file /tmp/St18055.00009m saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(31 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     22,400
                                                F(  25,    895)   =    1686.75
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9788
                                                Adj R-squared     =     0.9779
                                                Root MSE          =     0.2406

                                (Std. Err. adjusted for 896 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -7.945774   .6386271   -12.44   0.000    -9.199156   -6.692393
             |
        year |
       1992  |   .1387663   .0177548     7.82   0.000     .1039204    .1736123
       1993  |   .6765369   .0075488    89.62   0.000     .6617215    .6913523
       1994  |   .6945424    .012983    53.50   0.000     .6690617    .7200231
       1995  |   .4403424   .0190965    23.06   0.000     .4028632    .4778215
       1996  |   .3847545   .0183883    20.92   0.000     .3486654    .4208436
       1997  |   .4034345   .0155533    25.94   0.000     .3729093    .4339597
       1998  |   .3650434   .0175465    20.80   0.000     .3306063    .3994804
       1999  |   .3440279    .016903    20.35   0.000     .3108538     .377202
       2000  |   .3480323   .0159638    21.80   0.000     .3167016    .3793631
       2001  |   .3438384   .0139917    24.57   0.000      .316378    .3712988
       2002  |   .7639289   .0164589    46.41   0.000     .7316263    .7962315
       2003  |   .8428029   .0195361    43.14   0.000      .804461    .8811447
       2004  |   .9793438   .0142685    68.64   0.000     .9513401    1.007347
       2005  |   .8029378   .0139419    57.59   0.000     .7755751    .8303004
       2006  |   .7073559   .0163271    43.32   0.000      .675312    .7393998
       2007  |   .6457256   .0156102    41.37   0.000     .6150888    .6763625
       2008  |   .6518245   .0140446    46.41   0.000     .6242602    .6793887
       2009  |   .9417705   .0157152    59.93   0.000     .9109276    .9726134
       2010  |   1.394459   .0465014    29.99   0.000     1.303195    1.485724
       2011  |   1.835028   .0191588    95.78   0.000     1.797427    1.872629
       2012  |   1.845711   .0186369    99.04   0.000     1.809134    1.882288
       2013  |   1.632536   .0203351    80.28   0.000     1.592626    1.672447
       2014  |   1.281554   .0170585    75.13   0.000     1.248075    1.315034
       2015  |   .7815039   .0200885    38.90   0.000     .7420779      .82093
             |
       _cons |   8.660804   .0087344   991.58   0.000     8.643661    8.677946
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (896 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     23,322    9.357332    1.625824   2.302585   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     23,556    .0060971    .0228909  -.1191017   .1306634
9325
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.00009o not found)
file /tmp/St18055.00009o saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.00009p not found)
file /tmp/St18055.00009p saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(1 missing value generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.00009q not found)
file /tmp/St18055.00009q saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.00009r not found)
file /tmp/St18055.00009r saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(30 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     22,050
                                                F(  25,    881)   =    1664.30
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9788
                                                Adj R-squared     =     0.9779
                                                Root MSE          =     0.2402

                                (Std. Err. adjusted for 882 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.011096   .6625348   -12.09   0.000    -9.311426   -6.710765
             |
        year |
       1992  |   .1367613   .0183756     7.44   0.000     .1006962    .1728264
       1993  |   .6759507   .0075662    89.34   0.000     .6611008    .6908006
       1994  |   .6946721   .0134539    51.63   0.000     .6682668    .7210774
       1995  |   .4400645   .0198641    22.15   0.000      .401078     .479051
       1996  |   .3844541   .0190756    20.15   0.000     .3470151    .4218931
       1997  |    .403598   .0160614    25.13   0.000     .3720749    .4351211
       1998  |   .3659475   .0181671    20.14   0.000     .3302917    .4016033
       1999  |   .3452275   .0174242    19.81   0.000     .3110297    .3794253
       2000  |   .3486943   .0164196    21.24   0.000     .3164682    .3809204
       2001  |   .3460348   .0143046    24.19   0.000     .3179597    .3741099
       2002  |   .7661191   .0167208    45.82   0.000     .7333019    .7989363
       2003  |   .8438246   .0200867    42.01   0.000     .8044011     .883248
       2004  |    .979032   .0144681    67.67   0.000     .9506361    1.007428
       2005  |   .8029638   .0141145    56.89   0.000     .7752618    .8306658
       2006  |   .7081724   .0165766    42.72   0.000     .6756382    .7407066
       2007  |   .6463661   .0157908    40.93   0.000      .615374    .6773581
       2008  |   .6519928   .0141417    46.10   0.000     .6242375    .6797481
       2009  |   .9415233   .0159361    59.08   0.000     .9102462    .9728004
       2010  |   1.390074   .0482152    28.83   0.000     1.295444    1.484704
       2011  |   1.834469   .0195099    94.03   0.000     1.796178    1.872761
       2012  |   1.847686   .0189008    97.76   0.000      1.81059    1.884782
       2013  |    1.63394   .0207472    78.75   0.000     1.593221     1.67466
       2014  |   1.282745   .0173541    73.92   0.000     1.248685    1.316805
       2015  |    .781736   .0205701    38.00   0.000     .7413639    .8221081
             |
       _cons |   8.680772   .0087982   986.65   0.000     8.663504     8.69804
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (882 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     22,958    9.377283    1.624114   2.302585   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     23,166    .0060832    .0228574  -.1191017   .1306634
9330
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.00009t not found)
file /tmp/St18055.00009t saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.00009u not found)
file /tmp/St18055.00009u saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(1 missing value generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.00009v not found)
file /tmp/St18055.00009v saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.00009w not found)
file /tmp/St18055.00009w saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(30 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     21,875
                                                F(  25,    874)   =    1669.51
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9789
                                                Adj R-squared     =     0.9780
                                                Root MSE          =     0.2386

                                (Std. Err. adjusted for 875 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.006428   .6674583   -12.00   0.000    -9.316436   -6.696419
             |
        year |
       1992  |   .1368615    .018507     7.40   0.000     .1005382    .1731849
       1993  |   .6753356   .0075492    89.46   0.000      .660519    .6901522
       1994  |   .6928885   .0134669    51.45   0.000     .6664573    .7193197
       1995  |   .4374097   .0198888    21.99   0.000     .3983743     .476445
       1996  |   .3822372    .019082    20.03   0.000     .3447853    .4196892
       1997  |   .4013521   .0160318    25.03   0.000     .3698868    .4328173
       1998  |   .3640847   .0181511    20.06   0.000     .3284599    .3997095
       1999  |   .3425476   .0174142    19.67   0.000      .308369    .3767262
       2000  |    .346827   .0163433    21.22   0.000     .3147503    .3789037
       2001  |   .3441658   .0142001    24.24   0.000     .3162954    .3720361
       2002  |   .7665593   .0167744    45.70   0.000     .7336366     .799482
       2003  |   .8446361    .020064    42.10   0.000     .8052568    .8840153
       2004  |   .9798393   .0143869    68.11   0.000     .9516023    1.008076
       2005  |   .8032719   .0140845    57.03   0.000     .7756286    .8309153
       2006  |   .7085048    .016561    42.78   0.000     .6760009    .7410088
       2007  |   .6468342    .015811    40.91   0.000     .6158023    .6778661
       2008  |   .6529474   .0141148    46.26   0.000     .6252446    .6806502
       2009  |   .9438321   .0158194    59.66   0.000     .9127837    .9748805
       2010  |   1.393983   .0484259    28.79   0.000     1.298938    1.489028
       2011  |   1.837582   .0194578    94.44   0.000     1.799392    1.875771
       2012  |   1.849225   .0189173    97.75   0.000     1.812096    1.886354
       2013  |   1.634866   .0207777    78.68   0.000     1.594086    1.675646
       2014  |   1.282802   .0173262    74.04   0.000     1.248796    1.316808
       2015  |   .7811511   .0206396    37.85   0.000     .7406421    .8216602
             |
       _cons |   8.698209   .0086972  1000.11   0.000     8.681139    8.715279
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (875 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     22,776    9.394611    1.615703   2.302585   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     22,958    .0060909    .0228303  -.1191017   .1306634
9335
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.0000a0 not found)
file /tmp/St18055.0000a0 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.0000a1 not found)
file /tmp/St18055.0000a1 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(1 missing value generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.0000a2 not found)
file /tmp/St18055.0000a2 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.0000a3 not found)
file /tmp/St18055.0000a3 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(30 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     21,650
                                                F(  25,    865)   =    1677.93
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9788
                                                Adj R-squared     =     0.9779
                                                Root MSE          =     0.2378

                                (Std. Err. adjusted for 866 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |    -8.0147   .6749297   -11.87   0.000    -9.339391   -6.690008
             |
        year |
       1992  |   .1356609   .0186964     7.26   0.000     .0989653    .1723565
       1993  |   .6745959   .0075608    89.22   0.000     .6597562    .6894356
       1994  |   .6927213   .0135954    50.95   0.000     .6660375    .7194051
       1995  |   .4371554   .0201125    21.74   0.000     .3976805    .4766303
       1996  |   .3817939   .0192857    19.80   0.000     .3439417    .4196462
       1997  |   .4003643   .0161852    24.74   0.000     .3685974    .4321311
       1998  |   .3634819   .0183349    19.82   0.000     .3274958     .399468
       1999  |   .3415097   .0175795    19.43   0.000     .3070064    .3760131
       2000  |   .3455088   .0164452    21.01   0.000     .3132317    .3777859
       2001  |   .3430963   .0143139    23.97   0.000     .3150023    .3711903
       2002  |   .7653335   .0168701    45.37   0.000     .7322224    .7984446
       2003  |   .8443219   .0202682    41.66   0.000     .8045412    .8841025
       2004  |   .9801409   .0144782    67.70   0.000     .9517243    1.008557
       2005  |   .8033758   .0141802    56.65   0.000     .7755443    .8312074
       2006  |   .7072718   .0166455    42.49   0.000     .6746016     .739942
       2007  |   .6454008   .0159544    40.45   0.000     .6140868    .6767147
       2008  |    .651721   .0141827    45.95   0.000     .6238846    .6795575
       2009  |   .9418178   .0158077    59.58   0.000     .9107919    .9728437
       2010  |   1.392064   .0487624    28.55   0.000     1.296357     1.48777
       2011  |   1.836976   .0196044    93.70   0.000     1.798498    1.875454
       2012  |   1.848686   .0190581    97.00   0.000      1.81128    1.886091
       2013  |   1.634535   .0209341    78.08   0.000     1.593448    1.675623
       2014  |   1.282852   .0174084    73.69   0.000     1.248685     1.31702
       2015  |   .7823509    .020772    37.66   0.000     .7415815    .8231203
             |
       _cons |   8.715148   .0087338   997.87   0.000     8.698006     8.73229
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (866 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     22,542    9.410873    1.606706   2.302585   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     22,724     .006085    .0228331  -.1191017   .1306634
9340
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.0000a5 not found)
file /tmp/St18055.0000a5 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.0000a6 not found)
file /tmp/St18055.0000a6 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(1 missing value generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.0000a7 not found)
file /tmp/St18055.0000a7 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.0000a8 not found)
file /tmp/St18055.0000a8 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(30 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     21,475
                                                F(  25,    858)   =    1674.82
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9787
                                                Adj R-squared     =     0.9777
                                                Root MSE          =     0.2376

                                (Std. Err. adjusted for 859 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.039276   .6781533   -11.85   0.000     -9.37031   -6.708243
             |
        year |
       1992  |   .1349962   .0187441     7.20   0.000     .0982066    .1717858
       1993  |   .6750477   .0076119    88.68   0.000     .6601076    .6899878
       1994  |   .6933905   .0136736    50.71   0.000      .666553    .7202281
       1995  |   .4378969    .020199    21.68   0.000     .3982516    .4775422
       1996  |   .3825575   .0193194    19.80   0.000     .3446388    .4204762
       1997  |    .400963    .016243    24.69   0.000     .3690824    .4328436
       1998  |   .3644076    .018435    19.77   0.000     .3282246    .4005905
       1999  |   .3422135   .0176945    19.34   0.000     .3074839    .3769431
       2000  |   .3461444   .0164444    21.05   0.000     .3138685    .3784203
       2001  |   .3446682   .0143197    24.07   0.000     .3165624     .372774
       2002  |   .7670261   .0169169    45.34   0.000     .7338228    .8002294
       2003  |   .8451201   .0204616    41.30   0.000     .8049595    .8852807
       2004  |   .9818903   .0145948    67.28   0.000     .9532446    1.010536
       2005  |   .8053976   .0141962    56.73   0.000     .7775343    .8332609
       2006  |    .709432   .0166941    42.50   0.000     .6766658    .7421981
       2007  |   .6473943   .0160096    40.44   0.000     .6159717    .6788169
       2008  |    .652761   .0142492    45.81   0.000     .6247936    .6807283
       2009  |   .9424781   .0159153    59.22   0.000     .9112406    .9737156
       2010  |   1.391766     .04908    28.36   0.000     1.295435    1.488096
       2011  |   1.837323   .0197419    93.07   0.000     1.798575    1.876071
       2012  |     1.8497   .0190819    96.93   0.000     1.812247    1.887153
       2013  |   1.635729   .0209579    78.05   0.000     1.594594    1.676864
       2014  |   1.283903    .017392    73.82   0.000     1.249768    1.318039
       2015  |   .7831382   .0207859    37.68   0.000     .7423411    .8239354
             |
       _cons |   8.732931   .0087727   995.47   0.000     8.715712    8.750149
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (859 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     22,360    9.429559    1.599459   2.302585   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     22,542    .0060713    .0228336  -.1191017   .1306634
9345
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.0000aa not found)
file /tmp/St18055.0000aa saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.0000ab not found)
file /tmp/St18055.0000ab saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(1 missing value generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.0000ac not found)
file /tmp/St18055.0000ac saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.0000ad not found)
file /tmp/St18055.0000ad saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(30 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     21,200
                                                F(  25,    847)   =    1673.41
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9780
                                                Adj R-squared     =     0.9771
                                                Root MSE          =     0.2371

                                (Std. Err. adjusted for 848 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -7.962648   .6889243   -11.56   0.000    -9.314847   -6.610449
             |
        year |
       1992  |   .1375447   .0190595     7.22   0.000     .1001353    .1749542
       1993  |   .6753853   .0076444    88.35   0.000     .6603811    .6903894
       1994  |   .6912691   .0138088    50.06   0.000     .6641656    .7183725
       1995  |    .434375   .0204433    21.25   0.000     .3942496    .4745005
       1996  |     .37999   .0195544    19.43   0.000     .3416093    .4183707
       1997  |   .3987349   .0164341    24.26   0.000     .3664786    .4309913
       1998  |   .3605913   .0186974    19.29   0.000     .3238927    .3972899
       1999  |   .3379376   .0178923    18.89   0.000     .3028192     .373056
       2000  |   .3415612    .016558    20.63   0.000     .3090617    .3740606
       2001  |   .3407852   .0143731    23.71   0.000      .312574    .3689963
       2002  |   .7648704    .017064    44.82   0.000     .7313777    .7983631
       2003  |    .846653   .0207812    40.74   0.000     .8058642    .8874417
       2004  |   .9830867   .0147562    66.62   0.000     .9541237     1.01205
       2005  |    .803637   .0142716    56.31   0.000     .7756252    .8316489
       2006  |   .7078418   .0167987    42.14   0.000     .6748699    .7408137
       2007  |   .6462297   .0161295    40.07   0.000     .6145712    .6778882
       2008  |   .6514829   .0143358    45.44   0.000      .623345    .6796207
       2009  |    .943379   .0160692    58.71   0.000     .9118389    .9749192
       2010  |   1.398343   .0499085    28.02   0.000     1.300384    1.496302
       2011  |   1.840405    .019933    92.33   0.000     1.801281    1.879528
       2012  |   1.849751    .019259    96.05   0.000     1.811951    1.887552
       2013  |   1.634713   .0211957    77.12   0.000      1.59311    1.676315
       2014  |   1.282109   .0175228    73.17   0.000     1.247715    1.316502
       2015  |   .7800173    .020954    37.23   0.000     .7388893    .8211452
             |
       _cons |   8.768099    .008821   994.00   0.000     8.750785    8.785413
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (848 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     22,074    9.464396    1.574292   2.302585   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     22,256    .0060494    .0228468  -.1191017   .1306634
9350
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.0000af not found)
file /tmp/St18055.0000af saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.0000ag not found)
file /tmp/St18055.0000ag saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(1 missing value generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.0000ah not found)
file /tmp/St18055.0000ah saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.0000ai not found)
file /tmp/St18055.0000ai saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(30 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     20,975
                                                F(  25,    838)   =    1659.77
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9779
                                                Adj R-squared     =     0.9770
                                                Root MSE          =     0.2375

                                (Std. Err. adjusted for 839 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.046367   .6953008   -11.57   0.000    -9.411102   -6.681631
             |
        year |
       1992  |   .1373982   .0191946     7.16   0.000      .099723    .1750734
       1993  |   .6767187    .007658    88.37   0.000     .6616876    .6917497
       1994  |   .6935086   .0138987    49.90   0.000     .6662282     .720789
       1995  |   .4369997   .0206221    21.19   0.000     .3965228    .4774767
       1996  |   .3819624   .0197291    19.36   0.000     .3432382    .4206867
       1997  |   .4004994   .0165742    24.16   0.000     .3679677    .4330312
       1998  |   .3624465   .0188627    19.21   0.000     .3254228    .3994703
       1999  |   .3397492   .0180504    18.82   0.000       .30432    .3751784
       2000  |   .3425512   .0166959    20.52   0.000     .3097804    .3753219
       2001  |   .3414118   .0144869    23.57   0.000     .3129769    .3698467
       2002  |   .7675364   .0172504    44.49   0.000     .7336772    .8013956
       2003  |    .845413   .0209164    40.42   0.000     .8043582    .8864677
       2004  |   .9822076   .0148263    66.25   0.000     .9531065    1.011309
       2005  |   .8050227   .0143834    55.97   0.000      .776791    .8332544
       2006  |   .7098011   .0169519    41.87   0.000     .6765279    .7430743
       2007  |   .6479176   .0162813    39.80   0.000     .6159606    .6798745
       2008  |   .6526907   .0144488    45.17   0.000     .6243306    .6810507
       2009  |   .9437706   .0161857    58.31   0.000     .9120012    .9755399
       2010  |   1.393336   .0503101    27.69   0.000     1.294587    1.492084
       2011  |   1.839977   .0200607    91.72   0.000     1.800602    1.879352
       2012  |   1.852023   .0194026    95.45   0.000     1.813939    1.890106
       2013  |   1.637088   .0213636    76.63   0.000     1.595155     1.67902
       2014  |   1.283745   .0176376    72.78   0.000     1.249126    1.318364
       2015  |    .779849   .0211313    36.90   0.000     .7383726    .8213255
             |
       _cons |   8.786215   .0088688   990.68   0.000     8.768807    8.803622
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (839 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     21,840    9.482704    1.572521   2.302585   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     22,022    .0060813    .0228404  -.1191017   .1306634
9355
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.0000ak not found)
file /tmp/St18055.0000ak saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.0000al not found)
file /tmp/St18055.0000al saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(1 missing value generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.0000am not found)
file /tmp/St18055.0000am saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.0000an not found)
file /tmp/St18055.0000an saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(30 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     20,750
                                                F(  25,    829)   =    1643.62
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9779
                                                Adj R-squared     =     0.9770
                                                Root MSE          =     0.2367

                                (Std. Err. adjusted for 830 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -7.975978   .7046146   -11.32   0.000    -9.359016   -6.592939
             |
        year |
       1992  |   .1392012   .0194545     7.16   0.000     .1010154     .177387
       1993  |   .6761434   .0077009    87.80   0.000     .6610279    .6912589
       1994  |   .6915533   .0140315    49.29   0.000     .6640118    .7190947
       1995  |   .4347196   .0208201    20.88   0.000     .3938532     .475586
       1996  |   .3795954   .0199283    19.05   0.000     .3404796    .4187112
       1997  |   .3985167   .0167277    23.82   0.000      .365683    .4313503
       1998  |   .3604021   .0190627    18.91   0.000     .3229852     .397819
       1999  |   .3374636   .0182222    18.52   0.000     .3016966    .3732306
       2000  |   .3393598   .0168087    20.19   0.000     .3063672    .3723524
       2001  |   .3394333     .01458    23.28   0.000     .3108153    .3680514
       2002  |   .7665466   .0174267    43.99   0.000      .732341    .8007522
       2003  |   .8480187   .0210804    40.23   0.000     .8066414     .889396
       2004  |   .9839671   .0148415    66.30   0.000     .9548357    1.013098
       2005  |   .8047143   .0144631    55.64   0.000     .7763257    .8331028
       2006  |   .7093464    .017074    41.55   0.000     .6758329    .7428598
       2007  |   .6472789   .0164106    39.44   0.000     .6150676    .6794902
       2008  |   .6525823   .0145122    44.97   0.000     .6240974    .6810672
       2009  |     .94498   .0161605    58.47   0.000     .9132597    .9767002
       2010  |   1.399015   .0508368    27.52   0.000     1.299231    1.498799
       2011  |   1.841941   .0201471    91.42   0.000     1.802396    1.881486
       2012  |   1.850471    .019605    94.39   0.000      1.81199    1.888953
       2013  |   1.635195   .0216143    75.65   0.000     1.592769     1.67762
       2014  |   1.282955   .0178177    72.00   0.000     1.247982    1.317928
       2015  |   .7795376   .0213327    36.54   0.000      .737665    .8214101
             |
       _cons |     8.8057   .0088948   989.99   0.000     8.788241    8.823159
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (830 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     21,606    9.502212    1.566208   2.302585   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     21,788    .0060779    .0228272  -.1191017   .1306634
9360
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.0000ap not found)
file /tmp/St18055.0000ap saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.0000aq not found)
file /tmp/St18055.0000aq saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.0000ar not found)
file /tmp/St18055.0000ar saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.0000as not found)
file /tmp/St18055.0000as saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(29 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     20,300
                                                F(  25,    811)   =    1634.06
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9783
                                                Adj R-squared     =     0.9773
                                                Root MSE          =     0.2337

                                (Std. Err. adjusted for 812 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |   -7.98664   .7259525   -11.00   0.000    -9.411607   -6.561673
             |
        year |
       1992  |    .138998    .020039     6.94   0.000     .0996636    .1783325
       1993  |   .6752235   .0077357    87.29   0.000     .6600392    .6904079
       1994  |   .6903555    .014293    48.30   0.000     .6622999    .7184112
       1995  |    .432636   .0212654    20.34   0.000     .3908943    .4743777
       1996  |   .3772253   .0203826    18.51   0.000     .3372164    .4172342
       1997  |   .3955379   .0170746    23.17   0.000     .3620222    .4290536
       1998  |   .3563605   .0194722    18.30   0.000     .3181386    .3945824
       1999  |   .3332766   .0186628    17.86   0.000     .2966435    .3699097
       2000  |   .3353817   .0170904    19.62   0.000     .3018351    .3689283
       2001  |   .3363945   .0146472    22.97   0.000     .3076436    .3651453
       2002  |   .7657949    .017447    43.89   0.000     .7315484    .8000414
       2003  |   .8475571   .0215032    39.42   0.000     .8053485    .8897656
       2004  |   .9829216   .0148968    65.98   0.000     .9536807    1.012162
       2005  |   .8039877   .0143895    55.87   0.000     .7757427    .8322326
       2006  |   .7090903   .0171055    41.45   0.000      .675514    .7426666
       2007  |   .6462942   .0163599    39.50   0.000     .6141814     .678407
       2008  |   .6521592   .0143679    45.39   0.000     .6239564    .6803619
       2009  |   .9445395   .0162022    58.30   0.000     .9127364    .9763427
       2010  |   1.399181   .0523944    26.70   0.000     1.296337    1.502026
       2011  |   1.841034   .0203724    90.37   0.000     1.801045    1.881023
       2012  |   1.849305   .0196758    93.99   0.000     1.810683    1.887926
       2013  |   1.633358   .0217766    75.01   0.000     1.590612    1.676103
       2014  |   1.280053   .0178135    71.86   0.000     1.245087    1.315019
       2015  |   .7765765   .0214449    36.21   0.000     .7344825    .8186704
             |
       _cons |   8.840941   .0087914  1005.64   0.000     8.823685    8.858198
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (812 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     21,138    9.535925    1.559277   2.302585   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     21,294    .0060839    .0228115  -.1191017   .1306634
9365
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.0000au not found)
file /tmp/St18055.0000au saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.0000av not found)
file /tmp/St18055.0000av saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.0000aw not found)
file /tmp/St18055.0000aw saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.0000ax not found)
file /tmp/St18055.0000ax saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(28 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     20,075
                                                F(  25,    802)   =    1631.31
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9782
                                                Adj R-squared     =     0.9772
                                                Root MSE          =     0.2331

                                (Std. Err. adjusted for 803 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.005858   .7315388   -10.94   0.000    -9.441815   -6.569901
             |
        year |
       1992  |   .1393388   .0201808     6.90   0.000     .0997255    .1789521
       1993  |   .6753855   .0077781    86.83   0.000     .6601176    .6906534
       1994  |   .6908986    .014377    48.06   0.000     .6626776    .7191195
       1995  |   .4326485    .021407    20.21   0.000     .3906283    .4746688
       1996  |   .3771836   .0205198    18.38   0.000     .3369048    .4174625
       1997  |   .3951391   .0171779    23.00   0.000     .3614201    .4288582
       1998  |   .3560819   .0196125    18.16   0.000      .317584    .3945798
       1999  |    .333366   .0187674    17.76   0.000      .296527    .3702051
       2000  |   .3349924   .0171438    19.54   0.000     .3013403    .3686444
       2001  |   .3363725   .0146837    22.91   0.000     .3075496    .3651954
       2002  |   .7677982   .0175035    43.87   0.000     .7334401    .8021563
       2003  |   .8493208   .0216606    39.21   0.000     .8068026     .891839
       2004  |   .9843444   .0149688    65.76   0.000     .9549618    1.013727
       2005  |   .8054488   .0144405    55.78   0.000      .777103    .8337945
       2006  |   .7112506   .0171934    41.37   0.000     .6775012    .7449999
       2007  |   .6486156   .0164391    39.46   0.000     .6163468    .6808844
       2008  |   .6543827   .0144249    45.36   0.000     .6260676    .6826977
       2009  |     .94676   .0162956    58.10   0.000     .9147729     .978747
       2010  |   1.399807   .0528293    26.50   0.000     1.296107    1.503508
       2011  |   1.842905   .0204669    90.04   0.000      1.80273     1.88308
       2012  |   1.852079   .0197495    93.78   0.000     1.813312    1.890846
       2013  |   1.635698   .0218659    74.81   0.000     1.592777    1.678619
       2014  |   1.281799   .0178749    71.71   0.000     1.246712    1.316886
       2015  |   .7770028   .0215371    36.08   0.000      .734727    .8192786
             |
       _cons |   8.861404   .0088064  1006.24   0.000     8.844117     8.87869
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (803 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     20,904    9.557311    1.552374   2.302585   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     21,060    .0060777    .0228248  -.1191017   .1306634
9370
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.0000b1 not found)
file /tmp/St18055.0000b1 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.0000b2 not found)
file /tmp/St18055.0000b2 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.0000b3 not found)
file /tmp/St18055.0000b3 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.0000b4 not found)
file /tmp/St18055.0000b4 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(28 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     19,850
                                                F(  25,    793)   =    1607.72
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9784
                                                Adj R-squared     =     0.9775
                                                Root MSE          =     0.2319

                                (Std. Err. adjusted for 794 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -7.858184   .7302513   -10.76   0.000    -9.291638    -6.42473
             |
        year |
       1992  |   .1435581   .0201534     7.12   0.000     .1039977    .1831184
       1993  |   .6747523   .0078231    86.25   0.000     .6593958    .6901088
       1994  |   .6865812   .0143292    47.91   0.000     .6584536    .7147089
       1995  |   .4263285   .0213485    19.97   0.000     .3844222    .4682348
       1996  |   .3706604   .0204568    18.12   0.000     .3305044    .4108163
       1997  |   .3895682   .0171359    22.73   0.000     .3559311    .4232054
       1998  |   .3500484   .0195678    17.89   0.000     .3116376    .3884591
       1999  |   .3277026   .0187387    17.49   0.000     .2909193    .3644858
       2000  |   .3303945    .017117    19.30   0.000     .2967946    .3639944
       2001  |   .3337982   .0147273    22.67   0.000     .3048891    .3627074
       2002  |   .7660357   .0175184    43.73   0.000     .7316478    .8004235
       2003  |     .85465   .0215993    39.57   0.000     .8122515    .8970485
       2004  |   .9873841   .0149357    66.11   0.000      .958066    1.016702
       2005  |   .8055611    .014538    55.41   0.000     .7770236    .8340986
       2006  |   .7111341   .0173311    41.03   0.000     .6771139    .7451543
       2007  |   .6493507   .0165579    39.22   0.000     .6168482    .6818532
       2008  |   .6562015   .0144941    45.27   0.000     .6277501    .6846529
       2009  |   .9509921   .0162524    58.51   0.000     .9190893    .9828949
       2010  |    1.41308   .0526895    26.82   0.000     1.309652    1.516507
       2011  |   1.849277    .020381    90.74   0.000      1.80927    1.889284
       2012  |   1.853354   .0198618    93.31   0.000     1.814366    1.892342
       2013  |   1.634989   .0219646    74.44   0.000     1.591874    1.678105
       2014  |   1.282005   .0179967    71.24   0.000     1.246678    1.317332
       2015  |   .7755957   .0216613    35.81   0.000     .7330753     .818116
             |
       _cons |   8.870515   .0088438  1003.02   0.000     8.853155    8.887875
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (794 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     20,670    9.567238    1.552429   2.302585   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     20,826    .0060487    .0228394  -.1191017   .1306634
9375
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.0000b6 not found)
file /tmp/St18055.0000b6 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.0000b7 not found)
file /tmp/St18055.0000b7 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.0000b8 not found)
file /tmp/St18055.0000b8 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.0000b9 not found)
file /tmp/St18055.0000b9 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(28 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     19,425
                                                F(  25,    776)   =    1640.20
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9784
                                                Adj R-squared     =     0.9775
                                                Root MSE          =     0.2308

                                (Std. Err. adjusted for 777 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.372398   .7090677   -11.81   0.000    -9.764316    -6.98048
             |
        year |
       1992  |   .1299142   .0193204     6.72   0.000     .0919876    .1678407
       1993  |   .6746983   .0079562    84.80   0.000       .65908    .6903165
       1994  |   .6947926   .0140508    49.45   0.000     .6672104    .7223747
       1995  |   .4377758   .0209653    20.88   0.000     .3966204    .4789312
       1996  |   .3813724   .0202577    18.83   0.000     .3416061    .4211386
       1997  |   .3967863   .0170582    23.26   0.000     .3633007    .4302719
       1998  |   .3602707    .019321    18.65   0.000     .3223431    .3981982
       1999  |    .337316   .0184519    18.28   0.000     .3010944    .3735376
       2000  |   .3360042   .0173235    19.40   0.000     .3019977    .3700108
       2001  |   .3388551   .0147716    22.94   0.000     .3098581    .3678521
       2002  |   .7729292   .0177718    43.49   0.000     .7380428    .8078156
       2003  |   .8399853   .0206549    40.67   0.000     .7994392    .8805313
       2004  |    .979973   .0144915    67.62   0.000     .9515257     1.00842
       2005  |   .8089555   .0148982    54.30   0.000       .77971     .838201
       2006  |   .7183696   .0176302    40.75   0.000     .6837611    .7529781
       2007  |   .6555756   .0168604    38.88   0.000     .6224782    .6886729
       2008  |   .6579302    .014775    44.53   0.000     .6289264     .686934
       2009  |   .9450969    .016063    58.84   0.000     .9135648    .9766289
       2010  |   1.377318   .0505543    27.24   0.000     1.278078    1.476557
       2011  |   1.839382   .0196704    93.51   0.000     1.800769    1.877996
       2012  |   1.861266   .0201143    92.53   0.000     1.821781    1.900751
       2013  |    1.64533   .0222615    73.91   0.000      1.60163    1.689029
       2014  |   1.288216   .0184044    69.99   0.000     1.252088    1.324345
       2015  |   .7831145   .0220345    35.54   0.000     .7398602    .8263689
             |
       _cons |   8.894664   .0089431   994.59   0.000     8.877109     8.91222
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (777 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     20,228    9.590449    1.544025   3.496508   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     20,384    .0060267    .0227933  -.1191017   .1306634
9380
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.0000bb not found)
file /tmp/St18055.0000bb saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.0000bc not found)
file /tmp/St18055.0000bc saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.0000bd not found)
file /tmp/St18055.0000bd saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.0000be not found)
file /tmp/St18055.0000be saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(28 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     19,050
                                                F(  25,    761)   =    1605.94
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9784
                                                Adj R-squared     =     0.9775
                                                Root MSE          =     0.2299

                                (Std. Err. adjusted for 762 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.400115   .7235209   -11.61   0.000    -9.820449   -6.979781
             |
        year |
       1992  |    .130844   .0196663     6.65   0.000     .0922373    .1694507
       1993  |   .6756544    .008055    83.88   0.000     .6598417    .6914671
       1994  |   .6949584   .0142614    48.73   0.000     .6669621    .7229547
       1995  |    .438039   .0213211    20.54   0.000     .3961838    .4798942
       1996  |   .3811089   .0206188    18.48   0.000     .3406324    .4215855
       1997  |   .3963329   .0173675    22.82   0.000     .3622389    .4304268
       1998  |   .3605596   .0196647    18.34   0.000     .3219562    .3991631
       1999  |   .3371032   .0187947    17.94   0.000     .3002077    .3739988
       2000  |   .3363869   .0176086    19.10   0.000     .3018197    .3709541
       2001  |   .3398692   .0150202    22.63   0.000     .3103832    .3693552
       2002  |   .7768266   .0180893    42.94   0.000     .7413158    .8123374
       2003  |    .842356   .0209311    40.24   0.000     .8012664    .8834455
       2004  |   .9834123   .0146425    67.16   0.000     .9546678    1.012157
       2005  |   .8141018   .0150023    54.27   0.000      .784651    .8435525
       2006  |   .7230549   .0178595    40.49   0.000     .6879952    .7581146
       2007  |   .6609656   .0170622    38.74   0.000      .627471    .6944601
       2008  |   .6638601    .014875    44.63   0.000     .6346591    .6930611
       2009  |   .9511565   .0161675    58.83   0.000     .9194182    .9828948
       2010  |   1.382613   .0515136    26.84   0.000     1.281488    1.483739
       2011  |   1.845677   .0199135    92.68   0.000     1.806585    1.884769
       2012  |   1.867762   .0203481    91.79   0.000     1.827817    1.907707
       2013  |   1.651009   .0225808    73.12   0.000     1.606681    1.695337
       2014  |   1.293259   .0186742    69.25   0.000       1.2566    1.329919
       2015  |   .7886571   .0223554    35.28   0.000     .7447716    .8325426
             |
       _cons |   8.918827   .0090066   990.26   0.000     8.901146    8.936507
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (762 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     19,838    9.617042    1.538311   3.496508   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     19,994    .0060665    .0227728  -.1191017   .1306634
9385
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.0000bg not found)
file /tmp/St18055.0000bg saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.0000bh not found)
file /tmp/St18055.0000bh saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.0000bi not found)
file /tmp/St18055.0000bi saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.0000bj not found)
file /tmp/St18055.0000bj saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(28 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     18,700
                                                F(  25,    747)   =    1580.72
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9782
                                                Adj R-squared     =     0.9773
                                                Root MSE          =     0.2298

                                (Std. Err. adjusted for 748 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.395262   .7419061   -11.32   0.000    -9.851731   -6.938793
             |
        year |
       1992  |   .1320137    .020145     6.55   0.000     .0924662    .1715612
       1993  |   .6759529   .0080927    83.53   0.000     .6600657    .6918401
       1994  |   .6937496   .0145249    47.76   0.000     .6652352     .722264
       1995  |   .4355229   .0217686    20.01   0.000      .392788    .4782577
       1996  |   .3790523   .0210867    17.98   0.000      .337656    .4204485
       1997  |   .3940059    .017706    22.25   0.000     .3592464    .4287654
       1998  |   .3579972   .0201018    17.81   0.000     .3185345    .3974599
       1999  |   .3339426   .0191969    17.40   0.000     .2962563     .371629
       2000  |    .332034   .0178442    18.61   0.000     .2970032    .3670648
       2001  |   .3373569   .0152739    22.09   0.000     .3073721    .3673418
       2002  |   .7768492   .0183008    42.45   0.000      .740922    .8127764
       2003  |   .8435528   .0214876    39.26   0.000     .8013696     .885736
       2004  |   .9847043   .0149507    65.86   0.000     .9553538    1.014055
       2005  |   .8145054   .0151849    53.64   0.000     .7846951    .8443156
       2006  |   .7242877   .0181238    39.96   0.000     .6887082    .7598673
       2007  |   .6628373    .017297    38.32   0.000     .6288808    .6967939
       2008  |   .6648899   .0150518    44.17   0.000     .6353409    .6944388
       2009  |   .9539298   .0164364    58.04   0.000     .9216627    .9861969
       2010  |    1.38519   .0529429    26.16   0.000     1.281256    1.489125
       2011  |   1.848445   .0203411    90.87   0.000     1.808512    1.888377
       2012  |   1.871314   .0206459    90.64   0.000     1.830783    1.911844
       2013  |   1.653204   .0229655    71.99   0.000      1.60812    1.698289
       2014  |   1.294621   .0189748    68.23   0.000     1.257371    1.331871
       2015  |   .7876828   .0227559    34.61   0.000     .7430098    .8323558
             |
       _cons |   8.946483   .0091368   979.17   0.000     8.928546    8.964419
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (748 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     19,474    9.644908    1.531214   3.496508   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     19,630    .0060425    .0227852  -.1191017   .1306634
9390
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.0000bl not found)
file /tmp/St18055.0000bl saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.0000bm not found)
file /tmp/St18055.0000bm saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.0000bn not found)
file /tmp/St18055.0000bn saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.0000bo not found)
file /tmp/St18055.0000bo saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(28 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     18,375
                                                F(  25,    734)   =    1597.37
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9782
                                                Adj R-squared     =     0.9772
                                                Root MSE          =     0.2289

                                (Std. Err. adjusted for 735 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.722292   .7251782   -12.03   0.000    -10.14596   -7.298621
             |
        year |
       1992  |   .1225604   .0195066     6.28   0.000     .0842651    .1608557
       1993  |   .6743312     .00811    83.15   0.000     .6584097    .6902528
       1994  |   .6961396   .0144245    48.26   0.000     .6678214    .7244578
       1995  |   .4403623   .0214019    20.58   0.000      .398346    .4823786
       1996  |   .3840975   .0206955    18.56   0.000      .343468     .424727
       1997  |   .3974075   .0174868    22.73   0.000     .3630774    .4317376
       1998  |   .3628317   .0198421    18.29   0.000     .3238778    .4017857
       1999  |   .3380563   .0188551    17.93   0.000     .3010401    .3750726
       2000  |   .3353224   .0173754    19.30   0.000     .3012111    .3694337
       2001  |   .3403394    .015031    22.64   0.000     .3108307    .3698482
       2002  |   .7814755   .0181338    43.09   0.000     .7458752    .8170759
       2003  |   .8348485     .02149    38.85   0.000     .7926594    .8770376
       2004  |   .9792138    .015084    64.92   0.000      .949601    1.008827
       2005  |    .816065   .0151635    53.82   0.000      .786296    .8458339
       2006  |   .7276321   .0180015    40.42   0.000     .6922915    .7629726
       2007  |   .6677944   .0172792    38.65   0.000     .6338718     .701717
       2008  |   .6678832   .0151717    44.02   0.000     .6380981    .6976683
       2009  |     .95174    .016456    57.84   0.000     .9194336    .9840464
       2010  |   1.362351   .0517884    26.31   0.000      1.26068    1.464022
       2011  |   1.841769   .0201298    91.49   0.000      1.80225    1.881288
       2012  |   1.875797   .0207373    90.46   0.000     1.835086    1.916509
       2013  |   1.659888   .0229564    72.31   0.000      1.61482    1.704956
       2014  |   1.299063   .0190377    68.24   0.000     1.261688    1.336438
       2015  |   .7924222   .0226791    34.94   0.000     .7478986    .8369457
             |
       _cons |   8.970058     .00923   971.84   0.000     8.951937    8.988178
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (735 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     19,136     9.66762    1.524619   3.496508   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     19,292    .0059985    .0227779  -.1191017   .1306634
9395
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.0000bq not found)
file /tmp/St18055.0000bq saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.0000br not found)
file /tmp/St18055.0000br saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.0000bs not found)
file /tmp/St18055.0000bs saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.0000bt not found)
file /tmp/St18055.0000bt saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(28 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     18,200
                                                F(  25,    727)   =    1589.42
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9782
                                                Adj R-squared     =     0.9772
                                                Root MSE          =     0.2283

                                (Std. Err. adjusted for 728 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.589164   .7188371   -11.95   0.000    -10.00041    -7.17792
             |
        year |
       1992  |   .1268193   .0193852     6.54   0.000     .0887617    .1648769
       1993  |   .6751488   .0081591    82.75   0.000     .6591307    .6911669
       1994  |   .6932177   .0143624    48.27   0.000      .665021    .7214145
       1995  |    .435503   .0212318    20.51   0.000     .3938201     .477186
       1996  |   .3794484   .0206019    18.42   0.000      .339002    .4198948
       1997  |   .3931306    .017351    22.66   0.000     .3590665    .4271946
       1998  |   .3578598   .0196463    18.22   0.000     .3192896      .39643
       1999  |   .3332985   .0187049    17.82   0.000     .2965764    .3700206
       2000  |   .3319505   .0172281    19.27   0.000     .2981278    .3657732
       2001  |   .3378274   .0148725    22.71   0.000     .3086293    .3670256
       2002  |   .7797325   .0180124    43.29   0.000     .7443699    .8150951
       2003  |   .8401509   .0212684    39.50   0.000     .7983961    .8819057
       2004  |   .9815832   .0150409    65.26   0.000     .9520543    1.011112
       2005  |   .8151617   .0152336    53.51   0.000     .7852546    .8450688
       2006  |   .7267136    .018074    40.21   0.000     .6912302    .7621969
       2007  |   .6677316   .0173605    38.46   0.000     .6336489    .7018143
       2008  |   .6688506   .0152736    43.79   0.000     .6388649    .6988363
       2009  |   .9554144   .0163702    58.36   0.000     .9232758     .987553
       2010  |   1.373148   .0511614    26.84   0.000     1.272707     1.47359
       2011  |   1.846008    .019967    92.45   0.000     1.806808    1.885208
       2012  |   1.875271   .0207868    90.21   0.000     1.834462    1.916081
       2013  |   1.657961    .023022    72.02   0.000     1.612764    1.703159
       2014  |   1.296773   .0191225    67.81   0.000     1.259232    1.334315
       2015  |     .78798   .0226922    34.72   0.000     .7434298    .8325301
             |
       _cons |   8.985684   .0092836   967.91   0.000     8.967458    9.003909
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (728 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     18,954    9.683564    1.520617   3.496508   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     19,110    .0059832    .0227684  -.1191017   .1306634
9400
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.0000bv not found)
file /tmp/St18055.0000bv saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.0000bw not found)
file /tmp/St18055.0000bw saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.0000bx not found)
file /tmp/St18055.0000bx saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.0000c0 not found)
file /tmp/St18055.0000c0 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(28 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     18,050
                                                F(  25,    721)   =    1591.49
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9780
                                                Adj R-squared     =     0.9771
                                                Root MSE          =     0.2285

                                (Std. Err. adjusted for 722 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.565546   .7216133   -11.87   0.000    -9.982261   -7.148832
             |
        year |
       1992  |   .1280852   .0194721     6.58   0.000     .0898564     .166314
       1993  |   .6754321   .0081983    82.39   0.000     .6593368    .6915275
       1994  |   .6923349   .0144113    48.04   0.000     .6640417    .7206281
       1995  |   .4338492   .0213039    20.36   0.000     .3920241    .4756742
       1996  |   .3780655    .020684    18.28   0.000     .3374575    .4186735
       1997  |   .3921585   .0174172    22.52   0.000      .357964     .426353
       1998  |   .3570509   .0197284    18.10   0.000     .3183189     .395783
       1999  |   .3333784   .0187971    17.74   0.000     .2964747     .370282
       2000  |   .3316039   .0173055    19.16   0.000     .2976288     .365579
       2001  |     .33765   .0149455    22.59   0.000     .3083081    .3669918
       2002  |   .7797184   .0180957    43.09   0.000     .7441919    .8152449
       2003  |   .8407941   .0214024    39.29   0.000     .7987757    .8828126
       2004  |    .981967   .0151272    64.91   0.000     .9522685    1.011666
       2005  |   .8150621   .0153221    53.20   0.000     .7849809    .8451433
       2006  |   .7266233     .01818    39.97   0.000     .6909313    .7623154
       2007  |   .6674276   .0174474    38.25   0.000     .6331737    .7016814
       2008  |    .668916   .0153647    43.54   0.000     .6387512    .6990808
       2009  |   .9563233   .0164804    58.03   0.000      .923968    .9886785
       2010  |    1.37481    .051433    26.73   0.000     1.273833    1.475786
       2011  |   1.846586   .0200779    91.97   0.000     1.807168    1.886004
       2012  |    1.87475   .0208966    89.72   0.000     1.833725    1.915776
       2013  |   1.657079   .0231395    71.61   0.000      1.61165    1.702508
       2014  |   1.295323    .019228    67.37   0.000     1.257573    1.333072
       2015  |   .7853225   .0227969    34.45   0.000     .7405664    .8300787
             |
       _cons |    8.99437   .0093492   962.04   0.000     8.976015    9.012725
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (722 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     18,798    9.692246    1.516052   3.496508   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     18,954    .0059694    .0227817  -.1191017   .1306634
9405
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.0000c2 not found)
file /tmp/St18055.0000c2 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.0000c3 not found)
file /tmp/St18055.0000c3 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.0000c4 not found)
file /tmp/St18055.0000c4 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.0000c5 not found)
file /tmp/St18055.0000c5 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(28 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     17,850
                                                F(  25,    713)   =    1570.42
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9780
                                                Adj R-squared     =     0.9770
                                                Root MSE          =     0.2286

                                (Std. Err. adjusted for 714 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.552912   .7305048   -11.71   0.000    -9.987109   -7.118714
             |
        year |
       1992  |   .1286678   .0197053     6.53   0.000     .0899805    .1673552
       1993  |    .675422   .0082671    81.70   0.000     .6591911    .6916528
       1994  |    .691215   .0145997    47.34   0.000     .6625514    .7198785
       1995  |   .4323878   .0215798    20.04   0.000     .3900202    .4747555
       1996  |   .3769864   .0209508    17.99   0.000     .3358538    .4181191
       1997  |   .3916584   .0176085    22.24   0.000     .3570878    .4262291
       1998  |   .3560184    .019956    17.84   0.000     .3168388    .3951981
       1999  |   .3322683   .0190266    17.46   0.000     .2949134    .3696232
       2000  |   .3298198   .0175027    18.84   0.000     .2954568    .3641828
       2001  |   .3364599   .0150833    22.31   0.000     .3068468     .366073
       2002  |   .7798036   .0182148    42.81   0.000     .7440425    .8155647
       2003  |   .8427899   .0216047    39.01   0.000     .8003734    .8852064
       2004  |   .9819629   .0152287    64.48   0.000     .9520645    1.011861
       2005  |   .8147085   .0154383    52.77   0.000     .7843984    .8450186
       2006  |   .7268375   .0183391    39.63   0.000     .6908324    .7628426
       2007  |   .6673271   .0175832    37.95   0.000     .6328061    .7018481
       2008  |   .6688428   .0154466    43.30   0.000     .6385165    .6991691
       2009  |   .9572369   .0166262    57.57   0.000     .9245947    .9898792
       2010  |   1.376326   .0520784    26.43   0.000      1.27408    1.478571
       2011  |   1.847768   .0202561    91.22   0.000     1.807999    1.887536
       2012  |   1.875743   .0210648    89.05   0.000     1.834387      1.9171
       2013  |   1.657294   .0233581    70.95   0.000     1.611436    1.703153
       2014  |   1.295119   .0194056    66.74   0.000      1.25702    1.333218
       2015  |    .783609   .0230397    34.01   0.000     .7383753    .8288427
             |
       _cons |   9.004951   .0094103   956.93   0.000     8.986476    9.023427
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (714 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     18,590    9.702758     1.51596   3.496508   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     18,746    .0059652    .0227893  -.1191017   .1306634
9410
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.0000c7 not found)
file /tmp/St18055.0000c7 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.0000c8 not found)
file /tmp/St18055.0000c8 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.0000c9 not found)
file /tmp/St18055.0000c9 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.0000ca not found)
file /tmp/St18055.0000ca saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(27 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     17,600
                                                F(  25,    703)   =    1568.33
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9782
                                                Adj R-squared     =     0.9773
                                                Root MSE          =     0.2280

                                (Std. Err. adjusted for 704 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.643357   .7482992   -11.55   0.000    -10.11253   -7.174188
             |
        year |
       1992  |   .1272233   .0201893     6.30   0.000     .0875848    .1668618
       1993  |   .6767303   .0083537    81.01   0.000     .6603292    .6931314
       1994  |   .6926988   .0148947    46.51   0.000     .6634553    .7219423
       1995  |   .4334656   .0220953    19.62   0.000     .3900849    .4768463
       1996  |   .3776198   .0214537    17.60   0.000     .3354988    .4197407
       1997  |   .3915353   .0179937    21.76   0.000     .3562074    .4268632
       1998  |   .3562133   .0204221    17.44   0.000     .3161176    .3963089
       1999  |    .332526   .0194725    17.08   0.000     .2942948    .3707572
       2000  |   .3289806   .0178499    18.43   0.000     .2939352    .3640261
       2001  |   .3351988    .015376    21.80   0.000     .3050105    .3653871
       2002  |   .7792095   .0184611    42.21   0.000     .7429639     .815455
       2003  |   .8379477   .0219788    38.13   0.000     .7947957    .8810996
       2004  |   .9794769   .0154117    63.55   0.000     .9492184    1.009735
       2005  |   .8142727   .0156118    52.16   0.000     .7836214     .844924
       2006  |   .7281588   .0185649    39.22   0.000     .6917096    .7646081
       2007  |   .6685541    .017822    37.51   0.000     .6335635    .7035448
       2008  |     .66869   .0156078    42.84   0.000     .6380465    .6993336
       2009  |    .955727   .0167939    56.91   0.000     .9227547    .9886993
       2010  |   1.368262    .053332    25.66   0.000     1.263553    1.472971
       2011  |   1.844672   .0204503    90.20   0.000     1.804521    1.884823
       2012  |   1.876228   .0212395    88.34   0.000     1.834528    1.917929
       2013  |   1.658381   .0236472    70.13   0.000     1.611953    1.704809
       2014  |   1.295093   .0195613    66.21   0.000     1.256688    1.333499
       2015  |   .7830517   .0233024    33.60   0.000     .7373011    .8288023
             |
       _cons |   9.014897   .0094725   951.70   0.000     8.996299    9.033494
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (704 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     18,330    9.711842    1.520863   3.496508   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     18,486    .0059422    .0227991  -.1191017   .1306634
9415
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.0000cc not found)
file /tmp/St18055.0000cc saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.0000cd not found)
file /tmp/St18055.0000cd saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.0000ce not found)
file /tmp/St18055.0000ce saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.0000cf not found)
file /tmp/St18055.0000cf saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(27 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     17,175
                                                F(  25,    686)   =    1525.44
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9781
                                                Adj R-squared     =     0.9771
                                                Root MSE          =     0.2283

                                (Std. Err. adjusted for 687 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.552459   .7571996   -11.29   0.000    -10.03917   -7.065752
             |
        year |
       1992  |   .1315598   .0204223     6.44   0.000     .0914621    .1716575
       1993  |   .6778295   .0084736    79.99   0.000     .6611923    .6944668
       1994  |   .6914103   .0151154    45.74   0.000     .6617323    .7210883
       1995  |   .4304012    .022381    19.23   0.000     .3864577    .4743446
       1996  |   .3742004   .0217534    17.20   0.000     .3314892    .4169115
       1997  |   .3883985   .0182464    21.29   0.000      .352573    .4242241
       1998  |   .3531288   .0207433    17.02   0.000     .3124007    .3938568
       1999  |    .329616    .019797    16.65   0.000     .2907461    .3684859
       2000  |   .3260611   .0180838    18.03   0.000     .2905548    .3615674
       2001  |   .3330407   .0155881    21.37   0.000     .3024345    .3636468
       2002  |    .778894   .0186299    41.81   0.000     .7423154    .8154725
       2003  |   .8437082   .0222663    37.89   0.000     .7999899    .8874265
       2004  |   .9826667   .0156928    62.62   0.000      .951855    1.013478
       2005  |    .815423   .0158609    51.41   0.000     .7842812    .8465648
       2006  |   .7274873   .0187877    38.72   0.000     .6905989    .7643756
       2007  |   .6699456   .0181098    36.99   0.000     .6343884    .7055029
       2008  |   .6709319   .0158487    42.33   0.000     .6398141    .7020497
       2009  |   .9619078   .0170624    56.38   0.000      .928407    .9954086
       2010  |    1.37884   .0542016    25.44   0.000     1.272419    1.485261
       2011  |   1.850698   .0208513    88.76   0.000     1.809759    1.891638
       2012  |   1.880271    .021535    87.31   0.000     1.837989    1.922554
       2013  |   1.662091   .0239791    69.31   0.000      1.61501    1.709172
       2014  |   1.298553   .0198555    65.40   0.000     1.259568    1.337538
       2015  |   .7832927   .0236607    33.11   0.000     .7368365    .8297489
             |
       _cons |   9.050446   .0096406   938.79   0.000     9.031517    9.069374
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (687 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     17,888    9.749164    1.517314   3.496508   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     18,044    .0059259    .0228225  -.1191017   .1306634
9420
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.0000ch not found)
file /tmp/St18055.0000ch saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.0000ci not found)
file /tmp/St18055.0000ci saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.0000cj not found)
file /tmp/St18055.0000cj saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.0000ck not found)
file /tmp/St18055.0000ck saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(27 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     16,875
                                                F(  25,    674)   =    1509.87
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9776
                                                Adj R-squared     =     0.9766
                                                Root MSE          =     0.2284

                                (Std. Err. adjusted for 675 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.523528    .779223   -10.94   0.000    -10.05352   -6.993532
             |
        year |
       1992  |   .1323934   .0209686     6.31   0.000     .0912217    .1735651
       1993  |   .6770162   .0085351    79.32   0.000     .6602576    .6937748
       1994  |   .6903617   .0154528    44.68   0.000     .6600204     .720703
       1995  |   .4272049   .0229493    18.62   0.000     .3821442    .4722656
       1996  |   .3712666   .0223161    16.64   0.000     .3274492     .415084
       1997  |   .3849201   .0186673    20.62   0.000      .348267    .4215731
       1998  |   .3501906    .021274    16.46   0.000     .3084193    .3919619
       1999  |   .3269242   .0202887    16.11   0.000     .2870876    .3667608
       2000  |   .3235111   .0184505    17.53   0.000     .2872837    .3597386
       2001  |   .3305041   .0158689    20.83   0.000     .2993457    .3616624
       2002  |   .7781575   .0189421    41.08   0.000     .7409648    .8153502
       2003  |   .8444363    .022843    36.97   0.000     .7995843    .8892884
       2004  |   .9833309   .0159952    61.48   0.000     .9519245    1.014737
       2005  |   .8144825   .0160989    50.59   0.000     .7828725    .8460926
       2006  |   .7270201   .0191204    38.02   0.000     .6894774    .7645627
       2007  |   .6707466   .0184158    36.42   0.000     .6345874    .7069058
       2008  |   .6719646   .0160559    41.85   0.000     .6404389    .7034903
       2009  |   .9635951   .0173026    55.69   0.000     .9296217    .9975684
       2010  |   1.381814   .0557314    24.79   0.000     1.272386    1.491242
       2011  |   1.851448   .0212228    87.24   0.000     1.809777    1.893119
       2012  |   1.879369   .0218793    85.90   0.000     1.836409    1.922329
       2013  |   1.661152   .0244471    67.95   0.000     1.613151    1.709154
       2014  |   1.297757   .0202302    64.15   0.000     1.258035    1.337478
       2015  |   .7822821   .0241306    32.42   0.000     .7349019    .8296623
             |
       _cons |   9.073629   .0097601   929.66   0.000     9.054466    9.092793
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (675 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     17,576    9.771907    1.500258   4.955827   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     17,732    .0059193    .0228131  -.1191017   .1306634
9425
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.0000cm not found)
file /tmp/St18055.0000cm saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.0000cn not found)
file /tmp/St18055.0000cn saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.0000co not found)
file /tmp/St18055.0000co saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.0000cp not found)
file /tmp/St18055.0000cp saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(27 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     16,625
                                                F(  25,    664)   =    1555.92
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9776
                                                Adj R-squared     =     0.9767
                                                Root MSE          =     0.2273

                                (Std. Err. adjusted for 665 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.404287   .8277241   -10.15   0.000    -10.02956   -6.779015
             |
        year |
       1992  |   .1354805   .0222645     6.09   0.000     .0917632    .1791977
       1993  |    .677578   .0085676    79.09   0.000     .6607552    .6944008
       1994  |   .6877764   .0160847    42.76   0.000     .6561935    .7193594
       1995  |   .4229008   .0241348    17.52   0.000     .3755111    .4702906
       1996  |   .3676546   .0234791    15.66   0.000     .3215524    .4137568
       1997  |   .3821548   .0195447    19.55   0.000      .343778    .4205316
       1998  |   .3473112   .0223538    15.54   0.000     .3034186    .3912039
       1999  |   .3240779   .0213096    15.21   0.000     .2822356    .3659202
       2000  |   .3213707   .0191564    16.78   0.000     .2837564    .3589851
       2001  |   .3292007   .0163544    20.13   0.000     .2970881    .3613132
       2002  |   .7785765   .0195988    39.73   0.000     .7400934    .8170596
       2003  |    .850837   .0239017    35.60   0.000     .8039051     .897769
       2004  |   .9882252   .0164437    60.10   0.000     .9559372    1.020513
       2005  |   .8173386    .016401    49.83   0.000     .7851346    .8495427
       2006  |   .7290131   .0196256    37.15   0.000     .6904774    .7675489
       2007  |   .6727677   .0188736    35.65   0.000     .6357085    .7098268
       2008  |   .6752471   .0162765    41.49   0.000     .6432875    .7072067
       2009  |   .9700419   .0175538    55.26   0.000     .9355742     1.00451
       2010  |   1.394517    .059095    23.60   0.000     1.278482    1.510553
       2011  |   1.859427   .0217824    85.36   0.000     1.816656    1.902197
       2012  |   1.884096    .022381    84.18   0.000      1.84015    1.928042
       2013  |   1.664472    .025266    65.88   0.000     1.614862    1.714083
       2014  |   1.300274   .0207635    62.62   0.000     1.259504    1.341044
       2015  |   .7824037   .0249698    31.33   0.000     .7333745     .831433
             |
       _cons |   9.084964    .009835   923.74   0.000     9.065652    9.104275
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (665 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     17,316    9.785609    1.496436   4.955827   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     17,472    .0058992    .0227977  -.1191017   .1306634
9430
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.0000cr not found)
file /tmp/St18055.0000cr saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.0000cs not found)
file /tmp/St18055.0000cs saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.0000ct not found)
file /tmp/St18055.0000ct saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.0000cu not found)
file /tmp/St18055.0000cu saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(27 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     16,425
                                                F(  25,    656)   =    1544.42
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9776
                                                Adj R-squared     =     0.9766
                                                Root MSE          =     0.2275

                                (Std. Err. adjusted for 657 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.406722   .8436214    -9.97   0.000    -10.06325   -6.750198
             |
        year |
       1992  |   .1357174   .0226814     5.98   0.000     .0911806    .1802543
       1993  |   .6780044   .0086329    78.54   0.000      .661053    .6949557
       1994  |    .687727   .0163625    42.03   0.000     .6555979    .7198562
       1995  |   .4227967   .0245972    17.19   0.000     .3744979    .4710955
       1996  |   .3673854   .0239212    15.36   0.000     .3204141    .4143568
       1997  |    .381506   .0199128    19.16   0.000     .3424055    .4206065
       1998  |   .3469628   .0227801    15.23   0.000      .302232    .3916936
       1999  |   .3241401   .0217263    14.92   0.000     .2814786    .3668017
       2000  |   .3209766   .0194846    16.47   0.000     .2827168    .3592363
       2001  |   .3294274   .0166198    19.82   0.000     .2967929    .3620618
       2002  |   .7788259   .0199515    39.04   0.000     .7396494    .8180024
       2003  |   .8520006   .0242618    35.12   0.000     .8043603    .8996408
       2004  |   .9893881     .01663    59.49   0.000     .9567336    1.022043
       2005  |   .8178503   .0166363    49.16   0.000     .7851834    .8505171
       2006  |   .7297812   .0199162    36.64   0.000     .6906741    .7688883
       2007  |   .6732431   .0191282    35.20   0.000     .6356833    .7108029
       2008  |   .6764449   .0164638    41.09   0.000     .6441168     .708773
       2009  |   .9715669    .017742    54.76   0.000      .936729    1.006405
       2010  |   1.396312   .0601546    23.21   0.000     1.278193    1.514431
       2011  |   1.861891   .0220089    84.60   0.000     1.818674    1.905107
       2012  |   1.886304    .022695    83.12   0.000     1.841741    1.930868
       2013  |   1.667117   .0256677    64.95   0.000     1.616716    1.717517
       2014  |   1.302705   .0210326    61.94   0.000     1.261406    1.344004
       2015  |   .7845006   .0252856    31.03   0.000       .73485    .8341511
             |
       _cons |   9.100922   .0099373   915.84   0.000      9.08141    9.120435
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (657 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     17,108    9.802108    1.496509   4.955827   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     17,264    .0059259    .0227802  -.1191017   .1306634
9435
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.0000cw not found)
file /tmp/St18055.0000cw saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.0000cx not found)
file /tmp/St18055.0000cx saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.0000d0 not found)
file /tmp/St18055.0000d0 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.0000d1 not found)
file /tmp/St18055.0000d1 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(27 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     16,200
                                                F(  25,    647)   =    1540.10
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9777
                                                Adj R-squared     =     0.9767
                                                Root MSE          =     0.2274

                                (Std. Err. adjusted for 648 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |   -8.47638   .8609251    -9.85   0.000    -10.16692   -6.785835
             |
        year |
       1992  |   .1338249   .0231513     5.78   0.000     .0883642    .1792857
       1993  |   .6771356   .0086759    78.05   0.000     .6600992    .6941719
       1994  |   .6870229   .0166483    41.27   0.000     .6543316    .7197141
       1995  |   .4237991    .025066    16.91   0.000     .3745785    .4730198
       1996  |    .368718    .024385    15.12   0.000     .3208346    .4166013
       1997  |   .3815878   .0202551    18.84   0.000     .3418141    .4213614
       1998  |   .3475664   .0231947    14.98   0.000     .3020204    .3931123
       1999  |   .3242869   .0220758    14.69   0.000      .280938    .3676358
       2000  |   .3213611   .0197791    16.25   0.000     .2825221    .3602001
       2001  |   .3308047   .0168266    19.66   0.000     .2977633     .363846
       2002  |   .7806301   .0201069    38.82   0.000     .7411475    .8201127
       2003  |   .8513096   .0247765    34.36   0.000     .8026576    .8999616
       2004  |   .9892999   .0169187    58.47   0.000     .9560777    1.022522
       2005  |   .8190073   .0167367    48.93   0.000     .7861426    .8518721
       2006  |    .732815   .0200449    36.56   0.000     .6934541    .7721758
       2007  |   .6757207   .0192534    35.10   0.000      .637914    .7135273
       2008  |   .6770384   .0165177    40.99   0.000     .6446036    .7094733
       2009  |   .9709811   .0179296    54.16   0.000     .9357738    1.006188
       2010  |   1.390055   .0615196    22.60   0.000     1.269253    1.510857
       2011  |   1.858393   .0223562    83.13   0.000     1.814494    1.902293
       2012  |   1.885737   .0228518    82.52   0.000     1.840864    1.930609
       2013  |    1.66735   .0258833    64.42   0.000     1.616524    1.718175
       2014  |   1.302839   .0211725    61.53   0.000     1.261264    1.344414
       2015  |   .7857268   .0255624    30.74   0.000     .7355314    .8359221
             |
       _cons |   9.110816   .0100021   910.89   0.000     9.091175    9.130457
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (648 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     16,874    9.811777    1.499592   4.955827   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     17,030    .0059192    .0227743  -.1191017   .1306634
9440
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.0000d3 not found)
file /tmp/St18055.0000d3 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.0000d4 not found)
file /tmp/St18055.0000d4 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.0000d5 not found)
file /tmp/St18055.0000d5 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.0000d6 not found)
file /tmp/St18055.0000d6 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(27 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     15,825
                                                F(  25,    632)   =    1506.58
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9778
                                                Adj R-squared     =     0.9768
                                                Root MSE          =     0.2274

                                (Std. Err. adjusted for 633 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.555647   .9007033    -9.50   0.000    -10.32438   -6.786913
             |
        year |
       1992  |   .1341735   .0242157     5.54   0.000     .0866205    .1817265
       1993  |   .6778595   .0088249    76.81   0.000     .6605299    .6951891
       1994  |   .6883363   .0173421    39.69   0.000     .6542811    .7223914
       1995  |   .4248639   .0262065    16.21   0.000     .3734015    .4763263
       1996  |   .3696944   .0254784    14.51   0.000     .3196618    .4197269
       1997  |   .3824249   .0210857    18.14   0.000     .3410184    .4238314
       1998  |   .3489771   .0241738    14.44   0.000     .3015064    .3964478
       1999  |   .3254242   .0230024    14.15   0.000     .2802538    .3705945
       2000  |   .3215523   .0206113    15.60   0.000     .2810774    .3620272
       2001  |   .3312802   .0174195    19.02   0.000     .2970731    .3654874
       2002  |   .7841644   .0207264    37.83   0.000     .7434634    .8248653
       2003  |   .8548074   .0257209    33.23   0.000     .8042987    .9053161
       2004  |   .9924243   .0173519    57.19   0.000     .9583499    1.026499
       2005  |   .8231829   .0171406    48.03   0.000     .7895236    .8568423
       2006  |   .7371686   .0206094    35.77   0.000     .6966975    .7776397
       2007  |   .6814686   .0197313    34.54   0.000     .6427218    .7202155
       2008  |   .6821396    .016797    40.61   0.000      .649155    .7151242
       2009  |   .9762777   .0183212    53.29   0.000        .9403    1.012255
       2010  |   1.390139   .0642566    21.63   0.000     1.263957    1.516321
       2011  |   1.862974   .0229308    81.24   0.000     1.817944    1.908003
       2012  |   1.893234   .0234316    80.80   0.000     1.847221    1.939247
       2013  |   1.674138   .0266916    62.72   0.000     1.621723    1.726553
       2014  |   1.307501   .0217448    60.13   0.000       1.2648    1.350202
       2015  |   .7876595   .0263681    29.87   0.000     .7358798    .8394391
             |
       _cons |   9.134475   .0101705   898.13   0.000     9.114502    9.154447
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (633 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     16,484    9.837577     1.50313   4.955827   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     16,640    .0059274    .0227667  -.1191017   .1306634
9445
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.0000d8 not found)
file /tmp/St18055.0000d8 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.0000d9 not found)
file /tmp/St18055.0000d9 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.0000da not found)
file /tmp/St18055.0000da saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.0000db not found)
file /tmp/St18055.0000db saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(27 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     15,625
                                                F(  25,    624)   =    1555.83
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9781
                                                Adj R-squared     =     0.9771
                                                Root MSE          =     0.2265

                                (Std. Err. adjusted for 625 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.501741   .9042047    -9.40   0.000    -10.27739   -6.726089
             |
        year |
       1992  |   .1364378   .0242846     5.62   0.000     .0887485    .1841272
       1993  |     .67927   .0088594    76.67   0.000     .6618722    .6966678
       1994  |   .6878478    .017454    39.41   0.000     .6535722    .7221235
       1995  |   .4220012   .0263459    16.02   0.000     .3702638    .4737385
       1996  |   .3670456   .0255938    14.34   0.000     .3167851    .4173061
       1997  |   .3805502   .0211979    17.95   0.000     .3389223    .4221781
       1998  |   .3467547   .0243096    14.26   0.000     .2990162    .3944931
       1999  |   .3229893   .0231227    13.97   0.000     .2775816    .3683971
       2000  |   .3195065   .0207195    15.42   0.000     .2788181    .3601949
       2001  |   .3306264   .0175393    18.85   0.000     .2961831    .3650697
       2002  |   .7837551   .0208169    37.65   0.000     .7428754    .8246348
       2003  |   .8567715    .025873    33.11   0.000     .8059627    .9075802
       2004  |   .9923206   .0174543    56.85   0.000     .9580444    1.026597
       2005  |   .8219452    .017234    47.69   0.000     .7881015    .8557889
       2006  |   .7361267   .0207182    35.53   0.000      .695441    .7768125
       2007  |   .6802452   .0198096    34.34   0.000     .6413436    .7191468
       2008  |   .6814944   .0168643    40.41   0.000     .6483767    .7146122
       2009  |   .9770075   .0183958    53.11   0.000     .9408824    1.013133
       2010  |   1.394798   .0645148    21.62   0.000     1.268106    1.521491
       2011  |   1.864663   .0229836    81.13   0.000     1.819529    1.909798
       2012  |   1.893616   .0234646    80.70   0.000     1.847537    1.939696
       2013  |   1.673998   .0267591    62.56   0.000     1.621449    1.726547
       2014  |   1.307554   .0218281    59.90   0.000     1.264689     1.35042
       2015  |    .785656   .0264964    29.65   0.000     .7336231    .8376888
             |
       _cons |   9.142326   .0102264   893.99   0.000     9.122244    9.162409
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (625 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     16,276    9.845283    1.506184   4.955827   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     16,432    .0059411    .0227724  -.1191017   .1306634
9450
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.0000dd not found)
file /tmp/St18055.0000dd saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.0000de not found)
file /tmp/St18055.0000de saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.0000df not found)
file /tmp/St18055.0000df saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.0000dg not found)
file /tmp/St18055.0000dg saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(27 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     15,450
                                                F(  25,    617)   =    1531.58
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9781
                                                Adj R-squared     =     0.9771
                                                Root MSE          =     0.2269

                                (Std. Err. adjusted for 618 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.539717   .9097417    -9.39   0.000    -10.32628   -6.753152
             |
        year |
       1992  |   .1369262   .0244151     5.61   0.000     .0889793     .184873
       1993  |   .6805291   .0089308    76.20   0.000     .6629907    .6980675
       1994  |   .6897616   .0175792    39.24   0.000     .6552393    .7242839
       1995  |   .4241301   .0265058    16.00   0.000     .3720777    .4761826
       1996  |   .3691414   .0257392    14.34   0.000     .3185944    .4196883
       1997  |   .3825344   .0213233    17.94   0.000     .3406594    .4244094
       1998  |   .3491849   .0244497    14.28   0.000     .3011702    .3971996
       1999  |     .32551   .0232612    13.99   0.000     .2798292    .3711908
       2000  |   .3218616   .0208517    15.44   0.000     .2809126    .3628106
       2001  |   .3325092   .0176338    18.86   0.000     .2978797    .3671387
       2002  |   .7862062   .0210011    37.44   0.000     .7449639    .8274484
       2003  |   .8577884   .0260284    32.96   0.000     .8066734    .9089034
       2004  |   .9934491   .0175844    56.50   0.000     .9589165    1.027982
       2005  |   .8244737   .0173816    47.43   0.000     .7903395    .8586079
       2006  |   .7385166   .0209005    35.33   0.000     .6974717    .7795614
       2007  |   .6822481   .0199812    34.14   0.000     .6430087    .7214875
       2008  |   .6838825   .0169904    40.25   0.000     .6505165    .7172485
       2009  |   .9795505   .0185126    52.91   0.000     .9431951    1.015906
       2010  |   1.393951   .0649077    21.48   0.000     1.266484    1.521418
       2011  |   1.866068   .0231573    80.58   0.000     1.820591    1.911544
       2012  |   1.896532    .023649    80.20   0.000      1.85009    1.942974
       2013  |   1.677575   .0269498    62.25   0.000     1.624651    1.730499
       2014  |   1.310041   .0220102    59.52   0.000     1.266817    1.353265
       2015  |   .7876713   .0266937    29.51   0.000     .7352498    .8400929
             |
       _cons |   9.149883    .010313   887.22   0.000      9.12963    9.170135
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (618 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     16,094    9.854258    1.509265   4.955827   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     16,250    .0059616    .0227781  -.1191017   .1306634
9455
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.0000di not found)
file /tmp/St18055.0000di saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.0000dj not found)
file /tmp/St18055.0000dj saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.0000dk not found)
file /tmp/St18055.0000dk saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.0000dl not found)
file /tmp/St18055.0000dl saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(27 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     15,175
                                                F(  25,    606)   =    1501.37
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9780
                                                Adj R-squared     =     0.9771
                                                Root MSE          =     0.2272

                                (Std. Err. adjusted for 607 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.399529   .9176407    -9.15   0.000    -10.20167   -6.597387
             |
        year |
       1992  |   .1406981   .0245992     5.72   0.000     .0923881    .1890081
       1993  |   .6804743   .0089678    75.88   0.000     .6628625    .6980861
       1994  |     .68746   .0177568    38.72   0.000     .6525877    .7223323
       1995  |   .4199348   .0267559    15.70   0.000     .3673892    .4724804
       1996  |   .3642327   .0259156    14.05   0.000     .3133374     .415128
       1997  |   .3799285   .0215184    17.66   0.000     .3376688    .4221882
       1998  |   .3459369   .0247049    14.00   0.000     .2974192    .3944545
       1999  |    .322234   .0235145    13.70   0.000     .2760543    .3684137
       2000  |   .3197741   .0211129    15.15   0.000     .2783107    .3612374
       2001  |   .3310864   .0178668    18.53   0.000      .295998    .3661749
       2002  |   .7852556   .0212374    36.98   0.000     .7435478    .8269634
       2003  |   .8635246   .0262385    32.91   0.000     .8119952    .9150541
       2004  |   .9967992   .0177544    56.14   0.000     .9619315    1.031667
       2005  |   .8239647    .017579    46.87   0.000     .7894415    .8584879
       2006  |   .7380875   .0211752    34.86   0.000     .6965018    .7796732
       2007  |   .6817745   .0202544    33.66   0.000     .6419971    .7215519
       2008  |   .6845362    .017215    39.76   0.000     .6507279    .7183446
       2009  |    .982568   .0187357    52.44   0.000     .9457733    1.019363
       2010  |   1.405109    .065536    21.44   0.000     1.276403    1.533814
       2011  |   1.870188   .0234122    79.88   0.000      1.82421    1.916167
       2012  |    1.89607   .0238913    79.36   0.000      1.84915     1.94299
       2013  |   1.675485   .0272197    61.55   0.000     1.622028    1.728941
       2014  |    1.30938   .0222564    58.83   0.000     1.265671    1.353089
       2015  |   .7870308   .0269929    29.16   0.000     .7340198    .8400418
             |
       _cons |   9.167062   .0104326   878.70   0.000     9.146573     9.18755
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (607 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     15,808    9.872208    1.508835   4.955827   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     15,964    .0059734     .022787  -.1191017   .1306634
9460
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.0000dn not found)
file /tmp/St18055.0000dn saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.0000do not found)
file /tmp/St18055.0000do saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.0000dp not found)
file /tmp/St18055.0000dp saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.0000dq not found)
file /tmp/St18055.0000dq saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(27 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     14,975
                                                F(  25,    598)   =    1484.21
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9782
                                                Adj R-squared     =     0.9773
                                                Root MSE          =     0.2261

                                (Std. Err. adjusted for 599 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.271267   .9189985    -9.00   0.000    -10.07612    -6.46641
             |
        year |
       1992  |    .145158     .02456     5.91   0.000     .0969237    .1933924
       1993  |   .6811383   .0089815    75.84   0.000     .6634993    .6987774
       1994  |   .6850717   .0178028    38.48   0.000     .6501081    .7200353
       1995  |   .4155529   .0267974    15.51   0.000     .3629244    .4681814
       1996  |   .3600277   .0259655    13.87   0.000     .3090331    .4110223
       1997  |     .37641   .0215556    17.46   0.000     .3340761     .418744
       1998  |   .3421198   .0247439    13.83   0.000     .2935243    .3907153
       1999  |   .3188702   .0235561    13.54   0.000     .2726075     .365133
       2000  |   .3164669   .0211621    14.95   0.000     .2749059    .3580279
       2001  |   .3282709   .0178843    18.36   0.000     .2931472    .3633945
       2002  |   .7834744   .0212425    36.88   0.000     .7417554    .8251935
       2003  |   .8681918   .0262783    33.04   0.000     .8165829    .9198007
       2004  |   1.000121   .0177452    56.36   0.000     .9652707    1.034972
       2005  |   .8239292   .0176089    46.79   0.000     .7893463     .858512
       2006  |   .7386567   .0211687    34.89   0.000     .6970826    .7802307
       2007  |    .681712   .0202285    33.70   0.000     .6419844    .7214396
       2008  |    .685452   .0171713    39.92   0.000     .6517288    .7191753
       2009  |   .9852436   .0186511    52.82   0.000      .948614    1.021873
       2010  |   1.414549   .0655834    21.57   0.000     1.285747    1.543351
       2011  |   1.872941   .0234077    80.01   0.000      1.82697    1.918912
       2012  |   1.894782   .0239768    79.03   0.000     1.847693    1.941871
       2013  |   1.674332   .0273198    61.29   0.000     1.620678    1.727986
       2014  |    1.30931   .0223549    58.57   0.000     1.265406    1.353213
       2015  |   .7851518   .0271271    28.94   0.000     .7318758    .8384278
             |
       _cons |   9.183496   .0104507   878.74   0.000     9.162972    9.204021
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (599 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     15,600    9.889131    1.507996   4.955827   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     15,756    .0059808    .0227812  -.1191017   .1306634
9465
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.0000ds not found)
file /tmp/St18055.0000ds saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.0000dt not found)
file /tmp/St18055.0000dt saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.0000du not found)
file /tmp/St18055.0000du saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.0000dv not found)
file /tmp/St18055.0000dv saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(27 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     14,750
                                                F(  25,    589)   =    1466.67
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9781
                                                Adj R-squared     =     0.9772
                                                Root MSE          =     0.2256

                                (Std. Err. adjusted for 590 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.288534   .9270839    -8.94   0.000    -10.10933   -6.467742
             |
        year |
       1992  |   .1467003   .0247368     5.93   0.000     .0981172    .1952834
       1993  |   .6820299   .0089733    76.01   0.000     .6644062    .6996535
       1994  |   .6843635   .0179199    38.19   0.000     .6491689    .7195581
       1995  |   .4142406   .0270142    15.33   0.000     .3611847    .4672965
       1996  |   .3584205   .0261815    13.69   0.000     .3070001     .409841
       1997  |   .3747534    .021697    17.27   0.000     .3321405    .4173663
       1998  |   .3408176   .0249637    13.65   0.000     .2917889    .3898463
       1999  |   .3174454   .0237693    13.36   0.000     .2707624    .3641284
       2000  |   .3142861   .0213013    14.75   0.000     .2724504    .3561218
       2001  |   .3280606   .0180062    18.22   0.000     .2926964    .3634249
       2002  |   .7840493   .0213066    36.80   0.000      .742203    .8258955
       2003  |   .8683463   .0266314    32.61   0.000     .8160421    .9206504
       2004  |   1.000321   .0179464    55.74   0.000     .9650739    1.035567
       2005  |   .8241952   .0177326    46.48   0.000     .7893683    .8590221
       2006  |   .7405412   .0213188    34.74   0.000      .698671    .7824114
       2007  |    .684674   .0203658    33.62   0.000     .6446755    .7246725
       2008  |   .6880116   .0173217    39.72   0.000     .6539919    .7220313
       2009  |   .9870531   .0188821    52.27   0.000     .9499687    1.024138
       2010  |   1.414179   .0663136    21.33   0.000     1.283939    1.544419
       2011  |   1.874195   .0236967    79.09   0.000     1.827655    1.920735
       2012  |   1.896442   .0241517    78.52   0.000     1.849008    1.943876
       2013  |   1.676392   .0275067    60.94   0.000     1.622369    1.730415
       2014  |   1.311358   .0225087    58.26   0.000     1.267151    1.355565
       2015  |   .7853268    .027328    28.74   0.000     .7316546     .838999
             |
       _cons |   9.201431   .0105472   872.41   0.000     9.180716    9.222146
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (590 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     15,366    9.907649    1.501977   4.955827   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     15,522    .0059454    .0227915  -.1191017   .1306634
9470
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.0000dx not found)
file /tmp/St18055.0000dx saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.0000e0 not found)
file /tmp/St18055.0000e0 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.0000e1 not found)
file /tmp/St18055.0000e1 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.0000e2 not found)
file /tmp/St18055.0000e2 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(27 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     14,550
                                                F(  25,    581)   =    1437.50
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9781
                                                Adj R-squared     =     0.9772
                                                Root MSE          =     0.2257

                                (Std. Err. adjusted for 582 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.894306   .7792982   -11.41   0.000    -10.42489   -7.363721
             |
        year |
       1992  |   .1315008   .0209372     6.28   0.000     .0903789    .1726226
       1993  |   .6819012    .009087    75.04   0.000     .6640539    .6997486
       1994  |   .6940859   .0162058    42.83   0.000     .6622568     .725915
       1995  |    .430754   .0237109    18.17   0.000     .3841844    .4773236
       1996  |   .3752374   .0227991    16.46   0.000     .3304586    .4200161
       1997  |   .3878575   .0193283    20.07   0.000     .3498958    .4258193
       1998  |   .3558597   .0223286    15.94   0.000      .312005    .3997143
       1999  |    .331494   .0216373    15.32   0.000     .2889972    .3739908
       2000  |   .3264783   .0196924    16.58   0.000     .2878013    .3651553
       2001  |   .3384493   .0168348    20.10   0.000     .3053849    .3715138
       2002  |   .7956575   .0203156    39.16   0.000     .7557566    .8355584
       2003  |   .8563822   .0234449    36.53   0.000     .8103352    .9024292
       2004  |   .9949457   .0168416    59.08   0.000     .9618678    1.028024
       2005  |   .8315519   .0174329    47.70   0.000     .7973127     .865791
       2006  |   .7514246   .0203725    36.88   0.000     .7114119    .7914374
       2007  |   .6948482   .0196633    35.34   0.000     .6562283    .7334681
       2008  |   .6935748   .0173616    39.95   0.000     .6594756    .7276739
       2009  |   .9833517   .0179561    54.76   0.000      .948085    1.018618
       2010  |   1.373896   .0552082    24.89   0.000     1.265464    1.482328
       2011  |   1.865535   .0214926    86.80   0.000     1.823323    1.907748
       2012  |   1.907763   .0234014    81.52   0.000     1.861801    1.953725
       2013  |   1.691005   .0259847    65.08   0.000      1.63997     1.74204
       2014  |   1.321841    .021761    60.74   0.000     1.279101    1.364581
       2015  |    .798312   .0258152    30.92   0.000     .7476094    .8490145
             |
       _cons |   9.215302   .0106773   863.07   0.000     9.194331    9.236272
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (582 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     15,158    9.923054    1.503655   4.955827   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     15,314    .0059385    .0227476  -.1191017   .0965822
9475
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.0000e4 not found)
file /tmp/St18055.0000e4 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.0000e5 not found)
file /tmp/St18055.0000e5 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.0000e6 not found)
file /tmp/St18055.0000e6 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.0000e7 not found)
file /tmp/St18055.0000e7 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(27 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     14,250
                                                F(  25,    569)   =    1413.71
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9779
                                                Adj R-squared     =     0.9769
                                                Root MSE          =     0.2249

                                (Std. Err. adjusted for 570 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.615282   .7888114   -10.92   0.000    -10.16462   -7.065944
             |
        year |
       1992  |    .138971   .0211184     6.58   0.000     .0974915    .1804506
       1993  |    .682224   .0091216    74.79   0.000     .6643078    .7001402
       1994  |   .6893952   .0163183    42.25   0.000     .6573438    .7214466
       1995  |   .4220015   .0238282    17.71   0.000     .3751995    .4688035
       1996  |    .366713   .0229508    15.98   0.000     .3216344    .4117915
       1997  |   .3804013   .0194927    19.52   0.000     .3421149    .4186877
       1998  |   .3468402   .0224402    15.46   0.000     .3027644    .3909161
       1999  |     .32337   .0217605    14.86   0.000     .2806293    .3661106
       2000  |   .3194731   .0197179    16.20   0.000     .2807443    .3582019
       2001  |   .3321143   .0167468    19.83   0.000     .2992212    .3650075
       2002  |   .7885762    .020335    38.78   0.000     .7486353     .828517
       2003  |   .8615459   .0239704    35.94   0.000     .8144645    .9086273
       2004  |   .9954025   .0169929    58.58   0.000      .962026    1.028779
       2005  |   .8242762   .0173421    47.53   0.000     .7902138    .8583386
       2006  |   .7428632   .0202893    36.61   0.000     .7030121    .7827143
       2007  |   .6867458   .0195409    35.14   0.000     .6483647     .725127
       2008  |   .6879167   .0173748    39.59   0.000     .6537902    .7220432
       2009  |   .9820843   .0182185    53.91   0.000     .9463006    1.017868
       2010  |   1.390165   .0562127    24.73   0.000     1.279755    1.500575
       2011  |   1.866677   .0218515    85.43   0.000     1.823757    1.909596
       2012  |   1.900506   .0233493    81.39   0.000     1.854645    1.946368
       2013  |   1.682114   .0259293    64.87   0.000     1.631185    1.733043
       2014  |   1.314169   .0216602    60.67   0.000     1.271625    1.356713
       2015  |   .7872849   .0255818    30.78   0.000     .7370387    .8375311
             |
       _cons |   9.236372   .0106705   865.60   0.000     9.215413     9.25733
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (570 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     14,846    9.941577     1.48842   4.955827   16.13959

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     15,002    .0059466    .0227347  -.1086787   .0965822
9480
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.0000e9 not found)
file /tmp/St18055.0000e9 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.0000ea not found)
file /tmp/St18055.0000ea saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.0000eb not found)
file /tmp/St18055.0000eb saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.0000ec not found)
file /tmp/St18055.0000ec saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(27 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     14,000
                                                F(  25,    559)   =    1383.82
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9780
                                                Adj R-squared     =     0.9770
                                                Root MSE          =     0.2245

                                (Std. Err. adjusted for 560 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.539362   .7964458   -10.72   0.000    -10.10375   -6.974969
             |
        year |
       1992  |   .1416111   .0212048     6.68   0.000     .0999603    .1832619
       1993  |   .6820048   .0092386    73.82   0.000     .6638581    .7001514
       1994  |   .6878457   .0165224    41.63   0.000     .6553921    .7202992
       1995  |   .4195218    .024135    17.38   0.000     .3721155    .4669281
       1996  |   .3639633   .0232855    15.63   0.000     .3182256     .409701
       1997  |   .3785024   .0198123    19.10   0.000     .3395867     .417418
       1998  |   .3446508    .022806    15.11   0.000      .299855    .3894467
       1999  |   .3198769   .0220883    14.48   0.000     .2764907     .363263
       2000  |   .3160772   .0199803    15.82   0.000     .2768316    .3553228
       2001  |   .3306127   .0170143    19.43   0.000     .2971931    .3640324
       2002  |   .7869717   .0205639    38.27   0.000     .7465797    .8273637
       2003  |    .863166   .0242418    35.61   0.000     .8155498    .9107821
       2004  |   .9953174   .0171995    57.87   0.000     .9615339    1.029101
       2005  |   .8228063    .017543    46.90   0.000      .788348    .8572647
       2006  |   .7417257   .0205283    36.13   0.000     .7014038    .7820477
       2007  |   .6852545   .0197681    34.66   0.000     .6464257    .7240833
       2008  |   .6864641   .0175799    39.05   0.000     .6519333     .720995
       2009  |   .9818112   .0184131    53.32   0.000      .945644    1.017978
       2010  |   1.394645   .0568008    24.55   0.000     1.283076    1.506215
       2011  |   1.866988   .0221007    84.48   0.000     1.823578    1.910399
       2012  |   1.898659   .0235116    80.75   0.000     1.852477    1.944841
       2013  |   1.679339   .0261039    64.33   0.000     1.628065    1.730613
       2014  |   1.311706   .0218029    60.16   0.000     1.268881    1.354532
       2015  |   .7841686   .0258352    30.35   0.000     .7334226    .8349145
             |
       _cons |   9.253834   .0107966   857.11   0.000     9.232627    9.275041
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (560 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     14,586    9.958107     1.48891   4.955827   16.16323

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     14,742    .0059785    .0227219  -.1086787   .0965822
9485
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.0000ee not found)
file /tmp/St18055.0000ee saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.0000ef not found)
file /tmp/St18055.0000ef saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.0000eg not found)
file /tmp/St18055.0000eg saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.0000eh not found)
file /tmp/St18055.0000eh saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(27 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     13,725
                                                F(  25,    548)   =    1349.27
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9780
                                                Adj R-squared     =     0.9770
                                                Root MSE          =     0.2251

                                (Std. Err. adjusted for 549 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.443849   .8130755   -10.39   0.000    -10.04098   -6.846723
             |
        year |
       1992  |   .1439865   .0216393     6.65   0.000     .1014803    .1864927
       1993  |   .6818357   .0093587    72.86   0.000     .6634524     .700219
       1994  |    .685756   .0168267    40.75   0.000     .6527034    .7188087
       1995  |   .4161086    .024611    16.91   0.000     .3677651     .464452
       1996  |   .3603691   .0237557    15.17   0.000     .3137058    .4070324
       1997  |   .3745454   .0201613    18.58   0.000     .3349426    .4141482
       1998  |   .3408179   .0232461    14.66   0.000     .2951555    .3864802
       1999  |   .3153704   .0224994    14.02   0.000     .2711749     .359566
       2000  |   .3123014    .020352    15.35   0.000      .272324    .3522789
       2001  |   .3276903   .0172927    18.95   0.000     .2937223    .3616583
       2002  |   .7849816   .0208576    37.64   0.000      .744011    .8259522
       2003  |   .8656102   .0247282    35.00   0.000     .8170365    .9141838
       2004  |   .9950908   .0174637    56.98   0.000     .9607868    1.029395
       2005  |   .8208633   .0177302    46.30   0.000     .7860359    .8556907
       2006  |   .7399161    .020815    35.55   0.000     .6990291    .7808032
       2007  |   .6830738   .0200483    34.07   0.000     .6436929    .7224548
       2008  |   .6845488   .0177764    38.51   0.000     .6496306    .7194669
       2009  |   .9813937   .0187032    52.47   0.000      .944655    1.018132
       2010  |    1.40103   .0580975    24.12   0.000     1.286909    1.515151
       2011  |   1.868299   .0225217    82.96   0.000      1.82406    1.912539
       2012  |   1.896775   .0237762    79.78   0.000     1.850071    1.943479
       2013  |   1.676423   .0264212    63.45   0.000     1.624524    1.728322
       2014  |   1.309894   .0220952    59.28   0.000     1.266493    1.353296
       2015  |     .78219    .026218    29.83   0.000     .7306899    .8336902
             |
       _cons |   9.261939   .0109127   848.73   0.000     9.240503    9.283375
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (549 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     14,300    9.965365     1.49375   4.955827   16.21394

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     14,456    .0059878    .0227315  -.1086787   .0965822
9490
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.0000ej not found)
file /tmp/St18055.0000ej saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.0000ek not found)
file /tmp/St18055.0000ek saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.0000el not found)
file /tmp/St18055.0000el saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.0000em not found)
file /tmp/St18055.0000em saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(26 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     13,575
                                                F(  25,    542)   =    1331.84
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9781
                                                Adj R-squared     =     0.9771
                                                Root MSE          =     0.2251

                                (Std. Err. adjusted for 543 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.425646   .8231717   -10.24   0.000    -10.04264   -6.808649
             |
        year |
       1992  |   .1440693   .0218393     6.60   0.000     .1011691    .1869694
       1993  |    .682333   .0093655    72.86   0.000     .6639359    .7007302
       1994  |   .6858849   .0170012    40.34   0.000     .6524886    .7192812
       1995  |    .415453   .0248929    16.69   0.000     .3665545    .4643514
       1996  |   .3591824   .0240081    14.96   0.000     .3120222    .4063427
       1997  |   .3733552   .0203843    18.32   0.000     .3333131    .4133972
       1998  |   .3395816   .0235236    14.44   0.000     .2933731    .3857901
       1999  |   .3140239   .0227554    13.80   0.000     .2693244    .3587234
       2000  |   .3114971   .0205784    15.14   0.000      .271074    .3519203
       2001  |   .3260074   .0174784    18.65   0.000     .2916736    .3603411
       2002  |   .7839461   .0211449    37.07   0.000       .74241    .8254821
       2003  |    .866447   .0249594    34.71   0.000      .817418     .915476
       2004  |   .9951833   .0175917    56.57   0.000     .9606271     1.02974
       2005  |   .8205776   .0178513    45.97   0.000     .7855113    .8556438
       2006  |   .7393647   .0209882    35.23   0.000     .6981364    .7805929
       2007  |   .6825237   .0202041    33.78   0.000     .6428357    .7222117
       2008  |   .6833929   .0178659    38.25   0.000     .6482979    .7184878
       2009  |   .9800371   .0188199    52.07   0.000     .9430681    1.017006
       2010  |   1.401771   .0587875    23.84   0.000     1.286292    1.517251
       2011  |   1.868757   .0226996    82.33   0.000     1.824167    1.913347
       2012  |   1.896265   .0239868    79.05   0.000     1.849147    1.943384
       2013  |   1.676842   .0266697    62.87   0.000     1.624453    1.729231
       2014  |   1.310722   .0222871    58.81   0.000     1.266942    1.354501
       2015  |   .7833844   .0263997    29.67   0.000     .7315262    .8352426
             |
       _cons |   9.269198   .0109798   844.21   0.000      9.24763    9.290766
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (543 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     14,144    9.972248    1.495921   4.955827   16.28026

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     14,300    .0060161    .0227193  -.1086787   .0965822
9495
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.0000eo not found)
file /tmp/St18055.0000eo saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.0000ep not found)
file /tmp/St18055.0000ep saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.0000eq not found)
file /tmp/St18055.0000eq saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.0000er not found)
file /tmp/St18055.0000er saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(26 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     13,450
                                                F(  25,    537)   =    1325.30
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9781
                                                Adj R-squared     =     0.9771
                                                Root MSE          =     0.2255

                                (Std. Err. adjusted for 538 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.415231   .8273534   -10.17   0.000    -10.04048   -6.789985
             |
        year |
       1992  |   .1450545   .0218917     6.63   0.000     .1020507    .1880584
       1993  |   .6829374    .009411    72.57   0.000     .6644506    .7014242
       1994  |   .6860307   .0171194    40.07   0.000     .6524015      .71966
       1995  |   .4158689   .0250527    16.60   0.000     .3666555    .4650822
       1996  |   .3595205   .0241471    14.89   0.000     .3120861    .4069549
       1997  |   .3732173   .0205108    18.20   0.000     .3329261    .4135086
       1998  |   .3398714   .0236621    14.36   0.000     .2933899     .386353
       1999  |   .3134863   .0228641    13.71   0.000     .2685723    .3584003
       2000  |   .3106847   .0207095    15.00   0.000     .2700031    .3513664
       2001  |   .3249047   .0175809    18.48   0.000     .2903689    .3594406
       2002  |   .7828665   .0213482    36.67   0.000     .7409303    .8248027
       2003  |   .8656297   .0250224    34.59   0.000      .816476    .9147835
       2004  |   .9936134   .0176391    56.33   0.000     .9589634    1.028263
       2005  |   .8190132   .0179777    45.56   0.000     .7836979    .8543284
       2006  |   .7387445   .0211409    34.94   0.000     .6972154    .7802735
       2007  |   .6823657   .0203675    33.50   0.000      .642356    .7223753
       2008  |   .6827684   .0180267    37.88   0.000     .6473569    .7181799
       2009  |   .9800939   .0189328    51.77   0.000     .9429025    1.017285
       2010  |   1.402458   .0589814    23.78   0.000     1.286596    1.518321
       2011  |   1.868806   .0227961    81.98   0.000     1.824025    1.913586
       2012  |   1.895522    .024183    78.38   0.000     1.848018    1.943027
       2013  |   1.676331    .026872    62.38   0.000     1.623544    1.729119
       2014  |   1.310479   .0224613    58.34   0.000     1.266356    1.354602
       2015  |   .7818626   .0265786    29.42   0.000     .7296519    .8340734
             |
       _cons |   9.275478   .0110527   839.20   0.000     9.253766     9.29719
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (538 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     14,014    9.977955    1.498959   4.955827   16.29193

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     14,170    .0060533    .0227097  -.1086787   .0965822
9500
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.0000et not found)
file /tmp/St18055.0000et saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.0000eu not found)
file /tmp/St18055.0000eu saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.0000ev not found)
file /tmp/St18055.0000ev saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.0000ew not found)
file /tmp/St18055.0000ew saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(26 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     13,275
                                                F(  25,    530)   =    1301.00
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9781
                                                Adj R-squared     =     0.9771
                                                Root MSE          =     0.2253

                                (Std. Err. adjusted for 531 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.368736   .8400335    -9.96   0.000    -10.01894   -6.718532
             |
        year |
       1992  |   .1471354   .0222153     6.62   0.000     .1034945    .1907763
       1993  |    .684513    .009499    72.06   0.000     .6658527    .7031732
       1994  |   .6859048   .0173377    39.56   0.000     .6518457     .719964
       1995  |   .4139387   .0253512    16.33   0.000     .3641375    .4637399
       1996  |    .356966   .0243833    14.64   0.000     .3090663    .4048657
       1997  |     .37085   .0206928    17.92   0.000     .3302001       .4115
       1998  |   .3369904   .0238897    14.11   0.000     .2900603    .3839205
       1999  |   .3104154   .0231182    13.43   0.000     .2650009    .3558299
       2000  |   .3079635   .0209219    14.72   0.000     .2668636    .3490634
       2001  |   .3223802   .0177123    18.20   0.000     .2875854    .3571751
       2002  |     .78244   .0215875    36.24   0.000     .7400324    .8248477
       2003  |   .8677255   .0252792    34.33   0.000     .8180659    .9173852
       2004  |   .9958283   .0177779    56.02   0.000     .9609046    1.030752
       2005  |   .8201538     .01814    45.21   0.000     .7845187    .8557888
       2006  |   .7400725   .0213485    34.67   0.000     .6981344    .7820107
       2007  |   .6835172   .0205312    33.29   0.000     .6431848    .7238497
       2008  |    .683785   .0181964    37.58   0.000      .648039     .719531
       2009  |   .9828994   .0191174    51.41   0.000     .9453443    1.020455
       2010  |   1.407638   .0598505    23.52   0.000     1.290064    1.525211
       2011  |   1.872069   .0229995    81.40   0.000     1.826888    1.917251
       2012  |   1.897624   .0244735    77.54   0.000     1.849547    1.945701
       2013  |   1.678523   .0272095    61.69   0.000     1.625072    1.731975
       2014  |   1.312814   .0226853    57.87   0.000      1.26825    1.357378
       2015  |   .7820145   .0268767    29.10   0.000     .7292166    .8348125
             |
       _cons |   9.280233    .011133   833.58   0.000     9.258363    9.302103
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (531 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     13,832     9.98346    1.498432   4.955827   16.33543

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     13,988     .006054    .0227095  -.1086787   .0965822
9505
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.0000f0 not found)
file /tmp/St18055.0000f0 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.0000f1 not found)
file /tmp/St18055.0000f1 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.0000f2 not found)
file /tmp/St18055.0000f2 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.0000f3 not found)
file /tmp/St18055.0000f3 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(26 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     13,000
                                                F(  25,    519)   =    1283.24
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9782
                                                Adj R-squared     =     0.9772
                                                Root MSE          =     0.2246

                                (Std. Err. adjusted for 520 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.548408    .826547   -10.34   0.000     -10.1722   -6.924619
             |
        year |
       1992  |   .1435946    .021913     6.55   0.000     .1005455    .1866437
       1993  |   .6852955   .0096346    71.13   0.000     .6663678    .7042231
       1994  |   .6901285   .0172153    40.09   0.000     .6563082    .7239488
       1995  |   .4194741    .025236    16.62   0.000     .3698969    .4690513
       1996  |   .3625869   .0240731    15.06   0.000     .3152941    .4098797
       1997  |   .3760529    .020408    18.43   0.000     .3359604    .4161453
       1998  |   .3436363   .0234559    14.65   0.000     .2975562    .3897164
       1999  |   .3162659   .0227267    13.92   0.000     .2716182    .3609136
       2000  |   .3142569   .0206665    15.21   0.000     .2736565    .3548573
       2001  |   .3281829   .0173764    18.89   0.000     .2940463    .3623195
       2002  |   .7894039   .0213487    36.98   0.000     .7474634    .8313444
       2003  |   .8669115   .0251638    34.45   0.000     .8174762    .9163469
       2004  |   .9970899   .0178436    55.88   0.000     .9620353    1.032145
       2005  |   .8254699   .0181165    45.56   0.000     .7898792    .8610607
       2006  |   .7469424   .0212149    35.21   0.000     .7052648    .7886201
       2007  |   .6895391   .0203927    33.81   0.000     .6494767    .7296014
       2008  |   .6882018   .0181967    37.82   0.000     .6524536      .72395
       2009  |   .9844185   .0193199    50.95   0.000     .9464638    1.022373
       2010  |   1.399533   .0593297    23.59   0.000     1.282977    1.516089
       2011  |   1.873999    .023333    80.32   0.000      1.82816    1.919838
       2012  |   1.905234   .0239547    79.53   0.000     1.858174    1.952295
       2013  |   1.686932   .0266135    63.39   0.000     1.634648    1.739215
       2014  |   1.321088   .0222063    59.49   0.000     1.277463    1.364713
       2015  |   .7909237   .0263832    29.98   0.000     .7390927    .8427546
             |
       _cons |   9.294968   .0111966   830.16   0.000     9.272971    9.316964
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (520 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     13,546    10.00081    1.497561   4.955827   16.36744

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     13,702    .0061044    .0226646  -.1086787   .0965822
9510
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.0000f5 not found)
file /tmp/St18055.0000f5 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.0000f6 not found)
file /tmp/St18055.0000f6 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.0000f7 not found)
file /tmp/St18055.0000f7 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.0000f8 not found)
file /tmp/St18055.0000f8 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(26 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     12,775
                                                F(  25,    510)   =    1272.88
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9783
                                                Adj R-squared     =     0.9773
                                                Root MSE          =     0.2229

                                (Std. Err. adjusted for 511 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.546801   .8374882   -10.21   0.000    -10.19215   -6.901449
             |
        year |
       1992  |   .1434557    .022129     6.48   0.000     .0999805    .1869309
       1993  |   .6840715   .0097286    70.32   0.000     .6649584    .7031846
       1994  |   .6882332   .0174147    39.52   0.000     .6540198    .7224466
       1995  |   .4163568   .0255702    16.28   0.000      .366121    .4665926
       1996  |   .3605465   .0244007    14.78   0.000     .3126083    .4084846
       1997  |   .3740589   .0206784    18.09   0.000     .3334336    .4146842
       1998  |   .3414749   .0237644    14.37   0.000     .2947868    .3881631
       1999  |   .3144111    .023007    13.67   0.000     .2692109    .3596113
       2000  |   .3128095   .0208989    14.97   0.000      .271751     .353868
       2001  |     .32644   .0175636    18.59   0.000     .2919341    .3609459
       2002  |   .7883587   .0213965    36.85   0.000     .7463226    .8303949
       2003  |   .8646072   .0253452    34.11   0.000     .8148133    .9144011
       2004  |   .9935449   .0178563    55.64   0.000     .9584639    1.028626
       2005  |   .8229227   .0181458    45.35   0.000     .7872731    .8585723
       2006  |    .744962   .0212728    35.02   0.000     .7031689    .7867552
       2007  |   .6883386   .0203763    33.78   0.000     .6483068    .7283704
       2008  |    .685878   .0180882    37.92   0.000     .6503415    .7214146
       2009  |   .9813975   .0191218    51.32   0.000     .9438302    1.018965
       2010  |   1.395421   .0598923    23.30   0.000     1.277755    1.513087
       2011  |   1.869424   .0232792    80.30   0.000     1.823689    1.915159
       2012  |   1.900743   .0241019    78.86   0.000     1.853391    1.948094
       2013  |   1.682787   .0268339    62.71   0.000     1.630069    1.735506
       2014  |   1.317517   .0223482    58.95   0.000     1.273611    1.361422
       2015  |   .7857384   .0266043    29.53   0.000     .7334708     .838006
             |
       _cons |   9.325262   .0111431   836.87   0.000      9.30337    9.347154
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (511 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     13,312    10.02859    1.489973   4.955827   16.37287

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     13,468    .0061248    .0226513  -.1086787   .0965822
9515
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.0000fa not found)
file /tmp/St18055.0000fa saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.0000fb not found)
file /tmp/St18055.0000fb saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.0000fc not found)
file /tmp/St18055.0000fc saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.0000fd not found)
file /tmp/St18055.0000fd saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(26 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     12,625
                                                F(  25,    504)   =    1259.29
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9782
                                                Adj R-squared     =     0.9772
                                                Root MSE          =     0.2229

                                (Std. Err. adjusted for 505 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.585096   .8446005   -10.16   0.000    -10.24447   -6.925724
             |
        year |
       1992  |   .1433434   .0223021     6.43   0.000     .0995269      .18716
       1993  |   .6851051   .0098233    69.74   0.000     .6658055    .7044047
       1994  |   .6896834   .0175441    39.31   0.000     .6552149    .7241519
       1995  |   .4186883   .0257468    16.26   0.000     .3681041    .4692725
       1996  |   .3627619   .0245434    14.78   0.000     .3145418     .410982
       1997  |   .3756258   .0207715    18.08   0.000     .3348163    .4164353
       1998  |   .3431655   .0239096    14.35   0.000     .2961907    .3901403
       1999  |   .3161745   .0231282    13.67   0.000     .2707349     .361614
       2000  |   .3144041   .0209486    15.01   0.000     .2732469    .3555614
       2001  |   .3282516   .0175544    18.70   0.000     .2937629    .3627404
       2002  |   .7897602   .0215863    36.59   0.000     .7473501    .8321704
       2003  |   .8635546   .0255372    33.82   0.000     .8133822     .913727
       2004  |   .9919835   .0179815    55.17   0.000     .9566556    1.027311
       2005  |   .8225769   .0183023    44.94   0.000     .7866186    .8585352
       2006  |   .7452931   .0214724    34.71   0.000     .7031068    .7874794
       2007  |     .68916   .0205828    33.48   0.000     .6487214    .7295986
       2008  |   .6862435   .0182731    37.55   0.000     .6503427    .7221444
       2009  |   .9808808   .0192961    50.83   0.000     .9429701    1.018791
       2010  |   1.392927    .060343    23.08   0.000     1.274372    1.511482
       2011  |   1.868596   .0234635    79.64   0.000     1.822498    1.914694
       2012  |   1.901185   .0243569    78.06   0.000     1.853332    1.949039
       2013  |   1.683191    .027122    62.06   0.000     1.629905    1.736477
       2014  |   1.317852   .0225917    58.33   0.000     1.273467    1.362237
       2015  |   .7854143   .0268616    29.24   0.000     .7326398    .8381889
             |
       _cons |   9.338158    .011239   830.87   0.000     9.316077    9.360239
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (505 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     13,156    10.04154    1.485033   4.955827   16.39085

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     13,312    .0061531    .0226532  -.1086787   .0965822
9520
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.0000ff not found)
file /tmp/St18055.0000ff saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.0000fg not found)
file /tmp/St18055.0000fg saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.0000fh not found)
file /tmp/St18055.0000fh saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.0000fi not found)
file /tmp/St18055.0000fi saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(26 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     12,275
                                                F(  25,    490)   =    1222.84
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9784
                                                Adj R-squared     =     0.9774
                                                Root MSE          =     0.2235

                                (Std. Err. adjusted for 491 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.663825   .8633819   -10.03   0.000    -10.36021   -6.967437
             |
        year |
       1992  |   .1426015   .0227113     6.28   0.000      .097978    .1872249
       1993  |   .6862383   .0100315    68.41   0.000     .6665283    .7059483
       1994  |   .6925505   .0179656    38.55   0.000     .6572515    .7278496
       1995  |   .4213215   .0263664    15.98   0.000     .3695163    .4731267
       1996  |   .3644598   .0251179    14.51   0.000     .3151077    .4138119
       1997  |   .3769461   .0212581    17.73   0.000     .3351778    .4187144
       1998  |   .3456695   .0244678    14.13   0.000     .2975948    .3937442
       1999  |    .318578   .0236527    13.47   0.000     .2721048    .3650512
       2000  |   .3162456   .0214589    14.74   0.000     .2740827    .3584084
       2001  |   .3286876   .0179598    18.30   0.000     .2933999    .3639753
       2002  |   .7931752   .0221888    35.75   0.000     .7495782    .8367721
       2003  |   .8634364   .0260081    33.20   0.000     .8123352    .9145376
       2004  |     .99307   .0182978    54.27   0.000     .9571181    1.029022
       2005  |   .8236598   .0187192    44.00   0.000       .78688    .8604396
       2006  |   .7440198    .021793    34.14   0.000     .7012006     .786839
       2007  |   .6895925   .0210039    32.83   0.000     .6483236    .7308614
       2008  |    .688213   .0186718    36.86   0.000     .6515263    .7248997
       2009  |   .9826007    .019701    49.88   0.000      .943892     1.02131
       2010  |   1.390505   .0615851    22.58   0.000     1.269502    1.511509
       2011  |   1.868812   .0239551    78.01   0.000     1.821744    1.915879
       2012  |   1.904555   .0248841    76.54   0.000     1.855662    1.953447
       2013  |   1.688314   .0276898    60.97   0.000     1.633909     1.74272
       2014  |   1.322916   .0230866    57.30   0.000     1.277555    1.368277
       2015  |   .7902335   .0274355    28.80   0.000     .7363277    .8441393
             |
       _cons |   9.358247   .0114838   814.91   0.000     9.335684    9.380811
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (491 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     12,792    10.06234     1.49623   4.955827   16.41733

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     12,948    .0062025    .0226491  -.1086787   .0965822
9525
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.0000fk not found)
file /tmp/St18055.0000fk saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.0000fl not found)
file /tmp/St18055.0000fl saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.0000fm not found)
file /tmp/St18055.0000fm saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.0000fn not found)
file /tmp/St18055.0000fn saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(26 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     12,075
                                                F(  25,    482)   =    1198.22
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9785
                                                Adj R-squared     =     0.9776
                                                Root MSE          =     0.2235

                                (Std. Err. adjusted for 483 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.559438   .8671877    -9.87   0.000    -10.26337   -6.855503
             |
        year |
       1992  |   .1444114   .0228204     6.33   0.000     .0995717    .1892512
       1993  |   .6844594   .0100573    68.06   0.000     .6646979     .704221
       1994  |   .6881162   .0180237    38.18   0.000     .6527014     .723531
       1995  |   .4159171    .026461    15.72   0.000     .3639238    .4679103
       1996  |   .3592003   .0252214    14.24   0.000     .3096427    .4087578
       1997  |   .3721615   .0213054    17.47   0.000     .3302986    .4140243
       1998  |   .3410516   .0245886    13.87   0.000     .2927376    .3893656
       1999  |   .3134608   .0237416    13.20   0.000     .2668111    .3601106
       2000  |   .3122541   .0215217    14.51   0.000     .2699662    .3545421
       2001  |   .3261146   .0180032    18.11   0.000     .2907401    .3614891
       2002  |   .7911452   .0222222    35.60   0.000     .7474809    .8348096
       2003  |   .8656394   .0262042    33.03   0.000     .8141509     .917128
       2004  |   .9937539   .0184661    53.82   0.000       .95747    1.030038
       2005  |   .8221421   .0188523    43.61   0.000     .7850992    .8591851
       2006  |   .7437873   .0219623    33.87   0.000     .7006337    .7869409
       2007  |   .6890598   .0211318    32.61   0.000     .6475379    .7305817
       2008  |   .6865313   .0186692    36.77   0.000     .6498483    .7232143
       2009  |   .9821007   .0197215    49.80   0.000       .94335    1.020851
       2010  |   1.396195   .0619264    22.55   0.000     1.274516    1.517874
       2011  |   1.868647   .0241266    77.45   0.000     1.821241    1.916053
       2012  |   1.901939   .0250771    75.84   0.000     1.852665    1.951213
       2013  |   1.685039   .0278914    60.41   0.000     1.630235    1.739843
       2014  |   1.320085   .0232729    56.72   0.000     1.274357    1.365814
       2015  |   .7876676   .0276786    28.46   0.000     .7332819    .8420532
             |
       _cons |   9.351479   .0115413   810.26   0.000     9.328801    9.374156
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (483 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     12,584    10.05477    1.500433   4.955827   16.52405

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     12,740    .0061813    .0226612  -.1086787   .0965822
9530
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.0000fp not found)
file /tmp/St18055.0000fp saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.0000fq not found)
file /tmp/St18055.0000fq saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.0000fr not found)
file /tmp/St18055.0000fr saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.0000fs not found)
file /tmp/St18055.0000fs saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(26 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     11,875
                                                F(  25,    474)   =    1189.82
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9784
                                                Adj R-squared     =     0.9774
                                                Root MSE          =     0.2244

                                (Std. Err. adjusted for 475 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.604306   .8783294    -9.80   0.000    -10.33021   -6.878405
             |
        year |
       1992  |   .1454875   .0230605     6.31   0.000     .1001741    .1908009
       1993  |   .6866755   .0101782    67.47   0.000     .6666755    .7066754
       1994  |   .6903873   .0182832    37.76   0.000     .6544611    .7263135
       1995  |   .4182171   .0268399    15.58   0.000     .3654772    .4709571
       1996  |   .3613465   .0255583    14.14   0.000     .3111249    .4115682
       1997  |   .3744774   .0216075    17.33   0.000     .3320189    .4169358
       1998  |   .3432237   .0249605    13.75   0.000     .2941766    .3922707
       1999  |   .3148126   .0240955    13.07   0.000     .2674653    .3621599
       2000  |   .3131829   .0218738    14.32   0.000     .2702013    .3561646
       2001  |   .3283229   .0182687    17.97   0.000     .2924252    .3642207
       2002  |   .7946717   .0225807    35.19   0.000      .750301    .8390424
       2003  |    .869292   .0264638    32.85   0.000      .817291     .921293
       2004  |   .9973502   .0186408    53.50   0.000     .9607214    1.033979
       2005  |    .826592    .019069    43.35   0.000     .7891217    .8640623
       2006  |   .7491537   .0222203    33.71   0.000     .7054911    .7928162
       2007  |   .6942736    .021369    32.49   0.000     .6522839    .7362633
       2008  |   .6905761   .0188935    36.55   0.000     .6534507    .7277015
       2009  |   .9855398   .0199373    49.43   0.000     .9463633    1.024716
       2010  |   1.396428   .0627111    22.27   0.000     1.273202    1.519654
       2011  |   1.870918   .0244584    76.49   0.000     1.822857    1.918978
       2012  |   1.906255   .0253948    75.06   0.000     1.856354    1.956155
       2013  |    1.68955   .0282295    59.85   0.000      1.63408    1.745021
       2014  |   1.323616   .0235661    56.17   0.000     1.277309    1.369922
       2015  |   .7898258    .028041    28.17   0.000     .7347257    .8449259
             |
       _cons |   9.363678   .0116681   802.50   0.000      9.34075    9.386606
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (475 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     12,376    10.06908    1.502326   4.955827   16.55506

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     12,532    .0062215    .0226523  -.1086787   .0965822
9535
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.0000fu not found)
file /tmp/St18055.0000fu saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.0000fv not found)
file /tmp/St18055.0000fv saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.0000fw not found)
file /tmp/St18055.0000fw saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.0000fx not found)
file /tmp/St18055.0000fx saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(26 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     11,725
                                                F(  25,    468)   =    1180.22
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9784
                                                Adj R-squared     =     0.9774
                                                Root MSE          =     0.2249

                                (Std. Err. adjusted for 469 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.579905   .8911997    -9.63   0.000    -10.33115   -6.828657
             |
        year |
       1992  |   .1464482   .0233591     6.27   0.000     .1005466    .1923499
       1993  |   .6877124   .0102693    66.97   0.000     .6675328    .7078919
       1994  |   .6906688   .0186018    37.13   0.000     .6541155    .7272222
       1995  |   .4179436   .0272825    15.32   0.000     .3643323     .471555
       1996  |   .3607802     .02596    13.90   0.000     .3097676    .4117928
       1997  |   .3738552   .0219412    17.04   0.000     .3307397    .4169707
       1998  |    .342375   .0253281    13.52   0.000     .2926042    .3921458
       1999  |   .3143796   .0244656    12.85   0.000     .2663035    .3624556
       2000  |   .3140469   .0222126    14.14   0.000     .2703981    .3576957
       2001  |   .3286853   .0184962    17.77   0.000     .2923394    .3650313
       2002  |   .7953108   .0228196    34.85   0.000     .7504693    .8401522
       2003  |   .8730384   .0267087    32.69   0.000     .8205546    .9255223
       2004  |   1.000116   .0187842    53.24   0.000     .9632043    1.037028
       2005  |   .8280173    .019226    43.07   0.000     .7902374    .8657972
       2006  |   .7500977   .0224056    33.48   0.000     .7060697    .7941256
       2007  |    .694573   .0215494    32.23   0.000     .6522274    .7369185
       2008  |    .690842   .0190548    36.26   0.000     .6533985    .7282856
       2009  |   .9875053   .0201935    48.90   0.000     .9478241    1.027186
       2010  |   1.401707   .0636309    22.03   0.000      1.27667    1.526745
       2011  |   1.875721   .0246912    75.97   0.000     1.827202     1.92424
       2012  |   1.908891   .0256073    74.54   0.000     1.858571     1.95921
       2013  |    1.69193   .0285095    59.35   0.000     1.635908    1.747953
       2014  |    1.32564   .0238212    55.65   0.000      1.27883    1.372449
       2015  |   .7914056   .0283553    27.91   0.000     .7356862     .847125
             |
       _cons |   9.367321   .0117622   796.39   0.000     9.344207    9.390434
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (469 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     12,220    10.07392    1.506223   4.955827   16.59694

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     12,376     .006246    .0226482  -.1086787   .0965822
9540
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.0000g1 not found)
file /tmp/St18055.0000g1 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.0000g2 not found)
file /tmp/St18055.0000g2 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.0000g3 not found)
file /tmp/St18055.0000g3 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.0000g4 not found)
file /tmp/St18055.0000g4 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(26 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     11,575
                                                F(  25,    462)   =    1166.79
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9784
                                                Adj R-squared     =     0.9775
                                                Root MSE          =     0.2254

                                (Std. Err. adjusted for 463 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.566574   .8968506    -9.55   0.000    -10.32899   -6.804163
             |
        year |
       1992  |   .1467342   .0234913     6.25   0.000     .1005711    .1928973
       1993  |   .6879562   .0103357    66.56   0.000     .6676454    .7082669
       1994  |   .6915106   .0187597    36.86   0.000     .6546457    .7283755
       1995  |   .4188218   .0275154    15.22   0.000      .364751    .4728927
       1996  |   .3609986   .0261866    13.79   0.000      .309539    .4124581
       1997  |   .3739486   .0221517    16.88   0.000     .3304181    .4174792
       1998  |   .3417133   .0255469    13.38   0.000     .2915109    .3919158
       1999  |    .314425   .0247052    12.73   0.000     .2658765    .3629735
       2000  |   .3142841   .0224535    14.00   0.000     .2701605    .3584077
       2001  |   .3287189   .0186948    17.58   0.000     .2919815    .3654563
       2002  |   .7945281   .0230603    34.45   0.000     .7492121    .8398441
       2003  |   .8738848   .0268572    32.54   0.000     .8211073    .9266622
       2004  |   1.000925   .0189421    52.84   0.000     .9637012    1.038148
       2005  |   .8285883   .0194395    42.62   0.000     .7903876    .8667891
       2006  |    .750797   .0226198    33.19   0.000     .7063466    .7952475
       2007  |   .6939734   .0217454    31.91   0.000     .6512412    .7367057
       2008  |   .6895599   .0192529    35.82   0.000     .6517258     .727394
       2009  |   .9856357   .0203658    48.40   0.000     .9456147    1.025657
       2010  |   1.400417   .0640216    21.87   0.000     1.274608    1.526227
       2011  |   1.874793   .0248883    75.33   0.000     1.825885    1.923702
       2012  |   1.908543   .0258492    73.83   0.000     1.857747     1.95934
       2013  |   1.692018    .028768    58.82   0.000     1.635486     1.74855
       2014  |   1.325961   .0240636    55.10   0.000     1.278674    1.373249
       2015  |   .7927705   .0285939    27.73   0.000     .7365804    .8489606
             |
       _cons |   9.363261   .0118958   787.10   0.000     9.339884    9.386638
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (463 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     12,064    10.06985    1.510038   4.955827   16.66851

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     12,220    .0062687    .0226467  -.1086787   .0965822
9545
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.0000g6 not found)
file /tmp/St18055.0000g6 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.0000g7 not found)
file /tmp/St18055.0000g7 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.0000g8 not found)
file /tmp/St18055.0000g8 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.0000g9 not found)
file /tmp/St18055.0000g9 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(26 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     11,350
                                                F(  25,    453)   =    1142.68
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9787
                                                Adj R-squared     =     0.9777
                                                Root MSE          =     0.2253

                                (Std. Err. adjusted for 454 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.387281   .8895669    -9.43   0.000    -10.13547   -6.639091
             |
        year |
       1992  |   .1531604   .0232276     6.59   0.000     .1075133    .1988076
       1993  |   .6892711   .0104411    66.02   0.000     .6687521    .7097901
       1994  |   .6903028   .0185844    37.14   0.000     .6537805    .7268251
       1995  |   .4156325   .0272542    15.25   0.000     .3620721    .4691929
       1996  |   .3567283   .0260575    13.69   0.000     .3055198    .4079369
       1997  |    .371083   .0220083    16.86   0.000      .327832    .4143341
       1998  |   .3379116    .025402    13.30   0.000     .2879913    .3878319
       1999  |   .3103927   .0245152    12.66   0.000      .262215    .3585704
       2000  |   .3113395   .0220517    14.12   0.000     .2680031    .3546759
       2001  |   .3270924   .0187151    17.48   0.000     .2903131    .3638716
       2002  |   .7927326   .0231755    34.21   0.000     .7471878    .8382774
       2003  |   .8810502    .026852    32.81   0.000     .8282803    .9338201
       2004  |   1.005939   .0190659    52.76   0.000     .9684703    1.043408
       2005  |   .8287699   .0196753    42.12   0.000     .7901036    .8674361
       2006  |    .750652   .0228487    32.85   0.000     .7057493    .7955547
       2007  |   .6937607    .022007    31.52   0.000     .6505122    .7370093
       2008  |   .6905634    .019562    35.30   0.000     .6521198     .729007
       2009  |   .9885713    .020522    48.17   0.000     .9482413    1.028901
       2010  |    1.41439   .0634708    22.28   0.000     1.289656    1.539124
       2011  |     1.8802   .0250207    75.15   0.000     1.831029    1.929371
       2012  |   1.907679   .0260097    73.34   0.000     1.856565    1.958794
       2013  |   1.689636   .0288807    58.50   0.000     1.632879    1.746393
       2014  |   1.325472   .0242181    54.73   0.000     1.277878    1.373066
       2015  |   .7928728   .0286369    27.69   0.000     .7365952    .8491505
             |
       _cons |   9.370061   .0120792   775.72   0.000     9.346323    9.393799
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (454 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     11,830    10.07787    1.518898   4.955827   16.69503

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     11,986    .0063159    .0226323  -.1086787   .0965822
9550
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.0000gb not found)
file /tmp/St18055.0000gb saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.0000gc not found)
file /tmp/St18055.0000gc saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.0000gd not found)
file /tmp/St18055.0000gd saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.0000ge not found)
file /tmp/St18055.0000ge saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(26 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     11,125
                                                F(  25,    444)   =    1114.37
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9788
                                                Adj R-squared     =     0.9778
                                                Root MSE          =     0.2251

                                (Std. Err. adjusted for 445 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.208028   .9042847    -9.08   0.000    -9.985238   -6.430818
             |
        year |
       1992  |   .1578769   .0235447     6.71   0.000      .111604    .2041497
       1993  |   .6888599   .0105634    65.21   0.000     .6680995    .7096203
       1994  |   .6864306   .0189207    36.28   0.000     .6492454    .7236158
       1995  |   .4098605   .0277133    14.79   0.000     .3553949    .4643262
       1996  |   .3508888    .026561    13.21   0.000      .298688    .4030896
       1997  |   .3669806   .0223901    16.39   0.000     .3229768    .4109845
       1998  |   .3332873   .0258328    12.90   0.000     .2825175     .384057
       1999  |   .3054265   .0248818    12.28   0.000     .2565258    .3543272
       2000  |   .3064713   .0223508    13.71   0.000     .2625447    .3503978
       2001  |   .3242614    .019051    17.02   0.000     .2868201    .3617027
       2002  |   .7889599   .0234414    33.66   0.000     .7428901    .8350297
       2003  |   .8866887   .0269611    32.89   0.000     .8337015    .9396759
       2004  |   1.008796   .0191509    52.68   0.000     .9711587    1.046434
       2005  |   .8266783    .019828    41.69   0.000     .7877099    .8656466
       2006  |   .7479438   .0230928    32.39   0.000      .702559    .7933286
       2007  |   .6916307   .0222723    31.05   0.000     .6478584    .7354029
       2008  |   .6900776   .0197759    34.89   0.000     .6512116    .7289436
       2009  |   .9905603   .0207358    47.77   0.000     .9498078    1.031313
       2010  |   1.427793   .0644216    22.16   0.000     1.301184    1.554403
       2011  |   1.883675   .0253685    74.25   0.000     1.833818    1.933532
       2012  |   1.903295   .0263754    72.16   0.000     1.851459    1.955131
       2013  |   1.685034   .0293018    57.51   0.000     1.627447    1.742622
       2014  |   1.323171   .0245836    53.82   0.000     1.274856    1.371485
       2015  |   .7902631    .029052    27.20   0.000     .7331667    .8473596
             |
       _cons |   9.385419   .0121937   769.70   0.000     9.361454    9.409383
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (445 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     11,596    10.09313    1.520509   4.955827   16.70342

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     11,752    .0063117    .0226241  -.1086787   .0965822
9555
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.0000gg not found)
file /tmp/St18055.0000gg saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.0000gh not found)
file /tmp/St18055.0000gh saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.0000gi not found)
file /tmp/St18055.0000gi saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.0000gj not found)
file /tmp/St18055.0000gj saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(26 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     11,000
                                                F(  25,    439)   =    1099.27
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9787
                                                Adj R-squared     =     0.9777
                                                Root MSE          =     0.2256

                                (Std. Err. adjusted for 440 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.192218   .9160206    -8.94   0.000    -9.992549   -6.391887
             |
        year |
       1992  |   .1590174   .0237828     6.69   0.000     .1122751    .2057596
       1993  |   .6895517   .0106373    64.82   0.000     .6686454    .7104581
       1994  |   .6882933   .0191578    35.93   0.000      .650641    .7259457
       1995  |   .4113152   .0280677    14.65   0.000     .3561514     .466479
       1996  |   .3518006   .0268992    13.08   0.000     .2989333    .4046678
       1997  |   .3692049   .0226973    16.27   0.000      .324596    .4138138
       1998  |   .3364106   .0261852    12.85   0.000     .2849466    .3878746
       1999  |   .3076482   .0252433    12.19   0.000     .2580356    .3572609
       2000  |   .3069942   .0226559    13.55   0.000     .2624668    .3515217
       2001  |   .3266439   .0192597    16.96   0.000     .2887911    .3644966
       2002  |   .7912304   .0238223    33.21   0.000     .7444105    .8380502
       2003  |   .8892166   .0271679    32.73   0.000     .8358213    .9426119
       2004  |   1.011319   .0192572    52.52   0.000     .9734714    1.049167
       2005  |   .8300346   .0200109    41.48   0.000     .7907055    .8693637
       2006  |   .7526707   .0233067    32.29   0.000     .7068641    .7984774
       2007  |    .696161   .0224789    30.97   0.000     .6519813    .7403407
       2008  |   .6940536    .019948    34.79   0.000     .6548481     .733259
       2009  |   .9944335    .020849    47.70   0.000     .9534573     1.03541
       2010  |   1.431076   .0650346    22.00   0.000     1.303258    1.558894
       2011  |   1.885925   .0255715    73.75   0.000     1.835667    1.936183
       2012  |   1.905673   .0266954    71.39   0.000     1.853207     1.95814
       2013  |   1.687499   .0296684    56.88   0.000      1.62919    1.745809
       2014  |   1.326601   .0248558    53.37   0.000     1.277749    1.375452
       2015  |   .7930115    .029326    27.04   0.000     .7353748    .8506482
             |
       _cons |   9.392968   .0122603   766.13   0.000     9.368872    9.417064
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (440 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     11,466    10.10267    1.521308   4.955827   16.72366

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     11,622    .0063707    .0225922  -.1086787   .0965822
9560
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.0000gl not found)
file /tmp/St18055.0000gl saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.0000gm not found)
file /tmp/St18055.0000gm saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.0000gn not found)
file /tmp/St18055.0000gn saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.0000go not found)
file /tmp/St18055.0000go saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(26 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     10,800
                                                F(  25,    431)   =    1098.29
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9787
                                                Adj R-squared     =     0.9778
                                                Root MSE          =     0.2250

                                (Std. Err. adjusted for 432 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -7.950634   .9227724    -8.62   0.000    -9.764328    -6.13694
             |
        year |
       1992  |    .165373   .0239823     6.90   0.000     .1182362    .2125098
       1993  |   .6897155   .0107463    64.18   0.000     .6685939     .710837
       1994  |    .682856   .0192864    35.41   0.000     .6449489    .7207631
       1995  |   .4026828   .0282172    14.27   0.000     .3472223    .4581432
       1996  |   .3431174    .027069    12.68   0.000     .2899137    .3963211
       1997  |   .3623545   .0228242    15.88   0.000     .3174939     .407215
       1998  |   .3298239   .0263363    12.52   0.000     .2780603    .3815876
       1999  |   .3012942   .0253072    11.91   0.000     .2515533    .3510352
       2000  |   .3022237   .0227158    13.30   0.000     .2575761    .3468713
       2001  |    .323618   .0194342    16.65   0.000     .2854204    .3618157
       2002  |   .7883768   .0237921    33.14   0.000     .7416139    .8351397
       2003  |   .8981276   .0274346    32.74   0.000     .8442053    .9520499
       2004  |    1.01601   .0194087    52.35   0.000     .9778628    1.054158
       2005  |   .8293257   .0201205    41.22   0.000     .7897791    .8688723
       2006  |   .7510693   .0234304    32.06   0.000     .7050174    .7971213
       2007  |   .6949384   .0225842    30.77   0.000     .6505495    .7393274
       2008  |   .6944666   .0200527    34.63   0.000     .6550535    .7338798
       2009  |   .9999288   .0209637    47.70   0.000     .9587251    1.041133
       2010  |   1.452233     .06559    22.14   0.000     1.323317    1.581149
       2011  |   1.895245   .0257351    73.64   0.000     1.844663    1.945827
       2012  |   1.906354   .0268639    70.96   0.000     1.853553    1.959154
       2013  |   1.685398   .0299077    56.35   0.000     1.626615    1.744181
       2014  |   1.325974   .0251021    52.82   0.000     1.276637    1.375312
       2015  |   .7903681   .0296354    26.67   0.000     .7321201     .848616
             |
       _cons |   9.403213   .0123702   760.15   0.000       9.3789    9.427526
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (432 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     11,258    10.11402    1.519675   4.955827   16.74155

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     11,414    .0063893    .0225834  -.1086787   .0958731
9565
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.0000gq not found)
file /tmp/St18055.0000gq saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.0000gr not found)
file /tmp/St18055.0000gr saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.0000gs not found)
file /tmp/St18055.0000gs saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.0000gt not found)
file /tmp/St18055.0000gt saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(26 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     10,475
                                                F(  25,    418)   =    1047.24
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9787
                                                Adj R-squared     =     0.9777
                                                Root MSE          =     0.2262

                                (Std. Err. adjusted for 419 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.097297   .9449927    -8.57   0.000    -9.954827   -6.239767
             |
        year |
       1992  |   .1624538   .0246222     6.60   0.000     .1140551    .2108526
       1993  |    .689702   .0109571    62.95   0.000     .6681641    .7112399
       1994  |   .6854098   .0196826    34.82   0.000     .6467205    .7240991
       1995  |   .4090043   .0288279    14.19   0.000     .3523385    .4656701
       1996  |   .3494736   .0276567    12.64   0.000       .29511    .4038372
       1997  |   .3677999   .0232933    15.79   0.000     .3220133    .4135865
       1998  |    .336311   .0268922    12.51   0.000     .2834503    .3891718
       1999  |   .3090069   .0258105    11.97   0.000     .2582723    .3597415
       2000  |   .3089395   .0231923    13.32   0.000     .2633513    .3545276
       2001  |   .3294613   .0197938    16.64   0.000     .2905536     .368369
       2002  |   .7935697   .0243882    32.54   0.000     .7456309    .8415085
       2003  |   .8964131   .0278974    32.13   0.000     .8415764    .9512497
       2004  |   1.016371   .0196687    51.67   0.000     .9777095    1.055033
       2005  |   .8340634   .0205546    40.58   0.000     .7936602    .8744666
       2006  |    .757527   .0240061    31.56   0.000     .7103393    .8047147
       2007  |   .6999972   .0231483    30.24   0.000     .6544957    .7454986
       2008  |   .6986736   .0205382    34.02   0.000     .6583026    .7390445
       2009  |   1.001708    .021466    46.66   0.000     .9595131    1.043903
       2010  |   1.442974   .0671246    21.50   0.000      1.31103    1.574918
       2011  |   1.895135   .0262829    72.11   0.000     1.843471    1.946798
       2012  |   1.912583   .0275025    69.54   0.000     1.858522    1.966643
       2013  |   1.692075   .0306233    55.25   0.000      1.63188     1.75227
       2014  |    1.33057   .0256736    51.83   0.000     1.280104    1.381035
       2015  |   .7947279   .0303287    26.20   0.000     .7351121    .8543436
             |
       _cons |   9.405922   .0125819   747.58   0.000      9.38119    9.430653
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (419 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     10,920    10.11915    1.524325   4.955827   16.81816

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     11,076    .0064111    .0226065  -.1086787   .0958731
9570
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.0000gv not found)
file /tmp/St18055.0000gv saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.0000gw not found)
file /tmp/St18055.0000gw saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.0000gx not found)
file /tmp/St18055.0000gx saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.0000h0 not found)
file /tmp/St18055.0000h0 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(26 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     10,375
                                                F(  25,    414)   =    1038.11
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9785
                                                Adj R-squared     =     0.9776
                                                Root MSE          =     0.2265

                                (Std. Err. adjusted for 415 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.212738   .9533761    -8.61   0.000     -10.0868   -6.338677
             |
        year |
       1992  |     .15943   .0247944     6.43   0.000     .1106913    .2081686
       1993  |   .6892909   .0110456    62.40   0.000     .6675784    .7110034
       1994  |   .6865246   .0197902    34.69   0.000     .6476228    .7254263
       1995  |   .4112979   .0290551    14.16   0.000      .354184    .4684118
       1996  |   .3516309   .0279174    12.60   0.000     .2967534    .4065085
       1997  |     .36898   .0235755    15.65   0.000     .3226373    .4153227
       1998  |    .337505   .0272449    12.39   0.000     .2839494    .3910606
       1999  |   .3103203   .0261144    11.88   0.000     .2589869    .3616538
       2000  |   .3093828   .0234609    13.19   0.000     .2632655    .3555001
       2001  |   .3307269   .0200442    16.50   0.000     .2913258    .3701281
       2002  |   .7952356   .0246254    32.29   0.000     .7468292     .843642
       2003  |   .8927683   .0280274    31.85   0.000     .8376746     .947862
       2004  |   1.013779   .0196857    51.50   0.000     .9750827    1.052476
       2005  |   .8348116   .0207574    40.22   0.000     .7940086    .8756146
       2006  |   .7588868   .0242629    31.28   0.000      .711193    .8065807
       2007  |   .7004122   .0233884    29.95   0.000     .6544373    .7463871
       2008  |   .6978008   .0206903    33.73   0.000     .6571296     .738472
       2009  |   1.000502   .0216314    46.25   0.000     .9579809    1.043023
       2010  |   1.434398   .0676551    21.20   0.000     1.301408    1.567389
       2011  |   1.893248   .0265562    71.29   0.000     1.841046    1.945449
       2012  |   1.915145    .027699    69.14   0.000     1.860696    1.969593
       2013  |   1.694807   .0308326    54.97   0.000     1.634199    1.755415
       2014  |   1.331756   .0258783    51.46   0.000     1.280886    1.382625
       2015  |   .7951278   .0306234    25.96   0.000     .7349311    .8553246
             |
       _cons |   9.406656   .0126943   741.01   0.000     9.381703     9.43161
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (415 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     10,816    10.11935    1.522273   4.955827    16.8814

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     10,946    .0064081    .0226207  -.1086787   .0958731
9575
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.0000h2 not found)
file /tmp/St18055.0000h2 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.0000h3 not found)
file /tmp/St18055.0000h3 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.0000h4 not found)
file /tmp/St18055.0000h4 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.0000h5 not found)
file /tmp/St18055.0000h5 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(26 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     10,250
                                                F(  25,    409)   =    1019.69
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9788
                                                Adj R-squared     =     0.9779
                                                Root MSE          =     0.2260

                                (Std. Err. adjusted for 410 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.186175   .9550908    -8.57   0.000    -10.06367   -6.308676
             |
        year |
       1992  |   .1609896   .0248362     6.48   0.000     .1121672    .2098121
       1993  |   .6903799   .0111301    62.03   0.000     .6685006    .7122592
       1994  |   .6859949   .0198851    34.50   0.000     .6469053    .7250846
       1995  |   .4096307   .0290703    14.09   0.000     .3524848    .4667765
       1996  |   .3499253   .0279305    12.53   0.000       .29502    .4048306
       1997  |   .3671129   .0235382    15.60   0.000      .320842    .4133837
       1998  |   .3354166   .0272169    12.32   0.000     .2819142     .388919
       1999  |   .3082031   .0260875    11.81   0.000     .2569208    .3594854
       2000  |   .3067286   .0234042    13.11   0.000     .2607211    .3527361
       2001  |    .328336   .0199439    16.46   0.000     .2891305    .3675414
       2002  |   .7929981   .0245211    32.34   0.000      .744795    .8412011
       2003  |   .8918392   .0281717    31.66   0.000     .8364598    .9472186
       2004  |   1.012091   .0197567    51.23   0.000     .9732534    1.050928
       2005  |   .8326526   .0206787    40.27   0.000     .7920027    .8733025
       2006  |   .7580731   .0241739    31.36   0.000     .7105525    .8055937
       2007  |   .6994003   .0232536    30.08   0.000     .6536887    .7451118
       2008  |   .6966555   .0206055    33.81   0.000     .6561497    .7371613
       2009  |   .9998475   .0216862    46.11   0.000     .9572171    1.042478
       2010  |   1.434028   .0679334    21.11   0.000     1.300486     1.56757
       2011  |    1.89176   .0267192    70.80   0.000     1.839236    1.944284
       2012  |   1.913579   .0276991    69.08   0.000     1.859128    1.968029
       2013  |   1.693111   .0308071    54.96   0.000     1.632551    1.753671
       2014  |   1.330564   .0258802    51.41   0.000     1.279689    1.381439
       2015  |   .7921397   .0306319    25.86   0.000     .7319241    .8523553
             |
       _cons |   9.409789   .0126721   742.56   0.000     9.384879      9.4347
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (410 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     10,686    10.12138    1.527695   4.955827   16.90844

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     10,816     .006419    .0226274  -.1086787   .0958731
9580
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.0000h7 not found)
file /tmp/St18055.0000h7 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.0000h8 not found)
file /tmp/St18055.0000h8 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.0000h9 not found)
file /tmp/St18055.0000h9 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.0000ha not found)
file /tmp/St18055.0000ha saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(26 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     10,175
                                                F(  25,    406)   =    1006.10
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9790
                                                Adj R-squared     =     0.9781
                                                Root MSE          =     0.2255

                                (Std. Err. adjusted for 407 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.134659   .9573879    -8.50   0.000    -10.01672   -6.252603
             |
        year |
       1992  |   .1621996   .0248622     6.52   0.000      .113325    .2110742
       1993  |   .6912353   .0111695    61.89   0.000     .6692781    .7131925
       1994  |   .6862307   .0200168    34.28   0.000     .6468813    .7255802
       1995  |   .4088368   .0291373    14.03   0.000     .3515581    .4661155
       1996  |   .3488178   .0279692    12.47   0.000     .2938353    .4038003
       1997  |   .3661976   .0235714    15.54   0.000     .3198603    .4125349
       1998  |   .3341889   .0272208    12.28   0.000     .2806776    .3877002
       1999  |   .3070061   .0260894    11.77   0.000      .255719    .3582932
       2000  |    .305874   .0234624    13.04   0.000      .259751     .351997
       2001  |    .327294   .0199618    16.40   0.000     .2880525    .3665354
       2002  |   .7914205   .0245501    32.24   0.000     .7431593    .8396817
       2003  |   .8931229   .0282455    31.62   0.000     .8375972    .9486485
       2004  |   1.012409   .0198216    51.08   0.000      .973443    1.051375
       2005  |   .8314042   .0206144    40.33   0.000     .7908799    .8719285
       2006  |     .75536   .0240611    31.39   0.000     .7080602    .8026598
       2007  |   .6967622   .0230578    30.22   0.000     .6514346    .7420898
       2008  |   .6951837   .0205392    33.85   0.000     .6548073    .7355601
       2009  |   .9984018   .0217241    45.96   0.000     .9556961    1.041108
       2010  |   1.436079   .0681866    21.06   0.000     1.302036    1.570122
       2011  |   1.891256   .0268623    70.41   0.000      1.83845    1.944063
       2012  |   1.911701   .0277282    68.94   0.000     1.857193     1.96621
       2013  |   1.691192   .0308503    54.82   0.000     1.630545    1.751838
       2014  |   1.329563   .0259743    51.19   0.000     1.278502    1.380624
       2015  |   .7918487   .0307367    25.76   0.000     .7314258    .8522715
             |
       _cons |   9.415633   .0126917   741.87   0.000     9.390683    9.440583
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (407 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     10,608    10.12655    1.531484   4.955827   16.91546

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     10,738    .0064574      .02261  -.1086787   .0958731
9585
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.0000hc not found)
file /tmp/St18055.0000hc saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.0000hd not found)
file /tmp/St18055.0000hd saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.0000he not found)
file /tmp/St18055.0000he saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.0000hf not found)
file /tmp/St18055.0000hf saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(26 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     10,050
                                                F(  25,    401)   =     986.78
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9791
                                                Adj R-squared     =     0.9782
                                                Root MSE          =     0.2252

                                (Std. Err. adjusted for 402 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.381738   .9754223    -8.59   0.000    -10.29932   -6.464157
             |
        year |
       1992  |   .1580772    .025242     6.26   0.000     .1084541    .2077003
       1993  |    .692478   .0112886    61.34   0.000     .6702858    .7146702
       1994  |    .692803   .0202857    34.15   0.000     .6529235    .7326825
       1995  |    .418057   .0295931    14.13   0.000       .35988     .476234
       1996  |   .3566675   .0284318    12.54   0.000     .3007736    .4125614
       1997  |   .3730414   .0239335    15.59   0.000     .3259905    .4200922
       1998  |   .3421722   .0275765    12.41   0.000     .2879597    .3963847
       1999  |   .3148386   .0263651    11.94   0.000     .2630075    .3666697
       2000  |   .3127145   .0237863    13.15   0.000      .265953    .3594759
       2001  |   .3329663   .0202096    16.48   0.000     .2932362    .3726963
       2002  |   .7994104   .0248777    32.13   0.000     .7505035    .8483174
       2003  |   .8938995   .0285694    31.29   0.000     .8377349    .9500641
       2004  |   1.015646   .0199675    50.86   0.000     .9763918      1.0549
       2005  |   .8398261   .0206241    40.72   0.000     .7992813    .8803709
       2006  |   .7640438   .0242077    31.56   0.000      .716454    .8116335
       2007  |    .705754   .0231169    30.53   0.000     .6603086    .7511995
       2008  |   .7025661   .0205624    34.17   0.000     .6621426    .7429897
       2009  |   1.002252   .0217872    46.00   0.000     .9594209    1.045084
       2010  |   1.425642   .0693498    20.56   0.000     1.289308    1.561977
       2011  |   1.892414   .0271456    69.71   0.000     1.839049    1.945779
       2012  |   1.919612   .0279331    68.72   0.000     1.864698    1.974525
       2013  |   1.699478   .0312124    54.45   0.000     1.638117    1.760838
       2014  |   1.337503   .0261961    51.06   0.000     1.286005    1.389002
       2015  |   .8022508    .031008    25.87   0.000     .7412923    .8632092
             |
       _cons |   9.423843   .0127284   740.38   0.000     9.398821    9.448866
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (402 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     10,478     10.1378    1.535024   4.955827   16.92474

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     10,608    .0065384     .022563  -.1086787   .0958731
9590
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.0000hh not found)
file /tmp/St18055.0000hh saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.0000hi not found)
file /tmp/St18055.0000hi saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.0000hj not found)
file /tmp/St18055.0000hj saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.0000hk not found)
file /tmp/St18055.0000hk saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(26 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     10,000
                                                F(  25,    399)   =     979.68
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9791
                                                Adj R-squared     =     0.9782
                                                Root MSE          =     0.2255

                                (Std. Err. adjusted for 400 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.399536   .9769392    -8.60   0.000    -10.32013   -6.478944
             |
        year |
       1992  |   .1579316   .0252833     6.25   0.000     .1082265    .2076367
       1993  |   .6925437   .0113449    61.04   0.000     .6702405    .7148469
       1994  |   .6932868   .0203555    34.06   0.000     .6532693    .7333043
       1995  |   .4191544   .0296657    14.13   0.000     .3608337    .4774751
       1996  |   .3580251   .0284771    12.57   0.000     .3020412     .414009
       1997  |   .3747288   .0239752    15.63   0.000     .3275953    .4218623
       1998  |   .3441087   .0276178    12.46   0.000      .289814    .3984033
       1999  |    .316602   .0264166    11.98   0.000      .264669    .3685351
       2000  |    .314406   .0238525    13.18   0.000     .2675138    .3612983
       2001  |   .3343768   .0202722    16.49   0.000     .2945231    .3742305
       2002  |   .8014301   .0249609    32.11   0.000     .7523589    .8505013
       2003  |   .8951611   .0286088    31.29   0.000     .8389183    .9514038
       2004  |   1.017288   .0199985    50.87   0.000      .977972    1.056603
       2005  |   .8415805   .0206879    40.68   0.000     .8009096    .8822513
       2006  |   .7660041   .0242788    31.55   0.000     .7182736    .8137345
       2007  |   .7075405    .023182    30.52   0.000     .6619662    .7531147
       2008  |    .704279   .0206271    34.14   0.000     .6637276    .7448304
       2009  |   1.003734   .0218535    45.93   0.000     .9607711    1.046696
       2010  |   1.426192   .0694556    20.53   0.000     1.289647    1.562736
       2011  |    1.89411   .0272106    69.61   0.000     1.840616    1.947604
       2012  |   1.921834   .0279994    68.64   0.000     1.866789    1.976879
       2013  |   1.701091   .0313004    54.35   0.000     1.639557    1.762625
       2014  |   1.339047   .0262691    50.97   0.000     1.287404     1.39069
       2015  |   .8041943   .0310921    25.86   0.000     .7430696     .865319
             |
       _cons |   9.418001   .0127578   738.21   0.000      9.39292    9.443082
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (400 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     10,426    10.13316    1.536663   4.955827   16.94471

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     10,556    .0065487    .0225668  -.1086787   .0958731
9595
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.0000hm not found)
file /tmp/St18055.0000hm saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.0000hn not found)
file /tmp/St18055.0000hn saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.0000ho not found)
file /tmp/St18055.0000ho saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.0000hp not found)
file /tmp/St18055.0000hp saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(26 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =      9,750
                                                F(  25,    389)   =     964.22
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9793
                                                Adj R-squared     =     0.9784
                                                Root MSE          =     0.2258

                                (Std. Err. adjusted for 390 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.189348   1.001245    -8.18   0.000    -10.15788   -6.220819
             |
        year |
       1992  |   .1640159   .0258166     6.35   0.000     .1132584    .2147735
       1993  |   .6925478   .0114477    60.50   0.000     .6700406    .7150549
       1994  |   .6903212   .0207106    33.33   0.000     .6496025    .7310398
       1995  |   .4147756   .0302811    13.70   0.000     .3552405    .4743107
       1996  |   .3543318   .0290483    12.20   0.000     .2972206     .411443
       1997  |   .3726174   .0244234    15.26   0.000      .324599    .4206358
       1998  |   .3408272   .0281659    12.10   0.000     .2854507    .3962038
       1999  |    .314146   .0268881    11.68   0.000     .2612819    .3670101
       2000  |   .3122468    .024215    12.89   0.000     .2646381    .3598555
       2001  |    .334313   .0206278    16.21   0.000     .2937571    .3748688
       2002  |   .8014161   .0252478    31.74   0.000     .7517768    .8510554
       2003  |   .9057265   .0291985    31.02   0.000     .8483199     .963133
       2004  |   1.024484   .0203672    50.30   0.000     .9844402    1.064527
       2005  |   .8431625   .0209639    40.22   0.000     .8019458    .8843792
       2006  |   .7642527   .0244476    31.26   0.000     .7161868    .8123187
       2007  |   .7082017   .0235909    30.02   0.000     .6618201    .7545833
       2008  |   .7069245    .021003    33.66   0.000     .6656308    .7482181
       2009  |   1.010397   .0223228    45.26   0.000     .9665087    1.054286
       2010  |   1.446625    .071262    20.30   0.000     1.306518    1.586732
       2011  |   1.903446   .0278149    68.43   0.000      1.84876    1.958133
       2012  |   1.924273   .0283613    67.85   0.000     1.868513    1.980034
       2013  |   1.702737   .0317136    53.69   0.000     1.640386    1.765089
       2014  |    1.34124   .0266654    50.30   0.000     1.288814    1.393666
       2015  |   .8034468   .0315873    25.44   0.000     .7413436      .86555
             |
       _cons |   9.421674   .0129077   729.93   0.000     9.396297    9.447052
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (390 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     10,166    10.13987    1.546384   4.955827   16.96818

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     10,296    .0065645    .0225501  -.1086787   .0958731
9600
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.0000hr not found)
file /tmp/St18055.0000hr saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.0000hs not found)
file /tmp/St18055.0000hs saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.0000ht not found)
file /tmp/St18055.0000ht saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.0000hu not found)
file /tmp/St18055.0000hu saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(26 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =      9,650
                                                F(  25,    385)   =     975.59
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9794
                                                Adj R-squared     =     0.9785
                                                Root MSE          =     0.2258

                                (Std. Err. adjusted for 386 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.209686   1.019707    -8.05   0.000    -10.21458   -6.204795
             |
        year |
       1992  |   .1647053   .0261857     6.29   0.000     .1132204    .2161901
       1993  |    .693704    .011541    60.11   0.000     .6710127    .7163952
       1994  |   .6905744   .0210056    32.88   0.000     .6492743    .7318745
       1995  |   .4150438    .030775    13.49   0.000     .3545356    .4755519
       1996  |   .3542309    .029544    11.99   0.000     .2961431    .4123187
       1997  |   .3717021   .0248447    14.96   0.000     .3228539    .4205503
       1998  |   .3399117   .0286705    11.86   0.000     .2835414    .3962819
       1999  |   .3138281   .0273626    11.47   0.000     .2600294    .3676269
       2000  |   .3116481   .0246227    12.66   0.000     .2632362      .36006
       2001  |   .3332828   .0209341    15.92   0.000     .2921234    .3744422
       2002  |   .8032958   .0256964    31.26   0.000     .7527729    .8538186
       2003  |   .9077782    .029584    30.68   0.000     .8496117    .9659448
       2004  |   1.026506   .0205675    49.91   0.000     .9860677    1.066945
       2005  |   .8453376   .0212226    39.83   0.000     .8036109    .8870644
       2006  |   .7663711   .0247779    30.93   0.000     .7176541    .8150881
       2007  |   .7100678   .0239181    29.69   0.000     .6630414    .7570941
       2008  |   .7078782     .02126    33.30   0.000     .6660779    .7496785
       2009  |   1.012292   .0225111    44.97   0.000     .9680319    1.056552
       2010  |   1.448599   .0724359    20.00   0.000     1.306179    1.591018
       2011  |   1.906985   .0280336    68.02   0.000     1.851867    1.962103
       2012  |   1.928586   .0286372    67.35   0.000     1.872281    1.984891
       2013  |   1.706844   .0321213    53.14   0.000     1.643689    1.769999
       2014  |   1.342775   .0270349    49.67   0.000      1.28962     1.39593
       2015  |   .8041691     .03202    25.11   0.000     .7412132     .867125
             |
       _cons |   9.430625    .013025   724.04   0.000     9.405016    9.456234
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (386 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |     10,062    10.14956    1.549972   4.955827   16.97395

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     10,192    .0065967    .0225381  -.1086787   .0958731
9605
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.0000hw not found)
file /tmp/St18055.0000hw saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.0000hx not found)
file /tmp/St18055.0000hx saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.0000i0 not found)
file /tmp/St18055.0000i0 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.0000i1 not found)
file /tmp/St18055.0000i1 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(26 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =      9,475
                                                F(  25,    378)   =     958.20
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9796
                                                Adj R-squared     =     0.9787
                                                Root MSE          =     0.2265

                                (Std. Err. adjusted for 379 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.262314   1.031389    -8.01   0.000    -10.29029   -6.234334
             |
        year |
       1992  |   .1643969   .0264765     6.21   0.000     .1123373    .2164565
       1993  |   .6947033   .0116319    59.72   0.000     .6718319    .7175747
       1994  |   .6918099   .0212552    32.55   0.000     .6500167    .7336031
       1995  |   .4173449   .0311188    13.41   0.000     .3561574    .4785325
       1996  |   .3547784   .0298525    11.88   0.000     .2960806    .4134763
       1997  |   .3716213   .0251395    14.78   0.000     .3221905    .4210521
       1998  |   .3401365   .0290156    11.72   0.000     .2830842    .3971888
       1999  |   .3144044   .0276464    11.37   0.000     .2600445    .3687644
       2000  |   .3125571   .0248902    12.56   0.000     .2636165    .3614977
       2001  |   .3328067   .0211577    15.73   0.000     .2912051    .3744083
       2002  |   .8046005   .0260796    30.85   0.000     .7533212    .8558799
       2003  |   .9080092   .0299938    30.27   0.000     .8490337    .9669847
       2004  |   1.027649   .0208696    49.24   0.000     .9866136    1.068684
       2005  |   .8467915   .0214982    39.39   0.000     .8045205    .8890625
       2006  |   .7643369   .0250336    30.53   0.000     .7151144    .8135595
       2007  |   .7084152   .0241903    29.29   0.000     .6608508    .7559797
       2008  |   .7084163   .0215253    32.91   0.000      .666092    .7507406
       2009  |    1.01383   .0228338    44.40   0.000     .9689331    1.058728
       2010  |   1.449696    .073314    19.77   0.000     1.305542    1.593851
       2011  |   1.909088   .0284534    67.10   0.000     1.853142    1.965035
       2012  |    1.93187   .0290564    66.49   0.000     1.874737    1.989002
       2013  |   1.709983   .0325563    52.52   0.000     1.645969    1.773997
       2014  |   1.344309   .0274146    49.04   0.000     1.290404    1.398213
       2015  |   .8050632   .0324484    24.81   0.000     .7412612    .8688652
             |
       _cons |   9.443427   .0132179   714.44   0.000     9.417437    9.469417
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (379 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |      9,880    10.16269    1.560732   4.955827   16.98205

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |     10,010    .0066232    .0225373  -.1086787   .0958731
9610
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.0000i3 not found)
file /tmp/St18055.0000i3 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.0000i4 not found)
file /tmp/St18055.0000i4 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.0000i5 not found)
file /tmp/St18055.0000i5 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.0000i6 not found)
file /tmp/St18055.0000i6 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(26 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =      9,350
                                                F(  25,    373)   =     945.54
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9795
                                                Adj R-squared     =     0.9786
                                                Root MSE          =     0.2272

                                (Std. Err. adjusted for 374 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.253681   1.038023    -7.95   0.000    -10.29479    -6.21257
             |
        year |
       1992  |   .1646224   .0266101     6.19   0.000     .1122979     .216947
       1993  |   .6936343   .0116762    59.41   0.000     .6706749    .7165937
       1994  |   .6915241    .021389    32.33   0.000      .649466    .7335821
       1995  |   .4180169   .0313251    13.34   0.000      .356421    .4796128
       1996  |   .3559421   .0300563    11.84   0.000     .2968412     .415043
       1997  |    .373001   .0253293    14.73   0.000     .3231949    .4228071
       1998  |   .3411457     .02925    11.66   0.000     .2836301    .3986614
       1999  |   .3158272   .0278622    11.34   0.000     .2610405    .3706138
       2000  |   .3142508   .0250907    12.52   0.000     .2649138    .3635877
       2001  |   .3343965   .0213334    15.67   0.000     .2924476    .3763453
       2002  |   .8057725   .0263418    30.59   0.000     .7539755    .8575695
       2003  |   .9098044   .0301697    30.16   0.000     .8504804    .9691284
       2004  |   1.028941   .0210101    48.97   0.000     .9876283    1.070255
       2005  |   .8486391   .0216981    39.11   0.000     .8059731     .891305
       2006  |   .7668807   .0252721    30.34   0.000     .7171871    .8165743
       2007  |   .7112457   .0244171    29.13   0.000     .6632334    .7592581
       2008  |   .7104273   .0217035    32.73   0.000     .6677507    .7531038
       2009  |   1.014405    .022942    44.22   0.000     .9692928    1.059516
       2010  |   1.449359   .0737335    19.66   0.000     1.304374    1.594345
       2011  |   1.908752   .0285952    66.75   0.000     1.852524     1.96498
       2012  |   1.931176    .029311    65.89   0.000      1.87354    1.988811
       2013  |   1.710511   .0328189    52.12   0.000     1.645977    1.775044
       2014  |   1.345281   .0276074    48.73   0.000     1.290996    1.399567
       2015  |   .8064496   .0326922    24.67   0.000     .7421655    .8707337
             |
       _cons |   9.441458   .0133035   709.70   0.000     9.415299    9.467617
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (374 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |      9,750    10.16168    1.563312   4.955827   17.04803

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |      9,880     .006636     .022536  -.1086787   .0958731
9615
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.0000i8 not found)
file /tmp/St18055.0000i8 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.0000i9 not found)
file /tmp/St18055.0000i9 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.0000ia not found)
file /tmp/St18055.0000ia saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.0000ib not found)
file /tmp/St18055.0000ib saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(26 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =      9,150
                                                F(  25,    365)   =     929.83
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9799
                                                Adj R-squared     =     0.9790
                                                Root MSE          =     0.2259

                                (Std. Err. adjusted for 366 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -7.955712   1.030048    -7.72   0.000    -9.981286   -5.930138
             |
        year |
       1992  |   .1717996   .0264449     6.50   0.000     .1197962    .2238029
       1993  |   .6956459   .0118135    58.89   0.000     .6724149    .7188768
       1994  |   .6885145   .0213719    32.22   0.000     .6464871     .730542
       1995  |   .4108728   .0311751    13.18   0.000     .3495674    .4721782
       1996  |   .3475535   .0299028    11.62   0.000       .28875     .406357
       1997  |   .3657502   .0252544    14.48   0.000     .3160879    .4154125
       1998  |   .3330116   .0292021    11.40   0.000     .2755862     .390437
       1999  |   .3078947   .0278034    11.07   0.000     .2532198    .3625697
       2000  |   .3071383   .0250567    12.26   0.000     .2578647    .3564119
       2001  |   .3278705   .0213623    15.35   0.000     .2858618    .3698792
       2002  |   .7993043   .0263412    30.34   0.000     .7475047    .8511039
       2003  |   .9173032   .0298302    30.75   0.000     .8586425    .9759639
       2004  |   1.032639   .0207327    49.81   0.000     .9918684    1.073409
       2005  |   .8451415   .0216389    39.06   0.000     .8025888    .8876941
       2006  |   .7625876   .0252213    30.24   0.000     .7129903    .8121849
       2007  |   .7062634   .0243611    28.99   0.000     .6583576    .7541693
       2008  |   .7067268    .021691    32.58   0.000     .6640718    .7493818
       2009  |    1.01449    .022848    44.40   0.000     .9695596     1.05942
       2010  |   1.468458   .0728989    20.14   0.000     1.325103    1.611812
       2011  |   1.912517   .0282665    67.66   0.000     1.856931    1.968103
       2012  |   1.923437   .0292799    65.69   0.000     1.865858    1.981015
       2013  |   1.702111   .0326961    52.06   0.000     1.637814    1.766407
       2014  |   1.339616   .0274626    48.78   0.000     1.285611    1.393621
       2015  |   .8006109   .0325302    24.61   0.000     .7366408     .864581
             |
       _cons |   9.454145   .0132344   714.36   0.000      9.42812     9.48017
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (366 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |      9,542    10.17352    1.568605   4.955827   17.06942

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |      9,672    .0066684    .0225119  -.1086787   .0958731
9620
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.0000id not found)
file /tmp/St18055.0000id saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.0000ie not found)
file /tmp/St18055.0000ie saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.0000if not found)
file /tmp/St18055.0000if saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.0000ig not found)
file /tmp/St18055.0000ig saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(26 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =      9,000
                                                F(  25,    359)   =     907.68
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9799
                                                Adj R-squared     =     0.9790
                                                Root MSE          =     0.2264

                                (Std. Err. adjusted for 360 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -7.838425   1.032111    -7.59   0.000    -9.868169   -5.808681
             |
        year |
       1992  |   .1760012   .0264777     6.65   0.000     .1239302    .2280721
       1993  |   .6977074   .0119163    58.55   0.000     .6742728     .721142
       1994  |   .6884067   .0215447    31.95   0.000      .646037    .7307765
       1995  |   .4093056   .0313478    13.06   0.000     .3476572    .4709541
       1996  |   .3447214    .030077    11.46   0.000      .285572    .4038707
       1997  |   .3631156   .0254278    14.28   0.000     .3131094    .4131218
       1998  |   .3297796   .0293523    11.24   0.000     .2720555    .3875036
       1999  |   .3050464   .0279697    10.91   0.000     .2500414    .3600514
       2000  |   .3058741    .025253    12.11   0.000     .2562116    .3555365
       2001  |   .3268438   .0215191    15.19   0.000     .2845245     .369163
       2002  |   .7986163   .0264898    30.15   0.000     .7465215    .8507111
       2003  |   .9230439   .0299285    30.84   0.000     .8641866    .9819012
       2004  |   1.034641    .020958    49.37   0.000     .9934256    1.075857
       2005  |     .84446   .0217894    38.76   0.000     .8016091    .8873109
       2006  |   .7608535   .0253822    29.98   0.000      .710937    .8107701
       2007  |   .7046024   .0244556    28.81   0.000     .6565081    .7526967
       2008  |   .7058134   .0217947    32.38   0.000      .662952    .7486748
       2009  |   1.016242   .0230466    44.10   0.000     .9709185    1.061565
       2010  |   1.477041   .0732504    20.16   0.000     1.332987    1.621095
       2011  |   1.915286   .0285808    67.01   0.000     1.859079    1.971493
       2012  |   1.922505   .0294334    65.32   0.000     1.864622    1.980389
       2013  |   1.698915   .0328401    51.73   0.000     1.634332    1.763498
       2014  |   1.337891   .0276707    48.35   0.000     1.283474    1.392308
       2015  |   .7987677   .0327309    24.40   0.000     .7343992    .8631361
             |
       _cons |   9.462758   .0133713   707.69   0.000     9.436462    9.489054
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (360 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |      9,386    10.18266    1.573635   4.955827   17.08983

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |      9,516    .0066877    .0225154  -.1086787   .0958731
9625
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.0000ii not found)
file /tmp/St18055.0000ii saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.0000ij not found)
file /tmp/St18055.0000ij saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.0000ik not found)
file /tmp/St18055.0000ik saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.0000il not found)
file /tmp/St18055.0000il saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(26 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =      8,825
                                                F(  25,    352)   =     885.10
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9798
                                                Adj R-squared     =     0.9789
                                                Root MSE          =     0.2276

                                (Std. Err. adjusted for 353 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.047338   1.092618    -7.37   0.000    -10.19622   -5.898458
             |
        year |
       1992  |   .1713053   .0277265     6.18   0.000     .1167748    .2258358
       1993  |   .6993904   .0120109    58.23   0.000     .6757683    .7230125
       1994  |   .6939095   .0224752    30.87   0.000     .6497069    .7381121
       1995  |   .4163556   .0329988    12.62   0.000     .3514559    .4812552
       1996  |   .3517862   .0316671    11.11   0.000     .2895056    .4140667
       1997  |   .3686162   .0265752    13.87   0.000     .3163501    .4208823
       1998  |   .3364203   .0307225    10.95   0.000     .2759976     .396843
       1999  |   .3120615    .029239    10.67   0.000     .2545563    .3695667
       2000  |   .3123277   .0262739    11.89   0.000     .2606541    .3640013
       2001  |   .3317938   .0223306    14.86   0.000     .2878757    .3757119
       2002  |   .8039035   .0275794    29.15   0.000     .7496624    .8581446
       2003  |   .9210354   .0313298    29.40   0.000     .8594182    .9826526
       2004  |   1.035829   .0216284    47.89   0.000     .9932916    1.078366
       2005  |   .8495205   .0222925    38.11   0.000     .8056772    .8933638
       2006  |   .7671386   .0260212    29.48   0.000      .715962    .8183152
       2007  |    .709314   .0251316    28.22   0.000     .6598871    .7587409
       2008  |   .7080534   .0222469    31.83   0.000     .6642997     .751807
       2009  |   1.015716   .0236881    42.88   0.000     .9691279    1.062304
       2010  |   1.463959   .0776335    18.86   0.000     1.311276    1.616643
       2011  |   1.913746   .0297107    64.41   0.000     1.855313    1.972179
       2012  |   1.927825   .0302022    63.83   0.000     1.868426    1.987225
       2013  |   1.704737   .0340525    50.06   0.000     1.637766    1.771709
       2014  |    1.34196   .0285473    47.01   0.000     1.285816    1.398105
       2015  |   .8053864   .0337853    23.84   0.000     .7389398    .8718329
             |
       _cons |   9.464376   .0135876   696.55   0.000     9.437653    9.491099
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (353 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |      9,204    10.18625    1.576131   4.955827   17.14721

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |      9,334    .0066955    .0224963  -.1086787   .0958731
9630
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.0000in not found)
file /tmp/St18055.0000in saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.0000io not found)
file /tmp/St18055.0000io saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.0000ip not found)
file /tmp/St18055.0000ip saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.0000iq not found)
file /tmp/St18055.0000iq saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(26 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =      8,700
                                                F(  25,    347)   =     864.89
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9794
                                                Adj R-squared     =     0.9785
                                                Root MSE          =     0.2280

                                (Std. Err. adjusted for 348 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.025625   1.104081    -7.27   0.000    -10.19716   -5.854092
             |
        year |
       1992  |   .1701241   .0279697     6.08   0.000     .1151127    .2251356
       1993  |   .6980413   .0120295    58.03   0.000     .6743813    .7217012
       1994  |   .6928109   .0226812    30.55   0.000      .648201    .7374207
       1995  |   .4160098   .0333387    12.48   0.000     .3504383    .4815812
       1996  |   .3523035   .0320026    11.01   0.000       .28936     .415247
       1997  |   .3697223     .02685    13.77   0.000     .3169131    .4225316
       1998  |   .3370575   .0310683    10.85   0.000     .2759516    .3981633
       1999  |   .3134039   .0295634    10.60   0.000     .2552578      .37155
       2000  |   .3153609   .0265633    11.87   0.000     .2631155    .3676062
       2001  |   .3333587   .0225214    14.80   0.000      .289063    .3776544
       2002  |   .8073436   .0279153    28.92   0.000     .7524391    .8622481
       2003  |   .9234077   .0316278    29.20   0.000     .8612014    .9856141
       2004  |    1.03814   .0217892    47.64   0.000     .9952841    1.080995
       2005  |   .8519695   .0225508    37.78   0.000      .807616    .8963231
       2006  |   .7695124    .026346    29.21   0.000     .7176943    .8213304
       2007  |   .7110319    .025478    27.91   0.000     .6609212    .7611425
       2008  |   .7094768    .022553    31.46   0.000     .6651191    .7538345
       2009  |   1.017247     .02393    42.51   0.000     .9701805    1.064313
       2010  |   1.467511   .0783784    18.72   0.000     1.313355    1.621668
       2011  |   1.917594   .0299143    64.10   0.000     1.858758     1.97643
       2012  |   1.931581   .0304644    63.40   0.000     1.871663    1.991499
       2013  |   1.708117   .0343535    49.72   0.000     1.640549    1.775684
       2014  |    1.34505   .0287761    46.74   0.000     1.288453    1.401648
       2015  |   .8070016   .0340705    23.69   0.000     .7399908    .8740123
             |
       _cons |   9.465339   .0136812   691.85   0.000      9.43843    9.492247
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (348 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |      9,074    10.18898    1.562774   4.955827   17.17934

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |      9,204    .0067097    .0224938  -.1086787   .0958731
9635
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.0000is not found)
file /tmp/St18055.0000is saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.0000it not found)
file /tmp/St18055.0000it saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.0000iu not found)
file /tmp/St18055.0000iu saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.0000iv not found)
file /tmp/St18055.0000iv saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(26 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =      8,550
                                                F(  25,    341)   =     839.95
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9795
                                                Adj R-squared     =     0.9786
                                                Root MSE          =     0.2276

                                (Std. Err. adjusted for 342 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.000137   1.110637    -7.20   0.000     -10.1847   -5.815575
             |
        year |
       1992  |   .1717287   .0280777     6.12   0.000     .1165014    .2269561
       1993  |   .6995988   .0121437    57.61   0.000     .6757128    .7234848
       1994  |   .6931124   .0228959    30.27   0.000     .6480774    .7381474
       1995  |   .4153207   .0335867    12.37   0.000     .3492574     .481384
       1996  |   .3518403   .0321798    10.93   0.000     .2885444    .4151363
       1997  |   .3694939   .0270201    13.67   0.000     .3163468     .422641
       1998  |    .336829   .0312531    10.78   0.000     .2753559    .3983021
       1999  |   .3124712   .0297374    10.51   0.000     .2539795     .370963
       2000  |   .3153541   .0268187    11.76   0.000     .2626031    .3681051
       2001  |   .3332274   .0227592    14.64   0.000     .2884614    .3779934
       2002  |    .807083   .0282359    28.58   0.000     .7515446    .8626215
       2003  |   .9234782   .0317878    29.05   0.000     .8609533     .986003
       2004  |   1.037397   .0219446    47.27   0.000     .9942335    1.080561
       2005  |   .8497227   .0227521    37.35   0.000     .8049706    .8944748
       2006  |    .761873   .0264046    28.85   0.000     .7099366    .8138095
       2007  |   .7081221   .0256359    27.62   0.000     .6576976    .7585465
       2008  |   .7089964   .0227169    31.21   0.000     .6643136    .7536792
       2009  |   1.017391   .0241518    42.12   0.000     .9698852    1.064896
       2010  |   1.468858    .078932    18.61   0.000     1.313603    1.624113
       2011  |   1.916643   .0302466    63.37   0.000      1.85715    1.976137
       2012  |   1.930861   .0307313    62.83   0.000     1.870414    1.991308
       2013  |   1.708083   .0346003    49.37   0.000     1.640026     1.77614
       2014  |   1.346929   .0289697    46.49   0.000     1.289948    1.403911
       2015  |   .8086548   .0343567    23.54   0.000      .741077    .8762326
             |
       _cons |    9.46289   .0138507   683.21   0.000     9.435646    9.490133
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (342 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |      8,918    10.18614    1.564203   4.955827   17.20911

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |      9,048    .0067372    .0224748  -.1086787   .0958731
9640
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.0000ix not found)
file /tmp/St18055.0000ix saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.0000j0 not found)
file /tmp/St18055.0000j0 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.0000j1 not found)
file /tmp/St18055.0000j1 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.0000j2 not found)
file /tmp/St18055.0000j2 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(26 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =      8,400
                                                F(  25,    335)   =     824.97
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9794
                                                Adj R-squared     =     0.9784
                                                Root MSE          =     0.2286

                                (Std. Err. adjusted for 336 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -7.937927   1.159587    -6.85   0.000    -10.21892   -5.656938
             |
        year |
       1992  |   .1725888   .0292143     5.91   0.000     .1151222    .2300554
       1993  |    .699385   .0123347    56.70   0.000     .6751218    .7236483
       1994  |   .6921517    .023774    29.11   0.000     .6453866    .7389168
       1995  |   .4142492   .0349557    11.85   0.000      .345489    .4830095
       1996  |   .3502875   .0334888    10.46   0.000     .2844127    .4161624
       1997  |   .3669761   .0280308    13.09   0.000     .3118374    .4221147
       1998  |   .3339612    .032496    10.28   0.000     .2700393    .3978832
       1999  |   .3100934   .0309018    10.03   0.000     .2493074    .3708794
       2000  |   .3131308   .0277756    11.27   0.000     .2584943    .3677673
       2001  |   .3332003   .0234791    14.19   0.000     .2870152    .3793854
       2002  |   .8060017    .028982    27.81   0.000     .7489921    .8630113
       2003  |   .9282506   .0328251    28.28   0.000     .8636813      .99282
       2004  |   1.041727   .0224253    46.45   0.000     .9976144    1.085839
       2005  |   .8517045   .0232367    36.65   0.000     .8059963    .8974127
       2006  |   .7642316    .027048    28.25   0.000     .7110263    .8174369
       2007  |   .7095573   .0262528    27.03   0.000     .6579161    .7611984
       2008  |   .7088416   .0231321    30.64   0.000      .663339    .7543441
       2009  |   1.019234   .0247084    41.25   0.000     .9706304    1.067837
       2010  |   1.476056    .082264    17.94   0.000     1.314237    1.637875
       2011  |   1.920646   .0310659    61.82   0.000     1.859538    1.981755
       2012  |   1.931762   .0314637    61.40   0.000     1.869871    1.993654
       2013  |   1.708473   .0355568    48.05   0.000      1.63853    1.778415
       2014  |   1.347414   .0297192    45.34   0.000     1.288955    1.405874
       2015  |   .8102245   .0353502    22.92   0.000     .7406882    .8797608
             |
       _cons |   9.460113   .0140726   672.24   0.000     9.432432    9.487795
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (336 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |      8,762    10.18429     1.56701   4.955827   17.25136

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |      8,892    .0067706    .0224487  -.1086787   .0958731
9645
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.0000j4 not found)
file /tmp/St18055.0000j4 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.0000j5 not found)
file /tmp/St18055.0000j5 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.0000j6 not found)
file /tmp/St18055.0000j6 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.0000j7 not found)
file /tmp/St18055.0000j7 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(26 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =      8,325
                                                F(  25,    332)   =     825.30
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9795
                                                Adj R-squared     =     0.9786
                                                Root MSE          =     0.2288

                                (Std. Err. adjusted for 333 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |   -7.73746   1.156158    -6.69   0.000    -10.01178   -5.463141
             |
        year |
       1992  |   .1777772   .0291499     6.10   0.000     .1204355    .2351189
       1993  |   .6999918   .0124192    56.36   0.000     .6755615    .7244222
       1994  |   .6890347   .0238225    28.92   0.000     .6421727    .7358967
       1995  |   .4089884   .0349499    11.70   0.000     .3402372    .4777397
       1996  |   .3452477   .0335658    10.29   0.000     .2792192    .4112762
       1997  |   .3630795   .0281253    12.91   0.000     .3077532    .4184058
       1998  |   .3287732   .0325612    10.10   0.000      .264721    .3928254
       1999  |   .3047808   .0309685     9.84   0.000     .2438615    .3657001
       2000  |   .3087777   .0279089    11.06   0.000     .2538771    .3636783
       2001  |   .3296835   .0235523    14.00   0.000      .283353    .3760141
       2002  |   .8017387   .0289697    27.68   0.000     .7447515    .8587259
       2003  |   .9337367   .0327951    28.47   0.000     .8692243    .9982492
       2004  |   1.045296   .0223885    46.69   0.000     1.001254    1.089337
       2005  |   .8516784   .0233715    36.44   0.000     .8057036    .8976532
       2006  |   .7622356   .0271625    28.06   0.000     .7088033    .8156679
       2007  |   .7070364   .0263443    26.84   0.000     .6552137    .7588592
       2008  |   .7073739   .0232515    30.42   0.000     .6616351    .7531127
       2009  |   1.022862    .024717    41.38   0.000     .9742403    1.071484
       2010  |   1.492608   .0818587    18.23   0.000     1.331581    1.653635
       2011  |   1.927504   .0309098    62.36   0.000       1.8667    1.988308
       2012  |   1.932162   .0316205    61.10   0.000      1.86996    1.994363
       2013  |   1.706946   .0356957    47.82   0.000     1.636728    1.777165
       2014  |     1.3456   .0298705    45.05   0.000     1.286841     1.40436
       2015  |   .8054377   .0354295    22.73   0.000     .7357431    .8751323
             |
       _cons |   9.456636   .0141323   669.15   0.000     9.428836    9.484436
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (333 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |      8,684    10.18157    1.572425   4.955827    17.2631

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |      8,814    .0067801    .0224514  -.1086787   .0958731
9650
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.0000j9 not found)
file /tmp/St18055.0000j9 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.0000ja not found)
file /tmp/St18055.0000ja saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.0000jb not found)
file /tmp/St18055.0000jb saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.0000jc not found)
file /tmp/St18055.0000jc saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(26 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =      8,250
                                                F(  25,    329)   =     813.79
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9794
                                                Adj R-squared     =     0.9785
                                                Root MSE          =     0.2292

                                (Std. Err. adjusted for 330 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -7.829804   1.173503    -6.67   0.000    -10.13832   -5.521288
             |
        year |
       1992  |   .1764776   .0295352     5.98   0.000     .1183759    .2345794
       1993  |   .7010551   .0124489    56.31   0.000     .6765656    .7255445
       1994  |   .6907376   .0240903    28.67   0.000     .6433471    .7381281
       1995  |   .4121376   .0353807    11.65   0.000     .3425366    .4817386
       1996  |   .3480421   .0339911    10.24   0.000     .2811749    .4149094
       1997  |   .3659776   .0284349    12.87   0.000     .3100405    .4219148
       1998  |   .3311805   .0329645    10.05   0.000     .2663328    .3960283
       1999  |    .307124   .0313285     9.80   0.000     .2454945    .3687535
       2000  |   .3106671   .0281766    11.03   0.000     .2552381     .366096
       2001  |   .3315824   .0237601    13.96   0.000     .2848415    .3783232
       2002  |   .8045865   .0293246    27.44   0.000     .7468991    .8622739
       2003  |   .9333484   .0331848    28.13   0.000     .8680673    .9986295
       2004  |   1.045996   .0225746    46.34   0.000     1.001588    1.090405
       2005  |   .8543211   .0235465    36.28   0.000     .8080005    .9006418
       2006  |    .765408   .0274101    27.92   0.000     .7114868    .8193292
       2007  |    .709991   .0266001    26.69   0.000     .6576633    .7623188
       2008  |   .7096561   .0234372    30.28   0.000     .6635504    .7557618
       2009  |   1.023177   .0249379    41.03   0.000     .9741192    1.072235
       2010  |   1.487205   .0830403    17.91   0.000     1.323848    1.650562
       2011  |   1.927167   .0312482    61.67   0.000     1.865696    1.988639
       2012  |   1.934932   .0319386    60.58   0.000     1.872103    1.997762
       2013  |   1.711199   .0360387    47.48   0.000     1.640304    1.782094
       2014  |   1.349353   .0301384    44.77   0.000     1.290065    1.408642
       2015  |   .8083487   .0358081    22.57   0.000      .737907    .8787904
             |
       _cons |   9.464347   .0141986   666.57   0.000     9.436416    9.492278
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (330 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |      8,606    10.19025    1.573242   4.955827   17.26858

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |      8,736    .0067919    .0224436  -.1086787   .0958731
9655
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.0000je not found)
file /tmp/St18055.0000je saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.0000jf not found)
file /tmp/St18055.0000jf saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.0000jg not found)
file /tmp/St18055.0000jg saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.0000jh not found)
file /tmp/St18055.0000jh saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(26 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =      8,075
                                                F(  25,    322)   =     794.63
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9796
                                                Adj R-squared     =     0.9787
                                                Root MSE          =     0.2299

                                (Std. Err. adjusted for 323 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -7.753503   1.175255    -6.60   0.000    -10.06565   -5.441354
             |
        year |
       1992  |   .1779694   .0295981     6.01   0.000     .1197393    .2361995
       1993  |   .6987196   .0125236    55.79   0.000     .6740812     .723358
       1994  |   .6885308   .0241729    28.48   0.000      .640974    .7360876
       1995  |   .4098439   .0353966    11.58   0.000     .3402061    .4794816
       1996  |   .3466147   .0339914    10.20   0.000     .2797414    .4134879
       1997  |   .3662298   .0285341    12.83   0.000     .3100931    .4223666
       1998  |    .331711   .0331028    10.02   0.000     .2665859    .3968361
       1999  |   .3088013    .031457     9.82   0.000      .246914    .3706885
       2000  |   .3125035   .0283585    11.02   0.000     .2567121     .368295
       2001  |   .3345033    .023979    13.95   0.000     .2873281    .3816785
       2002  |   .8063977   .0295175    27.32   0.000     .7483262    .8644692
       2003  |   .9381333   .0335002    28.00   0.000     .8722264     1.00404
       2004  |   1.050585   .0227732    46.13   0.000     1.005782    1.095388
       2005  |   .8588273   .0236843    36.26   0.000     .8122317    .9054228
       2006  |   .7700961   .0276245    27.88   0.000     .7157488    .8244434
       2007  |   .7129921   .0268584    26.55   0.000      .660152    .7658322
       2008  |   .7123976   .0237387    30.01   0.000     .6656951       .7591
       2009  |   1.024548   .0253485    40.42   0.000     .9746785    1.074418
       2010  |   1.493409   .0833499    17.92   0.000      1.32943    1.657389
       2011  |   1.930046   .0316364    61.01   0.000     1.867806    1.992286
       2012  |   1.935889   .0322928    59.95   0.000     1.872358    1.999421
       2013  |   1.711048   .0363317    47.10   0.000     1.639571    1.782526
       2014  |   1.350314   .0304082    44.41   0.000      1.29049    1.410138
       2015  |   .8074426   .0360284    22.41   0.000     .7365618    .8783234
             |
       _cons |   9.474483   .0143909   658.37   0.000     9.446171    9.502795
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (323 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |      8,424    10.20228    1.583655   4.955827   17.28071

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |      8,554    .0068175    .0224534  -.1086787   .0958731
9660
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.0000jj not found)
file /tmp/St18055.0000jj saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.0000jk not found)
file /tmp/St18055.0000jk saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.0000jl not found)
file /tmp/St18055.0000jl saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.0000jm not found)
file /tmp/St18055.0000jm saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(25 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =      7,925
                                                F(  25,    316)   =     782.33
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9795
                                                Adj R-squared     =     0.9786
                                                Root MSE          =     0.2297

                                (Std. Err. adjusted for 317 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -7.649124   1.175574    -6.51   0.000    -9.962066   -5.336181
             |
        year |
       1992  |    .178242   .0295652     6.03   0.000     .1200725    .2364115
       1993  |   .6954175   .0125195    55.55   0.000     .6707854    .7200496
       1994  |   .6850358   .0242441    28.26   0.000     .6373356     .732736
       1995  |     .40563   .0354566    11.44   0.000      .335869    .4753909
       1996  |   .3425444   .0340708    10.05   0.000     .2755101    .4095787
       1997  |   .3626037   .0285224    12.71   0.000     .3064859    .4187215
       1998  |   .3288642   .0331232     9.93   0.000     .2636943     .394034
       1999  |   .3050125   .0314562     9.70   0.000     .2431224    .3669026
       2000  |   .3079962   .0283115    10.88   0.000     .2522932    .3636991
       2001  |   .3306608   .0238663    13.85   0.000     .2837039    .3776176
       2002  |   .8018998   .0294513    27.23   0.000     .7439542    .8598453
       2003  |   .9363564   .0334995    27.95   0.000     .8704461    1.002267
       2004  |   1.046943   .0226461    46.23   0.000     1.002387    1.091499
       2005  |   .8538707   .0237254    35.99   0.000     .8071911    .9005504
       2006  |   .7662087   .0277521    27.61   0.000     .7116065     .820811
       2007  |   .7086068   .0270275    26.22   0.000     .6554302    .7617834
       2008  |   .7068124   .0239481    29.51   0.000     .6596944    .7539304
       2009  |   1.019049   .0254931    39.97   0.000     .9688912    1.069207
       2010  |   1.493731   .0832554    17.94   0.000     1.329926    1.657536
       2011  |   1.924938   .0316658    60.79   0.000     1.862635     1.98724
       2012  |   1.928571   .0324845    59.37   0.000     1.864658    1.992484
       2013  |   1.703841   .0365271    46.65   0.000     1.631974    1.775708
       2014  |   1.346227   .0306091    43.98   0.000     1.286003     1.40645
       2015  |   .8047338   .0363074    22.16   0.000      .733299    .8761687
             |
       _cons |   9.474613     .01439   658.42   0.000       9.4463    9.502925
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (317 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |      8,268    10.19949    1.578697   4.955827   17.36761

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |      8,398    .0068375    .0224379  -.1086787   .0958731
9665
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.0000jo not found)
file /tmp/St18055.0000jo saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.0000jp not found)
file /tmp/St18055.0000jp saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.0000jq not found)
file /tmp/St18055.0000jq saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.0000jr not found)
file /tmp/St18055.0000jr saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(25 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =      7,800
                                                F(  25,    311)   =     857.00
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9797
                                                Adj R-squared     =     0.9788
                                                Root MSE          =     0.2292

                                (Std. Err. adjusted for 312 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -7.649623    1.20051    -6.37   0.000    -10.01177   -5.287474
             |
        year |
       1992  |   .1801349   .0300398     6.00   0.000      .121028    .2392417
       1993  |   .6982491   .0125416    55.67   0.000      .673572    .7229262
       1994  |   .6875279    .024674    27.86   0.000     .6389788    .7360769
       1995  |   .4061278   .0361154    11.25   0.000     .3350664    .4771892
       1996  |   .3409448   .0346438     9.84   0.000     .2727789    .4091108
       1997  |   .3623026    .028993    12.50   0.000     .3052552    .4193499
       1998  |   .3276778   .0337182     9.72   0.000     .2613332    .3940225
       1999  |   .3044865     .03197     9.52   0.000     .2415817    .3673914
       2000  |   .3076966   .0287986    10.68   0.000     .2510318    .3643614
       2001  |   .3285843   .0242489    13.55   0.000     .2808716     .376297
       2002  |   .8010393   .0300524    26.65   0.000     .7419075    .8601711
       2003  |    .937921   .0339673    27.61   0.000     .8710863    1.004756
       2004  |   1.047816   .0229019    45.75   0.000     1.002754    1.092878
       2005  |   .8514961   .0240026    35.48   0.000      .804268    .8987242
       2006  |   .7645908   .0280543    27.25   0.000     .7093906     .819791
       2007  |   .7055408   .0273043    25.84   0.000     .6518163    .7592652
       2008  |   .7032518    .024174    29.09   0.000     .6556866     .750817
       2009  |   1.015177    .025736    39.45   0.000     .9645378    1.065815
       2010  |   1.494221    .084861    17.61   0.000     1.327247    1.661195
       2011  |   1.925856   .0320773    60.04   0.000      1.86274    1.988972
       2012  |   1.929471   .0328057    58.82   0.000     1.864922    1.994021
       2013  |   1.705421   .0370006    46.09   0.000     1.632618    1.778224
       2014  |   1.349146   .0309842    43.54   0.000      1.28818    1.410111
       2015  |   .8068484   .0368554    21.89   0.000      .734331    .8793659
             |
       _cons |   9.489857   .0144901   654.92   0.000     9.461346    9.518368
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (312 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |      8,138    10.21419    1.583286   4.955827   17.37479

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |      8,268    .0069091    .0223978  -.1086787   .0958731
9670
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.0000jt not found)
file /tmp/St18055.0000jt saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.0000ju not found)
file /tmp/St18055.0000ju saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.0000jv not found)
file /tmp/St18055.0000jv saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.0000jw not found)
file /tmp/St18055.0000jw saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(25 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =      7,725
                                                F(  25,    308)   =     840.72
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9797
                                                Adj R-squared     =     0.9788
                                                Root MSE          =     0.2294

                                (Std. Err. adjusted for 309 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -7.678294   1.223543    -6.28   0.000    -10.08585   -5.270734
             |
        year |
       1992  |   .1790299   .0304822     5.87   0.000     .1190502    .2390096
       1993  |   .6968324    .012631    55.17   0.000     .6719785    .7216863
       1994  |   .6870009   .0251342    27.33   0.000     .6375444    .7364574
       1995  |    .407166   .0367762    11.07   0.000     .3348017    .4795303
       1996  |   .3426446   .0352563     9.72   0.000     .2732709    .4120183
       1997  |   .3642766   .0294583    12.37   0.000     .3063115    .4222416
       1998  |   .3288777    .034278     9.59   0.000      .261429    .3963264
       1999  |   .3057799   .0325036     9.41   0.000     .2418227     .369737
       2000  |   .3089848   .0292576    10.56   0.000     .2514147    .3665548
       2001  |   .3297629    .024601    13.40   0.000     .2813557    .3781701
       2002  |   .8031567   .0305035    26.33   0.000     .7431352    .8631782
       2003  |   .9373354   .0344611    27.20   0.000     .8695265    1.005144
       2004  |   1.047853   .0231763    45.21   0.000     1.002249    1.093457
       2005  |   .8527299   .0242906    35.11   0.000     .8049333    .9005264
       2006  |   .7626248   .0283133    26.94   0.000     .7069129    .8183367
       2007  |   .7068108   .0276509    25.56   0.000     .6524022    .7612195
       2008  |   .7059038   .0244028    28.93   0.000     .6578866     .753921
       2009  |    1.01799   .0259491    39.23   0.000       .96693     1.06905
       2010  |   1.495341   .0863085    17.33   0.000     1.325513     1.66517
       2011  |   1.927945   .0324072    59.49   0.000     1.864178    1.991713
       2012  |   1.932359   .0332002    58.20   0.000     1.867031    1.997687
       2013  |   1.708801   .0374983    45.57   0.000     1.635016    1.782587
       2014  |   1.353103   .0313363    43.18   0.000     1.291442    1.414763
       2015  |   .8101213   .0373537    21.69   0.000     .7366206     .883622
             |
       _cons |   9.500867   .0146102   650.29   0.000     9.472118    9.529615
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (309 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |      8,060    10.22605    1.585605   4.955827   17.37611

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |      8,190    .0069345    .0223755  -.1086787   .0958731
9675
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.0000k0 not found)
file /tmp/St18055.0000k0 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.0000k1 not found)
file /tmp/St18055.0000k1 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.0000k2 not found)
file /tmp/St18055.0000k2 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.0000k3 not found)
file /tmp/St18055.0000k3 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(25 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =      7,650
                                                F(  25,    305)   =     827.91
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9797
                                                Adj R-squared     =     0.9788
                                                Root MSE          =     0.2299

                                (Std. Err. adjusted for 306 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -7.689787   1.242556    -6.19   0.000    -10.13485    -5.24472
             |
        year |
       1992  |   .1803483   .0308651     5.84   0.000     .1196127    .2410838
       1993  |    .698327   .0127141    54.93   0.000     .6733086    .7233455
       1994  |   .6889224   .0254744    27.04   0.000     .6387945    .7390503
       1995  |   .4090424    .037314    10.96   0.000      .335617    .4824678
       1996  |   .3439666   .0357515     9.62   0.000     .2736158    .4143174
       1997  |   .3649496   .0298801    12.21   0.000     .3061524    .4237469
       1998  |   .3294164   .0347934     9.47   0.000     .2609508    .3978819
       1999  |   .3065486   .0329969     9.29   0.000     .2416183     .371479
       2000  |    .310846   .0296525    10.48   0.000     .2524966    .3691954
       2001  |   .3306763   .0249355    13.26   0.000     .2816089    .3797437
       2002  |   .8045583   .0309692    25.98   0.000     .7436179    .8654987
       2003  |   .9387922   .0348528    26.94   0.000     .8702098    1.007375
       2004  |   1.050154   .0233611    44.95   0.000     1.004185    1.096123
       2005  |   .8555422   .0245122    34.90   0.000     .8073078    .9037766
       2006  |   .7655227   .0286228    26.75   0.000     .7091997    .8218458
       2007  |   .7095114   .0279641    25.37   0.000     .6544845    .7645383
       2008  |   .7084665   .0246347    28.76   0.000      .659991    .7569421
       2009  |   1.020264   .0261693    38.99   0.000     .9687687    1.071759
       2010  |   1.497087   .0875794    17.09   0.000     1.324751    1.669424
       2011  |   1.930372   .0327216    58.99   0.000     1.865983    1.994761
       2012  |   1.933956   .0335534    57.64   0.000      1.86793    1.999981
       2013  |   1.711229   .0379044    45.15   0.000     1.636642    1.785816
       2014  |   1.354873   .0316011    42.87   0.000     1.292689    1.417057
       2015  |   .8122762   .0377194    21.53   0.000     .7380529    .8864994
             |
       _cons |   9.507334   .0147023   646.66   0.000     9.478404    9.536265
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (306 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |      7,982    10.23396    1.589198   4.955827     17.379

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |      8,112    .0069591    .0223677  -.1086787   .0958731
9680
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.0000k5 not found)
file /tmp/St18055.0000k5 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.0000k6 not found)
file /tmp/St18055.0000k6 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.0000k7 not found)
file /tmp/St18055.0000k7 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.0000k8 not found)
file /tmp/St18055.0000k8 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(25 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =      7,600
                                                F(  25,    303)   =     825.83
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9798
                                                Adj R-squared     =     0.9789
                                                Root MSE          =     0.2302

                                (Std. Err. adjusted for 304 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -7.736543   1.258099    -6.15   0.000    -10.21226   -5.260826
             |
        year |
       1992  |   .1783475   .0311961     5.72   0.000     .1169589     .239736
       1993  |   .6968655   .0126868    54.93   0.000     .6719002    .7218308
       1994  |   .6885162    .025745    26.74   0.000     .6378546    .7391779
       1995  |   .4093504   .0377545    10.84   0.000     .3350562    .4836445
       1996  |   .3444774    .036188     9.52   0.000     .2732657    .4156891
       1997  |   .3653257    .030226    12.09   0.000     .3058463    .4248052
       1998  |   .3300412   .0351838     9.38   0.000     .2608055    .3992768
       1999  |    .307354   .0333715     9.21   0.000     .2416847    .3730232
       2000  |   .3119235    .029992    10.40   0.000     .2529045    .3709425
       2001  |   .3312568   .0251674    13.16   0.000     .2817318    .3807818
       2002  |   .8048785   .0312021    25.80   0.000     .7434783    .8662787
       2003  |   .9377763   .0352347    26.62   0.000     .8684407    1.007112
       2004  |   1.049661    .023581    44.51   0.000     1.003258    1.096064
       2005  |   .8560059   .0246598    34.71   0.000     .8074797    .9045322
       2006  |   .7666601   .0288114    26.61   0.000     .7099643    .8233559
       2007  |   .7102092    .028145    25.23   0.000     .6548248    .7655936
       2008  |    .707434   .0247472    28.59   0.000      .658736    .7561321
       2009  |   1.017549   .0263081    38.68   0.000     .9657794    1.069319
       2010  |   1.491957   .0886651    16.83   0.000      1.31748    1.666435
       2011  |   1.927807   .0329736    58.47   0.000     1.862921    1.992694
       2012  |   1.933265   .0337156    57.34   0.000     1.866919    1.999611
       2013  |   1.711367    .038157    44.85   0.000     1.636281    1.786454
       2014  |   1.355133   .0318094    42.60   0.000     1.292538    1.417729
       2015  |   .8137693   .0380071    21.41   0.000     .7389781    .8885605
             |
       _cons |   9.508287   .0147672   643.88   0.000     9.479228    9.537346
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (304 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |      7,930    10.23439    1.593114   4.955827   17.38755

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |      8,060    .0069598    .0223638  -.1086787   .0958731
9685
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.0000ka not found)
file /tmp/St18055.0000ka saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.0000kb not found)
file /tmp/St18055.0000kb saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.0000kc not found)
file /tmp/St18055.0000kc saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.0000kd not found)
file /tmp/St18055.0000kd saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(25 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =      7,450
                                                F(  25,    297)   =     798.61
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9798
                                                Adj R-squared     =     0.9789
                                                Root MSE          =     0.2302

                                (Std. Err. adjusted for 298 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -7.846856   1.297056    -6.05   0.000    -10.39944   -5.294271
             |
        year |
       1992  |   .1767926   .0320329     5.52   0.000     .1137524    .2398329
       1993  |   .6978313   .0128418    54.34   0.000     .6725589    .7231038
       1994  |   .6905697   .0265349    26.02   0.000     .6383494      .74279
       1995  |   .4141617   .0389029    10.65   0.000     .3376013    .4907221
       1996  |   .3488761   .0372687     9.36   0.000      .275532    .4222203
       1997  |   .3678704   .0311266    11.82   0.000     .3066138    .4291271
       1998  |   .3328719   .0362281     9.19   0.000     .2615757    .4041682
       1999  |   .3101407   .0343488     9.03   0.000     .2425429    .3777386
       2000  |   .3116593   .0308713    10.10   0.000     .2509051    .3724135
       2001  |   .3315072   .0258406    12.83   0.000     .2806534     .382361
       2002  |    .807502   .0319491    25.27   0.000     .7446268    .8703772
       2003  |   .9348101   .0359575    26.00   0.000     .8640464    1.005574
       2004  |   1.046605   .0238673    43.85   0.000     .9996349    1.093576
       2005  |   .8534796   .0251004    34.00   0.000     .8040824    .9028769
       2006  |    .766432   .0293857    26.08   0.000     .7086015    .8242624
       2007  |   .7099922   .0287046    24.73   0.000      .653502    .7664823
       2008  |   .7071654    .025157    28.11   0.000     .6576569    .7566739
       2009  |   1.015845   .0267995    37.91   0.000     .9631044    1.068586
       2010  |   1.483976   .0911789    16.28   0.000     1.304537    1.663414
       2011  |   1.925284   .0336056    57.29   0.000     1.859149     1.99142
       2012  |   1.934538   .0343071    56.39   0.000     1.867023    2.002054
       2013  |    1.71301   .0389421    43.99   0.000     1.636373    1.789647
       2014  |   1.356461   .0324243    41.83   0.000      1.29265    1.420271
       2015  |   .8146262   .0387955    21.00   0.000     .7382774    .8909751
             |
       _cons |   9.522015   .0149456   637.11   0.000     9.492602    9.551428
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (298 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |      7,774    10.24741    1.593385   4.955827    17.4006

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |      7,904     .006995    .0223345  -.1086787   .0958731
9690
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.0000kf not found)
file /tmp/St18055.0000kf saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.0000kg not found)
file /tmp/St18055.0000kg saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.0000kh not found)
file /tmp/St18055.0000kh saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.0000ki not found)
file /tmp/St18055.0000ki saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(25 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =      7,400
                                                F(  25,    295)   =     820.79
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9800
                                                Adj R-squared     =     0.9791
                                                Root MSE          =     0.2294

                                (Std. Err. adjusted for 296 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -7.644338    1.28007    -5.97   0.000    -10.16357   -5.125111
             |
        year |
       1992  |   .1817936   .0315368     5.76   0.000     .1197279    .2438593
       1993  |   .6975596   .0129031    54.06   0.000     .6721658    .7229534
       1994  |   .6859872    .026291    26.09   0.000     .6342455    .7377289
       1995  |   .4068689   .0383713    10.60   0.000     .3313528     .482385
       1996  |   .3424873   .0368622     9.29   0.000      .269941    .4150336
       1997  |   .3621558   .0307816    11.77   0.000     .3015763    .4227352
       1998  |    .326629    .035834     9.12   0.000     .2561063    .3971518
       1999  |   .3041548   .0339822     8.95   0.000     .2372765    .3710331
       2000  |   .3060585   .0305448    10.02   0.000     .2459452    .3661719
       2001  |   .3272187   .0256268    12.77   0.000     .2767842    .3776531
       2002  |   .8041905   .0317901    25.30   0.000     .7416264    .8667547
       2003  |   .9411546   .0355136    26.50   0.000     .8712626    1.011047
       2004  |   1.050639   .0236354    44.45   0.000     1.004124    1.097155
       2005  |   .8530397   .0251538    33.91   0.000      .803536    .9025434
       2006  |   .7648512   .0293801    26.03   0.000     .7070301    .8226722
       2007  |   .7089783   .0287226    24.68   0.000     .6524511    .7655056
       2008  |   .7074424   .0252153    28.06   0.000     .6578178     .757067
       2009  |   1.019756   .0264976    38.48   0.000     .9676079    1.071905
       2010  |    1.50144   .0894142    16.79   0.000     1.325469     1.67741
       2011  |   1.931448   .0330509    58.44   0.000     1.866403    1.996494
       2012  |   1.933175   .0343439    56.29   0.000     1.865585    2.000765
       2013  |   1.710698   .0389043    43.97   0.000     1.634133    1.787263
       2014  |   1.355875   .0324621    41.77   0.000     1.291989    1.419762
       2015  |   .8132898   .0387603    20.98   0.000     .7370081    .8895715
             |
       _cons |   9.520197   .0149761   635.69   0.000     9.490724    9.549671
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (296 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |      7,722    10.24627    1.596399   4.955827    17.4117

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |      7,852    .0069995    .0223302  -.1086787   .0958731
9695
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.0000kk not found)
file /tmp/St18055.0000kk saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.0000kl not found)
file /tmp/St18055.0000kl saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.0000km not found)
file /tmp/St18055.0000km saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.0000kn not found)
file /tmp/St18055.0000kn saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(25 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =      7,350
                                                F(  25,    293)   =     856.17
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9800
                                                Adj R-squared     =     0.9791
                                                Root MSE          =     0.2295

                                (Std. Err. adjusted for 294 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -7.625404   1.287663    -5.92   0.000    -10.15964   -5.091163
             |
        year |
       1992  |   .1819513   .0317005     5.74   0.000     .1195618    .2443408
       1993  |   .6972461   .0128733    54.16   0.000     .6719103    .7225819
       1994  |   .6850627   .0264099    25.94   0.000     .6330855    .7370398
       1995  |   .4057661   .0385749    10.52   0.000      .329847    .4816852
       1996  |   .3412643   .0370637     9.21   0.000     .2683195    .4142091
       1997  |   .3610233   .0309484    11.67   0.000     .3001141    .4219326
       1998  |   .3253179   .0360386     9.03   0.000     .2543905    .3962453
       1999  |   .3033751   .0341851     8.87   0.000     .2360955    .3706546
       2000  |    .305479   .0307123     9.95   0.000     .2450343    .3659237
       2001  |   .3270353   .0257521    12.70   0.000     .2763527     .377718
       2002  |   .8030991   .0319403    25.14   0.000     .7402376    .8659606
       2003  |   .9398124   .0357776    26.27   0.000     .8693987    1.010226
       2004  |   1.049309   .0237876    44.11   0.000     1.002493    1.096125
       2005  |   .8517802   .0252613    33.72   0.000     .8020636    .9014968
       2006  |   .7639553   .0295205    25.88   0.000     .7058561    .8220545
       2007  |   .7080531   .0288567    24.54   0.000     .6512605    .7648457
       2008  |   .7065105   .0253388    27.88   0.000     .6566413    .7563797
       2009  |   1.019367   .0267017    38.18   0.000     .9668159    1.071919
       2010  |   1.500467   .0900083    16.67   0.000     1.323322    1.677611
       2011  |   1.929064   .0331639    58.17   0.000     1.863794    1.994334
       2012  |    1.93048     .03443    56.07   0.000     1.862719    1.998242
       2013  |    1.70825   .0390435    43.75   0.000     1.631409    1.785092
       2014  |   1.353163    .032539    41.59   0.000     1.289123    1.417203
       2015  |   .8105286   .0388915    20.84   0.000     .7339865    .8870706
             |
       _cons |   9.519598   .0150376   633.05   0.000     9.490003    9.549194
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (294 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |      7,670    10.24481    1.598157   4.955827   17.42444

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |      7,800    .0069864     .022332  -.1086787   .0958731
9700
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St18055.0000kp not found)
file /tmp/St18055.0000kp saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St18055.0000kq not found)
file /tmp/St18055.0000kq saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St18055.0000kr not found)
file /tmp/St18055.0000kr saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St18055.0000ks not found)
file /tmp/St18055.0000ks saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(25 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =      7,225
                                                F(  25,    288)   =     853.00
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9805
                                                Adj R-squared     =     0.9796
                                                Root MSE          =     0.2285

                                (Std. Err. adjusted for 289 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |   -7.39924   1.285485    -5.76   0.000    -9.929377   -4.869104
             |
        year |
       1992  |   .1867772   .0316938     5.89   0.000     .1243965     .249158
       1993  |   .6992138   .0130218    53.70   0.000      .673584    .7248437
       1994  |    .683413    .026562    25.73   0.000     .6311327    .7356934
       1995  |   .4010085    .038707    10.36   0.000     .3248239     .477193
       1996  |    .336448   .0371866     9.05   0.000     .2632561    .4096399
       1997  |   .3570375   .0311256    11.47   0.000      .295775       .4183
       1998  |   .3200557   .0361823     8.85   0.000     .2488405     .391271
       1999  |   .2984298   .0343428     8.69   0.000      .230835    .3660245
       2000  |   .3012181   .0308639     9.76   0.000     .2404706    .3619656
       2001  |   .3241978   .0258475    12.54   0.000     .2733239    .3750717
       2002  |   .7994475   .0321092    24.90   0.000     .7362491     .862646
       2003  |   .9459511   .0358446    26.39   0.000     .8754005    1.016502
       2004  |   1.052591   .0239053    44.03   0.000      1.00554    1.099643
       2005  |   .8499147   .0252734    33.63   0.000     .8001708    .8996587
       2006  |   .7611272   .0295487    25.76   0.000     .7029684    .8192861
       2007  |   .7048203   .0288493    24.43   0.000      .648038    .7616025
       2008  |    .704528   .0253893    27.75   0.000      .654556       .7545
       2009  |   1.021913   .0268877    38.01   0.000     .9689913    1.074834
       2010  |    1.51844   .0899194    16.89   0.000     1.341457    1.695423
       2011  |   1.936329   .0332825    58.18   0.000     1.870821    2.001836
       2012  |   1.929931   .0344398    56.04   0.000     1.862145    1.997716
       2013  |   1.707652   .0390877    43.69   0.000     1.630718    1.784586
       2014  |   1.355734   .0327076    41.45   0.000     1.291357     1.42011
       2015  |   .8126886   .0392492    20.71   0.000     .7354369    .8899403
             |
       _cons |   9.514955   .0151716   627.16   0.000     9.485093    9.544816
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (289 categories)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
log_uirece~t |      7,540    10.24144    1.608947   4.955827   17.44291

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   bartik_it |
         L1. |      7,670    .0070441    .0223182  -.1086787   .0958731

.                         postclose `czoneresults' ;

. use `bartik_regs', clear ;

. sum beta se cutoff ;

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
        beta |        141   -7.685137    .7270818  -8.894306  -6.358626
          se |        141    .7259729    .2481048   .4266007   1.297056
      cutoff |        141        .935    .0204236         .9        .97

. save "$interwrk/bartik_results_cutoff.dta", replace;
file /ssgprojects/project0002/MobZ.new/data/interwrk/bartik_results_cutoff.dta 
> saved

.  list in 1/80 ;

     +----------------------------------------------------------------+
  1. | cutoff |      beta |       se |  mean_ui |    sd_ui | mean_b~k |
     |     .9 | -6.358626 | .4266007 | 8.640903 | 1.817996 | .0057744 |
     |----------------------------------------------------------------|
     |                            sd_bar~k                            |
     |                            .0233011                            |
     +----------------------------------------------------------------+

     +----------------------------------------------------------------+
  2. | cutoff |      beta |       se |  mean_ui |    sd_ui | mean_b~k |
     |  .9005 | -6.404352 |  .437469 | 8.652437 | 1.813132 | .0057526 |
     |----------------------------------------------------------------|
     |                            sd_bar~k                            |
     |                            .0232561                            |
     +----------------------------------------------------------------+

     +----------------------------------------------------------------+
  3. | cutoff |      beta |       se |  mean_ui |    sd_ui | mean_b~k |
     |   .901 | -6.391365 | .4382009 | 8.660755 | 1.806748 | .0057497 |
     |----------------------------------------------------------------|
     |                            sd_bar~k                            |
     |                            .0232629                            |
     +----------------------------------------------------------------+

     +----------------------------------------------------------------+
  4. | cutoff |      beta |       se |  mean_ui |    sd_ui | mean_b~k |
     |  .9015 | -6.384237 |  .438811 | 8.665372 | 1.808137 | .0057674 |
     |----------------------------------------------------------------|
     |                            sd_bar~k                            |
     |                             .023261                            |
     +----------------------------------------------------------------+

     +----------------------------------------------------------------+
  5. | cutoff |      beta |       se |  mean_ui |    sd_ui | mean_b~k |
     |   .902 | -6.404408 | .4402559 | 8.672327 | 1.807526 | .0057771 |
     |----------------------------------------------------------------|
     |                            sd_bar~k                            |
     |                            .0232581                            |
     +----------------------------------------------------------------+

     +----------------------------------------------------------------+
  6. | cutoff |      beta |       se |  mean_ui |    sd_ui | mean_b~k |
     |  .9025 | -6.387256 |  .437227 | 8.685719 | 1.799466 | .0057752 |
     |----------------------------------------------------------------|
     |                            sd_bar~k                            |
     |                            .0232679                            |
     +----------------------------------------------------------------+

     +----------------------------------------------------------------+
  7. | cutoff |      beta |       se |  mean_ui |    sd_ui | mean_b~k |
     |   .903 | -6.418294 | .4428864 | 8.690524 | 1.803305 | .0057758 |
     |----------------------------------------------------------------|
     |                            sd_bar~k                            |
     |                            .0232646                            |
     +----------------------------------------------------------------+

     +----------------------------------------------------------------+
  8. | cutoff |      beta |       se |  mean_ui |    sd_ui | mean_b~k |
     |  .9035 | -6.398562 | .4423506 | 8.702253 | 1.799994 | .0057822 |
     |----------------------------------------------------------------|
     |                            sd_bar~k                            |
     |                            .0232664                            |
     +----------------------------------------------------------------+

     +----------------------------------------------------------------+
  9. | cutoff |      beta |       se |  mean_ui |    sd_ui | mean_b~k |
     |   .904 | -6.393801 | .4452855 |  8.71317 | 1.798541 | .0057926 |
     |----------------------------------------------------------------|
     |                            sd_bar~k                            |
     |                            .0232612                            |
     +----------------------------------------------------------------+

     +----------------------------------------------------------------+
 10. | cutoff |      beta |       se |  mean_ui |    sd_ui | mean_b~k |
     |  .9045 | -6.409855 | .4481663 | 8.720099 | 1.798054 | .0057964 |
     |----------------------------------------------------------------|
     |                            sd_bar~k                            |
     |                            .0232575                            |
     +----------------------------------------------------------------+

     +----------------------------------------------------------------+
 11. | cutoff |      beta |       se |  mean_ui |    sd_ui | mean_b~k |
     |   .905 |  -6.41362 | .4501955 | 8.735906 | 1.787883 | .0057895 |
     |----------------------------------------------------------------|
     |                            sd_bar~k                            |
     |                              .02326                            |
     +----------------------------------------------------------------+

     +----------------------------------------------------------------+
 12. | cutoff |      beta |       se |  mean_ui |    sd_ui | mean_b~k |
     |  .9055 | -6.443289 | .4524379 | 8.746671 |  1.78343 | .0057803 |
     |----------------------------------------------------------------|
     |                            sd_bar~k                            |
     |                            .0232596                            |
     +----------------------------------------------------------------+

     +----------------------------------------------------------------+
 13. | cutoff |      beta |       se |  mean_ui |    sd_ui | mean_b~k |
     |   .906 | -6.451138 | .4547854 | 8.752984 | 1.784051 |   .00578 |
     |----------------------------------------------------------------|
     |                            sd_bar~k                            |
     |                            .0232682                            |
     +----------------------------------------------------------------+

     +----------------------------------------------------------------+
 14. | cutoff |      beta |       se |  mean_ui |    sd_ui | mean_b~k |
     |  .9065 | -6.570862 | .4568495 | 8.760822 | 1.780423 | .0057851 |
     |----------------------------------------------------------------|
     |                            sd_bar~k                            |
     |                            .0232404                            |
     +----------------------------------------------------------------+

     +----------------------------------------------------------------+
 15. | cutoff |      beta |       se |  mean_ui |    sd_ui | mean_b~k |
     |   .907 | -6.584441 |  .462496 | 8.774258 | 1.771669 | .0057691 |
     |----------------------------------------------------------------|
     |                            sd_bar~k                            |
     |                            .0232481                            |
     +----------------------------------------------------------------+

     +----------------------------------------------------------------+
 16. | cutoff |      beta |       se |  mean_ui |    sd_ui | mean_b~k |
     |  .9075 | -6.576558 | .4640051 | 8.777406 |  1.77328 | .0057765 |
     |----------------------------------------------------------------|
     |                            sd_bar~k                            |
     |                            .0232518                            |
     +----------------------------------------------------------------+

     +----------------------------------------------------------------+
 17. | cutoff |      beta |       se |  mean_ui |    sd_ui | mean_b~k |
     |   .908 | -6.607662 | .4690786 | 8.788735 | 1.773916 | .0057972 |
     |----------------------------------------------------------------|
     |                            sd_bar~k                            |
     |                            .0232397                            |
     +----------------------------------------------------------------+

     +----------------------------------------------------------------+
 18. | cutoff |      beta |       se |  mean_ui |    sd_ui | mean_b~k |
     |  .9085 | -6.635781 | .4722979 | 8.792377 | 1.775448 | .0057991 |
     |----------------------------------------------------------------|
     |                            sd_bar~k                            |
     |                            .0232362                            |
     +----------------------------------------------------------------+

     +----------------------------------------------------------------+
 19. | cutoff |      beta |       se |  mean_ui |    sd_ui | mean_b~k |
     |   .909 | -6.608378 | .4718197 | 8.802086 | 1.773227 | .0058048 |
     |----------------------------------------------------------------|
     |                            sd_bar~k                            |
     |                            .0232395                            |
     +----------------------------------------------------------------+

     +----------------------------------------------------------------+
 20. | cutoff |      beta |       se |  mean_ui |    sd_ui | mean_b~k |
     |  .9095 | -6.618832 | .4729571 | 8.805298 |  1.77225 | .0058118 |
     |----------------------------------------------------------------|
     |                            sd_bar~k                            |
     |                            .0232388                            |
     +----------------------------------------------------------------+

     +----------------------------------------------------------------+
 21. | cutoff |      beta |       se |  mean_ui |    sd_ui | mean_b~k |
     |    .91 | -6.622815 | .4745713 | 8.808036 |  1.77409 | .0058338 |
     |----------------------------------------------------------------|
     |                            sd_bar~k                            |
     |                            .0232302                            |
     +----------------------------------------------------------------+

     +----------------------------------------------------------------+
 22. | cutoff |      beta |       se |  mean_ui |    sd_ui | mean_b~k |
     |  .9105 | -6.622733 | .4783358 | 8.817583 | 1.772462 | .0058428 |
     |----------------------------------------------------------------|
     |                            sd_bar~k                            |
     |                            .0232206                            |
     +----------------------------------------------------------------+

     +----------------------------------------------------------------+
 23. | cutoff |      beta |       se |  mean_ui |    sd_ui | mean_b~k |
     |   .911 | -6.635291 | .4798368 | 8.818383 | 1.774221 | .0058493 |
     |----------------------------------------------------------------|
     |                            sd_bar~k                            |
     |                            .0232206                            |
     +----------------------------------------------------------------+

     +----------------------------------------------------------------+
 24. | cutoff |      beta |       se |  mean_ui |    sd_ui | mean_b~k |
     |  .9115 | -6.676503 | .4833551 | 8.827629 |  1.77376 | .0058403 |
     |----------------------------------------------------------------|
     |                            sd_bar~k                            |
     |                            .0232223                            |
     +----------------------------------------------------------------+

     +----------------------------------------------------------------+
 25. | cutoff |      beta |       se |  mean_ui |    sd_ui | mean_b~k |
     |   .912 | -6.660237 | .4836642 | 8.831535 | 1.771848 |  .005849 |
     |----------------------------------------------------------------|
     |                            sd_bar~k                            |
     |                            .0232246                            |
     +----------------------------------------------------------------+

     +----------------------------------------------------------------+
 26. | cutoff |      beta |       se |  mean_ui |    sd_ui | mean_b~k |
     |  .9125 | -6.679371 | .4857831 | 8.840263 |  1.77504 | .0058721 |
     |----------------------------------------------------------------|
     |                            sd_bar~k                            |
     |                            .0232193                            |
     +----------------------------------------------------------------+

     +----------------------------------------------------------------+
 27. | cutoff |      beta |       se |  mean_ui |    sd_ui | mean_b~k |
     |   .913 | -6.676938 | .4867549 | 8.845111 | 1.774602 | .0058863 |
     |----------------------------------------------------------------|
     |                            sd_bar~k                            |
     |                            .0232158                            |
     +----------------------------------------------------------------+

     +----------------------------------------------------------------+
 28. | cutoff |      beta |       se |  mean_ui |    sd_ui | mean_b~k |
     |  .9135 | -6.671246 | .4869883 | 8.852711 | 1.775916 | .0058983 |
     |----------------------------------------------------------------|
     |                            sd_bar~k                            |
     |                            .0232072                            |
     +----------------------------------------------------------------+

     +----------------------------------------------------------------+
 29. | cutoff |      beta |       se |  mean_ui |    sd_ui | mean_b~k |
     |   .914 | -6.882923 | .4626797 | 8.865817 | 1.773045 | .0058811 |
     |----------------------------------------------------------------|
     |                            sd_bar~k                            |
     |                            .0231519                            |
     +----------------------------------------------------------------+

     +----------------------------------------------------------------+
 30. | cutoff |      beta |       se |  mean_ui |    sd_ui | mean_b~k |
     |  .9145 | -6.877774 | .4677093 |  8.87689 |  1.77126 |   .00589 |
     |----------------------------------------------------------------|
     |                            sd_bar~k                            |
     |                            .0231301                            |
     +----------------------------------------------------------------+

     +----------------------------------------------------------------+
 31. | cutoff |      beta |       se |  mean_ui |    sd_ui | mean_b~k |
     |   .915 | -6.908034 | .4706203 | 8.884247 | 1.775091 | .0059038 |
     |----------------------------------------------------------------|
     |                            sd_bar~k                            |
     |                            .0231223                            |
     +----------------------------------------------------------------+

     +----------------------------------------------------------------+
 32. | cutoff |      beta |       se |  mean_ui |    sd_ui | mean_b~k |
     |  .9155 | -6.950586 | .4742568 | 8.892833 | 1.768664 | .0058957 |
     |----------------------------------------------------------------|
     |                            sd_bar~k                            |
     |                            .0231106                            |
     +----------------------------------------------------------------+

     +----------------------------------------------------------------+
 33. | cutoff |      beta |       se |  mean_ui |    sd_ui | mean_b~k |
     |   .916 | -6.945092 | .4750678 | 8.902368 | 1.764303 | .0058877 |
     |----------------------------------------------------------------|
     |                            sd_bar~k                            |
     |                             .023117                            |
     +----------------------------------------------------------------+

     +----------------------------------------------------------------+
 34. | cutoff |      beta |       se |  mean_ui |    sd_ui | mean_b~k |
     |  .9165 | -6.958388 | .4757628 | 8.910675 | 1.761343 | .0058853 |
     |----------------------------------------------------------------|
     |                            sd_bar~k                            |
     |                             .023125                            |
     +----------------------------------------------------------------+

     +----------------------------------------------------------------+
 35. | cutoff |      beta |       se |  mean_ui |    sd_ui | mean_b~k |
     |   .917 | -7.086085 | .4686205 | 8.917826 | 1.756261 | .0059022 |
     |----------------------------------------------------------------|
     |                            sd_bar~k                            |
     |                            .0231066                            |
     +----------------------------------------------------------------+

     +----------------------------------------------------------------+
 36. | cutoff |      beta |       se |  mean_ui |    sd_ui | mean_b~k |
     |  .9175 | -7.072681 | .4696434 | 8.926101 | 1.758003 | .0059142 |
     |----------------------------------------------------------------|
     |                            sd_bar~k                            |
     |                            .0231032                            |
     +----------------------------------------------------------------+

     +----------------------------------------------------------------+
 37. | cutoff |      beta |       se |  mean_ui |    sd_ui | mean_b~k |
     |   .918 | -7.117304 |  .483568 | 8.932987 | 1.762067 | .0059226 |
     |----------------------------------------------------------------|
     |                            sd_bar~k                            |
     |                            .0230789                            |
     +----------------------------------------------------------------+

     +----------------------------------------------------------------+
 38. | cutoff |      beta |       se |  mean_ui |    sd_ui | mean_b~k |
     |  .9185 | -7.134062 | .4891604 | 8.943442 | 1.761936 | .0059589 |
     |----------------------------------------------------------------|
     |                            sd_bar~k                            |
     |                             .023075                            |
     +----------------------------------------------------------------+

     +----------------------------------------------------------------+
 39. | cutoff |      beta |       se |  mean_ui |    sd_ui | mean_b~k |
     |   .919 | -7.214175 | .4903476 |  8.95676 |  1.75974 | .0059845 |
     |----------------------------------------------------------------|
     |                            sd_bar~k                            |
     |                            .0230542                            |
     +----------------------------------------------------------------+

     +----------------------------------------------------------------+
 40. | cutoff |      beta |       se |  mean_ui |    sd_ui | mean_b~k |
     |  .9195 | -7.254061 | .4950168 | 8.965082 | 1.763445 | .0060076 |
     |----------------------------------------------------------------|
     |                            sd_bar~k                            |
     |                            .0230391                            |
     +----------------------------------------------------------------+

     +----------------------------------------------------------------+
 41. | cutoff |      beta |       se |  mean_ui |    sd_ui | mean_b~k |
     |    .92 | -7.225204 | .4951567 | 8.990796 |   1.7523 | .0060163 |
     |----------------------------------------------------------------|
     |                            sd_bar~k                            |
     |                            .0230315                            |
     +----------------------------------------------------------------+

     +----------------------------------------------------------------+
 42. | cutoff |      beta |       se |  mean_ui |    sd_ui | mean_b~k |
     |  .9205 |  -7.26431 | .4984023 | 9.001971 | 1.746957 | .0060498 |
     |----------------------------------------------------------------|
     |                            sd_bar~k                            |
     |                            .0230139                            |
     +----------------------------------------------------------------+

     +----------------------------------------------------------------+
 43. | cutoff |      beta |       se |  mean_ui |    sd_ui | mean_b~k |
     |   .921 | -7.410247 | .5056114 | 9.016203 | 1.740032 | .0060528 |
     |----------------------------------------------------------------|
     |                            sd_bar~k                            |
     |                             .022985                            |
     +----------------------------------------------------------------+

     +----------------------------------------------------------------+
 44. | cutoff |      beta |       se |  mean_ui |    sd_ui | mean_b~k |
     |  .9215 | -7.457421 | .5096368 | 9.036625 | 1.732794 | .0060514 |
     |----------------------------------------------------------------|
     |                            sd_bar~k                            |
     |                            .0229891                            |
     +----------------------------------------------------------------+

     +----------------------------------------------------------------+
 45. | cutoff |      beta |       se |  mean_ui |    sd_ui | mean_b~k |
     |   .922 | -7.459855 | .5108012 | 9.039937 | 1.741533 | .0060731 |
     |----------------------------------------------------------------|
     |                            sd_bar~k                            |
     |                             .022977                            |
     +----------------------------------------------------------------+

     +----------------------------------------------------------------+
 46. | cutoff |      beta |       se |  mean_ui |    sd_ui | mean_b~k |
     |  .9225 | -7.571652 | .5182293 | 9.050946 |  1.74418 | .0060849 |
     |----------------------------------------------------------------|
     |                            sd_bar~k                            |
     |                            .0229516                            |
     +----------------------------------------------------------------+

     +----------------------------------------------------------------+
 47. | cutoff |      beta |       se |  mean_ui |    sd_ui | mean_b~k |
     |   .923 | -7.630941 | .5241231 | 9.061944 | 1.744304 | .0060948 |
     |----------------------------------------------------------------|
     |                            sd_bar~k                            |
     |                             .022955                            |
     +----------------------------------------------------------------+

     +----------------------------------------------------------------+
 48. | cutoff |      beta |       se |  mean_ui |    sd_ui | mean_b~k |
     |  .9235 |  -7.63282 |  .528872 | 9.086353 | 1.728846 | .0060901 |
     |----------------------------------------------------------------|
     |                            sd_bar~k                            |
     |                            .0229628                            |
     +----------------------------------------------------------------+

     +----------------------------------------------------------------+
 49. | cutoff |      beta |       se |  mean_ui |    sd_ui | mean_b~k |
     |   .924 | -7.667848 | .5362046 | 9.106295 | 1.721893 | .0060855 |
     |----------------------------------------------------------------|
     |                            sd_bar~k                            |
     |                            .0229573                            |
     +----------------------------------------------------------------+

     +----------------------------------------------------------------+
 50. | cutoff |      beta |       se |  mean_ui |    sd_ui | mean_b~k |
     |  .9245 | -7.643072 | .5445808 | 9.119493 | 1.709546 | .0060812 |
     |----------------------------------------------------------------|
     |                            sd_bar~k                            |
     |                            .0229526                            |
     +----------------------------------------------------------------+

     +----------------------------------------------------------------+
 51. | cutoff |      beta |       se |  mean_ui |    sd_ui | mean_b~k |
     |   .925 | -7.602393 |  .544682 | 9.128706 | 1.705674 | .0060891 |
     |----------------------------------------------------------------|
     |                            sd_bar~k                            |
     |                            .0229487                            |
     +----------------------------------------------------------------+

     +----------------------------------------------------------------+
 52. | cutoff |      beta |       se |  mean_ui |    sd_ui | mean_b~k |
     |  .9255 | -7.610593 | .5489403 |   9.1366 | 1.707595 | .0061119 |
     |----------------------------------------------------------------|
     |                            sd_bar~k                            |
     |                            .0229343                            |
     +----------------------------------------------------------------+

     +----------------------------------------------------------------+
 53. | cutoff |      beta |       se |  mean_ui |    sd_ui | mean_b~k |
     |   .926 | -7.686969 | .5533256 | 9.159075 | 1.700901 | .0061199 |
     |----------------------------------------------------------------|
     |                            sd_bar~k                            |
     |                            .0229378                            |
     +----------------------------------------------------------------+

     +----------------------------------------------------------------+
 54. | cutoff |      beta |       se |  mean_ui |    sd_ui | mean_b~k |
     |  .9265 | -7.768691 | .5642263 | 9.178065 | 1.693144 | .0060989 |
     |----------------------------------------------------------------|
     |                            sd_bar~k                            |
     |                            .0229464                            |
     +----------------------------------------------------------------+

     +----------------------------------------------------------------+
 55. | cutoff |      beta |       se |  mean_ui |    sd_ui | mean_b~k |
     |   .927 | -7.762842 | .5662463 | 9.187132 | 1.690122 | .0060981 |
     |----------------------------------------------------------------|
     |                            sd_bar~k                            |
     |                            .0229482                            |
     +----------------------------------------------------------------+

     +----------------------------------------------------------------+
 56. | cutoff |      beta |       se |  mean_ui |    sd_ui | mean_b~k |
     |  .9275 | -7.791352 | .5860531 | 9.201159 | 1.681699 | .0060728 |
     |----------------------------------------------------------------|
     |                            sd_bar~k                            |
     |                            .0229312                            |
     +----------------------------------------------------------------+

     +----------------------------------------------------------------+
 57. | cutoff |      beta |       se |  mean_ui |    sd_ui | mean_b~k |
     |   .928 | -7.828332 | .5933484 |   9.2136 | 1.682091 | .0060527 |
     |----------------------------------------------------------------|
     |                            sd_bar~k                            |
     |                            .0229336                            |
     +----------------------------------------------------------------+

     +----------------------------------------------------------------+
 58. | cutoff |      beta |       se |  mean_ui |    sd_ui | mean_b~k |
     |  .9285 | -7.840531 | .5974432 | 9.228649 | 1.681548 | .0060511 |
     |----------------------------------------------------------------|
     |                            sd_bar~k                            |
     |                            .0229389                            |
     +----------------------------------------------------------------+

     +----------------------------------------------------------------+
 59. | cutoff |      beta |       se |  mean_ui |    sd_ui | mean_b~k |
     |   .929 | -7.781412 |  .605179 | 9.255919 | 1.665861 | .0060448 |
     |----------------------------------------------------------------|
     |                            sd_bar~k                            |
     |                            .0229271                            |
     +----------------------------------------------------------------+

     +----------------------------------------------------------------+
 60. | cutoff |      beta |       se |  mean_ui |    sd_ui | mean_b~k |
     |  .9295 | -7.822535 | .6101062 | 9.275741 | 1.659041 | .0060509 |
     |----------------------------------------------------------------|
     |                            sd_bar~k                            |
     |                             .022913                            |
     +----------------------------------------------------------------+

     +----------------------------------------------------------------+
 61. | cutoff |      beta |       se |  mean_ui |    sd_ui | mean_b~k |
     |    .93 | -7.842442 | .6193651 | 9.293995 | 1.650074 | .0060926 |
     |----------------------------------------------------------------|
     |                            sd_bar~k                            |
     |                            .0228903                            |
     +----------------------------------------------------------------+

     +----------------------------------------------------------------+
 62. | cutoff |      beta |       se |  mean_ui |    sd_ui | mean_b~k |
     |  .9305 | -7.856109 | .6231961 | 9.314185 | 1.640469 | .0060935 |
     |----------------------------------------------------------------|
     |                            sd_bar~k                            |
     |                            .0229026                            |
     +----------------------------------------------------------------+

     +----------------------------------------------------------------+
 63. | cutoff |      beta |       se |  mean_ui |    sd_ui | mean_b~k |
     |   .931 | -7.867497 | .6268375 | 9.327922 | 1.641481 | .0061314 |
     |----------------------------------------------------------------|
     |                            sd_bar~k                            |
     |                             .022877                            |
     +----------------------------------------------------------------+

     +----------------------------------------------------------------+
 64. | cutoff |      beta |       se |  mean_ui |    sd_ui | mean_b~k |
     |  .9315 | -7.990541 | .6368696 | 9.343427 | 1.630833 | .0061101 |
     |----------------------------------------------------------------|
     |                            sd_bar~k                            |
     |                            .0228837                            |
     +----------------------------------------------------------------+

     +----------------------------------------------------------------+
 65. | cutoff |      beta |       se |  mean_ui |    sd_ui | mean_b~k |
     |   .932 | -7.945775 | .6386271 | 9.357332 | 1.625824 | .0060971 |
     |----------------------------------------------------------------|
     |                            sd_bar~k                            |
     |                            .0228909                            |
     +----------------------------------------------------------------+

     +----------------------------------------------------------------+
 66. | cutoff |      beta |       se |  mean_ui |    sd_ui | mean_b~k |
     |  .9325 | -8.011096 | .6625348 | 9.377283 | 1.624114 | .0060832 |
     |----------------------------------------------------------------|
     |                            sd_bar~k                            |
     |                            .0228574                            |
     +----------------------------------------------------------------+

     +----------------------------------------------------------------+
 67. | cutoff |      beta |       se |  mean_ui |    sd_ui | mean_b~k |
     |   .933 | -8.006428 | .6674582 | 9.394611 | 1.615703 | .0060909 |
     |----------------------------------------------------------------|
     |                            sd_bar~k                            |
     |                            .0228303                            |
     +----------------------------------------------------------------+

     +----------------------------------------------------------------+
 68. | cutoff |      beta |       se |  mean_ui |    sd_ui | mean_b~k |
     |  .9335 |   -8.0147 | .6749297 | 9.410873 | 1.606706 |  .006085 |
     |----------------------------------------------------------------|
     |                            sd_bar~k                            |
     |                            .0228331                            |
     +----------------------------------------------------------------+

     +----------------------------------------------------------------+
 69. | cutoff |      beta |       se |  mean_ui |    sd_ui | mean_b~k |
     |   .934 | -8.039276 | .6781533 | 9.429559 | 1.599458 | .0060713 |
     |----------------------------------------------------------------|
     |                            sd_bar~k                            |
     |                            .0228336                            |
     +----------------------------------------------------------------+

     +----------------------------------------------------------------+
 70. | cutoff |      beta |       se |  mean_ui |    sd_ui | mean_b~k |
     |  .9345 | -7.962647 | .6889243 | 9.464396 | 1.574292 | .0060494 |
     |----------------------------------------------------------------|
     |                            sd_bar~k                            |
     |                            .0228468                            |
     +----------------------------------------------------------------+

     +----------------------------------------------------------------+
 71. | cutoff |      beta |       se |  mean_ui |    sd_ui | mean_b~k |
     |   .935 | -8.046367 | .6953008 | 9.482704 | 1.572521 | .0060813 |
     |----------------------------------------------------------------|
     |                            sd_bar~k                            |
     |                            .0228404                            |
     +----------------------------------------------------------------+

     +----------------------------------------------------------------+
 72. | cutoff |      beta |       se |  mean_ui |    sd_ui | mean_b~k |
     |  .9355 | -7.975977 | .7046146 | 9.502212 | 1.566208 | .0060779 |
     |----------------------------------------------------------------|
     |                            sd_bar~k                            |
     |                            .0228272                            |
     +----------------------------------------------------------------+

     +----------------------------------------------------------------+
 73. | cutoff |      beta |       se |  mean_ui |    sd_ui | mean_b~k |
     |   .936 |  -7.98664 | .7259524 | 9.535925 | 1.559277 | .0060839 |
     |----------------------------------------------------------------|
     |                            sd_bar~k                            |
     |                            .0228115                            |
     +----------------------------------------------------------------+

     +----------------------------------------------------------------+
 74. | cutoff |      beta |       se |  mean_ui |    sd_ui | mean_b~k |
     |  .9365 | -8.005858 | .7315388 |  9.55731 | 1.552374 | .0060777 |
     |----------------------------------------------------------------|
     |                            sd_bar~k                            |
     |                            .0228248                            |
     +----------------------------------------------------------------+

     +----------------------------------------------------------------+
 75. | cutoff |      beta |       se |  mean_ui |    sd_ui | mean_b~k |
     |   .937 | -7.858184 | .7302513 | 9.567238 | 1.552429 | .0060487 |
     |----------------------------------------------------------------|
     |                            sd_bar~k                            |
     |                            .0228394                            |
     +----------------------------------------------------------------+

     +----------------------------------------------------------------+
 76. | cutoff |      beta |       se |  mean_ui |    sd_ui | mean_b~k |
     |  .9375 | -8.372398 | .7090677 | 9.590449 | 1.544025 | .0060267 |
     |----------------------------------------------------------------|
     |                            sd_bar~k                            |
     |                            .0227933                            |
     +----------------------------------------------------------------+

     +----------------------------------------------------------------+
 77. | cutoff |      beta |       se |  mean_ui |    sd_ui | mean_b~k |
     |   .938 | -8.400115 | .7235209 | 9.617042 | 1.538311 | .0060665 |
     |----------------------------------------------------------------|
     |                            sd_bar~k                            |
     |                            .0227728                            |
     +----------------------------------------------------------------+

     +----------------------------------------------------------------+
 78. | cutoff |      beta |       se |  mean_ui |    sd_ui | mean_b~k |
     |  .9385 | -8.395262 | .7419061 | 9.644908 | 1.531214 | .0060425 |
     |----------------------------------------------------------------|
     |                            sd_bar~k                            |
     |                            .0227852                            |
     +----------------------------------------------------------------+

     +----------------------------------------------------------------+
 79. | cutoff |      beta |       se |  mean_ui |    sd_ui | mean_b~k |
     |   .939 | -8.722292 | .7251782 |  9.66762 | 1.524619 | .0059985 |
     |----------------------------------------------------------------|
     |                            sd_bar~k                            |
     |                            .0227779                            |
     +----------------------------------------------------------------+

     +----------------------------------------------------------------+
 80. | cutoff |      beta |       se |  mean_ui |    sd_ui | mean_b~k |
     |  .9395 | -8.589164 | .7188371 | 9.683564 | 1.520617 | .0059832 |
     |----------------------------------------------------------------|
     |                            sd_bar~k                            |
     |                            .0227684                            |
     +----------------------------------------------------------------+

. 
end of do-file
