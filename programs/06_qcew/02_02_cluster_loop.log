
  ___  ____  ____  ____  ____ (R)
 /__    /   ____/   /   ____/
___/   /   /___/   /   /___/   14.2   Copyright 1985-2015 StataCorp LLC
  Statistics/Data Analysis            StataCorp
                                      4905 Lakeway Drive
                                      College Station, Texas 77845 USA
                                      800-STATA-PC        http://www.stata.com
                                      979-696-4600        stata@stata.com
                                      979-696-4601 (fax)

8-user Stata network perpetual license:
       Serial number:  501406244326
         Licensed to:  ECCO Cornell University
                       Ithaca, NY

Notes:
      1.  Stata is running in batch mode.
      2.  Unicode is supported; see help unicode_advice.

. do 02_02_cluster_loop.do 

. /**********************
> This is the do-file loop
> 
> It has three steps
> 
> 1. Calculate the aggregate data
>         (national level)
> 
> 2. Decide which czone defn to use
> 
> 3. Aggregate cty data to czone
> 
> 4. Run regressions of delM on delIPW, 
>         store regressions.
>         
> ***************************/
. include "../config.do"

. /*  config.do */
. 
. 
. 
. if ( "`c(hostname)'" == "ecco.vrdc.cornell.edu" ) {
. global root "/ssgprojects/project0002/MobZ.new"
. }

. 
. if ( "`c(username)'" == "vilhuber" ) {
. global root "/home/vilhuber/Workspace/git/larsvilhuber/MobZ"
. }

. 
. if ( "`c(hostname)'" == "some.server.at.census" ) {
. global root "/made/up/path/Mobz"
. }

. 
. /* check if the author creates a log file. If not, adjust the following code 
> fragment */
. 
. local c_date = c(current_date)

. local cdate = subinstr("`c_date'", " ", "_", .)

. local c_time = c(current_time)

. local ctime = subinstr("`c_time'", ":", "_", .)

. 
. // log using "${root}/logfile_`cdate'-`ctime'.log", replace text
. 
. /* It will provide some info about how and when the program was run */
. /* See https://www.stata.com/manuals13/pcreturn.pdf#pcreturn */
. local variant = cond(c(MP),"MP",cond(c(SE),"SE",c(flavor)) )  

. // alternatively, you could use 
. // local variant = cond(c(stata_version)>13,c(real_flavor),"NA")  
. 
. di "=== SYSTEM DIAGNOSTICS ==="
=== SYSTEM DIAGNOSTICS ===

. di "Stata version: `c(stata_version)'"
Stata version: 14.2

. di "Updated as of: `c(born_date)'"
Updated as of: 19 Dec 2017

. di "Variant:       `variant'"
Variant:       IC

. di "Processors:    `c(processors)'"
Processors:    1

. di "OS:            `c(os)' `c(osdtl)'"
OS:            Unix 

. di "Machine type:  `c(machine_type)'"
Machine type:  PC (64-bit x86-64)

. di "=========================="
==========================

. 
. 
. 
. 
. /* define relative libraries */
. 
. global paperdir "${root}/paper"

. global interwrk "${root}/data/interwrk"

. global raw "${root}/raw"

. global temp "${root}/temp"

. global outputs "${root}/data"

. global programs "${root}/programs"

. global outgraphs "${root}/figures"

. global logdir "${programs}/logs"

. 
. cap mkdir "$logdir"

. log using "${logdir}/logfile_`cdate'-`ctime'.log", replace text
(note: file /ssgprojects/project0002/MobZ.new/programs/logs/logfile_23_Aug_2020
> -11_31_33.log not found)
-------------------------------------------------------------------------------
      name:  <unnamed>
       log:  /ssgprojects/project0002/MobZ.new/programs/logs/logfile_23_Aug_202
> 0-11_31_33.log
  log type:  text
 opened on:  23 Aug 2020, 11:31:33

. cap mkdir "$temp"

. cap mkdir "${root}/data"

. cap mkdir "$interwrk"

. cap mkdir "$raw"

. cap mkdir "$outputs"

. 
. /* install any packages locally */
. capture mkdir "${programs}/ado"

. sysdir set PERSONAL "${programs}/ado/personal"

. sysdir set PLUS     "${programs}/ado/plus"

. sysdir set SITE     "${programs}/ado/site"

. sysdir
   STATA:  /usr/local/stata14/
    BASE:  /usr/local/stata14/ado/base/
    SITE:  /ssgprojects/project0002/MobZ.new/programs/ado/site/
    PLUS:  /ssgprojects/project0002/MobZ.new/programs/ado/plus/
PERSONAL:  /ssgprojects/project0002/MobZ.new/programs/ado/personal/
OLDPLACE:  ~/ado/

. 
. /* define data sources */
. 
. /* QCEW */
. /* data/working/mobz/qcew */
.     global qcewdata "${raw}/qcew"  

. /* /data/working/mobz/outputs */
.     global czonedata "$outputs"  

. 
. /* ADH */
.     global adhdata "${raw}/adh_data/Public Release Data/dta"

. /* CZONE */
.     global czonedata "${raw}/adh_data/"

. /* files provided separately by David Dorn */
.     global dorndata "${raw}/ddorn/"

. 
. /* CBP */
.     /* this is where the raw Stata versions of CBP data reside */
.    global cbpdata "/data/clean/cbp"

. 
. 
. 
. local czonedataset = "${outputs}/clusters_cutoff_jtw1990.dta"

. global czone_iteration = "${interwrk}/czones_cutoff.dta"

. local ipw_regs "${interwrk}/06_qcew_cutoff_post.dta"

. // local qcewdata = "$qcewdata/qcew_county.dta"
.  global qcewfile = "$outputs/qcew_county.dta"

. 
. /* create shell here */
.  #delimit ; 
delimiter now ;
. use $qcewfile, clear;

. //destring naics2, force replace;
> rename naics2 naics2char;

. egen naics2 = group(naics2char);

. compress fips;
  (0 bytes saved)

. tempfile qcewdata;

. save `qcewdata';
file /tmp/St32652.000001 saved

.  use `qcewdata', clear;

.   //  destring naics2, replace ;
>  collapse (first) fips, by(naics2 year) ;

.  keep naics2 year ;

.  tempfile shell;

.  save `shell', replace;
(note: file /tmp/St32652.000002 not found)
file /tmp/St32652.000002 saved

.   /* create industry-year data here */
>  use `qcewdata', clear;

.  // destring naics2, force replace ; 
>  collapse (sum) EMP_jt = annual_avg_emplvl, by(naics2 year) ;

. sort naics2 year ;

.  xtset naics2 year ;
       panel variable:  naics2 (strongly balanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

. gen delta_emp_jt = log(EMP_jt) - log(L.EMP_jt) ;
(19 missing values generated)

. tempfile industry_by_year ;

. save `industry_by_year' , replace ;
(note: file /tmp/St32652.000003 not found)
file /tmp/St32652.000003 saved

.  use "`czonedataset'", clear ;

. /***********************
> Creating string of values to 
> loop over
> ***********************/
> local values = "" ;

. foreach clus of varlist clus* { ;
  2.         di "`clus'" ;
  3.         local val = real(subinstr("`clus'","clus","",.)) ;
  4.         di "`val'" ;
  5.         local values = "`values' `val'" ;
  6. } ;
clus9000
9000
clus9005
9005
clus9010
9010
clus9015
9015
clus9020
9020
clus9025
9025
clus9030
9030
clus9035
9035
clus9040
9040
clus9045
9045
clus9050
9050
clus9055
9055
clus9060
9060
clus9065
9065
clus9070
9070
clus9075
9075
clus9080
9080
clus9085
9085
clus9090
9090
clus9095
9095
clus9100
9100
clus9105
9105
clus9110
9110
clus9115
9115
clus9120
9120
clus9125
9125
clus9130
9130
clus9135
9135
clus9140
9140
clus9145
9145
clus9150
9150
clus9155
9155
clus9160
9160
clus9165
9165
clus9170
9170
clus9175
9175
clus9180
9180
clus9185
9185
clus9190
9190
clus9195
9195
clus9200
9200
clus9205
9205
clus9210
9210
clus9215
9215
clus9220
9220
clus9225
9225
clus9230
9230
clus9235
9235
clus9240
9240
clus9245
9245
clus9250
9250
clus9255
9255
clus9260
9260
clus9265
9265
clus9270
9270
clus9275
9275
clus9280
9280
clus9285
9285
clus9290
9290
clus9295
9295
clus9300
9300
clus9305
9305
clus9310
9310
clus9315
9315
clus9320
9320
clus9325
9325
clus9330
9330
clus9335
9335
clus9340
9340
clus9345
9345
clus9350
9350
clus9355
9355
clus9360
9360
clus9365
9365
clus9370
9370
clus9375
9375
clus9380
9380
clus9385
9385
clus9390
9390
clus9395
9395
clus9400
9400
clus9405
9405
clus9410
9410
clus9415
9415
clus9420
9420
clus9425
9425
clus9430
9430
clus9435
9435
clus9440
9440
clus9445
9445
clus9450
9450
clus9455
9455
clus9460
9460
clus9465
9465
clus9470
9470
clus9475
9475
clus9480
9480
clus9485
9485
clus9490
9490
clus9495
9495
clus9500
9500
clus9505
9505
clus9510
9510
clus9515
9515
clus9520
9520
clus9525
9525
clus9530
9530
clus9535
9535
clus9540
9540
clus9545
9545
clus9550
9550
clus9555
9555
clus9560
9560
clus9565
9565
clus9570
9570
clus9575
9575
clus9580
9580
clus9585
9585
clus9590
9590
clus9595
9595
clus9600
9600
clus9605
9605
clus9610
9610
clus9615
9615
clus9620
9620
clus9625
9625
clus9630
9630
clus9635
9635
clus9640
9640
clus9645
9645
clus9650
9650
clus9655
9655
clus9660
9660
clus9665
9665
clus9670
9670
clus9675
9675
clus9680
9680
clus9685
9685
clus9690
9690
clus9695
9695
clus9700
9700

. tempname czoneresults;

. tempfile bartik_regs;

. postfile `czoneresults' cutoff beta se  using `bartik_regs', replace;
(note: file /tmp/St32652.000004 not found)

. foreach i in `values' { ;
  2.          di "`i'";
  3.          local cutoff= `i'/10000 ;
  4.                 use "`czonedataset'", clear;
  5.                 egen czone = group(clus`i') ;
  6.                 keep fips czone;
  7.                 sort fips ;
  8.                                 save "$czone_iteration", replace;
  9.                 collapse (first) fips, by(czone) ;
 10.                 cross using `shell' ;
 11.                 tempfile shell2 ;
 12.                 save `shell2', replace ;
 13.          include "$programs/06_qcew/zz_bartik_merge.do" ;
 14.          xtset czone year ;
 15.          areg log_uireceipt L.bartik_it i.year, absorb(czone) cluster(czon
> e) ;
 16.          post `czoneresults' (`cutoff') (_b[L.bartik_it]) (_se[L.bartik_it
> ]) ;
 17.           cap erase `bartik' ;
 18.           cap erase `base_year' ;
 19.           cap erase `mergefile' ;
 20.                         } ;
9000
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.000005 not found)
file /tmp/St32652.000005 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.000006 not found)
file /tmp/St32652.000006 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(915 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.000007 not found)
file /tmp/St32652.000007 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.000008 not found)
file /tmp/St32652.000008 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(38 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     35,019
                                                F(  25,   1400)   =    2071.49
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9794
                                                Adj R-squared     =     0.9786
                                                Root MSE          =     0.2654

                              (Std. Err. adjusted for 1,401 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -6.358626   .4266007   -14.91   0.000    -7.195471    -5.52178
             |
        year |
       1992  |   .1697275   .0123755    13.71   0.000     .1454511    .1940039
       1993  |   .6719227   .0068732    97.76   0.000     .6584398    .6854055
       1994  |   .6708891   .0096305    69.66   0.000     .6519973    .6897809
       1995  |   .4074037   .0133515    30.51   0.000     .3812126    .4335948
       1996  |   .3601256   .0129276    27.86   0.000      .334766    .3854851
       1997  |   .3871513   .0113004    34.26   0.000     .3649837    .4093188
       1998  |   .3403318   .0126345    26.94   0.000     .3155472    .3651164
       1999  |   .3240929   .0122157    26.53   0.000     .3001298     .348056
       2000  |   .3379949   .0119441    28.30   0.000     .3145647    .3614251
       2001  |   .3248045    .011047    29.40   0.000      .303134    .3464749
       2002  |    .720177   .0129086    55.79   0.000     .6948547    .7454993
       2003  |   .8593191   .0154901    55.48   0.000     .8289328    .8897055
       2004  |   .9908745   .0126937    78.06   0.000     .9659738    1.015775
       2005  |   .7845543   .0115561    67.89   0.000     .7618852    .8072234
       2006  |    .674876   .0135861    49.67   0.000     .6482247    .7015272
       2007  |   .6119494   .0126373    48.42   0.000     .5871593    .6367394
       2008  |   .6279651   .0121731    51.59   0.000     .6040855    .6518447
       2009  |   .9347314   .0134026    69.74   0.000       .90844    .9610228
       2010  |   1.486376   .0324877    45.75   0.000     1.422646    1.550106
       2011  |   1.840386   .0156009   117.97   0.000     1.809782    1.870989
       2012  |   1.798145   .0147538   121.88   0.000     1.769203    1.827087
       2013  |   1.578982   .0154038   102.51   0.000     1.548765    1.609199
       2014  |   1.241335   .0135168    91.84   0.000      1.21482    1.267851
       2015  |   .7504193   .0150531    49.85   0.000     .7208903    .7799484
             |
       _cons |    7.94813   .0076877  1033.88   0.000     7.933049     7.96321
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1401 categories)
9005
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.00000a not found)
file /tmp/St32652.00000a saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.00000b not found)
file /tmp/St32652.00000b saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(915 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.00000c not found)
file /tmp/St32652.00000c saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.00000d not found)
file /tmp/St32652.00000d saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(38 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     34,544
                                                F(  25,   1381)   =    1949.10
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9787
                                                Adj R-squared     =     0.9778
                                                Root MSE          =     0.2688

                              (Std. Err. adjusted for 1,382 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -.6371472   .3404321    -1.87   0.061    -1.304967    .0306727
             |
        year |
       1992  |   .3255394   .0103565    31.43   0.000     .3052232    .3458556
       1993  |   .6856351   .0068566   100.00   0.000     .6721846    .6990856
       1994  |   .5860409   .0088612    66.14   0.000     .5686581    .6034238
       1995  |   .2599224   .0120422    21.58   0.000     .2362994    .2835454
       1996  |   .2167579   .0117209    18.49   0.000     .1937652    .2397506
       1997  |   .2756295   .0103699    26.58   0.000      .255287     .295972
       1998  |   .2063196   .0113665    18.15   0.000     .1840221    .2286171
       1999  |   .2010289   .0115711    17.37   0.000       .17833    .2237278
       2000  |   .2390192   .0113736    21.02   0.000     .2167077    .2613306
       2001  |   .2458598   .0105548    23.29   0.000     .2251547     .266565
       2002  |   .6013253   .0131609    45.69   0.000     .5755079    .6271427
       2003  |   .9963865   .0136644    72.92   0.000     .9695813    1.023192
       2004  |   1.062859   .0120417    88.26   0.000     1.039237    1.086481
       2005  |   .7306933   .0113484    64.39   0.000     .7084313    .7529553
       2006  |   .5918151   .0132389    44.70   0.000     .5658446    .6177855
       2007  |   .5366628   .0126043    42.58   0.000     .5119372    .5613884
       2008  |   .5874122   .0124392    47.22   0.000     .5630104     .611814
       2009  |   .9868237   .0131706    74.93   0.000     .9609871     1.01266
       2010  |   1.889094   .0269647    70.06   0.000     1.836198     1.94199
       2011  |   1.940632   .0148116   131.02   0.000     1.911576    1.969688
       2012  |    1.70819   .0145083   117.74   0.000     1.679729     1.73665
       2013  |    1.45553   .0146104    99.62   0.000     1.426869    1.484191
       2014  |   1.158147     .01305    88.75   0.000     1.132547    1.183747
       2015  |   .6317517   .0142633    44.29   0.000     .6037715    .6597318
             |
       _cons |   7.973865   .0075805  1051.89   0.000     7.958994    7.988736
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1382 categories)
9010
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.00000f not found)
file /tmp/St32652.00000f saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.00000g not found)
file /tmp/St32652.00000g saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(915 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.00000h not found)
file /tmp/St32652.00000h saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.00000i not found)
file /tmp/St32652.00000i saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(38 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     34,669
                                                F(  25,   1386)   =    2053.55
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9793
                                                Adj R-squared     =     0.9784
                                                Root MSE          =     0.2649

                              (Std. Err. adjusted for 1,387 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -6.391365   .4382009   -14.59   0.000    -7.250974   -5.531756
             |
        year |
       1992  |   .1693633   .0126868    13.35   0.000     .1444758    .1942507
       1993  |   .6712997   .0068872    97.47   0.000     .6577893    .6848101
       1994  |   .6701918   .0097355    68.84   0.000     .6510938    .6892897
       1995  |   .4067684   .0136173    29.87   0.000     .3800557    .4334812
       1996  |   .3600434   .0131832    27.31   0.000     .3341823    .3859045
       1997  |   .3865749   .0115039    33.60   0.000      .364008    .4091419
       1998  |   .3395739   .0128604    26.40   0.000     .3143459    .3648019
       1999  |    .323637   .0124464    26.00   0.000     .2992212    .3480528
       2000  |   .3366868   .0121369    27.74   0.000     .3128781    .3604954
       2001  |   .3248383   .0111669    29.09   0.000     .3029325    .3467441
       2002  |   .7204022   .0130405    55.24   0.000      .694821    .7459834
       2003  |   .8574207   .0157089    54.58   0.000      .826605    .8882364
       2004  |   .9877896    .012832    76.98   0.000     .9626175    1.012962
       2005  |   .7822802   .0116332    67.25   0.000     .7594597    .8051007
       2006  |   .6729176   .0136892    49.16   0.000     .6460638    .6997714
       2007  |   .6109322   .0127355    47.97   0.000     .5859492    .6359151
       2008  |    .626761    .012248    51.17   0.000     .6027343    .6507877
       2009  |   .9334722   .0135376    68.95   0.000     .9069159    .9600285
       2010  |   1.482496   .0333295    44.48   0.000     1.417115    1.547878
       2011  |   1.837576   .0157875   116.39   0.000     1.806606    1.868546
       2012  |    1.79687   .0148619   120.90   0.000     1.767716    1.826025
       2013  |   1.577367    .015569   101.31   0.000     1.546825    1.607908
       2014  |   1.239466   .0136254    90.97   0.000     1.212737    1.266194
       2015  |   .7482383   .0152191    49.16   0.000     .7183833    .7780933
             |
       _cons |   7.969196   .0077313  1030.77   0.000      7.95403    7.984363
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1387 categories)
9015
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.00000k not found)
file /tmp/St32652.00000k saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.00000l not found)
file /tmp/St32652.00000l saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(915 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.00000m not found)
file /tmp/St32652.00000m saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.00000n not found)
file /tmp/St32652.00000n saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(38 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     34,544
                                                F(  25,   1381)   =    2041.95
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9793
                                                Adj R-squared     =     0.9784
                                                Root MSE          =     0.2649

                              (Std. Err. adjusted for 1,382 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -6.384237    .438811   -14.55   0.000    -7.245045   -5.523428
             |
        year |
       1992  |   .1694156   .0126988    13.34   0.000     .1445046    .1943265
       1993  |   .6714686   .0069035    97.26   0.000     .6579261     .685011
       1994  |   .6703882   .0097558    68.72   0.000     .6512505    .6895259
       1995  |   .4071179   .0136426    29.84   0.000     .3803554    .4338804
       1996  |   .3602057    .013206    27.28   0.000     .3342998    .3861116
       1997  |   .3868225   .0115268    33.56   0.000     .3642106    .4094344
       1998  |   .3394823   .0128844    26.35   0.000     .3142072    .3647574
       1999  |   .3237522    .012467    25.97   0.000      .299296    .3482085
       2000  |   .3371037   .0121577    27.73   0.000     .3132541    .3609533
       2001  |   .3248133   .0111924    29.02   0.000     .3028573    .3467693
       2002  |   .7202263   .0130902    55.02   0.000     .6945474    .7459052
       2003  |   .8575006   .0157255    54.53   0.000     .8266523     .888349
       2004  |   .9879196    .012852    76.87   0.000     .9627081    1.013131
       2005  |   .7821816   .0116604    67.08   0.000     .7593077    .8050556
       2006  |   .6721327   .0136916    49.09   0.000     .6452742    .6989912
       2007  |   .6107367   .0127657    47.84   0.000     .5856944     .635779
       2008  |   .6268328   .0122808    51.04   0.000     .6027417     .650924
       2009  |   .9334812   .0135648    68.82   0.000     .9068714     .960091
       2010  |   1.482737   .0333659    44.44   0.000     1.417284     1.54819
       2011  |   1.837442   .0158178   116.16   0.000     1.806412    1.868471
       2012  |   1.796517   .0148955   120.61   0.000     1.767296    1.825737
       2013  |   1.577135   .0156028   101.08   0.000     1.546527    1.607743
       2014  |   1.239342   .0136594    90.73   0.000     1.212547    1.266138
       2015  |   .7486472   .0152526    49.08   0.000     .7187265     .778568
             |
       _cons |   7.973871    .007748  1029.15   0.000     7.958672     7.98907
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1382 categories)
9020
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.00000p not found)
file /tmp/St32652.00000p saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.00000q not found)
file /tmp/St32652.00000q saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(915 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.00000r not found)
file /tmp/St32652.00000r saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.00000s not found)
file /tmp/St32652.00000s saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(38 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     34,419
                                                F(  25,   1376)   =    2046.04
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9793
                                                Adj R-squared     =     0.9784
                                                Root MSE          =     0.2649

                              (Std. Err. adjusted for 1,377 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -6.404407   .4402559   -14.55   0.000    -7.268053   -5.540762
             |
        year |
       1992  |   .1694775   .0127307    13.31   0.000     .1445039    .1944511
       1993  |   .6723111   .0069037    97.38   0.000     .6587682     .685854
       1994  |   .6714777   .0097677    68.74   0.000     .6523164    .6906389
       1995  |   .4081437   .0136748    29.85   0.000      .381318    .4349693
       1996  |   .3611357   .0132341    27.29   0.000     .3351744     .387097
       1997  |   .3875969   .0115523    33.55   0.000     .3649348     .410259
       1998  |    .340086   .0129157    26.33   0.000     .3147494    .3654226
       1999  |   .3238737   .0124951    25.92   0.000     .2993621    .3483852
       2000  |   .3371574   .0121841    27.67   0.000      .313256    .3610587
       2001  |   .3247906   .0112162    28.96   0.000     .3027879    .3467933
       2002  |   .7203495   .0131313    54.86   0.000       .69459    .7461091
       2003  |   .8566131   .0157602    54.35   0.000     .8256966    .8875297
       2004  |   .9875752   .0128816    76.67   0.000     .9623055    1.012845
       2005  |   .7822898   .0116912    66.91   0.000     .7593554    .8052243
       2006  |   .6721744   .0137366    48.93   0.000     .6452273    .6991214
       2007  |   .6106608   .0128087    47.68   0.000     .5855341    .6357874
       2008  |   .6267478   .0123133    50.90   0.000     .6025929    .6509028
       2009  |   .9335169    .013604    68.62   0.000       .90683    .9602038
       2010  |   1.482113   .0334693    44.28   0.000     1.416457     1.54777
       2011  |   1.837898   .0158635   115.86   0.000     1.806779    1.869018
       2012  |    1.79727   .0149382   120.31   0.000     1.767966    1.826574
       2013  |   1.578269   .0156427   100.90   0.000     1.547583    1.608955
       2014  |   1.239782   .0136966    90.52   0.000     1.212914    1.266651
       2015  |   .7488639   .0152876    48.99   0.000     .7188744    .7788535
             |
       _cons |   7.980742     .00777  1027.13   0.000       7.9655    7.995984
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1377 categories)
9025
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.00000u not found)
file /tmp/St32652.00000u saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.00000v not found)
file /tmp/St32652.00000v saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(915 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.00000w not found)
file /tmp/St32652.00000w saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.00000x not found)
file /tmp/St32652.00000x saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(38 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     34,219
                                                F(  25,   1368)   =    2077.97
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9794
                                                Adj R-squared     =     0.9785
                                                Root MSE          =     0.2629

                              (Std. Err. adjusted for 1,369 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -6.387256    .437227   -14.61   0.000    -7.244964   -5.529547
             |
        year |
       1992  |   .1700126    .012658    13.43   0.000     .1451815    .1948437
       1993  |    .672861   .0069222    97.20   0.000     .6592816    .6864403
       1994  |   .6717469   .0097465    68.92   0.000     .6526273    .6908665
       1995  |   .4073231   .0136078    29.93   0.000     .3806288    .4340174
       1996  |   .3601812   .0131901    27.31   0.000     .3343063    .3860561
       1997  |   .3868316   .0115299    33.55   0.000     .3642135    .4094498
       1998  |   .3395363    .012866    26.39   0.000     .3142971    .3647754
       1999  |     .32348    .012473    25.93   0.000     .2990118    .3479482
       2000  |   .3366618   .0121677    27.67   0.000     .3127924    .3605313
       2001  |   .3242394   .0112008    28.95   0.000     .3022669    .3462119
       2002  |   .7200951   .0131519    54.75   0.000     .6942951    .7458951
       2003  |   .8572162   .0155389    55.17   0.000     .8267336    .8876988
       2004  |   .9884865   .0126828    77.94   0.000     .9636067    1.013366
       2005  |   .7822042   .0116817    66.96   0.000     .7592882    .8051202
       2006  |   .6723682   .0136755    49.17   0.000      .645541    .6991954
       2007  |   .6102623   .0128151    47.62   0.000     .5851229    .6354016
       2008  |   .6276638   .0122067    51.42   0.000      .603718    .6516096
       2009  |   .9347081   .0134244    69.63   0.000     .9083734    .9610427
       2010  |   1.484448   .0330051    44.98   0.000     1.419702    1.549194
       2011  |    1.83915   .0156845   117.26   0.000     1.808382    1.869918
       2012  |   1.797661   .0149684   120.10   0.000     1.768297    1.827024
       2013  |    1.57889   .0156764   100.72   0.000     1.548137    1.609642
       2014  |   1.241466   .0136511    90.94   0.000     1.214687    1.268246
       2015  |   .7489733   .0153297    48.86   0.000      .718901    .7790456
             |
       _cons |   7.993803   .0077378  1033.09   0.000     7.978624    8.008982
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1369 categories)
9030
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.000011 not found)
file /tmp/St32652.000011 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.000012 not found)
file /tmp/St32652.000012 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(915 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.000013 not found)
file /tmp/St32652.000013 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.000014 not found)
file /tmp/St32652.000014 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(38 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     34,069
                                                F(  25,   1362)   =    1961.97
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9789
                                                Adj R-squared     =     0.9780
                                                Root MSE          =     0.2665

                              (Std. Err. adjusted for 1,363 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -1.399281   .3770428    -3.71   0.000    -2.138928   -.6596331
             |
        year |
       1992  |   .3048144   .0110567    27.57   0.000     .2831243    .3265045
       1993  |   .6845721   .0068405   100.08   0.000     .6711531    .6979911
       1994  |   .5976085   .0095399    62.64   0.000      .578894     .616323
       1995  |   .2785747   .0129785    21.46   0.000     .2531146    .3040348
       1996  |   .2350736   .0126241    18.62   0.000     .2103087    .2598384
       1997  |    .289589   .0110679    26.16   0.000     .2678769    .3113011
       1998  |   .2225481   .0122039    18.24   0.000     .1986076    .2464887
       1999  |   .2150392    .012105    17.76   0.000     .1912927    .2387857
       2000  |   .2497979   .0117068    21.34   0.000     .2268326    .2727632
       2001  |    .254146   .0106314    23.91   0.000     .2332903    .2750017
       2002  |   .6147521   .0134882    45.58   0.000     .5882923     .641212
       2003  |   .9761141   .0143382    68.08   0.000     .9479866    1.004242
       2004  |   1.052422   .0120463    87.36   0.000     1.028791    1.076053
       2005  |    .736111   .0114006    64.57   0.000     .7137464    .7584755
       2006  |   .6013526   .0134866    44.59   0.000     .5748959    .6278093
       2007  |   .5441578   .0127671    42.62   0.000     .5191126    .5692031
       2008  |   .5915683   .0122311    48.37   0.000     .5675745    .6155621
       2009  |   .9796724   .0133547    73.36   0.000     .9534744     1.00587
       2010  |   1.836311   .0297297    61.77   0.000      1.77799    1.894632
       2011  |   1.927452   .0151972   126.83   0.000      1.89764    1.957265
       2012  |   1.719426    .014653   117.34   0.000     1.690681    1.748171
       2013  |   1.471286   .0150516    97.75   0.000     1.441759    1.500813
       2014  |   1.168533   .0134229    87.06   0.000     1.142201    1.194865
       2015  |   .6449617   .0153026    42.15   0.000     .6149424     .674981
             |
       _cons |   8.000137   .0075438  1060.49   0.000     7.985338    8.014935
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1363 categories)
9035
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.000016 not found)
file /tmp/St32652.000016 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.000017 not found)
file /tmp/St32652.000017 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(915 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.000018 not found)
file /tmp/St32652.000018 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.000019 not found)
file /tmp/St32652.000019 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(38 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     33,769
                                                F(  25,   1350)   =    2074.91
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9795
                                                Adj R-squared     =     0.9786
                                                Root MSE          =     0.2625

                              (Std. Err. adjusted for 1,351 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -6.398563   .4423506   -14.46   0.000    -7.266332   -5.530793
             |
        year |
       1992  |   .1703773   .0127804    13.33   0.000     .1453056     .195449
       1993  |   .6732352   .0069684    96.61   0.000     .6595652    .6869053
       1994  |   .6714583    .009862    68.09   0.000     .6521118    .6908048
       1995  |   .4069718   .0137439    29.61   0.000       .38001    .4339335
       1996  |   .3596836   .0133118    27.02   0.000     .3335696    .3857976
       1997  |   .3867211   .0116617    33.16   0.000      .363844    .4095981
       1998  |   .3392731   .0129782    26.14   0.000     .3138134    .3647328
       1999  |   .3231366   .0126207    25.60   0.000     .2983783    .3478949
       2000  |   .3366133   .0122652    27.44   0.000     .3125524    .3606743
       2001  |     .32573   .0112688    28.91   0.000     .3036238    .3478362
       2002  |   .7231374   .0132321    54.65   0.000     .6971797     .749095
       2003  |   .8587474   .0156725    54.79   0.000     .8280022    .8894925
       2004  |   .9904579   .0127663    77.58   0.000     .9654139    1.015502
       2005  |   .7838704    .011763    66.64   0.000     .7607946    .8069461
       2006  |   .6739851   .0137936    48.86   0.000     .6469258    .7010444
       2007  |   .6126644   .0129122    47.45   0.000     .5873341    .6379946
       2008  |   .6296241   .0122859    51.25   0.000     .6055225    .6537257
       2009  |    .937234   .0134993    69.43   0.000      .910752    .9637159
       2010  |   1.486623   .0333642    44.56   0.000     1.421171    1.552074
       2011  |   1.842325   .0157964   116.63   0.000     1.811337    1.873313
       2012  |   1.801158   .0150778   119.46   0.000     1.771579    1.830736
       2013  |   1.581977   .0158119   100.05   0.000     1.550959    1.612996
       2014  |   1.244591   .0137543    90.49   0.000     1.217609    1.271573
       2015  |   .7507292   .0154754    48.51   0.000     .7203708    .7810876
             |
       _cons |    8.00912   .0077953  1027.43   0.000     7.993828    8.024413
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1351 categories)
9040
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.00001b not found)
file /tmp/St32652.00001b saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.00001c not found)
file /tmp/St32652.00001c saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(915 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.00001d not found)
file /tmp/St32652.00001d saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.00001e not found)
file /tmp/St32652.00001e saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(38 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     33,569
                                                F(  25,   1342)   =    2066.87
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9794
                                                Adj R-squared     =     0.9786
                                                Root MSE          =     0.2626

                              (Std. Err. adjusted for 1,343 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -6.393801   .4452855   -14.36   0.000    -7.267332   -5.520269
             |
        year |
       1992  |   .1712009   .0128478    13.33   0.000     .1459969    .1964048
       1993  |   .6740114   .0069824    96.53   0.000     .6603138    .6877091
       1994  |   .6725649   .0098965    67.96   0.000     .6531505    .6919793
       1995  |   .4078938   .0138162    29.52   0.000     .3807901    .4349975
       1996  |   .3604165   .0133839    26.93   0.000     .3341608    .3866722
       1997  |   .3870606   .0117256    33.01   0.000      .364058    .4100632
       1998  |    .339339   .0130577    25.99   0.000     .3137232    .3649548
       1999  |   .3228267   .0127029    25.41   0.000      .297907    .3477465
       2000  |   .3366713   .0123373    27.29   0.000     .3124688    .3608737
       2001  |   .3257801   .0113228    28.77   0.000     .3035677    .3479924
       2002  |   .7238673   .0133015    54.42   0.000     .6977732    .7499613
       2003  |   .8602955   .0157568    54.60   0.000      .829385    .8912061
       2004  |   .9913759   .0128322    77.26   0.000     .9662026    1.016549
       2005  |   .7846352   .0118215    66.37   0.000     .7614445     .807826
       2006  |   .6749539   .0138667    48.67   0.000     .6477512    .7021566
       2007  |    .613687   .0129765    47.29   0.000     .5882307    .6391434
       2008  |   .6300382   .0123461    51.03   0.000     .6058185     .654258
       2009  |   .9381624   .0135735    69.12   0.000     .9115348      .96479
       2010  |    1.48793   .0335821    44.31   0.000     1.422051    1.553809
       2011  |   1.843638   .0158818   116.08   0.000     1.812483    1.874794
       2012  |   1.801958    .015148   118.96   0.000     1.772242    1.831675
       2013  |   1.582964   .0158937    99.60   0.000     1.551785    1.614143
       2014  |   1.245097   .0138165    90.12   0.000     1.217992    1.272201
       2015  |   .7507896   .0155525    48.27   0.000     .7202798    .7812994
             |
       _cons |   8.019395   .0078338  1023.69   0.000     8.004027    8.034763
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1343 categories)
9045
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.00001g not found)
file /tmp/St32652.00001g saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.00001h not found)
file /tmp/St32652.00001h saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(915 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.00001i not found)
file /tmp/St32652.00001i saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.00001j not found)
file /tmp/St32652.00001j saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(38 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     33,519
                                                F(  25,   1340)   =    1937.74
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9790
                                                Adj R-squared     =     0.9781
                                                Root MSE          =     0.2668

                              (Std. Err. adjusted for 1,341 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -.0002576   .4001183    -0.00   0.999    -.7851841    .7846689
             |
        year |
       1992  |   .3443396   .0115706    29.76   0.000     .3216411    .3670381
       1993  |   .6895524   .0069305    99.50   0.000     .6759565    .7031482
       1994  |   .5772272   .0095165    60.66   0.000     .5585584     .595896
       1995  |   .2429042   .0128002    18.98   0.000     .2177936    .2680149
       1996  |    .199357   .0124785    15.98   0.000     .1748776    .2238365
       1997  |     .26162   .0109676    23.85   0.000     .2401045    .2831355
       1998  |    .189097   .0121921    15.51   0.000     .1651794    .2130145
       1999  |   .1839768   .0121659    15.12   0.000     .1601106     .207843
       2000  |   .2264851   .0115111    19.68   0.000     .2039034    .2490667
       2001  |   .2348281   .0106215    22.11   0.000     .2139916    .2556646
       2002  |    .586622   .0139214    42.14   0.000     .5593119    .6139321
       2003  |   1.011153   .0147474    68.56   0.000     .9822227    1.040084
       2004  |   1.070857   .0123375    86.80   0.000     1.046654     1.09506
       2005  |   .7241668   .0115431    62.74   0.000     .7015222    .7468114
       2006  |   .5822734   .0136804    42.56   0.000     .5554361    .6091106
       2007  |   .5262821   .0129448    40.66   0.000     .5008877    .5516765
       2008  |   .5824714   .0125914    46.26   0.000     .5577705    .6071724
       2009  |   .9944982    .013404    74.19   0.000     .9682032    1.020793
       2010  |   1.938191   .0309978    62.53   0.000     1.877382    1.999001
       2011  |   1.955092     .01537   127.20   0.000      1.92494    1.985244
       2012  |   1.700074   .0149942   113.38   0.000      1.67066    1.729489
       2013  |   1.442814   .0155026    93.07   0.000     1.412402    1.473226
       2014  |   1.148921   .0136241    84.33   0.000     1.122195    1.175648
       2015  |   .6153569   .0153505    40.09   0.000     .5852433    .6454704
             |
       _cons |   8.005301   .0076298  1049.21   0.000     7.990333    8.020269
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1341 categories)
9050
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.00001l not found)
file /tmp/St32652.00001l saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.00001m not found)
file /tmp/St32652.00001m saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(915 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.00001n not found)
file /tmp/St32652.00001n saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.00001o not found)
file /tmp/St32652.00001o saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(38 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     33,219
                                                F(  25,   1328)   =    2060.06
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9793
                                                Adj R-squared     =     0.9784
                                                Root MSE          =     0.2622

                              (Std. Err. adjusted for 1,329 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |   -6.41362   .4501955   -14.25   0.000    -7.296792   -5.530448
             |
        year |
       1992  |   .1707893   .0129703    13.17   0.000     .1453448    .1962338
       1993  |   .6744542   .0069825    96.59   0.000     .6607562    .6881522
       1994  |   .6730115   .0099506    67.63   0.000     .6534908    .6925321
       1995  |    .408086   .0138708    29.42   0.000     .3808749    .4352971
       1996  |   .3597635     .01346    26.73   0.000     .3333585    .3861686
       1997  |   .3866757   .0117797    32.83   0.000     .3635668    .4097845
       1998  |    .338829   .0131408    25.78   0.000       .31305    .3646079
       1999  |   .3223816    .012759    25.27   0.000     .2973516    .3474117
       2000  |   .3359125    .012358    27.18   0.000     .3116691    .3601558
       2001  |   .3248545   .0113577    28.60   0.000     .3025734    .3471355
       2002  |   .7238806   .0133703    54.14   0.000     .6976513    .7501098
       2003  |    .859267   .0158741    54.13   0.000      .828126    .8904081
       2004  |   .9905534   .0129106    76.72   0.000      .965226    1.015881
       2005  |   .7839974   .0118553    66.13   0.000     .7607401    .8072546
       2006  |   .6745215   .0139131    48.48   0.000     .6472274    .7018156
       2007  |   .6134264   .0130181    47.12   0.000     .5878881    .6389648
       2008  |   .6292396   .0123739    50.85   0.000      .604965    .6535142
       2009  |   .9377876   .0136594    68.65   0.000     .9109912     .964584
       2010  |   1.486169   .0339528    43.77   0.000     1.419562    1.552776
       2011  |   1.843236   .0160001   115.20   0.000     1.811847    1.874624
       2012  |   1.802567   .0152355   118.31   0.000     1.772679    1.832455
       2013  |   1.583834   .0160008    98.98   0.000     1.552444    1.615223
       2014  |   1.245271   .0138893    89.66   0.000     1.218023    1.272518
       2015  |    .750674   .0156393    48.00   0.000     .7199936    .7813543
             |
       _cons |   8.042505   .0078578  1023.50   0.000      8.02709    8.057921
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1329 categories)
9055
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.00001q not found)
file /tmp/St32652.00001q saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.00001r not found)
file /tmp/St32652.00001r saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(915 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.00001s not found)
file /tmp/St32652.00001s saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.00001t not found)
file /tmp/St32652.00001t saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(38 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     33,169
                                                F(  25,   1326)   =    1920.90
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9790
                                                Adj R-squared     =     0.9781
                                                Root MSE          =     0.2663

                              (Std. Err. adjusted for 1,327 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -.7663723   .3694272    -2.07   0.038    -1.491098   -.0416467
             |
        year |
       1992  |    .323892   .0109241    29.65   0.000     .3024617    .3453224
       1993  |   .6879335   .0069994    98.29   0.000     .6742024    .7016645
       1994  |   .5884426   .0093762    62.76   0.000     .5700488    .6068365
       1995  |   .2625873   .0127837    20.54   0.000     .2375088    .2876657
       1996  |   .2184012   .0123832    17.64   0.000     .1941085     .242694
       1997  |   .2767065   .0109382    25.30   0.000     .2552484    .2981645
       1998  |   .2070428   .0119838    17.28   0.000     .1835335    .2305522
       1999  |   .2006449   .0120641    16.63   0.000     .1769781    .2243117
       2000  |    .240007   .0117285    20.46   0.000     .2169986    .2630155
       2001  |   .2465064   .0107806    22.87   0.000     .2253575    .2676552
       2002  |   .6053674   .0133678    45.29   0.000     .5791431    .6315917
       2003  |   .9941327   .0143584    69.24   0.000     .9659651      1.0223
       2004  |   1.062637   .0121662    87.34   0.000      1.03877    1.086504
       2005  |   .7325698   .0114999    63.70   0.000     .7100098    .7551297
       2006  |   .5943414   .0135239    43.95   0.000     .5678108     .620872
       2007  |   .5384442   .0128784    41.81   0.000       .51318    .5637084
       2008  |   .5900173   .0125639    46.96   0.000     .5653699    .6146646
       2009  |   .9901396   .0134748    73.48   0.000     .9637053    1.016574
       2010  |    1.88624   .0290391    64.96   0.000     1.829272    1.943207
       2011  |   1.943984   .0151548   128.28   0.000     1.914254    1.973714
       2012  |   1.714439   .0149109   114.98   0.000     1.685188    1.743691
       2013  |   1.461802   .0151819    96.29   0.000     1.432019    1.491585
       2014  |   1.162839   .0134714    86.32   0.000     1.136412    1.189267
       2015  |   .6336653   .0152405    41.58   0.000     .6037672    .6635635
             |
       _cons |   8.012974   .0076827  1042.99   0.000     7.997902    8.028045
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1327 categories)
9060
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.00001v not found)
file /tmp/St32652.00001v saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.00001w not found)
file /tmp/St32652.00001w saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(915 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.00001x not found)
file /tmp/St32652.00001x saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.000020 not found)
file /tmp/St32652.000020 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(38 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     32,894
                                                F(  25,   1315)   =    2060.27
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9792
                                                Adj R-squared     =     0.9784
                                                Root MSE          =     0.2617

                              (Std. Err. adjusted for 1,316 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -6.451138   .4547854   -14.19   0.000    -7.343322   -5.558954
             |
        year |
       1992  |   .1700924   .0130954    12.99   0.000     .1444023    .1957825
       1993  |   .6746564   .0070371    95.87   0.000     .6608512    .6884616
       1994  |   .6733569   .0100444    67.04   0.000      .653652    .6930618
       1995  |   .4086943   .0139984    29.20   0.000     .3812327     .436156
       1996  |   .3594636   .0135731    26.48   0.000     .3328364    .3860909
       1997  |   .3861464    .011869    32.53   0.000     .3628622    .4094306
       1998  |    .338423   .0132373    25.57   0.000     .3124544    .3643916
       1999  |   .3219533   .0128506    25.05   0.000     .2967434    .3471631
       2000  |   .3346252     .01243    26.92   0.000     .3102404      .35901
       2001  |   .3234153   .0114006    28.37   0.000     .3010499    .3457807
       2002  |   .7238975    .013467    53.75   0.000     .6974783    .7503166
       2003  |   .8577175    .015987    53.65   0.000     .8263548    .8890802
       2004  |    .989793   .0129831    76.24   0.000     .9643232    1.015263
       2005  |   .7834213   .0119153    65.75   0.000     .7600463    .8067964
       2006  |   .6734248   .0139542    48.26   0.000       .64605    .7007997
       2007  |   .6129139   .0130831    46.85   0.000     .5872478      .63858
       2008  |   .6285278   .0124476    50.49   0.000     .6041084    .6529472
       2009  |   .9375795    .013719    68.34   0.000      .910666    .9644929
       2010  |   1.484404   .0342889    43.29   0.000     1.417137    1.551671
       2011  |   1.843346   .0160769   114.66   0.000     1.811807    1.874885
       2012  |   1.804084   .0152713   118.14   0.000     1.774125    1.834042
       2013  |    1.58497   .0160915    98.50   0.000     1.553402    1.616537
       2014  |   1.245464    .013979    89.10   0.000     1.218041    1.272888
       2015  |   .7500426   .0157306    47.68   0.000     .7191828    .7809023
             |
       _cons |   8.060088   .0078899  1021.57   0.000      8.04461    8.075567
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1316 categories)
9065
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.000022 not found)
file /tmp/St32652.000022 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.000023 not found)
file /tmp/St32652.000023 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(915 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.000024 not found)
file /tmp/St32652.000024 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.000025 not found)
file /tmp/St32652.000025 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(38 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     32,769
                                                F(  25,   1310)   =    2047.46
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9792
                                                Adj R-squared     =     0.9783
                                                Root MSE          =     0.2615

                              (Std. Err. adjusted for 1,311 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -6.570862   .4568495   -14.38   0.000    -7.467099   -5.674625
             |
        year |
       1992  |   .1669287    .013102    12.74   0.000     .1412254    .1926319
       1993  |   .6745013   .0070474    95.71   0.000      .660676    .6883267
       1994  |   .6751426   .0101348    66.62   0.000     .6552603    .6950249
       1995  |   .4113121   .0142156    28.93   0.000     .3834243    .4391999
       1996  |   .3620079   .0137484    26.33   0.000     .3350366    .3889791
       1997  |   .3881638   .0120041    32.34   0.000     .3646145    .4117131
       1998  |    .340761    .013375    25.48   0.000     .3145223    .3669998
       1999  |   .3240748   .0129287    25.07   0.000     .2987116    .3494379
       2000  |   .3361784   .0125625    26.76   0.000     .3115335    .3608233
       2001  |   .3245381   .0115187    28.17   0.000      .301941    .3471351
       2002  |   .7261589   .0135217    53.70   0.000     .6996324    .7526854
       2003  |   .8550326    .015974    53.53   0.000     .8236951    .8863701
       2004  |   .9871775   .0128703    76.70   0.000     .9619288    1.012426
       2005  |   .7831368    .011981    65.36   0.000     .7596327    .8066408
       2006  |   .6739308   .0140387    48.01   0.000       .64639    .7014716
       2007  |   .6129979   .0131496    46.62   0.000     .5872013    .6387945
       2008  |   .6279695   .0124606    50.40   0.000     .6035246    .6524144
       2009  |   .9353954   .0136472    68.54   0.000     .9086226    .9621682
       2010  |   1.474961   .0342382    43.08   0.000     1.407794    1.542129
       2011  |   1.840155   .0159864   115.11   0.000     1.808793    1.871517
       2012  |   1.804945   .0153707   117.43   0.000     1.774792    1.835099
       2013  |   1.586577   .0162374    97.71   0.000     1.554723    1.618431
       2014  |   1.246431   .0140889    88.47   0.000     1.218792    1.274071
       2015  |   .7517462   .0158851    47.32   0.000     .7205831    .7829093
             |
       _cons |   8.068574   .0078734  1024.80   0.000     8.053128     8.08402
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1311 categories)
9070
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.000027 not found)
file /tmp/St32652.000027 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.000028 not found)
file /tmp/St32652.000028 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(915 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.000029 not found)
file /tmp/St32652.000029 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.00002a not found)
file /tmp/St32652.00002a saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(38 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     32,694
                                                F(  25,   1307)   =    1892.12
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9790
                                                Adj R-squared     =     0.9781
                                                Root MSE          =     0.2670

                              (Std. Err. adjusted for 1,308 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -.9769521    .367973    -2.65   0.008    -1.698834   -.2550697
             |
        year |
       1992  |   .3188748    .011139    28.63   0.000     .2970226     .340727
       1993  |   .6874371   .0070929    96.92   0.000     .6735224    .7013517
       1994  |   .5919158   .0091574    64.64   0.000      .573951    .6098805
       1995  |   .2685234    .012382    21.69   0.000     .2442327    .2928141
       1996  |   .2240707   .0121665    18.42   0.000     .2002026    .2479388
       1997  |   .2806376   .0108373    25.90   0.000     .2593772     .301898
       1998  |   .2111044   .0119742    17.63   0.000     .1876136    .2345952
       1999  |   .2044629   .0122432    16.70   0.000     .1804444    .2284815
       2000  |   .2431416   .0120516    20.18   0.000      .219499    .2667842
       2001  |   .2490662   .0110832    22.47   0.000     .2273234     .270809
       2002  |    .610047   .0138447    44.06   0.000     .5828868    .6372072
       2003  |   .9899742    .014106    70.18   0.000     .9623014    1.017647
       2004  |    1.06031   .0121264    87.44   0.000     1.036521      1.0841
       2005  |   .7344523   .0118124    62.18   0.000     .7112789    .7576256
       2006  |   .5968603   .0139779    42.70   0.000     .5694386    .6242819
       2007  |   .5410645   .0130832    41.36   0.000     .5153981    .5667308
       2008  |   .5907977   .0126846    46.58   0.000     .5659134    .6156821
       2009  |   .9880801   .0134841    73.28   0.000     .9616273    1.014533
       2010  |   1.871669   .0286468    65.34   0.000      1.81547    1.927867
       2011  |   1.940173   .0151105   128.40   0.000     1.910529    1.969816
       2012  |   1.717711   .0153059   112.23   0.000     1.687684    1.747738
       2013  |   1.466257   .0157406    93.15   0.000     1.435377    1.497136
       2014  |     1.1648   .0137186    84.91   0.000     1.137887    1.191713
       2015  |   .6361899   .0152805    41.63   0.000     .6062129     .666167
             |
       _cons |   8.020168   .0077763  1031.36   0.000     8.004912    8.035423
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1308 categories)
9075
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.00002c not found)
file /tmp/St32652.00002c saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.00002d not found)
file /tmp/St32652.00002d saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(915 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.00002e not found)
file /tmp/St32652.00002e saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.00002f not found)
file /tmp/St32652.00002f saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(38 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     32,344
                                                F(  25,   1293)   =    2014.95
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9791
                                                Adj R-squared     =     0.9782
                                                Root MSE          =     0.2613

                              (Std. Err. adjusted for 1,294 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -6.576558   .4640051   -14.17   0.000    -7.486843   -5.666273
             |
        year |
       1992  |   .1659919   .0132824    12.50   0.000     .1399344    .1920493
       1993  |   .6726959    .007046    95.47   0.000     .6588731    .6865186
       1994  |   .6733564   .0102444    65.73   0.000     .6532589     .693454
       1995  |   .4097253   .0144188    28.42   0.000     .3814384    .4380122
       1996  |   .3606213   .0139614    25.83   0.000     .3332319    .3880108
       1997  |   .3869393   .0121647    31.81   0.000     .3630746    .4108041
       1998  |   .3402537   .0135602    25.09   0.000     .3136512    .3668561
       1999  |   .3228272   .0130926    24.66   0.000     .2971422    .3485122
       2000  |   .3346064   .0126948    26.36   0.000     .3097018    .3595111
       2001  |   .3254365   .0116446    27.95   0.000     .3025921     .348281
       2002  |   .7275917   .0136232    53.41   0.000     .7008657    .7543177
       2003  |   .8554754   .0161728    52.90   0.000     .8237475    .8872032
       2004  |   .9865462   .0129423    76.23   0.000     .9611561    1.011936
       2005  |   .7828549   .0120368    65.04   0.000     .7592412    .8064686
       2006  |   .6747768   .0141358    47.74   0.000     .6470451    .7025085
       2007  |   .6135944   .0132532    46.30   0.000     .5875944    .6395945
       2008  |   .6285567   .0124909    50.32   0.000     .6040521    .6530613
       2009  |   .9351306   .0137425    68.05   0.000     .9081706    .9620906
       2010  |   1.473835   .0347686    42.39   0.000     1.405626    1.542044
       2011  |   1.838987   .0161577   113.81   0.000     1.807289    1.870686
       2012  |   1.804113   .0155069   116.34   0.000     1.773692    1.834535
       2013  |   1.585463   .0163939    96.71   0.000     1.553302    1.617625
       2014  |   1.246048   .0141762    87.90   0.000     1.218238    1.273859
       2015  |   .7506555   .0160513    46.77   0.000     .7191661     .782145
             |
       _cons |   8.085695    .007913  1021.83   0.000     8.070171    8.101219
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1294 categories)
9080
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.00002h not found)
file /tmp/St32652.00002h saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.00002i not found)
file /tmp/St32652.00002i saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(915 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.00002j not found)
file /tmp/St32652.00002j saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.00002k not found)
file /tmp/St32652.00002k saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(38 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     32,219
                                                F(  25,   1288)   =    1874.71
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9790
                                                Adj R-squared     =     0.9781
                                                Root MSE          =     0.2671

                              (Std. Err. adjusted for 1,289 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -.3350521   .3705664    -0.90   0.366    -1.062032    .3919278
             |
        year |
       1992  |     .33627   .0113539    29.62   0.000     .3139958    .3585443
       1993  |   .6896811   .0071323    96.70   0.000     .6756889    .7036734
       1994  |   .5827281   .0092631    62.91   0.000     .5645556    .6009005
       1995  |   .2521365   .0127037    19.85   0.000     .2272142    .2770588
       1996  |   .2079006   .0124777    16.66   0.000     .1834218    .2323795
       1997  |   .2683432   .0109948    24.41   0.000     .2467734     .289913
       1998  |   .1962135   .0122391    16.03   0.000     .1722028    .2202242
       1999  |   .1903676   .0124283    15.32   0.000     .1659856    .2147496
       2000  |   .2322066   .0121136    19.17   0.000     .2084419    .2559712
       2001  |   .2397642   .0111772    21.45   0.000     .2178366    .2616917
       2002  |   .5968934   .0135968    43.90   0.000     .5702191    .6235677
       2003  |   1.006164   .0144632    69.57   0.000     .9777902    1.034538
       2004  |   1.069504   .0125084    85.50   0.000     1.044965    1.094044
       2005  |   .7303899   .0117209    62.32   0.000     .7073957     .753384
       2006  |   .5897064   .0138076    42.71   0.000     .5626186    .6167942
       2007  |    .534511   .0129665    41.22   0.000     .5090733    .5599488
       2008  |   .5878745   .0127102    46.25   0.000     .5629396    .6128094
       2009  |   .9953168   .0137771    72.24   0.000     .9682887    1.022345
       2010  |   1.919134   .0296034    64.83   0.000     1.861058     1.97721
       2011  |   1.954488    .015575   125.49   0.000     1.923933    1.985043
       2012  |   1.709548   .0151715   112.68   0.000     1.679784    1.739311
       2013  |   1.454877   .0153989    94.48   0.000     1.424667    1.485087
       2014  |   1.157531   .0135503    85.42   0.000     1.130948    1.184114
       2015  |   .6254853   .0152356    41.05   0.000     .5955961    .6553745
             |
       _cons |    8.02033   .0078515  1021.50   0.000     8.004927    8.035733
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1289 categories)
9085
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.00002m not found)
file /tmp/St32652.00002m saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.00002n not found)
file /tmp/St32652.00002n saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(915 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.00002o not found)
file /tmp/St32652.00002o saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.00002p not found)
file /tmp/St32652.00002p saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(38 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     32,019
                                                F(  25,   1280)   =    2003.23
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9791
                                                Adj R-squared     =     0.9782
                                                Root MSE          =     0.2612

                              (Std. Err. adjusted for 1,281 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -6.635781   .4722979   -14.05   0.000    -7.562344   -5.709218
             |
        year |
       1992  |    .164608   .0134962    12.20   0.000     .1381308    .1910852
       1993  |   .6738204   .0070711    95.29   0.000     .6599481    .6876927
       1994  |    .675659   .0103516    65.27   0.000     .6553511     .695967
       1995  |   .4132991   .0146032    28.30   0.000     .3846503     .441948
       1996  |   .3639619    .014138    25.74   0.000     .3362257    .3916981
       1997  |   .3890715   .0123111    31.60   0.000     .3649192    .4132237
       1998  |   .3421735   .0137346    24.91   0.000     .3152288    .3691182
       1999  |   .3247207   .0132475    24.51   0.000     .2987316    .3507099
       2000  |   .3365156   .0128304    26.23   0.000     .3113447    .3616865
       2001  |   .3268346   .0117464    27.82   0.000     .3037903    .3498789
       2002  |   .7291069   .0137527    53.02   0.000     .7021266    .7560873
       2003  |   .8548004   .0163245    52.36   0.000     .8227747     .886826
       2004  |   .9868281   .0130176    75.81   0.000     .9612899    1.012366
       2005  |   .7847147   .0121084    64.81   0.000     .7609603    .8084691
       2006  |   .6763706   .0142499    47.47   0.000      .648415    .7043263
       2007  |   .6155247   .0133456    46.12   0.000     .5893431    .6417063
       2008  |   .6301744   .0125518    50.21   0.000     .6055501    .6547987
       2009  |   .9355846   .0138336    67.63   0.000     .9084456    .9627235
       2010  |   1.470994   .0353232    41.64   0.000     1.401696    1.540292
       2011  |   1.839123   .0162783   112.98   0.000     1.807188    1.871058
       2012  |   1.805704   .0156038   115.72   0.000     1.775092    1.836316
       2013  |    1.58805   .0165186    96.14   0.000     1.555643    1.620456
       2014  |   1.247846   .0142353    87.66   0.000     1.219918    1.275773
       2015  |   .7528432   .0161395    46.65   0.000     .7211805     .784506
             |
       _cons |   8.099843   .0079328  1021.06   0.000     8.084281    8.115406
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1281 categories)
9090
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.00002r not found)
file /tmp/St32652.00002r saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.00002s not found)
file /tmp/St32652.00002s saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(915 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.00002t not found)
file /tmp/St32652.00002t saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.00002u not found)
file /tmp/St32652.00002u saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(38 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     31,819
                                                F(  25,   1272)   =    2007.40
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9792
                                                Adj R-squared     =     0.9783
                                                Root MSE          =     0.2605

                              (Std. Err. adjusted for 1,273 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -6.608378   .4718197   -14.01   0.000    -7.534009   -5.682748
             |
        year |
       1992  |   .1658754   .0135055    12.28   0.000     .1393798    .1923709
       1993  |   .6749062   .0070901    95.19   0.000     .6609967    .6888157
       1994  |    .676531   .0103717    65.23   0.000     .6561834    .6968785
       1995  |   .4139895    .014626    28.31   0.000     .3852957    .4426833
       1996  |   .3643175   .0141232    25.80   0.000     .3366103    .3920248
       1997  |   .3890849    .012312    31.60   0.000     .3649307     .413239
       1998  |    .342114   .0137247    24.93   0.000     .3151884    .3690396
       1999  |   .3243888   .0132379    24.50   0.000     .2984183    .3503594
       2000  |   .3364717    .012833    26.22   0.000     .3112957    .3616478
       2001  |   .3271303   .0117622    27.81   0.000     .3040549    .3502057
       2002  |   .7285789   .0137912    52.83   0.000      .701523    .7556349
       2003  |   .8555113   .0162767    52.56   0.000     .8235792    .8874434
       2004  |   .9876378   .0129635    76.19   0.000     .9622057     1.01307
       2005  |   .7846731   .0121506    64.58   0.000     .7608355    .8085106
       2006  |   .6753048   .0142965    47.24   0.000     .6472575    .7033521
       2007  |   .6148523   .0134054    45.87   0.000     .5885532    .6411515
       2008  |   .6300302   .0125901    50.04   0.000     .6053306    .6547298
       2009  |   .9359533   .0138726    67.47   0.000     .9087376    .9631689
       2010  |   1.473849   .0352568    41.80   0.000     1.404681    1.543017
       2011  |   1.841157    .016261   113.23   0.000     1.809256    1.873058
       2012  |   1.806879   .0156593   115.39   0.000     1.776158      1.8376
       2013  |   1.589514   .0165892    95.82   0.000     1.556969    1.622059
       2014  |   1.248819   .0142841    87.43   0.000     1.220796    1.276843
       2015  |   .7539128    .016179    46.60   0.000     .7221723    .7856533
             |
       _cons |   8.108946     .00796  1018.72   0.000      8.09333    8.124562
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1273 categories)
9095
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.00002w not found)
file /tmp/St32652.00002w saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.00002x not found)
file /tmp/St32652.00002x saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(915 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.000030 not found)
file /tmp/St32652.000030 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.000031 not found)
file /tmp/St32652.000031 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(38 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     31,844
                                                F(  25,   1273)   =    1854.75
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9787
                                                Adj R-squared     =     0.9778
                                                Root MSE          =     0.2673

                              (Std. Err. adjusted for 1,274 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -.2730924   .3597669    -0.76   0.448    -.9788937    .4327089
             |
        year |
       1992  |   .3375619   .0109893    30.72   0.000     .3160027     .359121
       1993  |   .6898702   .0071628    96.31   0.000      .675818    .7039223
       1994  |   .5819313   .0092257    63.08   0.000      .563832    .6000305
       1995  |   .2509057   .0122797    20.43   0.000     .2268151    .2749963
       1996  |   .2061581   .0120722    17.08   0.000     .1824746    .2298416
       1997  |   .2669783    .010793    24.74   0.000     .2458042    .2881524
       1998  |   .1942145   .0118802    16.35   0.000     .1709075    .2175215
       1999  |    .188995   .0120041    15.74   0.000      .165445     .212545
       2000  |   .2312116   .0116561    19.84   0.000     .2083442    .2540789
       2001  |   .2385547   .0109604    21.77   0.000     .2170524    .2600571
       2002  |   .5943927   .0136625    43.51   0.000     .5675892    .6211963
       2003  |   1.006857   .0146417    68.77   0.000     .9781323    1.035581
       2004  |   1.069577   .0126928    84.27   0.000     1.044676    1.094478
       2005  |   .7281301   .0117509    61.96   0.000     .7050768    .7511834
       2006  |   .5871651    .014021    41.88   0.000     .5596584    .6146719
       2007  |   .5322881   .0129814    41.00   0.000     .5068208    .5577553
       2008  |   .5859702   .0127319    46.02   0.000     .5609923     .610948
       2009  |   .9944572   .0138158    71.98   0.000     .9673529    1.021562
       2010  |   1.922184   .0291105    66.03   0.000     1.865074    1.979294
       2011  |   1.954348   .0158198   123.54   0.000     1.923312    1.985384
       2012  |   1.707304    .014911   114.50   0.000     1.678051    1.736557
       2013  |   1.452685   .0151461    95.91   0.000     1.422971    1.482399
       2014  |   1.155569   .0134772    85.74   0.000     1.129129    1.182009
       2015  |    .623328   .0150667    41.37   0.000     .5937697    .6528862
             |
       _cons |   8.030048   .0078891  1017.87   0.000     8.014571    8.045525
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1274 categories)
9100
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.000033 not found)
file /tmp/St32652.000033 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.000034 not found)
file /tmp/St32652.000034 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(915 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.000035 not found)
file /tmp/St32652.000035 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.000036 not found)
file /tmp/St32652.000036 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(38 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     31,569
                                                F(  25,   1262)   =    1995.53
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9792
                                                Adj R-squared     =     0.9784
                                                Root MSE          =     0.2602

                              (Std. Err. adjusted for 1,263 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -6.622815   .4745713   -13.96   0.000    -7.553851    -5.69178
             |
        year |
       1992  |   .1653114    .013565    12.19   0.000     .1386989    .1919239
       1993  |   .6751643   .0071208    94.82   0.000     .6611944    .6891341
       1994  |    .677218   .0104343    64.90   0.000     .6567476    .6976885
       1995  |   .4147235   .0147198    28.17   0.000     .3858455    .4436015
       1996  |   .3646005    .014206    25.67   0.000     .3367304    .3924705
       1997  |   .3895437   .0123768    31.47   0.000     .3652623    .4138252
       1998  |   .3432822   .0138148    24.85   0.000     .3161798    .3703846
       1999  |   .3258231    .013294    24.51   0.000     .2997423    .3519039
       2000  |    .338241   .0129105    26.20   0.000     .3129127    .3635693
       2001  |   .3275361   .0118133    27.73   0.000     .3043602     .350712
       2002  |   .7295771   .0139058    52.47   0.000      .702296    .7568582
       2003  |   .8563279   .0163291    52.44   0.000     .8242928    .8883631
       2004  |    .988626   .0130132    75.97   0.000     .9630961    1.014156
       2005  |   .7861037   .0122171    64.34   0.000     .7621356    .8100718
       2006  |   .6767546    .014394    47.02   0.000     .6485158    .7049933
       2007  |    .615522    .013486    45.64   0.000     .5890645    .6419796
       2008  |   .6307741   .0126534    49.85   0.000     .6059501     .655598
       2009  |   .9358169   .0139118    67.27   0.000     .9085242    .9631096
       2010  |   1.472654   .0353361    41.68   0.000      1.40333    1.541978
       2011  |   1.841387   .0163331   112.74   0.000     1.809344     1.87343
       2012  |   1.806643   .0157366   114.81   0.000     1.775771    1.837516
       2013  |    1.58972    .016709    95.14   0.000     1.556939      1.6225
       2014  |   1.250358   .0143501    87.13   0.000     1.222205     1.27851
       2015  |   .7567875   .0162448    46.59   0.000     .7249178    .7886572
             |
       _cons |   8.114441   .0079992  1014.41   0.000     8.098748    8.130134
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1263 categories)
9105
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.000038 not found)
file /tmp/St32652.000038 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.000039 not found)
file /tmp/St32652.000039 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(915 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.00003a not found)
file /tmp/St32652.00003a saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.00003b not found)
file /tmp/St32652.00003b saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(38 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     31,519
                                                F(  25,   1260)   =    1835.43
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9786
                                                Adj R-squared     =     0.9777
                                                Root MSE          =     0.2671

                              (Std. Err. adjusted for 1,261 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |   .0309669   .4030792     0.08   0.939    -.7598135    .8217472
             |
        year |
       1992  |   .3455124   .0117142    29.50   0.000     .3225309    .3684939
       1993  |   .6906927   .0071869    96.10   0.000      .676593    .7047923
       1994  |   .5777394    .009788    59.03   0.000     .5585368    .5969419
       1995  |   .2432142   .0131551    18.49   0.000     .2174059    .2690226
       1996  |   .1977018   .0129454    15.27   0.000     .1723048    .2230987
       1997  |    .260213   .0113665    22.89   0.000     .2379136    .2825124
       1998  |   .1862913   .0126024    14.78   0.000     .1615672    .2110154
       1999  |   .1815683   .0127693    14.22   0.000     .1565168    .2066198
       2000  |   .2246683   .0123417    18.20   0.000     .2004557    .2488809
       2001  |   .2332515   .0113578    20.54   0.000     .2109692    .2555338
       2002  |   .5871389   .0143719    40.85   0.000     .5589433    .6153344
       2003  |   1.013967   .0150076    67.56   0.000      .984524    1.043409
       2004  |    1.07377   .0127321    84.34   0.000     1.048792    1.098748
       2005  |   .7250621   .0119071    60.89   0.000     .7017021    .7484221
       2006  |   .5818269   .0140512    41.41   0.000     .5542607    .6093932
       2007  |   .5277197   .0133721    39.46   0.000     .5014857    .5539538
       2008  |    .583363   .0130242    44.79   0.000     .5578114    .6089146
       2009  |   .9972409   .0139318    71.58   0.000     .9699087    1.024573
       2010  |   1.943873   .0314363    61.84   0.000       1.8822    2.005546
       2011  |   1.959924   .0158148   123.93   0.000     1.928898     1.99095
       2012  |   1.702992   .0154805   110.01   0.000     1.672622    1.733363
       2013  |   1.446717   .0158436    91.31   0.000     1.415635      1.4778
       2014  |   1.151164   .0139891    82.29   0.000     1.123719    1.178608
       2015  |   .6170494   .0157237    39.24   0.000     .5862018    .6478969
             |
       _cons |   8.036387   .0079198  1014.72   0.000     8.020849    8.051924
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1261 categories)
9110
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.00003d not found)
file /tmp/St32652.00003d saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.00003e not found)
file /tmp/St32652.00003e saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(915 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.00003f not found)
file /tmp/St32652.00003f saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.00003g not found)
file /tmp/St32652.00003g saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(38 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     31,269
                                                F(  25,   1250)   =    1968.18
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9793
                                                Adj R-squared     =     0.9784
                                                Root MSE          =     0.2600

                              (Std. Err. adjusted for 1,251 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -6.635291   .4798368   -13.83   0.000    -7.576665   -5.693916
             |
        year |
       1992  |    .165456   .0137005    12.08   0.000     .1385775    .1923345
       1993  |   .6758499    .007145    94.59   0.000     .6618323    .6898675
       1994  |   .6773519   .0105071    64.47   0.000     .6567384    .6979654
       1995  |   .4143664   .0148494    27.90   0.000     .3852338     .443499
       1996  |   .3640801   .0143456    25.38   0.000     .3359359    .3922243
       1997  |   .3889863   .0124896    31.14   0.000     .3644834    .4134893
       1998  |   .3428335    .013946    24.58   0.000     .3154733    .3701936
       1999  |   .3243268   .0133946    24.21   0.000     .2980485    .3506051
       2000  |   .3361711   .0129515    25.96   0.000      .310762    .3615802
       2001  |   .3261874   .0118892    27.44   0.000     .3028625    .3495124
       2002  |   .7293853   .0139984    52.11   0.000     .7019224    .7568482
       2003  |   .8560322   .0164573    52.02   0.000     .8237452    .8883191
       2004  |    .988552   .0131009    75.46   0.000     .9628498    1.014254
       2005  |   .7859397   .0122646    64.08   0.000     .7618781    .8100012
       2006  |   .6772214   .0144625    46.83   0.000     .6488479    .7055949
       2007  |   .6157136    .013532    45.50   0.000     .5891657    .6422615
       2008  |   .6310268   .0126991    49.69   0.000     .6061129    .6559407
       2009  |   .9357241    .014002    66.83   0.000     .9082542     .963194
       2010  |   1.471804   .0357357    41.19   0.000     1.401695    1.541912
       2011  |   1.841227   .0164731   111.77   0.000     1.808909    1.873545
       2012  |   1.806897   .0158204   114.21   0.000     1.775859    1.837934
       2013  |   1.590181   .0167967    94.67   0.000     1.557229    1.623134
       2014  |   1.251154    .014415    86.80   0.000     1.222874    1.279434
       2015  |   .7574092   .0163386    46.36   0.000     .7253551    .7894633
             |
       _cons |   8.125146   .0080253  1012.44   0.000     8.109401     8.14089
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1251 categories)
9115
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.00003i not found)
file /tmp/St32652.00003i saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.00003j not found)
file /tmp/St32652.00003j saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(915 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.00003k not found)
file /tmp/St32652.00003k saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.00003l not found)
file /tmp/St32652.00003l saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(38 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     31,094
                                                F(  25,   1243)   =    1953.16
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9793
                                                Adj R-squared     =     0.9784
                                                Root MSE          =     0.2600

                              (Std. Err. adjusted for 1,244 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -6.676503   .4833551   -13.81   0.000    -7.624785   -5.728221
             |
        year |
       1992  |   .1644997   .0137935    11.93   0.000     .1374386    .1915607
       1993  |   .6757688   .0071652    94.31   0.000     .6617115     .689826
       1994  |   .6783902   .0105411    64.36   0.000     .6577099    .6990705
       1995  |   .4155734    .014929    27.84   0.000     .3862845    .4448622
       1996  |   .3652439   .0144167    25.33   0.000     .3369601    .3935277
       1997  |   .3899135   .0125398    31.09   0.000     .3653119     .414515
       1998  |   .3442884   .0140089    24.58   0.000     .3168047    .3717721
       1999  |   .3255183   .0134424    24.22   0.000      .299146    .3518907
       2000  |   .3367263   .0129903    25.92   0.000     .3112411    .3622116
       2001  |   .3270068   .0119113    27.45   0.000     .3036383    .3503754
       2002  |   .7304212   .0140441    52.01   0.000     .7028685    .7579739
       2003  |    .854855   .0165543    51.64   0.000     .8223776    .8873324
       2004  |   .9874557   .0131411    75.14   0.000     .9616746    1.013237
       2005  |   .7860446   .0122902    63.96   0.000     .7619327    .8101565
       2006  |   .6780913   .0145065    46.74   0.000     .6496314    .7065512
       2007  |   .6169726   .0135662    45.48   0.000     .5903574    .6435877
       2008  |   .6318631   .0127312    49.63   0.000     .6068861    .6568402
       2009  |   .9359275   .0140557    66.59   0.000     .9083521    .9635029
       2010  |   1.469132   .0359935    40.82   0.000     1.398517    1.539747
       2011  |   1.840582   .0165551   111.18   0.000     1.808103    1.873061
       2012  |   1.807838    .015879   113.85   0.000     1.776686    1.838991
       2013  |   1.591304   .0168667    94.35   0.000     1.558214    1.624395
       2014  |   1.251838   .0144672    86.53   0.000     1.223455    1.280221
       2015  |   .7578004   .0164112    46.18   0.000     .7256036    .7899972
             |
       _cons |   8.134197   .0080401  1011.70   0.000     8.118424    8.149971
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1244 categories)
9120
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.00003n not found)
file /tmp/St32652.00003n saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.00003o not found)
file /tmp/St32652.00003o saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(915 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.00003p not found)
file /tmp/St32652.00003p saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.00003q not found)
file /tmp/St32652.00003q saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(38 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     31,144
                                                F(  25,   1245)   =    1819.25
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9786
                                                Adj R-squared     =     0.9777
                                                Root MSE          =     0.2674

                              (Std. Err. adjusted for 1,246 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -.2226372   .3758451    -0.59   0.554    -.9599968    .5147224
             |
        year |
       1992  |   .3391914   .0112602    30.12   0.000     .3171003    .3612825
       1993  |   .6917373   .0072358    95.60   0.000     .6775417     .705933
       1994  |   .5825944   .0095999    60.69   0.000     .5637606    .6014281
       1995  |   .2508387   .0126867    19.77   0.000      .225949    .2757284
       1996  |   .2042465   .0123207    16.58   0.000     .1800748    .2284181
       1997  |   .2648116   .0108338    24.44   0.000     .2435571     .286066
       1998  |   .1919719   .0119837    16.02   0.000     .1684614    .2154824
       1999  |   .1867931   .0120957    15.44   0.000     .1630629    .2105233
       2000  |   .2292101   .0118019    19.42   0.000     .2060562    .2523639
       2001  |   .2360236   .0108357    21.78   0.000     .2147653    .2572819
       2002  |    .591582   .0136025    43.49   0.000     .5648956    .6182684
       2003  |   1.007648   .0149294    67.49   0.000     .9783585    1.036937
       2004  |   1.070404   .0126911    84.34   0.000     1.045506    1.095303
       2005  |   .7270802   .0118165    61.53   0.000     .7038978    .7502627
       2006  |   .5849282   .0138439    42.25   0.000     .5577682    .6120882
       2007  |   .5292662   .0132648    39.90   0.000     .5032424    .5552901
       2008  |   .5832802   .0129916    44.90   0.000     .5577924    .6087679
       2009  |   .9932126   .0140623    70.63   0.000     .9656242    1.020801
       2010  |   1.926127   .0303857    63.39   0.000     1.866514     1.98574
       2011  |   1.955407   .0159318   122.74   0.000     1.924151    1.986663
       2012  |   1.706789   .0153545   111.16   0.000     1.676666    1.736913
       2013  |   1.451624   .0155036    93.63   0.000     1.421208     1.48204
       2014  |   1.154758   .0137622    83.91   0.000     1.127759    1.181758
       2015  |   .6227412   .0152648    40.80   0.000     .5927937    .6526887
             |
       _cons |   8.040682   .0079772  1007.96   0.000     8.025032    8.056332
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1246 categories)
9125
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.00003s not found)
file /tmp/St32652.00003s saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.00003t not found)
file /tmp/St32652.00003t saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(915 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.00003u not found)
file /tmp/St32652.00003u saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.00003v not found)
file /tmp/St32652.00003v saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(38 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     30,744
                                                F(  25,   1229)   =    1925.42
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9792
                                                Adj R-squared     =     0.9784
                                                Root MSE          =     0.2604

                              (Std. Err. adjusted for 1,230 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -6.679371   .4857831   -13.75   0.000    -7.632427   -5.726315
             |
        year |
       1992  |   .1648123   .0138445    11.90   0.000     .1376508    .1919739
       1993  |   .6766056   .0072183    93.74   0.000     .6624441    .6907671
       1994  |   .6789602   .0106296    63.87   0.000     .6581061    .6998143
       1995  |   .4165166   .0150304    27.71   0.000     .3870285    .4460046
       1996  |   .3659767   .0145059    25.23   0.000     .3375175    .3944358
       1997  |   .3906573   .0126344    30.92   0.000     .3658699    .4154447
       1998  |   .3451574   .0141117    24.46   0.000     .3174717     .372843
       1999  |   .3266428   .0135389    24.13   0.000     .3000809    .3532048
       2000  |    .337712   .0130904    25.80   0.000       .31203     .363394
       2001  |   .3273572   .0120102    27.26   0.000     .3037945    .3509199
       2002  |    .730954   .0141806    51.55   0.000     .7031331    .7587748
       2003  |   .8553576   .0166097    51.50   0.000     .8227711    .8879442
       2004  |   .9876077   .0132065    74.78   0.000     .9616979    1.013517
       2005  |   .7865389   .0123864    63.50   0.000      .762238    .8108398
       2006  |     .67866   .0146329    46.38   0.000     .6499518    .7073682
       2007  |   .6172495   .0136797    45.12   0.000     .5904113    .6440877
       2008  |   .6316164   .0128301    49.23   0.000     .6064451    .6567878
       2009  |   .9363349   .0141474    66.18   0.000     .9085793    .9640906
       2010  |   1.469624   .0361436    40.66   0.000     1.398714    1.540534
       2011  |   1.841772   .0166582   110.56   0.000      1.80909    1.874453
       2012  |   1.808854   .0160163   112.94   0.000     1.777432    1.840276
       2013  |   1.592367   .0170032    93.65   0.000     1.559008    1.625725
       2014  |   1.252684   .0145868    85.88   0.000     1.224066    1.281301
       2015  |    .757649   .0165242    45.85   0.000     .7252302    .7900678
             |
       _cons |   8.146447   .0081051  1005.10   0.000     8.130545    8.162348
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1230 categories)
9130
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.00003x not found)
file /tmp/St32652.00003x saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.000040 not found)
file /tmp/St32652.000040 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(915 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.000041 not found)
file /tmp/St32652.000041 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.000042 not found)
file /tmp/St32652.000042 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(38 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     30,794
                                                F(  25,   1231)   =    1789.12
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9786
                                                Adj R-squared     =     0.9776
                                                Root MSE          =     0.2676

                              (Std. Err. adjusted for 1,232 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |   .3723747   .4214593     0.88   0.377    -.4544834    1.199233
             |
        year |
       1992  |   .3556238   .0123853    28.71   0.000     .3313252    .3799223
       1993  |   .6928697   .0073039    94.86   0.000     .6785402    .7071992
       1994  |   .5733401   .0099211    57.79   0.000     .5538759    .5928043
       1995  |   .2353363   .0134064    17.55   0.000     .2090343    .2616383
       1996  |   .1890252    .013093    14.44   0.000     .1633381    .2147124
       1997  |   .2532039   .0114138    22.18   0.000     .2308114    .2755965
       1998  |   .1779133   .0127451    13.96   0.000     .1529087    .2029179
       1999  |   .1740323   .0126807    13.72   0.000      .149154    .1989105
       2000  |    .219168   .0121905    17.98   0.000     .1952515    .2430845
       2001  |   .2277568   .0111725    20.39   0.000     .2058376     .249676
       2002  |   .5794272   .0143841    40.28   0.000     .5512071    .6076473
       2003  |   1.021631   .0155678    65.62   0.000     .9910883    1.052173
       2004  |   1.076887   .0129527    83.14   0.000     1.051475    1.102299
       2005  |    .720607   .0121025    59.54   0.000     .6968632    .7443509
       2006  |   .5758546   .0143378    40.16   0.000     .5477253    .6039839
       2007  |   .5209441   .0135881    38.34   0.000     .4942857    .5476026
       2008  |   .5781383   .0132059    43.78   0.000     .5522297    .6040468
       2009  |   .9977577   .0140939    70.79   0.000      .970107    1.025408
       2010  |   1.967261   .0329415    59.72   0.000     1.902633    2.031888
       2011  |   1.965155   .0161916   121.37   0.000     1.933388    1.996921
       2012  |   1.696628   .0157958   107.41   0.000     1.665638    1.727617
       2013  |   1.437843   .0162169    88.66   0.000     1.406028    1.469659
       2014  |   1.145573   .0142384    80.46   0.000     1.117639    1.173507
       2015  |   .6105252   .0160144    38.12   0.000     .5791067    .6419436
             |
       _cons |   8.045849    .008007  1004.85   0.000      8.03014    8.061558
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1232 categories)
9135
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.000044 not found)
file /tmp/St32652.000044 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.000045 not found)
file /tmp/St32652.000045 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(915 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.000046 not found)
file /tmp/St32652.000046 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.000047 not found)
file /tmp/St32652.000047 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(38 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     30,444
                                                F(  25,   1217)   =    1914.02
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9794
                                                Adj R-squared     =     0.9785
                                                Root MSE          =     0.2597

                              (Std. Err. adjusted for 1,218 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -6.671246   .4869883   -13.70   0.000    -7.626676   -5.715816
             |
        year |
       1992  |   .1649521   .0138546    11.91   0.000     .1377706    .1921337
       1993  |   .6768546   .0072437    93.44   0.000      .662643    .6910661
       1994  |   .6786479   .0106521    63.71   0.000     .6577494    .6995464
       1995  |   .4159112   .0150528    27.63   0.000     .3863788    .4454436
       1996  |   .3653447   .0145197    25.16   0.000     .3368583     .393831
       1997  |   .3904643    .012659    30.84   0.000     .3656285    .4153002
       1998  |   .3448333   .0141489    24.37   0.000     .3170744    .3725922
       1999  |   .3269958   .0136226    24.00   0.000     .3002694    .3537222
       2000  |   .3382061   .0131701    25.68   0.000     .3123674    .3640447
       2001  |   .3278189   .0120879    27.12   0.000     .3041034    .3515344
       2002  |   .7318461   .0143189    51.11   0.000     .7037536    .7599385
       2003  |   .8566346   .0165776    51.67   0.000     .8241108    .8891585
       2004  |   .9887479   .0132043    74.88   0.000     .9628421    1.014654
       2005  |   .7876167   .0124645    63.19   0.000     .7631624     .812071
       2006  |   .6797851   .0147505    46.09   0.000     .6508459    .7087243
       2007  |   .6181311   .0137755    44.87   0.000     .5911048    .6451573
       2008  |   .6327242   .0129063    49.02   0.000     .6074031    .6580452
       2009  |   .9377606    .014179    66.14   0.000     .9099426    .9655785
       2010  |   1.471618   .0361236    40.74   0.000     1.400746    1.542489
       2011  |   1.842882   .0166843   110.46   0.000     1.810149    1.875615
       2012  |   1.810331    .016134   112.21   0.000     1.778678    1.841985
       2013  |   1.593869   .0171118    93.14   0.000     1.560298    1.627441
       2014  |   1.254354   .0146858    85.41   0.000     1.225542    1.283166
       2015  |   .7590877   .0166143    45.69   0.000     .7264919    .7916835
             |
       _cons |   8.158322   .0081465  1001.46   0.000     8.142339    8.174304
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1218 categories)
9140
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.000049 not found)
file /tmp/St32652.000049 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.00004a not found)
file /tmp/St32652.00004a saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(915 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.00004b not found)
file /tmp/St32652.00004b saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.00004c not found)
file /tmp/St32652.00004c saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(38 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     30,194
                                                F(  25,   1207)   =    1895.70
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9793
                                                Adj R-squared     =     0.9785
                                                Root MSE          =     0.2594

                              (Std. Err. adjusted for 1,208 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -6.882923   .4626797   -14.88   0.000    -7.790669   -5.975177
             |
        year |
       1992  |   .1589341   .0132598    11.99   0.000     .1329194    .1849489
       1993  |   .6765811   .0072767    92.98   0.000     .6623047    .6908576
       1994  |    .682022   .0104308    65.39   0.000     .6615575    .7024865
       1995  |   .4217566   .0145498    28.99   0.000     .3932109    .4503023
       1996  |   .3707121   .0139692    26.54   0.000     .3433055    .3981188
       1997  |   .3940575   .0123094    32.01   0.000     .3699072    .4182078
       1998  |   .3495442   .0138394    25.26   0.000     .3223923    .3766961
       1999  |   .3310082   .0133831    24.73   0.000     .3047514    .3572649
       2000  |   .3417372   .0128652    26.56   0.000     .3164965    .3669779
       2001  |   .3305861   .0120124    27.52   0.000     .3070187    .3541535
       2002  |   .7347924   .0141347    51.99   0.000     .7070611    .7625237
       2003  |    .851109    .016325    52.14   0.000     .8190805    .8831375
       2004  |   .9851246   .0132454    74.37   0.000     .9591381    1.011111
       2005  |   .7888734   .0123532    63.86   0.000     .7646373    .8131094
       2006  |    .682333   .0145903    46.77   0.000     .6537079    .7109581
       2007  |   .6202183   .0136402    45.47   0.000     .5934571    .6469796
       2008  |   .6333156   .0129092    49.06   0.000     .6079887    .6586425
       2009  |   .9350776   .0141631    66.02   0.000     .9072905    .9628647
       2010  |   1.456126   .0346684    42.00   0.000     1.388109    1.524143
       2011  |   1.838585   .0165744   110.93   0.000     1.806067    1.871103
       2012  |   1.813226   .0160351   113.08   0.000     1.781767    1.844686
       2013  |   1.598194   .0168372    94.92   0.000      1.56516    1.631227
       2014  |   1.257664   .0145444    86.47   0.000     1.229129    1.286199
       2015  |   .7639267   .0163428    46.74   0.000     .7318632    .7959901
             |
       _cons |   8.171616   .0082002   996.51   0.000     8.155528    8.187704
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1208 categories)
9145
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.00004e not found)
file /tmp/St32652.00004e saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.00004f not found)
file /tmp/St32652.00004f saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(915 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.00004g not found)
file /tmp/St32652.00004g saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.00004h not found)
file /tmp/St32652.00004h saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(38 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     30,094
                                                F(  25,   1203)   =    1757.02
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9786
                                                Adj R-squared     =     0.9776
                                                Root MSE          =     0.2673

                              (Std. Err. adjusted for 1,204 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -.2937222   .4503505    -0.65   0.514    -1.177282    .5898376
             |
        year |
       1992  |   .3376033   .0135011    25.01   0.000      .311115    .3640916
       1993  |   .6913746   .0073475    94.10   0.000     .6769593    .7057899
       1994  |   .5836744   .0101435    57.54   0.000     .5637735    .6035754
       1995  |   .2526121   .0138427    18.25   0.000     .2254535    .2797706
       1996  |   .2057335   .0134176    15.33   0.000     .1794089     .232058
       1997  |   .2652083   .0115077    23.05   0.000     .2426309    .2877856
       1998  |   .1921799   .0130915    14.68   0.000     .1664952    .2178646
       1999  |   .1869672   .0131358    14.23   0.000     .1611957    .2127388
       2000  |   .2297964   .0125866    18.26   0.000     .2051023    .2544905
       2001  |   .2370071   .0111794    21.20   0.000     .2150738    .2589404
       2002  |   .5919216   .0140375    42.17   0.000     .5643808    .6194623
       2003  |   1.004876   .0169838    59.17   0.000     .9715544    1.038197
       2004  |    1.06731   .0135564    78.73   0.000     1.040713    1.093907
       2005  |   .7253715    .011879    61.06   0.000     .7020657    .7486773
       2006  |   .5839675   .0140424    41.59   0.000     .5564172    .6115178
       2007  |   .5281712   .0132454    39.88   0.000     .5021846    .5541578
       2008  |   .5826292   .0129096    45.13   0.000     .5573014    .6079571
       2009  |   .9897297   .0146723    67.46   0.000     .9609435    1.018516
       2010  |   1.917522   .0361531    53.04   0.000     1.846592    1.988453
       2011  |   1.951072   .0173475   112.47   0.000     1.917037    1.985107
       2012  |   1.705149   .0153496   111.09   0.000     1.675034    1.735264
       2013  |   1.450559   .0158407    91.57   0.000     1.419481    1.481638
       2014  |   1.154491   .0139502    82.76   0.000     1.127122    1.181861
       2015  |   .6229855   .0160145    38.90   0.000      .591566     .654405
             |
       _cons |   8.051695   .0080486  1000.38   0.000     8.035904    8.067486
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1204 categories)
9150
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.00004j not found)
file /tmp/St32652.00004j saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.00004k not found)
file /tmp/St32652.00004k saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(915 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.00004l not found)
file /tmp/St32652.00004l saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.00004m not found)
file /tmp/St32652.00004m saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(32 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     29,750
                                                F(  25,   1189)   =    1872.78
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9795
                                                Adj R-squared     =     0.9787
                                                Root MSE          =     0.2585

                              (Std. Err. adjusted for 1,190 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -6.908034   .4706203   -14.68   0.000    -7.831373   -5.984695
             |
        year |
       1992  |   .1587818   .0134094    11.84   0.000     .1324731    .1850904
       1993  |   .6766806   .0073262    92.36   0.000     .6623068    .6910544
       1994  |   .6829328   .0105219    64.91   0.000     .6622893    .7035764
       1995  |   .4226878   .0147366    28.68   0.000     .3937751    .4516005
       1996  |   .3722783   .0141658    26.28   0.000     .3444855    .4000711
       1997  |   .3957959   .0124936    31.68   0.000     .3712841    .4203078
       1998  |   .3515482   .0140241    25.07   0.000     .3240335    .3790629
       1999  |   .3330512   .0135353    24.61   0.000     .3064955    .3596069
       2000  |   .3443063   .0129505    26.59   0.000      .318898    .3697146
       2001  |   .3334232   .0120879    27.58   0.000     .3097073    .3571391
       2002  |   .7379043   .0142909    51.63   0.000     .7098661    .7659425
       2003  |   .8556225   .0163211    52.42   0.000     .8236011    .8876439
       2004  |   .9891471   .0133344    74.18   0.000     .9629856    1.015309
       2005  |      .7932   .0124838    63.54   0.000     .7687073    .8176928
       2006  |   .6870579   .0147802    46.48   0.000     .6580597    .7160561
       2007  |   .6255993   .0137616    45.46   0.000     .5985997     .652599
       2008  |   .6391273   .0128372    49.79   0.000     .6139413    .6643133
       2009  |   .9390857   .0141918    66.17   0.000     .9112419    .9669295
       2010  |   1.457437   .0350767    41.55   0.000     1.388618    1.526256
       2011  |   1.841407   .0165993   110.93   0.000      1.80884    1.873974
       2012  |   1.816598   .0162553   111.75   0.000     1.784706     1.84849
       2013  |   1.601555   .0170821    93.76   0.000     1.568041     1.63507
       2014  |   1.261704   .0147406    85.59   0.000     1.232783    1.290624
       2015  |   .7673261   .0165693    46.31   0.000     .7348177    .7998344
             |
       _cons |   8.187447   .0082593   991.30   0.000     8.171243    8.203651
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1190 categories)
9155
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.00004o not found)
file /tmp/St32652.00004o saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.00004p not found)
file /tmp/St32652.00004p saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(915 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.00004q not found)
file /tmp/St32652.00004q saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.00004r not found)
file /tmp/St32652.00004r saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(38 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     29,794
                                                F(  25,   1191)   =    1747.05
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9787
                                                Adj R-squared     =     0.9777
                                                Root MSE          =     0.2675

                              (Std. Err. adjusted for 1,192 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |   .1722461   .5321058     0.32   0.746    -.8717231    1.216215
             |
        year |
       1992  |   .3494009   .0153796    22.72   0.000     .3192269     .379575
       1993  |   .6913005   .0073657    93.85   0.000     .6768493    .7057517
       1994  |   .5754433   .0113171    50.85   0.000     .5532396     .597647
       1995  |   .2396102   .0161144    14.87   0.000     .2079945     .271226
       1996  |   .1926604   .0155961    12.35   0.000     .1620616    .2232592
       1997  |   .2550465   .0130264    19.58   0.000     .2294892    .2806038
       1998  |   .1809959   .0147982    12.23   0.000     .1519624    .2100294
       1999  |   .1766085   .0146824    12.03   0.000     .1478022    .2054149
       2000  |   .2210841   .0135289    16.34   0.000     .1945411    .2476272
       2001  |   .2307744   .0120311    19.18   0.000     .2071698    .2543789
       2002  |   .5833915   .0154331    37.80   0.000     .5531125    .6136705
       2003  |   1.016477   .0180805    56.22   0.000     .9810037     1.05195
       2004  |   1.073174   .0141667    75.75   0.000      1.04538    1.100969
       2005  |   .7217746   .0121818    59.25   0.000     .6978745    .7456747
       2006  |   .5783552    .014636    39.52   0.000     .5496399    .6070705
       2007  |   .5232106   .0136828    38.24   0.000     .4963656    .5500557
       2008  |   .5804527   .0130733    44.40   0.000     .5548035    .6061019
       2009  |    .994839   .0151867    65.51   0.000     .9650434    1.024635
       2010  |   1.951326   .0421525    46.29   0.000     1.868625    2.034027
       2011  |    1.95975   .0185494   105.65   0.000     1.923357    1.996143
       2012  |   1.698141     .01569   108.23   0.000     1.667357    1.728924
       2013  |   1.440537   .0169456    85.01   0.000      1.40729    1.473783
       2014  |   1.147386   .0146729    78.20   0.000     1.118598    1.176173
       2015  |   .6138618   .0172081    35.67   0.000     .5801002    .6476234
             |
       _cons |   8.055174   .0081207   991.93   0.000     8.039242    8.071107
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1192 categories)
9160
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.00004t not found)
file /tmp/St32652.00004t saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.00004u not found)
file /tmp/St32652.00004u saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(915 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.00004v not found)
file /tmp/St32652.00004v saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.00004w not found)
file /tmp/St32652.00004w saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(32 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     29,550
                                                F(  25,   1181)   =    1860.01
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9793
                                                Adj R-squared     =     0.9785
                                                Root MSE          =     0.2581

                              (Std. Err. adjusted for 1,182 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -6.945092   .4750678   -14.62   0.000    -7.877163   -6.013021
             |
        year |
       1992  |   .1580736   .0135199    11.69   0.000     .1315479    .1845994
       1993  |   .6753548   .0072598    93.03   0.000     .6611113    .6895983
       1994  |   .6826819    .010613    64.32   0.000     .6618595    .7035044
       1995  |   .4237008   .0148329    28.56   0.000     .3945991    .4528026
       1996  |   .3726527   .0142551    26.14   0.000     .3446846    .4006209
       1997  |   .3963528   .0125605    31.56   0.000     .3717095    .4209961
       1998  |   .3518546   .0141264    24.91   0.000     .3241391    .3795702
       1999  |   .3326567   .0136321    24.40   0.000     .3059109    .3594024
       2000  |   .3434416   .0130134    26.39   0.000     .3179096    .3689736
       2001  |   .3334071   .0121287    27.49   0.000     .3096109    .3572034
       2002  |   .7385145   .0143002    51.64   0.000     .7104579     .766571
       2003  |   .8547223   .0164173    52.06   0.000      .822512    .8869326
       2004  |   .9880387   .0133927    73.77   0.000     .9617626    1.014315
       2005  |   .7930603   .0125478    63.20   0.000     .7684418    .8176787
       2006  |   .6875205   .0147796    46.52   0.000     .6585233    .7165176
       2007  |   .6266407   .0137961    45.42   0.000      .599573    .6537083
       2008  |   .6400645    .012869    49.74   0.000     .6148159    .6653131
       2009  |   .9401476   .0142243    66.09   0.000       .91224    .9680553
       2010  |   1.455546   .0354022    41.11   0.000     1.386088    1.525004
       2011  |   1.841218   .0166771   110.40   0.000     1.808498    1.873938
       2012  |   1.817502   .0163395   111.23   0.000     1.785444     1.84956
       2013  |   1.602307   .0171869    93.23   0.000     1.568587    1.636028
       2014  |   1.262391   .0147993    85.30   0.000     1.233355    1.291426
       2015  |   .7675992   .0166818    46.01   0.000       .73487    .8003284
             |
       _cons |   8.205653   .0082786   991.19   0.000      8.18941    8.221895
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1182 categories)
9165
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.000050 not found)
file /tmp/St32652.000050 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.000051 not found)
file /tmp/St32652.000051 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(915 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.000052 not found)
file /tmp/St32652.000052 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.000053 not found)
file /tmp/St32652.000053 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(32 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     29,350
                                                F(  25,   1173)   =    1856.02
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9793
                                                Adj R-squared     =     0.9784
                                                Root MSE          =     0.2578

                              (Std. Err. adjusted for 1,174 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -6.958388   .4757628   -14.63   0.000    -7.891829   -6.024947
             |
        year |
       1992  |   .1580065   .0135585    11.65   0.000      .131405    .1846081
       1993  |    .675756   .0072786    92.84   0.000     .6614755    .6900366
       1994  |   .6831844   .0106508    64.14   0.000     .6622876    .7040811
       1995  |    .423808   .0148643    28.51   0.000     .3946444    .4529716
       1996  |   .3726954   .0142832    26.09   0.000     .3446719    .4007189
       1997  |   .3968036   .0125952    31.50   0.000     .3720919    .4215152
       1998  |   .3526121   .0141336    24.95   0.000     .3248822    .3803421
       1999  |   .3335049   .0136485    24.44   0.000     .3067266    .3602831
       2000  |   .3436773   .0130682    26.30   0.000     .3180376     .369317
       2001  |   .3336742   .0121775    27.40   0.000     .3097821    .3575663
       2002  |   .7393297   .0143359    51.57   0.000     .7112028    .7674567
       2003  |   .8553285   .0164172    52.10   0.000     .8231181    .8875389
       2004  |   .9887823   .0133735    73.94   0.000     .9625438    1.015021
       2005  |   .7942634   .0125905    63.08   0.000      .769561    .8189657
       2006  |   .6889562   .0148451    46.41   0.000     .6598303    .7180821
       2007  |   .6277501     .01386    45.29   0.000     .6005569    .6549432
       2008  |   .6411327   .0129192    49.63   0.000     .6157854      .66648
       2009  |   .9410908   .0142627    65.98   0.000     .9131075    .9690741
       2010  |    1.45524   .0354308    41.07   0.000     1.385725    1.524755
       2011  |   1.841672   .0167151   110.18   0.000     1.808877    1.874466
       2012  |   1.818434   .0164112   110.80   0.000     1.786235    1.850633
       2013  |   1.602887   .0172575    92.88   0.000     1.569027    1.636746
       2014  |   1.262786   .0148619    84.97   0.000     1.233628    1.291945
       2015  |   .7676475   .0167719    45.77   0.000     .7347412    .8005539
             |
       _cons |   8.213484   .0083096   988.44   0.000     8.197181    8.229787
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1174 categories)
9170
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.000055 not found)
file /tmp/St32652.000055 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.000056 not found)
file /tmp/St32652.000056 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(915 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.000057 not found)
file /tmp/St32652.000057 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.000058 not found)
file /tmp/St32652.000058 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(38 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     29,319
                                                F(  25,   1172)   =    1709.98
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9788
                                                Adj R-squared     =     0.9779
                                                Root MSE          =     0.2667

                              (Std. Err. adjusted for 1,173 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |   .0029769    .504955     0.01   0.995    -.9877398    .9936935
             |
        year |
       1992  |   .3446816   .0144653    23.83   0.000     .3163008    .3730623
       1993  |   .6904885   .0073673    93.72   0.000     .6760338    .7049432
       1994  |   .5774507   .0112418    51.37   0.000     .5553944    .5995071
       1995  |   .2441912   .0153975    15.86   0.000     .2139814    .2744009
       1996  |   .1976834   .0148316    13.33   0.000      .168584    .2267829
       1997  |   .2586251   .0125972    20.53   0.000     .2339096    .2833407
       1998  |   .1848114   .0142126    13.00   0.000     .1569263    .2126964
       1999  |   .1796199   .0142345    12.62   0.000     .1516919    .2075479
       2000  |   .2233858   .0134136    16.65   0.000     .1970685    .2497031
       2001  |   .2325593   .0117614    19.77   0.000     .2094837     .255635
       2002  |   .5848355   .0149488    39.12   0.000     .5555062    .6141649
       2003  |   1.010089   .0176639    57.18   0.000     .9754327    1.044745
       2004  |   1.068082   .0140941    75.78   0.000      1.04043    1.095734
       2005  |   .7209912   .0121503    59.34   0.000     .6971523      .74483
       2006  |   .5787552   .0145933    39.66   0.000     .5501234     .607387
       2007  |   .5242111   .0137335    38.17   0.000     .4972661    .5511562
       2008  |   .5800077   .0131201    44.21   0.000     .5542663    .6057491
       2009  |   .9904599   .0150264    65.91   0.000     .9609784    1.019942
       2010  |   1.935517    .039792    48.64   0.000     1.857445    2.013588
       2011  |   1.952389   .0179244   108.92   0.000     1.917221    1.987556
       2012  |   1.697406   .0157476   107.79   0.000      1.66651    1.728303
       2013  |    1.44106   .0165414    87.12   0.000     1.408606    1.473514
       2014  |   1.146358   .0142614    80.38   0.000     1.118377    1.174339
       2015  |   .6137455   .0166081    36.95   0.000     .5811605    .6463305
             |
       _cons |   8.068722   .0081181   993.91   0.000     8.052794     8.08465
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1173 categories)
9175
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.00005a not found)
file /tmp/St32652.00005a saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.00005b not found)
file /tmp/St32652.00005b saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(915 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.00005c not found)
file /tmp/St32652.00005c saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.00005d not found)
file /tmp/St32652.00005d saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(31 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     29,075
                                                F(  25,   1162)   =    1855.87
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9794
                                                Adj R-squared     =     0.9785
                                                Root MSE          =     0.2571

                              (Std. Err. adjusted for 1,163 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -7.072682   .4696434   -15.06   0.000    -7.994126   -6.151238
             |
        year |
       1992  |    .155572    .013462    11.56   0.000     .1291595    .1819844
       1993  |   .6763091   .0073256    92.32   0.000     .6619361    .6906821
       1994  |   .6855207   .0105733    64.84   0.000     .6647758    .7062656
       1995  |    .428093   .0146845    29.15   0.000      .399282     .456904
       1996  |   .3760261   .0142576    26.37   0.000     .3480526    .4039996
       1997  |   .3994262   .0125192    31.91   0.000     .3748634    .4239889
       1998  |   .3556562    .013973    25.45   0.000      .328241    .3830714
       1999  |   .3363931   .0135564    24.81   0.000     .3097953    .3629909
       2000  |   .3461536   .0130996    26.42   0.000      .320452    .3718551
       2001  |   .3369101   .0121535    27.72   0.000     .3130649    .3607554
       2002  |   .7413183   .0144337    51.36   0.000     .7129992    .7696373
       2003  |   .8524164   .0160875    52.99   0.000     .8208527    .8839802
       2004  |   .9861996   .0132542    74.41   0.000     .9601947    1.012205
       2005  |   .7944255   .0126758    62.67   0.000     .7695554    .8192955
       2006  |    .690651   .0149385    46.23   0.000     .6613416    .7199603
       2007  |    .629384   .0139698    45.05   0.000     .6019751    .6567929
       2008  |   .6419075   .0130098    49.34   0.000     .6163822    .6674328
       2009  |   .9395264   .0142575    65.90   0.000     .9115531    .9674997
       2010  |      1.447   .0348099    41.57   0.000     1.378702    1.515297
       2011  |   1.839065   .0165195   111.33   0.000     1.806654    1.871476
       2012  |   1.819731   .0164887   110.36   0.000      1.78738    1.852082
       2013  |   1.603698   .0173518    92.42   0.000     1.569654    1.637742
       2014  |   1.263145    .014953    84.47   0.000     1.233807    1.292483
       2015  |    .768946    .016864    45.60   0.000     .7358588    .8020333
             |
       _cons |    8.22906   .0083419   986.48   0.000     8.212693    8.245427
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1163 categories)
9180
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.00005f not found)
file /tmp/St32652.00005f saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.00005g not found)
file /tmp/St32652.00005g saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(915 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.00005h not found)
file /tmp/St32652.00005h saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.00005i not found)
file /tmp/St32652.00005i saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(38 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     28,869
                                                F(  25,   1154)   =    1678.04
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9789
                                                Adj R-squared     =     0.9780
                                                Root MSE          =     0.2671

                              (Std. Err. adjusted for 1,155 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |   .1693116   .4426267     0.38   0.702    -.6991316    1.037755
             |
        year |
       1992  |   .3484468   .0129132    26.98   0.000     .3231109    .3737828
       1993  |   .6910216   .0074834    92.34   0.000      .676339    .7057041
       1994  |   .5753981    .010425    55.19   0.000      .554944    .5958522
       1995  |   .2411702   .0143408    16.82   0.000     .2130333    .2693071
       1996  |   .1944563   .0138926    14.00   0.000     .1671986    .2217139
       1997  |   .2550744    .012224    20.87   0.000     .2310908    .2790581
       1998  |   .1799409   .0136454    13.19   0.000     .1531684    .2067135
       1999  |   .1745851   .0135433    12.89   0.000     .1480127    .2011574
       2000  |   .2202473    .012988    16.96   0.000     .1947645    .2457302
       2001  |   .2294138   .0117912    19.46   0.000     .2062792    .2525484
       2002  |   .5803083   .0150184    38.64   0.000     .5508418    .6097747
       2003  |   1.013019   .0162055    62.51   0.000     .9812231    1.044814
       2004  |   1.069833   .0133909    79.89   0.000      1.04356    1.096106
       2005  |   .7183832   .0124874    57.53   0.000     .6938827    .7428836
       2006  |   .5740474   .0149601    38.37   0.000     .5446954    .6033995
       2007  |   .5197309    .014113    36.83   0.000      .492041    .5474208
       2008  |   .5772382   .0135577    42.58   0.000     .5506377    .6038387
       2009  |    .990524   .0145179    68.23   0.000     .9620396    1.019008
       2010  |   1.947188   .0345809    56.31   0.000     1.879339    2.015036
       2011  |   1.954173    .016925   115.46   0.000     1.920965     1.98738
       2012  |   1.693056   .0160851   105.26   0.000     1.661497    1.724616
       2013  |   1.435835   .0166012    86.49   0.000     1.403264    1.468407
       2014  |   1.142858   .0143994    79.37   0.000     1.114606    1.171109
       2015  |   .6104411   .0164609    37.08   0.000     .5781444    .6427378
             |
       _cons |   8.066337   .0081889   985.04   0.000      8.05027    8.082404
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1155 categories)
9185
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.00005k not found)
file /tmp/St32652.00005k saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.00005l not found)
file /tmp/St32652.00005l saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(706 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.00005m not found)
file /tmp/St32652.00005m saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.00005n not found)
file /tmp/St32652.00005n saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(31 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     28,575
                                                F(  25,   1142)   =    1836.62
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9796
                                                Adj R-squared     =     0.9787
                                                Root MSE          =     0.2564

                              (Std. Err. adjusted for 1,143 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -7.134062   .4891604   -14.58   0.000    -8.093816   -6.174309
             |
        year |
       1992  |   .1533359   .0139051    11.03   0.000     .1260534    .1806184
       1993  |   .6760154   .0073287    92.24   0.000     .6616363    .6903946
       1994  |    .686812   .0108682    63.19   0.000     .6654882    .7081358
       1995  |   .4297525   .0152104    28.25   0.000      .399909     .459596
       1996  |   .3764215   .0147609    25.50   0.000     .3474599     .405383
       1997  |   .3990715   .0128802    30.98   0.000     .3738001    .4243429
       1998  |   .3552118   .0144247    24.63   0.000     .3269099    .3835136
       1999  |   .3357764   .0139521    24.07   0.000     .3084019    .3631509
       2000  |   .3455914    .013419    25.75   0.000     .3192628      .37192
       2001  |   .3368638   .0123162    27.35   0.000     .3126989    .3610287
       2002  |   .7394577   .0147084    50.27   0.000     .7105991    .7683164
       2003  |   .8495424   .0164498    51.64   0.000     .8172671    .8818176
       2004  |    .982273   .0133682    73.48   0.000     .9560441    1.008502
       2005  |   .7917929    .012762    62.04   0.000     .7667533    .8168326
       2006  |   .6875846   .0150718    45.62   0.000      .658013    .7171563
       2007  |   .6264079   .0140882    44.46   0.000     .5987663    .6540495
       2008  |   .6387544   .0130763    48.85   0.000     .6130981    .6644107
       2009  |   .9349956   .0143931    64.96   0.000     .9067556    .9632355
       2010  |    1.43951   .0360969    39.88   0.000     1.368686    1.510333
       2011  |   1.835499   .0167856   109.35   0.000     1.802565    1.868433
       2012  |   1.818509   .0166695   109.09   0.000     1.785803    1.851216
       2013  |   1.603252    .017626    90.96   0.000     1.568669    1.637835
       2014  |   1.262564   .0151448    83.37   0.000     1.232849    1.292278
       2015  |   .7692078   .0171527    44.84   0.000     .7355535     .802862
             |
       _cons |   8.248494   .0083658   985.98   0.000      8.23208    8.264908
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1143 categories)
9190
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.00005p not found)
file /tmp/St32652.00005p saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.00005q not found)
file /tmp/St32652.00005q saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(706 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.00005r not found)
file /tmp/St32652.00005r saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.00005s not found)
file /tmp/St32652.00005s saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(31 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     28,350
                                                F(  25,   1133)   =    1827.81
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9798
                                                Adj R-squared     =     0.9789
                                                Root MSE          =     0.2546

                              (Std. Err. adjusted for 1,134 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -7.214175   .4903476   -14.71   0.000    -8.176267   -6.252084
             |
        year |
       1992  |    .151623    .013955    10.87   0.000     .1242424    .1790036
       1993  |   .6763136   .0073578    91.92   0.000     .6618772      .69075
       1994  |   .6881742   .0108818    63.24   0.000     .6668235    .7095249
       1995  |   .4315866   .0152591    28.28   0.000     .4016474    .4615258
       1996  |   .3779362   .0148054    25.53   0.000     .3488871    .4069854
       1997  |   .4006486   .0129445    30.95   0.000     .3752508    .4260464
       1998  |   .3577755   .0144641    24.74   0.000     .3293962    .3861549
       1999  |   .3378916   .0139902    24.15   0.000      .310442    .3653412
       2000  |   .3474351   .0134597    25.81   0.000     .3210265    .3738438
       2001  |   .3391268   .0122986    27.57   0.000     .3149962    .3632574
       2002  |    .743884   .0143597    51.80   0.000     .7157094    .7720586
       2003  |    .849655   .0165612    51.30   0.000     .8171609    .8821491
       2004  |   .9829472   .0134328    73.18   0.000     .9565912    1.009303
       2005  |   .7948855   .0125405    63.39   0.000     .7702802    .8194908
       2006  |   .6924461   .0145035    47.74   0.000     .6639893    .7209029
       2007  |   .6288161   .0140148    44.87   0.000     .6013182    .6563139
       2008  |   .6401172   .0130495    49.05   0.000     .6145132    .6657212
       2009  |   .9356346   .0144369    64.81   0.000     .9073086    .9639606
       2010  |   1.435589   .0363077    39.54   0.000     1.364351    1.506827
       2011  |   1.835255   .0168772   108.74   0.000     1.802141    1.868369
       2012  |   1.820691   .0166551   109.32   0.000     1.788013     1.85337
       2013  |   1.605969   .0175811    91.35   0.000     1.571474    1.640464
       2014  |   1.265118   .0150985    83.79   0.000     1.235494    1.294742
       2015  |   .7709637   .0171104    45.06   0.000      .737392    .8045354
             |
       _cons |   8.260999   .0083546   988.80   0.000     8.244607    8.277391
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1134 categories)
9195
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.00005u not found)
file /tmp/St32652.00005u saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.00005v not found)
file /tmp/St32652.00005v saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(706 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.00005w not found)
file /tmp/St32652.00005w saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.00005x not found)
file /tmp/St32652.00005x saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(38 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     28,219
                                                F(  25,   1128)   =    1637.72
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9789
                                                Adj R-squared     =     0.9780
                                                Root MSE          =     0.2672

                              (Std. Err. adjusted for 1,129 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |   .0306234   .4693732     0.07   0.948    -.8903193    .9515661
             |
        year |
       1992  |   .3456475    .013638    25.34   0.000     .3188888    .3724061
       1993  |   .6915667   .0075759    91.28   0.000     .6767022    .7064312
       1994  |   .5784747    .010837    53.38   0.000     .5572118    .5997375
       1995  |   .2464039   .0148376    16.61   0.000     .2172915    .2755163
       1996  |   .1996749   .0144486    13.82   0.000     .1713258    .2280241
       1997  |   .2583618   .0124506    20.75   0.000      .233933    .2827907
       1998  |   .1829116   .0137977    13.26   0.000     .1558396    .2099837
       1999  |   .1775726   .0138015    12.87   0.000     .1504932    .2046521
       2000  |   .2230265   .0132775    16.80   0.000      .196975    .2490779
       2001  |   .2331906   .0121161    19.25   0.000     .2094179    .2569632
       2002  |    .583292   .0150248    38.82   0.000     .5538122    .6127717
       2003  |   1.009671   .0171783    58.78   0.000     .9759657    1.043376
       2004  |   1.068626   .0138486    77.16   0.000     1.041454    1.095798
       2005  |   .7203098   .0124098    58.04   0.000      .695961    .7446587
       2006  |   .5759095    .014593    39.46   0.000     .5472771    .6045419
       2007  |   .5210973    .013822    37.70   0.000     .4939777    .5482169
       2008  |   .5775799   .0134516    42.94   0.000     .5511869    .6039729
       2009  |   .9891168   .0151188    65.42   0.000     .9594527    1.018781
       2010  |    1.93796   .0368147    52.64   0.000     1.865727    2.010193
       2011  |   1.953101   .0174589   111.87   0.000     1.918845    1.987356
       2012  |   1.697115   .0163275   103.94   0.000     1.665079    1.729151
       2013  |   1.441608   .0169594    85.00   0.000     1.408332    1.474883
       2014  |   1.146394   .0145056    79.03   0.000     1.117933    1.174855
       2015  |   .6146162   .0165546    37.13   0.000     .5821349    .6470975
             |
       _cons |   8.064293   .0083177   969.53   0.000     8.047973    8.080613
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1129 categories)
9200
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.000061 not found)
file /tmp/St32652.000061 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.000062 not found)
file /tmp/St32652.000062 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(706 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.000063 not found)
file /tmp/St32652.000063 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.000064 not found)
file /tmp/St32652.000064 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(31 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     27,850
                                                F(  25,   1113)   =    1790.34
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9798
                                                Adj R-squared     =     0.9790
                                                Root MSE          =     0.2532

                              (Std. Err. adjusted for 1,114 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -7.225204   .4951567   -14.59   0.000     -8.19675   -6.253658
             |
        year |
       1992  |    .151747   .0140946    10.77   0.000     .1240921    .1794019
       1993  |   .6762683   .0074185    91.16   0.000     .6617124    .6908242
       1994  |   .6893308    .010981    62.78   0.000     .6677851    .7108766
       1995  |   .4328797   .0153877    28.13   0.000     .4026874    .4630719
       1996  |   .3790484   .0149504    25.35   0.000     .3497142    .4083826
       1997  |   .4015743   .0130541    30.76   0.000      .375961    .4271876
       1998  |   .3586623   .0145752    24.61   0.000     .3300644    .3872602
       1999  |   .3397278   .0141258    24.05   0.000     .3120116    .3674439
       2000  |   .3488065    .013583    25.68   0.000     .3221553    .3754578
       2001  |   .3407175   .0123947    27.49   0.000      .316398     .365037
       2002  |   .7482362   .0145069    51.58   0.000     .7197722    .7767002
       2003  |   .8538331   .0165706    51.53   0.000     .8213199    .8863463
       2004  |   .9864587   .0134539    73.32   0.000     .9600609    1.012857
       2005  |   .7986837   .0126509    63.13   0.000     .7738614    .8235061
       2006  |   .6958334   .0146225    47.59   0.000     .6671426    .7245242
       2007  |   .6331108   .0141388    44.78   0.000      .605369    .6608526
       2008  |   .6456597   .0131434    49.12   0.000      .619871    .6714484
       2009  |   .9413821   .0144426    65.18   0.000     .9130444    .9697199
       2010  |   1.439079   .0365196    39.41   0.000     1.367424    1.510734
       2011  |   1.840564   .0169079   108.86   0.000     1.807389    1.873739
       2012  |   1.825753   .0167591   108.94   0.000      1.79287    1.858636
       2013  |   1.610937   .0177617    90.70   0.000     1.576087    1.645787
       2014  |   1.268508   .0152547    83.16   0.000     1.238577    1.298439
       2015  |   .7738671   .0173046    44.72   0.000     .7399137    .8078204
             |
       _cons |   8.292653   .0084204   984.83   0.000     8.276132    8.309175
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1114 categories)
9205
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.000066 not found)
file /tmp/St32652.000066 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.000067 not found)
file /tmp/St32652.000067 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(500 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.000068 not found)
file /tmp/St32652.000068 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.000069 not found)
file /tmp/St32652.000069 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(38 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     27,619
                                                F(  25,   1104)   =    1601.83
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9788
                                                Adj R-squared     =     0.9779
                                                Root MSE          =     0.2673

                              (Std. Err. adjusted for 1,105 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |   .2505119   .4942121     0.51   0.612    -.7191892    1.220213
             |
        year |
       1992  |   .3518653   .0143844    24.46   0.000     .3236414    .3800891
       1993  |   .6918613   .0076415    90.54   0.000     .6768679    .7068547
       1994  |   .5745172   .0113294    50.71   0.000     .5522875    .5967468
       1995  |   .2402072   .0156696    15.33   0.000     .2094616    .2709528
       1996  |   .1939457   .0152841    12.69   0.000     .1639566    .2239348
       1997  |   .2544803   .0132816    19.16   0.000     .2284204    .2805402
       1998  |    .178596    .014908    11.98   0.000     .1493447    .2078472
       1999  |   .1732222   .0147986    11.71   0.000     .1441857    .2022588
       2000  |   .2212726   .0140546    15.74   0.000     .1936959    .2488492
       2001  |   .2314118   .0124602    18.57   0.000     .2069636    .2558601
       2002  |   .5791242   .0155875    37.15   0.000     .5485396    .6097087
       2003  |   1.015647   .0177226    57.31   0.000     .9808736    1.050421
       2004  |   1.073422   .0142452    75.35   0.000     1.045472    1.101373
       2005  |   .7208188   .0126669    56.91   0.000     .6959648    .7456728
       2006  |   .5748124   .0151459    37.95   0.000     .5450943    .6045305
       2007  |   .5197425   .0141628    36.70   0.000     .4919536    .5475315
       2008  |   .5783442   .0136499    42.37   0.000     .5515614    .6051269
       2009  |   .9928789   .0153825    64.55   0.000     .9626967    1.023061
       2010  |   1.953866   .0387758    50.39   0.000     1.877783    2.029948
       2011  |   1.958199   .0180339   108.58   0.000     1.922815    1.993584
       2012  |   1.694048   .0163602   103.55   0.000     1.661947    1.726149
       2013  |   1.437367   .0171751    83.69   0.000     1.403667    1.471066
       2014  |   1.145178     .01483    77.22   0.000      1.11608    1.174276
       2015  |   .6128068   .0169413    36.17   0.000      .579566    .6460475
             |
       _cons |    8.05195   .0084416   953.84   0.000     8.035386    8.068513
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1105 categories)
9210
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.00006b not found)
file /tmp/St32652.00006b saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.00006c not found)
file /tmp/St32652.00006c saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(1 missing value generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.00006d not found)
file /tmp/St32652.00006d saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.00006e not found)
file /tmp/St32652.00006e saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(31 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     27,300
                                                F(  25,   1091)   =    1751.01
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9797
                                                Adj R-squared     =     0.9788
                                                Root MSE          =     0.2526

                              (Std. Err. adjusted for 1,092 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -7.410247   .5056114   -14.66   0.000    -8.402328   -6.418166
             |
        year |
       1992  |   .1467106   .0143908    10.19   0.000     .1184739    .1749473
       1993  |   .6760531   .0074847    90.32   0.000      .661367    .6907392
       1994  |   .6914546   .0112531    61.45   0.000     .6693743    .7135348
       1995  |    .436283   .0157348    27.73   0.000      .405409     .467157
       1996  |   .3832868   .0153355    24.99   0.000     .3531964    .4133771
       1997  |   .4055629   .0133172    30.45   0.000     .3794326    .4316932
       1998  |   .3628409   .0147963    24.52   0.000     .3338086    .3918733
       1999  |    .343145   .0143718    23.88   0.000     .3149455    .3713445
       2000  |   .3508488   .0138235    25.38   0.000     .3237252    .3779724
       2001  |   .3426483   .0124179    27.59   0.000     .3182827     .367014
       2002  |   .7512823   .0147086    51.08   0.000     .7224219    .7801427
       2003  |   .8486436    .016839    50.40   0.000     .8156032    .8816841
       2004  |   .9826651   .0135344    72.61   0.000     .9561088    1.009221
       2005  |   .8000024   .0128135    62.43   0.000     .7748605    .8251444
       2006  |   .6982037   .0147785    47.24   0.000     .6692062    .7272012
       2007  |   .6357414   .0142783    44.52   0.000     .6077254    .6637575
       2008  |   .6475981   .0132703    48.80   0.000     .6215598    .6736363
       2009  |   .9401396   .0145895    64.44   0.000     .9115129    .9687663
       2010  |   1.425854   .0373158    38.21   0.000     1.352636    1.499073
       2011  |    1.83708   .0171499   107.12   0.000     1.803429     1.87073
       2012  |   1.828391   .0169607   107.80   0.000     1.795112     1.86167
       2013  |   1.615607   .0180141    89.69   0.000     1.580261    1.650954
       2014  |   1.272046   .0154363    82.41   0.000     1.241758    1.302334
       2015  |   .7771871   .0175402    44.31   0.000     .7427709    .8116034
             |
       _cons |   8.318498   .0084824   980.68   0.000     8.301854    8.335141
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1092 categories)
9215
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.00006g not found)
file /tmp/St32652.00006g saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.00006h not found)
file /tmp/St32652.00006h saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(1 missing value generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.00006i not found)
file /tmp/St32652.00006i saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.00006j not found)
file /tmp/St32652.00006j saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(31 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     27,050
                                                F(  25,   1081)   =    1747.29
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9795
                                                Adj R-squared     =     0.9786
                                                Root MSE          =     0.2525

                              (Std. Err. adjusted for 1,082 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -7.457421   .5096368   -14.63   0.000     -8.45741   -6.457431
             |
        year |
       1992  |   .1456603   .0144799    10.06   0.000     .1172484    .1740721
       1993  |   .6760035   .0074746    90.44   0.000     .6613371    .6906698
       1994  |   .6918984   .0112991    61.23   0.000     .6697277    .7140691
       1995  |   .4370289   .0158286    27.61   0.000     .4059707    .4680871
       1996  |   .3832801   .0154262    24.85   0.000     .3530115    .4135488
       1997  |   .4051856   .0133864    30.27   0.000     .3789193     .431452
       1998  |   .3623477   .0148708    24.37   0.000     .3331688    .3915265
       1999  |    .342587   .0144375    23.73   0.000     .3142584    .3709157
       2000  |   .3498558   .0138978    25.17   0.000     .3225862    .3771255
       2001  |   .3417006   .0124774    27.39   0.000      .317218    .3661832
       2002  |   .7506846   .0147599    50.86   0.000     .7217234    .7796458
       2003  |   .8461436   .0169226    50.00   0.000     .8129388    .8793484
       2004  |   .9808917   .0135446    72.42   0.000      .954315    1.007468
       2005  |   .7986777   .0128119    62.34   0.000     .7735386    .8238168
       2006  |   .6967358   .0148131    47.04   0.000     .6676701    .7258014
       2007  |   .6347404   .0143191    44.33   0.000     .6066441    .6628368
       2008  |   .6463468   .0133005    48.60   0.000      .620249    .6724447
       2009  |   .9386538   .0146451    64.09   0.000     .9099178    .9673899
       2010  |   1.421702   .0375929    37.82   0.000     1.347939    1.495465
       2011  |   1.835941   .0172115   106.67   0.000     1.802169    1.869713
       2012  |   1.828823   .0170134   107.49   0.000      1.79544    1.862206
       2013  |   1.615874   .0180694    89.43   0.000     1.580419    1.651329
       2014  |    1.27086   .0154422    82.30   0.000      1.24056     1.30116
       2015  |   .7753479   .0175936    44.07   0.000     .7408265    .8098694
             |
       _cons |   8.340045   .0084692   984.75   0.000     8.323427    8.356663
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1082 categories)
9220
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.00006l not found)
file /tmp/St32652.00006l saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.00006m not found)
file /tmp/St32652.00006m saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(1 missing value generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.00006n not found)
file /tmp/St32652.00006n saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.00006o not found)
file /tmp/St32652.00006o saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(38 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     26,869
                                                F(  25,   1074)   =    1575.63
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9790
                                                Adj R-squared     =     0.9781
                                                Root MSE          =     0.2666

                              (Std. Err. adjusted for 1,075 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |   .4317636   .4079338     1.06   0.290    -.3686741    1.232201
             |
        year |
       1992  |   .3551371   .0121564    29.21   0.000     .3312841    .3789901
       1993  |   .6907665   .0077911    88.66   0.000     .6754791    .7060539
       1994  |   .5714366   .0102101    55.97   0.000     .5514026    .5914705
       1995  |   .2354961   .0133311    17.67   0.000     .2093381    .2616541
       1996  |   .1891011   .0130049    14.54   0.000     .1635832    .2146189
       1997  |   .2508227   .0117339    21.38   0.000     .2277987    .2738467
       1998  |   .1749981   .0130592    13.40   0.000     .1493736    .2006226
       1999  |    .169677   .0132614    12.79   0.000     .1436559    .1956982
       2000  |   .2185577   .0131228    16.65   0.000     .1928085    .2443069
       2001  |   .2274703   .0121992    18.65   0.000     .2035333    .2514073
       2002  |   .5730571   .0152352    37.61   0.000     .5431629    .6029513
       2003  |   1.017987   .0159193    63.95   0.000     .9867504    1.049223
       2004  |    1.07517    .013557    79.31   0.000     1.048568    1.101771
       2005  |   .7190117   .0129032    55.72   0.000     .6936933    .7443301
       2006  |   .5721507    .015242    37.54   0.000     .5422432    .6020582
       2007  |   .5167908   .0142728    36.21   0.000      .488785    .5447966
       2008  |   .5770373   .0138951    41.53   0.000     .5497726     .604302
       2009  |   .9935452   .0149644    66.39   0.000     .9641824    1.022908
       2010  |    1.96448     .03199    61.41   0.000      1.90171     2.02725
       2011  |   1.960173   .0168717   116.18   0.000     1.927068    1.993279
       2012  |   1.689895   .0165226   102.28   0.000     1.657474    1.722315
       2013  |   1.431882   .0168972    84.74   0.000     1.398727    1.465038
       2014  |    1.13974   .0147704    77.16   0.000     1.110758    1.168722
       2015  |   .6085909   .0162883    37.36   0.000     .5766305    .6405513
             |
       _cons |   8.059057   .0085941   937.74   0.000     8.042194     8.07592
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1075 categories)
9225
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.00006q not found)
file /tmp/St32652.00006q saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.00006r not found)
file /tmp/St32652.00006r saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(1 missing value generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.00006s not found)
file /tmp/St32652.00006s saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.00006t not found)
file /tmp/St32652.00006t saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(31 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     26,500
                                                F(  25,   1059)   =    1728.62
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9799
                                                Adj R-squared     =     0.9790
                                                Root MSE          =     0.2516

                              (Std. Err. adjusted for 1,060 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -7.571653   .5182293   -14.61   0.000    -8.588525    -6.55478
             |
        year |
       1992  |   .1427948   .0147294     9.69   0.000     .1138928    .1716969
       1993  |   .6760499   .0075074    90.05   0.000     .6613188     .690781
       1994  |   .6940342   .0113548    61.12   0.000     .6717536    .7163147
       1995  |   .4404507    .016023    27.49   0.000     .4090102    .4718912
       1996  |   .3857688   .0156082    24.72   0.000     .3551424    .4163953
       1997  |   .4071002   .0135204    30.11   0.000     .3805703      .43363
       1998  |   .3650878   .0150147    24.32   0.000     .3356258    .3945498
       1999  |   .3444652   .0145562    23.66   0.000      .315903    .3730274
       2000  |   .3526073   .0140673    25.07   0.000     .3250043    .3802103
       2001  |   .3436125   .0126293    27.21   0.000     .3188312    .3683938
       2002  |    .753825   .0149231    50.51   0.000     .7245428    .7831072
       2003  |   .8451254   .0171774    49.20   0.000     .8114198    .8788309
       2004  |   .9810139   .0137379    71.41   0.000     .9540573    1.007971
       2005  |   .8009069   .0129619    61.79   0.000      .775473    .8263407
       2006  |   .6999927   .0149908    46.69   0.000     .6705777    .7294077
       2007  |   .6372496   .0144646    44.06   0.000      .608867    .6656322
       2008  |   .6474536   .0134099    48.28   0.000     .6211407    .6737665
       2009  |    .937367    .014801    63.33   0.000     .9083243    .9664096
       2010  |   1.414772   .0382665    36.97   0.000     1.339685    1.489858
       2011  |   1.833924   .0174733   104.96   0.000     1.799638     1.86821
       2012  |   1.829389   .0171261   106.82   0.000     1.795784    1.862994
       2013  |   1.617027   .0182163    88.77   0.000     1.581282    1.652771
       2014  |   1.271925    .015588    81.60   0.000     1.241338    1.302512
       2015  |   .7782236   .0177904    43.74   0.000     .7433151     .813132
             |
       _cons |   8.354194   .0085356   978.75   0.000     8.337445    8.370942
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1060 categories)
9230
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.00006v not found)
file /tmp/St32652.00006v saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.00006w not found)
file /tmp/St32652.00006w saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(1 missing value generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.00006x not found)
file /tmp/St32652.00006x saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.000070 not found)
file /tmp/St32652.000070 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(38 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     26,369
                                                F(  25,   1054)   =    1543.28
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9792
                                                Adj R-squared     =     0.9783
                                                Root MSE          =     0.2653

                              (Std. Err. adjusted for 1,055 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |   .0529107    .497615     0.11   0.915    -.9235181     1.02934
             |
        year |
       1992  |    .344714   .0139472    24.72   0.000     .3173465    .3720814
       1993  |   .6896775   .0077817    88.63   0.000     .6744082    .7049468
       1994  |   .5767157   .0114175    50.51   0.000     .5543122    .5991193
       1995  |   .2445601   .0155613    15.72   0.000     .2140254    .2750947
       1996  |   .1987196    .015225    13.05   0.000     .1688449    .2285943
       1997  |   .2590183   .0130411    19.86   0.000     .2334289    .2846077
       1998  |   .1840452   .0146649    12.55   0.000     .1552694     .212821
       1999  |   .1779328   .0143453    12.40   0.000     .1497842    .2060814
       2000  |   .2248474   .0135086    16.64   0.000     .1983405    .2513543
       2001  |   .2322563   .0123282    18.84   0.000     .2080656    .2564469
       2002  |   .5809761   .0158666    36.62   0.000     .5498423    .6121099
       2003  |   1.008793   .0178957    56.37   0.000     .9736776    1.043908
       2004  |   1.070643   .0142591    75.08   0.000     1.042663    1.098622
       2005  |   .7227676   .0129752    55.70   0.000     .6973074    .7482278
       2006  |   .5779886   .0156563    36.92   0.000     .5472676    .6087096
       2007  |   .5208662   .0144589    36.02   0.000     .4924947    .5492376
       2008  |   .5793378   .0137448    42.15   0.000     .5523676     .606308
       2009  |   .9887393   .0154619    63.95   0.000     .9583998    1.019079
       2010  |   1.935653   .0385572    50.20   0.000     1.859995     2.01131
       2011  |   1.952148   .0183643   106.30   0.000     1.916113    1.988183
       2012  |   1.693936   .0166206   101.92   0.000     1.661323     1.72655
       2013  |   1.438094   .0175162    82.10   0.000     1.403723    1.472464
       2014  |   1.143525   .0150803    75.83   0.000     1.113934    1.173116
       2015  |    .615903    .017323    35.55   0.000     .5819115    .6498944
             |
       _cons |   8.068432   .0086402   933.82   0.000     8.051478    8.085386
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1055 categories)
9235
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.000072 not found)
file /tmp/St32652.000072 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.000073 not found)
file /tmp/St32652.000073 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(1 missing value generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.000074 not found)
file /tmp/St32652.000074 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.000075 not found)
file /tmp/St32652.000075 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(31 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     25,975
                                                F(  25,   1038)   =    1709.98
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9796
                                                Adj R-squared     =     0.9788
                                                Root MSE          =     0.2510

                              (Std. Err. adjusted for 1,039 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |   -7.63282    .528872   -14.43   0.000      -8.6706    -6.59504
             |
        year |
       1992  |    .142605   .0149954     9.51   0.000     .1131803    .1720298
       1993  |   .6763275   .0075671    89.38   0.000      .661479     .691176
       1994  |    .696474   .0115567    60.27   0.000     .6737968    .7191512
       1995  |    .443232   .0163482    27.11   0.000     .4111527    .4753112
       1996  |   .3886221   .0159023    24.44   0.000     .3574178    .4198264
       1997  |   .4095445   .0137456    29.79   0.000     .3825721     .436517
       1998  |   .3676842   .0152933    24.04   0.000     .3376749    .3976936
       1999  |   .3466199   .0148358    23.36   0.000     .3175084    .3757313
       2000  |   .3543135   .0142748    24.82   0.000     .3263028    .3823243
       2001  |   .3461527   .0128085    27.03   0.000     .3210192    .3712862
       2002  |   .7584432   .0150599    50.36   0.000     .7288919    .7879945
       2003  |   .8470786   .0174746    48.47   0.000      .812789    .8813681
       2004  |    .982939   .0138486    70.98   0.000     .9557646    1.010113
       2005  |   .8046076   .0130868    61.48   0.000     .7789281    .8302871
       2006  |   .7044776   .0151623    46.46   0.000     .6747254    .7342298
       2007  |   .6403138   .0146362    43.75   0.000      .611594    .6690336
       2008  |   .6500933   .0135297    48.05   0.000     .6235445     .676642
       2009  |   .9404612   .0149799    62.78   0.000     .9110669    .9698554
       2010  |   1.413998   .0390384    36.22   0.000     1.337395    1.490601
       2011  |   1.837342   .0176986   103.81   0.000     1.802613    1.872071
       2012  |   1.834996   .0173064   106.03   0.000     1.801036    1.868955
       2013  |   1.622545   .0184588    87.90   0.000     1.586324    1.658765
       2014  |   1.275376   .0157953    80.74   0.000     1.244381     1.30637
       2015  |   .7812526   .0180685    43.24   0.000     .7457977    .8167075
             |
       _cons |   8.387417   .0086303   971.85   0.000     8.370482    8.404352
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1039 categories)
9240
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.000077 not found)
file /tmp/St32652.000077 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.000078 not found)
file /tmp/St32652.000078 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(1 missing value generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.000079 not found)
file /tmp/St32652.000079 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.00007a not found)
file /tmp/St32652.00007a saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(31 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     25,725
                                                F(  25,   1028)   =    1725.31
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9795
                                                Adj R-squared     =     0.9787
                                                Root MSE          =     0.2506

                              (Std. Err. adjusted for 1,029 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -7.667848   .5362047   -14.30   0.000    -8.720029   -6.615668
             |
        year |
       1992  |   .1425485   .0151864     9.39   0.000     .1127485    .1723485
       1993  |   .6772432   .0075725    89.43   0.000     .6623838    .6921026
       1994  |   .6976497   .0116516    59.88   0.000     .6747861    .7205134
       1995  |   .4434114   .0165412    26.81   0.000     .4109531    .4758698
       1996  |   .3886313   .0160821    24.17   0.000     .3570738    .4201889
       1997  |   .4088836   .0138738    29.47   0.000     .3816595    .4361077
       1998  |   .3679693   .0154475    23.82   0.000      .337657    .3982816
       1999  |   .3468514   .0149937    23.13   0.000     .3174296    .3762731
       2000  |   .3544332   .0144231    24.57   0.000     .3261311    .3827353
       2001  |   .3459103   .0129041    26.81   0.000     .3205889    .3712316
       2002  |   .7576724   .0151669    49.96   0.000     .7279108    .7874339
       2003  |   .8447512   .0176237    47.93   0.000     .8101686    .8793337
       2004  |   .9808352   .0139472    70.33   0.000      .953467    1.008203
       2005  |   .8034883   .0131699    61.01   0.000     .7776453    .8293313
       2006  |   .7038747   .0152577    46.13   0.000     .6739349    .7338145
       2007  |   .6398336   .0147071    43.51   0.000     .6109743     .668693
       2008  |   .6498077   .0136037    47.77   0.000     .6231135    .6765018
       2009  |   .9397666   .0151062    62.21   0.000      .910124    .9694092
       2010  |   1.409763   .0395546    35.64   0.000     1.332146     1.48738
       2011  |   1.834429   .0178206   102.94   0.000      1.79946    1.869397
       2012  |   1.833801   .0174146   105.30   0.000     1.799629    1.867973
       2013  |   1.621934   .0186074    87.17   0.000     1.585421    1.658447
       2014  |   1.274619   .0159217    80.06   0.000     1.243376    1.305862
       2015  |    .780344    .018241    42.78   0.000     .7445502    .8161379
             |
       _cons |   8.408177   .0086742   969.33   0.000     8.391156    8.425199
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1029 categories)
9245
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.00007c not found)
file /tmp/St32652.00007c saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.00007d not found)
file /tmp/St32652.00007d saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(1 missing value generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.00007e not found)
file /tmp/St32652.00007e saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.00007f not found)
file /tmp/St32652.00007f saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(38 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     25,669
                                                F(  25,   1026)   =    1490.07
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9793
                                                Adj R-squared     =     0.9784
                                                Root MSE          =     0.2662

                              (Std. Err. adjusted for 1,027 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -.4628364   .5160474    -0.90   0.370    -1.475465    .5497925
             |
        year |
       1992  |   .3321051    .014731    22.54   0.000     .3031989    .3610114
       1993  |   .6902927   .0079936    86.36   0.000     .6746071    .7059784
       1994  |   .5859111   .0114647    51.11   0.000     .5634142     .608408
       1995  |   .2592684   .0162208    15.98   0.000     .2274387    .2910981
       1996  |   .2129836   .0158383    13.45   0.000     .1819044    .2440627
       1997  |   .2702042   .0136119    19.85   0.000     .2434939    .2969145
       1998  |   .1977966   .0152139    13.00   0.000     .1679427    .2276505
       1999  |   .1909075   .0149587    12.76   0.000     .1615545    .2202606
       2000  |   .2356263    .014083    16.73   0.000     .2079915     .263261
       2001  |    .240616   .0128333    18.75   0.000     .2154335    .2657985
       2002  |   .5906889   .0158338    37.31   0.000     .5596185    .6217593
       2003  |   .9966601   .0188338    52.92   0.000     .9597029    1.033617
       2004  |   1.064675    .014967    71.13   0.000     1.035306    1.094045
       2005  |   .7273457   .0130359    55.80   0.000     .7017656    .7529259
       2006  |    .583893   .0153068    38.15   0.000     .5538568    .6139293
       2007  |   .5282461   .0147001    35.93   0.000     .4994004    .5570918
       2008  |   .5842861   .0141726    41.23   0.000     .5564755    .6120967
       2009  |   .9851054    .015837    62.20   0.000     .9540288    1.016182
       2010  |   1.900022   .0400827    47.40   0.000     1.821368    1.978675
       2011  |   1.942857   .0186432   104.21   0.000     1.906274     1.97944
       2012  |   1.701755    .017088    99.59   0.000     1.668223    1.735286
       2013  |   1.449156   .0177997    81.41   0.000     1.414228    1.484084
       2014  |   1.152159   .0153309    75.15   0.000     1.122076    1.182243
       2015  |    .628681   .0177424    35.43   0.000     .5938654    .6634966
             |
       _cons |   8.073142   .0088068   916.69   0.000     8.055861    8.090424
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1027 categories)
9250
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.00007h not found)
file /tmp/St32652.00007h saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.00007i not found)
file /tmp/St32652.00007i saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(1 missing value generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.00007j not found)
file /tmp/St32652.00007j saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.00007k not found)
file /tmp/St32652.00007k saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(31 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     25,425
                                                F(  25,   1016)   =    1723.76
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9794
                                                Adj R-squared     =     0.9785
                                                Root MSE          =     0.2491

                              (Std. Err. adjusted for 1,017 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -7.602393    .544682   -13.96   0.000    -8.671223   -6.533562
             |
        year |
       1992  |   .1444532   .0153697     9.40   0.000     .1142932    .1746133
       1993  |   .6766537   .0073802    91.69   0.000     .6621716    .6911358
       1994  |   .6955322   .0116762    59.57   0.000     .6726199    .7184444
       1995  |   .4412734   .0167471    26.35   0.000     .4084104    .4741363
       1996  |   .3867054   .0162475    23.80   0.000     .3548229    .4185879
       1997  |   .4077233   .0140133    29.10   0.000      .380225    .4352216
       1998  |    .366805   .0156273    23.47   0.000     .3361394    .3974705
       1999  |    .345859   .0151623    22.81   0.000     .3161061     .375612
       2000  |   .3542995   .0145352    24.38   0.000     .3257771     .382822
       2001  |   .3473061   .0130195    26.68   0.000     .3217579    .3728544
       2002  |   .7567018    .015328    49.37   0.000     .7266237    .7867799
       2003  |   .8457691    .017848    47.39   0.000     .8107459    .8807922
       2004  |   .9805155   .0140904    69.59   0.000     .9528659    1.008165
       2005  |   .8024393   .0132188    60.70   0.000        .7765    .8283785
       2006  |    .703605   .0153539    45.83   0.000      .673476    .7337341
       2007  |   .6392501   .0148154    43.15   0.000     .6101777    .6683224
       2008  |   .6492788   .0136676    47.51   0.000     .6224589    .6760987
       2009  |   .9401535   .0152372    61.70   0.000     .9102536    .9700534
       2010  |   1.413214   .0402401    35.12   0.000      1.33425    1.492177
       2011  |   1.834135    .018031   101.72   0.000     1.798752    1.869517
       2012  |   1.832524   .0175035   104.69   0.000     1.798177    1.866871
       2013  |   1.619942   .0187386    86.45   0.000     1.583171    1.656712
       2014  |    1.27289   .0160061    79.53   0.000     1.241481    1.304299
       2015  |   .7772224   .0183363    42.39   0.000      .741241    .8132038
             |
       _cons |   8.430798   .0087114   967.79   0.000     8.413703    8.447892
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1017 categories)
9255
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.00007m not found)
file /tmp/St32652.00007m saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.00007n not found)
file /tmp/St32652.00007n saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(1 missing value generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.00007o not found)
file /tmp/St32652.00007o saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.00007p not found)
file /tmp/St32652.00007p saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(38 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     25,294
                                                F(  25,   1011)   =    1465.83
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9793
                                                Adj R-squared     =     0.9784
                                                Root MSE          =     0.2662

                              (Std. Err. adjusted for 1,012 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |   .9713907   .4753858     2.04   0.041     .0385349    1.904247
             |
        year |
       1992  |    .371018   .0136095    27.26   0.000     .3443119    .3977242
       1993  |   .6932547   .0080591    86.02   0.000     .6774403    .7090691
       1994  |   .5636376    .011108    50.74   0.000     .5418402    .5854349
       1995  |   .2210778   .0153349    14.42   0.000     .1909858    .2511698
       1996  |   .1757139    .015175    11.58   0.000     .1459358     .205492
       1997  |   .2413601   .0134296    17.97   0.000     .2150071    .2677132
       1998  |   .1637096    .014925    10.97   0.000     .1344219    .1929972
       1999  |   .1592062   .0149001    10.68   0.000     .1299676    .1884448
       2000  |   .2101738   .0142059    14.79   0.000     .1822974    .2380503
       2001  |   .2206699   .0131838    16.74   0.000     .1947992    .2465407
       2002  |      .5624   .0170759    32.94   0.000     .5288918    .5959082
       2003  |   1.030995   .0168033    61.36   0.000      .998022    1.063969
       2004  |   1.082709   .0140119    77.27   0.000     1.055213    1.110204
       2005  |   .7138089   .0137137    52.05   0.000     .6868983    .7407196
       2006  |   .5631947   .0163847    34.37   0.000     .5310428    .5953466
       2007  |   .5089272   .0154914    32.85   0.000     .4785283    .5393261
       2008  |   .5739173   .0146755    39.11   0.000     .5451193    .6027152
       2009  |   .9976093   .0155502    64.15   0.000     .9670949    1.028124
       2010  |   2.001455   .0368781    54.27   0.000     1.929088    2.073821
       2011  |   1.968757   .0180251   109.22   0.000     1.933386    2.004127
       2012  |   1.679119    .017292    97.10   0.000     1.645186    1.713051
       2013  |   1.417867   .0178602    79.39   0.000      1.38282    1.452914
       2014  |   1.130619   .0154937    72.97   0.000     1.100216    1.161023
       2015  |   .5974756   .0174732    34.19   0.000     .5631877    .6317634
             |
       _cons |   8.083444   .0089031   907.93   0.000     8.065974    8.100915
-------------+----------------------------------------------------------------
       czone |   absorbed                                    (1012 categories)
9260
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.00007r not found)
file /tmp/St32652.00007r saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.00007s not found)
file /tmp/St32652.00007s saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(1 missing value generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.00007t not found)
file /tmp/St32652.00007t saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.00007u not found)
file /tmp/St32652.00007u saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(31 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     24,875
                                                F(  25,    994)   =    1718.51
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9794
                                                Adj R-squared     =     0.9786
                                                Root MSE          =     0.2482

                                (Std. Err. adjusted for 995 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -7.686969   .5533256   -13.89   0.000    -8.772789   -6.601149
             |
        year |
       1992  |   .1438308   .0155988     9.22   0.000     .1132204    .1744412
       1993  |   .6788889   .0073665    92.16   0.000     .6644331    .6933446
       1994  |   .6985053   .0116801    59.80   0.000     .6755848    .7214258
       1995  |   .4426257    .016828    26.30   0.000     .4096033    .4756481
       1996  |     .38741   .0162645    23.82   0.000     .3554933    .4193268
       1997  |    .408674   .0140075    29.18   0.000     .3811864    .4361617
       1998  |   .3671839   .0156485    23.46   0.000      .336476    .3978918
       1999  |   .3470361   .0151785    22.86   0.000     .3172505    .3768217
       2000  |   .3552368   .0146202    24.30   0.000     .3265468    .3839269
       2001  |   .3484537   .0130614    26.68   0.000     .3228226    .3740848
       2002  |   .7580219     .01544    49.09   0.000     .7277231    .7883207
       2003  |   .8442235   .0181494    46.52   0.000      .808608     .879839
       2004  |   .9795928   .0142904    68.55   0.000     .9515501    1.007636
       2005  |   .8033772   .0132804    60.49   0.000     .7773164     .829438
       2006  |    .704659   .0154259    45.68   0.000      .674388    .7349301
       2007  |   .6393126   .0148454    43.06   0.000     .6101807    .6684446
       2008  |   .6481613   .0137066    47.29   0.000     .6212642    .6750585
       2009  |   .9387166   .0153885    61.00   0.000     .9085189    .9689143
       2010  |   1.407793    .040917    34.41   0.000       1.3275    1.488087
       2011  |   1.833883   .0182768   100.34   0.000     1.798017    1.869749
       2012  |   1.836087   .0175623   104.55   0.000     1.801624     1.87055
       2013  |   1.623821   .0188105    86.33   0.000     1.586908    1.660734
       2014  |   1.275292   .0160718    79.35   0.000     1.243754    1.306831
       2015  |   .7788224   .0183832    42.37   0.000      .742748    .8148968
             |
       _cons |    8.46121   .0087328   968.90   0.000     8.444074    8.478347
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (995 categories)
9265
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.00007w not found)
file /tmp/St32652.00007w saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.00007x not found)
file /tmp/St32652.00007x saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(1 missing value generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.000080 not found)
file /tmp/St32652.000080 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.000081 not found)
file /tmp/St32652.000081 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(31 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     24,675
                                                F(  25,    986)   =    1711.68
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9793
                                                Adj R-squared     =     0.9784
                                                Root MSE          =     0.2481

                                (Std. Err. adjusted for 987 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -7.768691   .5642263   -13.77   0.000    -8.875913   -6.661469
             |
        year |
       1992  |   .1415502   .0158811     8.91   0.000     .1103855    .1727148
       1993  |   .6786334   .0074049    91.65   0.000     .6641022    .6931646
       1994  |   .6995746   .0118372    59.10   0.000     .6763457    .7228036
       1995  |   .4449833   .0171134    26.00   0.000     .4114005    .4785661
       1996  |   .3900766   .0165362    23.59   0.000     .3576263    .4225268
       1997  |   .4101733   .0142068    28.87   0.000     .3822943    .4380524
       1998  |   .3691773   .0158941    23.23   0.000     .3379872    .4003675
       1999  |   .3493138   .0153986    22.68   0.000     .3190959    .3795316
       2000  |   .3569498   .0147774    24.16   0.000     .3279511    .3859486
       2001  |   .3489259   .0132179    26.40   0.000     .3229874    .3748643
       2002  |   .7588279   .0156076    48.62   0.000        .7282    .7894559
       2003  |   .8417122   .0183673    45.83   0.000     .8056688    .8777556
       2004  |   .9785099   .0144002    67.95   0.000     .9502513    1.006768
       2005  |    .803884   .0133792    60.08   0.000     .7776289    .8301391
       2006  |   .7058723   .0155769    45.32   0.000     .6753046      .73644
       2007  |   .6406969   .0149716    42.79   0.000     .6113171    .6700768
       2008  |   .6484107   .0137741    47.07   0.000     .6213808    .6754405
       2009  |   .9376513   .0154351    60.75   0.000     .9073618    .9679408
       2010  |    1.40172   .0416217    33.68   0.000     1.320043    1.483398
       2011  |   1.832693   .0184158    99.52   0.000     1.796554    1.868831
       2012  |    1.83794   .0177152   103.75   0.000     1.803177    1.872704
       2013  |   1.626006   .0190263    85.46   0.000     1.588669    1.663342
       2014  |   1.276642   .0162171    78.72   0.000     1.244818    1.308466
       2015  |   .7804105   .0185943    41.97   0.000     .7439215    .8168995
             |
       _cons |   8.480033    .008759   968.15   0.000     8.462845    8.497222
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (987 categories)
9270
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.000083 not found)
file /tmp/St32652.000083 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.000084 not found)
file /tmp/St32652.000084 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(1 missing value generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.000085 not found)
file /tmp/St32652.000085 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.000086 not found)
file /tmp/St32652.000086 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(38 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     24,694
                                                F(  25,    987)   =    1455.50
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9794
                                                Adj R-squared     =     0.9785
                                                Root MSE          =     0.2659

                                (Std. Err. adjusted for 988 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -.1963107   .4512092    -0.44   0.664     -1.08175    .6891288
             |
        year |
       1992  |   .3394878   .0131588    25.80   0.000     .3136655    .3653102
       1993  |   .6909497   .0081751    84.52   0.000     .6749071    .7069923
       1994  |   .5805249   .0110005    52.77   0.000     .5589379    .6021119
       1995  |   .2504314   .0149131    16.79   0.000     .2211664    .2796964
       1996  |   .2045464   .0145737    14.04   0.000     .1759475    .2331453
       1997  |   .2642724    .012899    20.49   0.000     .2389598    .2895851
       1998  |   .1906103   .0143059    13.32   0.000     .1625369    .2186838
       1999  |   .1840763    .014181    12.98   0.000      .156248    .2119047
       2000  |   .2310153     .01356    17.04   0.000     .2044056     .257625
       2001  |   .2376788   .0125688    18.91   0.000     .2130142    .2623435
       2002  |   .5886367   .0160046    36.78   0.000     .5572297    .6200437
       2003  |   1.005285   .0171542    58.60   0.000     .9716223    1.038948
       2004  |   1.068121   .0145014    73.66   0.000     1.039664    1.096578
       2005  |   .7252577   .0135364    53.58   0.000     .6986943    .7518211
       2006  |   .5813846   .0163191    35.63   0.000     .5493604    .6134088
       2007  |   .5263875   .0151677    34.70   0.000     .4966228    .5561521
       2008  |   .5830713   .0146172    39.89   0.000     .5543869    .6117558
       2009  |   .9874803   .0156824    62.97   0.000     .9567057    1.018255
       2010  |   1.921335   .0357215    53.79   0.000     1.851236    1.991434
       2011  |    1.95032   .0181251   107.60   0.000     1.914752    1.985888
       2012  |   1.699637   .0171672    99.00   0.000     1.665949    1.733326
       2013  |   1.445479   .0175429    82.40   0.000     1.411053    1.479905
       2014  |    1.14943   .0155371    73.98   0.000      1.11894    1.179919
       2015  |   .6232141   .0175459    35.52   0.000     .5887826    .6576457
             |
       _cons |   8.084407    .009013   896.97   0.000      8.06672    8.102094
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (988 categories)
9275
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.000088 not found)
file /tmp/St32652.000088 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.000089 not found)
file /tmp/St32652.000089 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(1 missing value generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.00008a not found)
file /tmp/St32652.00008a saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.00008b not found)
file /tmp/St32652.00008b saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(31 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     24,375
                                                F(  25,    974)   =    1735.35
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9792
                                                Adj R-squared     =     0.9783
                                                Root MSE          =     0.2470

                                (Std. Err. adjusted for 975 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -7.791352   .5860531   -13.29   0.000    -8.941425    -6.64128
             |
        year |
       1992  |   .1406652   .0164065     8.57   0.000     .1084691    .1728613
       1993  |   .6778539   .0073407    92.34   0.000     .6634484    .6922594
       1994  |   .6980631   .0120745    57.81   0.000     .6743681    .7217581
       1995  |   .4428524   .0175946    25.17   0.000     .4083246    .4773802
       1996  |    .387994   .0169791    22.85   0.000     .3546742    .4213137
       1997  |   .4080376   .0144677    28.20   0.000     .3796462     .436429
       1998  |   .3670132   .0162588    22.57   0.000      .335107    .3989194
       1999  |   .3474977   .0157179    22.11   0.000     .3166528    .3783426
       2000  |   .3553218   .0149722    23.73   0.000     .3259404    .3847032
       2001  |   .3478573   .0132424    26.27   0.000     .3218704    .3738441
       2002  |   .7590111   .0156982    48.35   0.000      .728205    .7898172
       2003  |   .8419507   .0186774    45.08   0.000     .8052981    .8786032
       2004  |   .9788112   .0141728    69.06   0.000     .9509984    1.006624
       2005  |   .8025341   .0133401    60.16   0.000     .7763554    .8287129
       2006  |   .7041866   .0156215    45.08   0.000     .6735308    .7348423
       2007  |   .6400416   .0149419    42.84   0.000     .6107196    .6693636
       2008  |   .6470051   .0137242    47.14   0.000     .6200727    .6739374
       2009  |     .93658   .0155211    60.34   0.000     .9061214    .9670387
       2010  |   1.399515   .0431272    32.45   0.000     1.314882    1.484148
       2011  |   1.831993   .0186156    98.41   0.000     1.795462    1.868525
       2012  |   1.837549   .0177851   103.32   0.000     1.802647     1.87245
       2013  |   1.624654   .0192209    84.53   0.000     1.586934    1.662373
       2014  |   1.274082   .0162479    78.42   0.000     1.242197    1.305967
       2015  |   .7769507    .018819    41.29   0.000     .7400202    .8138812
             |
       _cons |   8.504302   .0085844   990.67   0.000     8.487456    8.521148
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (975 categories)
9280
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.00008d not found)
file /tmp/St32652.00008d saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.00008e not found)
file /tmp/St32652.00008e saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(1 missing value generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.00008f not found)
file /tmp/St32652.00008f saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.00008g not found)
file /tmp/St32652.00008g saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(38 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     24,269
                                                F(  25,    970)   =    1422.03
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9793
                                                Adj R-squared     =     0.9785
                                                Root MSE          =     0.2668

                                (Std. Err. adjusted for 971 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |   .4022119   .4707158     0.85   0.393    -.5215267    1.325951
             |
        year |
       1992  |   .3550388   .0136554    26.00   0.000     .3282412    .3818365
       1993  |   .6923939   .0082198    84.23   0.000     .6762632    .7085245
       1994  |   .5716702   .0115218    49.62   0.000     .5490596    .5942807
       1995  |   .2352813   .0154111    15.27   0.000     .2050384    .2655242
       1996  |   .1891351   .0148748    12.72   0.000     .1599447    .2183255
       1997  |   .2524616    .013135    19.22   0.000     .2266855    .2782378
       1998  |   .1765069   .0145492    12.13   0.000     .1479554    .2050583
       1999  |   .1715869   .0144909    11.84   0.000     .1431498    .2000239
       2000  |   .2208774   .0140665    15.70   0.000      .193273    .2484817
       2001  |   .2296225   .0128092    17.93   0.000     .2044856    .2547595
       2002  |   .5767484    .016267    35.46   0.000     .5448258     .608671
       2003  |   1.020386   .0174101    58.61   0.000     .9862206    1.054552
       2004  |   1.075995   .0147008    73.19   0.000     1.047146    1.104844
       2005  |   .7201615   .0135985    52.96   0.000     .6934756    .7468474
       2006  |   .5732256   .0164219    34.91   0.000      .540999    .6054523
       2007  |    .518603   .0153033    33.89   0.000     .4885716    .5486343
       2008  |   .5788577   .0146746    39.45   0.000     .5500601    .6076553
       2009  |   .9933284   .0160574    61.86   0.000     .9618172     1.02484
       2010  |     1.9644   .0372462    52.74   0.000     1.891308    2.037493
       2011  |   1.961942   .0185758   105.62   0.000     1.925489    1.998396
       2012  |   1.691045   .0174574    96.87   0.000     1.656786    1.725304
       2013  |   1.433271   .0178245    80.41   0.000     1.398292     1.46825
       2014  |   1.140392   .0157369    72.47   0.000     1.109509    1.171274
       2015  |   .6110682   .0177601    34.41   0.000     .5762156    .6459208
             |
       _cons |   8.091337   .0091313   886.11   0.000     8.073418    8.109257
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (971 categories)
9285
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.00008i not found)
file /tmp/St32652.00008i saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.00008j not found)
file /tmp/St32652.00008j saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(1 missing value generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.00008k not found)
file /tmp/St32652.00008k saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.00008l not found)
file /tmp/St32652.00008l saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(31 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     23,925
                                                F(  25,    956)   =    1738.21
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9792
                                                Adj R-squared     =     0.9783
                                                Root MSE          =     0.2467

                                (Std. Err. adjusted for 957 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -7.840531   .5974431   -13.12   0.000    -9.012982    -6.66808
             |
        year |
       1992  |   .1397697   .0167404     8.35   0.000     .1069176    .1726219
       1993  |    .676383   .0073672    91.81   0.000     .6619254    .6908407
       1994  |   .6970537   .0122604    56.85   0.000     .6729933    .7211141
       1995  |   .4423656   .0179042    24.71   0.000     .4072296    .4775016
       1996  |   .3878671   .0172954    22.43   0.000     .3539258    .4218085
       1997  |   .4080724   .0147009    27.76   0.000     .3792228    .4369221
       1998  |   .3670061   .0165384    22.19   0.000     .3345503    .3994619
       1999  |   .3472158   .0159729    21.74   0.000     .3158698    .3785619
       2000  |   .3553632   .0152246    23.34   0.000     .3254857    .3852408
       2001  |   .3475673   .0134677    25.81   0.000     .3211378    .3739969
       2002  |   .7588887   .0158788    47.79   0.000     .7277273    .7900501
       2003  |   .8403621   .0189815    44.27   0.000     .8031118    .8776124
       2004  |   .9770852   .0143185    68.24   0.000      .948986    1.005184
       2005  |   .8018198   .0135103    59.35   0.000     .7753066    .8283329
       2006  |   .7038518   .0158629    44.37   0.000     .6727217    .7349819
       2007  |   .6406556   .0151449    42.30   0.000     .6109346    .6703767
       2008  |   .6476502   .0138534    46.75   0.000     .6204637    .6748367
       2009  |   .9369705   .0157088    59.65   0.000     .9061428    .9677982
       2010  |   1.397563   .0439317    31.81   0.000      1.31135    1.483777
       2011  |   1.831838   .0188013    97.43   0.000     1.794941    1.868734
       2012  |   1.838893   .0179748   102.30   0.000     1.803619    1.874168
       2013  |   1.626243   .0194563    83.58   0.000     1.588061    1.664425
       2014  |   1.274439   .0163941    77.74   0.000     1.242267    1.306612
       2015  |   .7767014   .0190621    40.75   0.000      .739293    .8141098
             |
       _cons |   8.532144   .0086465   986.77   0.000     8.515176    8.549113
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (957 categories)
9290
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.00008n not found)
file /tmp/St32652.00008n saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.00008o not found)
file /tmp/St32652.00008o saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(1 missing value generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.00008p not found)
file /tmp/St32652.00008p saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.00008q not found)
file /tmp/St32652.00008q saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(31 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     23,650
                                                F(  25,    945)   =    1748.40
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9794
                                                Adj R-squared     =     0.9786
                                                Root MSE          =     0.2429

                                (Std. Err. adjusted for 946 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -7.781412    .605179   -12.86   0.000    -8.969062   -6.593762
             |
        year |
       1992  |   .1411986   .0169477     8.33   0.000     .1079391    .1744581
       1993  |   .6756992   .0073688    91.70   0.000     .6612382    .6901603
       1994  |   .6946375   .0123171    56.40   0.000     .6704654    .7188095
       1995  |   .4391745   .0180834    24.29   0.000     .4036862    .4746628
       1996  |   .3844517   .0174405    22.04   0.000     .3502251    .4186784
       1997  |   .4050351   .0148018    27.36   0.000      .375987    .4340832
       1998  |    .363596   .0167053    21.77   0.000     .3308122    .3963799
       1999  |   .3435846   .0160905    21.35   0.000     .3120074    .3751618
       2000  |   .3508392   .0152397    23.02   0.000     .3209316    .3807467
       2001  |   .3461528   .0134144    25.80   0.000     .3198274    .3724783
       2002  |   .7589377   .0158313    47.94   0.000     .7278691    .7900063
       2003  |     .84353   .0191002    44.16   0.000     .8060462    .8810137
       2004  |    .978717   .0141895    68.97   0.000     .9508705    1.006564
       2005  |   .8010014   .0134966    59.35   0.000     .7745147    .8274881
       2006  |    .704535   .0157815    44.64   0.000     .6735642    .7355058
       2007  |    .639784   .0150675    42.46   0.000     .6102144    .6693536
       2008  |   .6472474   .0136949    47.26   0.000     .6203715    .6741233
       2009  |    .939237   .0154365    60.85   0.000     .9089431    .9695308
       2010  |    1.40172   .0444321    31.55   0.000     1.314524    1.488917
       2011  |   1.834059   .0187465    97.83   0.000     1.797269    1.870849
       2012  |   1.839174   .0179781   102.30   0.000     1.803893    1.874456
       2013  |   1.625071   .0195064    83.31   0.000      1.58679    1.663352
       2014  |   1.273231   .0164713    77.30   0.000     1.240906    1.305555
       2015  |   .7745749   .0192146    40.31   0.000     .7368666    .8122831
             |
       _cons |   8.559686   .0085961   995.77   0.000     8.542816    8.576555
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (946 categories)
9295
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.00008s not found)
file /tmp/St32652.00008s saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.00008t not found)
file /tmp/St32652.00008t saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(1 missing value generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.00008u not found)
file /tmp/St32652.00008u saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.00008v not found)
file /tmp/St32652.00008v saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(31 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     23,425
                                                F(  25,    936)   =    1750.67
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9793
                                                Adj R-squared     =     0.9785
                                                Root MSE          =     0.2425

                                (Std. Err. adjusted for 937 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -7.822535   .6101062   -12.82   0.000     -9.01987   -6.625201
             |
        year |
       1992  |   .1401798   .0170515     8.22   0.000     .1067162    .1736434
       1993  |   .6751756   .0074157    91.05   0.000     .6606222     .689729
       1994  |   .6934109   .0124371    55.75   0.000     .6690031    .7178188
       1995  |   .4385362   .0182567    24.02   0.000     .4027073    .4743651
       1996  |   .3841583   .0176172    21.81   0.000     .3495845    .4187321
       1997  |    .404399   .0149468    27.06   0.000     .3750658    .4337322
       1998  |   .3638953   .0168677    21.57   0.000     .3307923    .3969983
       1999  |   .3439983   .0162517    21.17   0.000     .3121043    .3758923
       2000  |   .3499489    .015388    22.74   0.000     .3197499     .380148
       2001  |    .345339   .0135299    25.52   0.000     .3187865    .3718915
       2002  |      .7606   .0159779    47.60   0.000     .7292434    .7919566
       2003  |   .8436764   .0191326    44.10   0.000     .8061286    .8812242
       2004  |   .9789609   .0141647    69.11   0.000     .9511626    1.006759
       2005  |   .8022462   .0135867    59.05   0.000     .7755823      .82891
       2006  |   .7060441   .0158984    44.41   0.000     .6748435    .7372447
       2007  |   .6419393   .0151789    42.29   0.000     .6121506    .6717279
       2008  |   .6489168   .0137608    47.16   0.000     .6219112    .6759224
       2009  |   .9407221   .0154457    60.91   0.000     .9104098    .9710343
       2010  |   1.400467    .044686    31.34   0.000     1.312771    1.488163
       2011  |   1.834746   .0187876    97.66   0.000     1.797876    1.871617
       2012  |   1.840539   .0181106   101.63   0.000     1.804997    1.876081
       2013  |   1.626879   .0196576    82.76   0.000     1.588301    1.665457
       2014  |   1.275081   .0165648    76.98   0.000     1.242573     1.30759
       2015  |   .7767457   .0193338    40.18   0.000     .7388031    .8146882
             |
       _cons |   8.579339    .008613   996.10   0.000     8.562436    8.596242
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (937 categories)
9300
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.00008x not found)
file /tmp/St32652.00008x saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.000090 not found)
file /tmp/St32652.000090 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(1 missing value generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.000091 not found)
file /tmp/St32652.000091 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.000092 not found)
file /tmp/St32652.000092 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(31 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     23,200
                                                F(  25,    927)   =    1732.38
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9791
                                                Adj R-squared     =     0.9782
                                                Root MSE          =     0.2425

                                (Std. Err. adjusted for 928 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -7.842442   .6193651   -12.66   0.000    -9.057962   -6.626922
             |
        year |
       1992  |   .1403202   .0172604     8.13   0.000     .1064463    .1741942
       1993  |   .6766635   .0074189    91.21   0.000     .6621036    .6912233
       1994  |   .6950973   .0125506    55.38   0.000     .6704664    .7197281
       1995  |   .4404433   .0184702    23.85   0.000     .4041951    .4766915
       1996  |   .3849081   .0178174    21.60   0.000      .349941    .4198752
       1997  |   .4043594   .0151073    26.77   0.000     .3747109    .4340078
       1998  |   .3645073   .0170609    21.37   0.000     .3310248    .3979897
       1999  |   .3445311   .0164369    20.96   0.000     .3122733    .3767889
       2000  |    .350752   .0155146    22.61   0.000     .3203041    .3811998
       2001  |   .3459194   .0136202    25.40   0.000     .3191894    .3726494
       2002  |   .7618503   .0161532    47.16   0.000     .7301492    .7935514
       2003  |   .8445801   .0192782    43.81   0.000     .8067462    .8824141
       2004  |   .9807503   .0142054    69.04   0.000     .9528718    1.008629
       2005  |   .8034254   .0136608    58.81   0.000     .7766157     .830235
       2006  |   .7072344    .016024    44.14   0.000     .6757869     .738682
       2007  |     .64333     .01528    42.10   0.000     .6133426    .6733173
       2008  |   .6494767   .0138398    46.93   0.000     .6223156    .6766377
       2009  |   .9410626   .0155249    60.62   0.000     .9105945    .9715306
       2010  |   1.400433    .045264    30.94   0.000     1.311602    1.489265
       2011  |   1.836211   .0189209    97.05   0.000     1.799078    1.873344
       2012  |   1.842833   .0182443   101.01   0.000     1.807028    1.878638
       2013  |    1.62924   .0198401    82.12   0.000     1.590303    1.668177
       2014  |   1.277223   .0167005    76.48   0.000     1.244448    1.309999
       2015  |   .7791165   .0195131    39.93   0.000     .7408215    .8174115
             |
       _cons |    8.59694   .0086191   997.42   0.000     8.580025    8.613855
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (928 categories)
9305
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.000094 not found)
file /tmp/St32652.000094 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.000095 not found)
file /tmp/St32652.000095 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(1 missing value generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.000096 not found)
file /tmp/St32652.000096 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.000097 not found)
file /tmp/St32652.000097 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(38 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     23,069
                                                F(  25,    922)   =    1335.06
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9798
                                                Adj R-squared     =     0.9789
                                                Root MSE          =     0.2646

                                (Std. Err. adjusted for 923 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -.0395782   .5078365    -0.08   0.938    -1.036228    .9570713
             |
        year |
       1992  |   .3402886   .0149888    22.70   0.000     .3108724    .3697047
       1993  |   .6905267    .008426    81.95   0.000     .6739905     .707063
       1994  |   .5782533   .0119849    48.25   0.000     .5547326    .6017741
       1995  |    .245327   .0166856    14.70   0.000     .2125808    .2780733
       1996  |   .1984312   .0162528    12.21   0.000     .1665345    .2303279
       1997  |    .258928   .0143292    18.07   0.000     .2308064    .2870497
       1998  |   .1844574   .0158833    11.61   0.000     .1532858     .215629
       1999  |   .1793752   .0157352    11.40   0.000     .1484943    .2102561
       2000  |   .2265223   .0148953    15.21   0.000     .1972896     .255755
       2001  |   .2348164   .0134751    17.43   0.000      .208371    .2612618
       2002  |   .5829236    .016112    36.18   0.000     .5513032    .6145441
       2003  |   1.005882   .0192929    52.14   0.000     .9680185    1.043745
       2004  |   1.065813   .0156489    68.11   0.000     1.035101    1.096524
       2005  |   .7213105   .0138215    52.19   0.000     .6941852    .7484358
       2006  |   .5751272   .0164055    35.06   0.000     .5429308    .6073235
       2007  |   .5199677   .0154101    33.74   0.000     .4897247    .5502106
       2008  |   .5781318   .0148565    38.91   0.000     .5489753    .6072883
       2009  |   .9835638   .0167044    58.88   0.000     .9507808    1.016347
       2010  |   1.925622   .0407151    47.29   0.000     1.845717    2.005527
       2011  |   1.948173    .019636    99.21   0.000     1.909636    1.986709
       2012  |   1.693745   .0176635    95.89   0.000      1.65908     1.72841
       2013  |   1.438724   .0181355    79.33   0.000     1.403132    1.474315
       2014  |   1.144091    .016071    71.19   0.000     1.112551     1.17563
       2015  |   .6204734   .0183669    33.78   0.000     .5844275    .6565192
             |
       _cons |   8.094693   .0093114   869.33   0.000     8.076419    8.112967
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (923 categories)
9310
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.000099 not found)
file /tmp/St32652.000099 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.00009a not found)
file /tmp/St32652.00009a saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(1 missing value generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.00009b not found)
file /tmp/St32652.00009b saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.00009c not found)
file /tmp/St32652.00009c saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(31 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     22,750
                                                F(  25,    909)   =    1714.34
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9791
                                                Adj R-squared     =     0.9782
                                                Root MSE          =     0.2416

                                (Std. Err. adjusted for 910 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -7.867497   .6268375   -12.55   0.000    -9.097714    -6.63728
             |
        year |
       1992  |   .1405172   .0174161     8.07   0.000     .1063368    .1746975
       1993  |   .6768551   .0074666    90.65   0.000     .6622012    .6915089
       1994  |   .6943789   .0127901    54.29   0.000     .6692774    .7194804
       1995  |   .4397067   .0187983    23.39   0.000     .4028136    .4765998
       1996  |   .3836553   .0181121    21.18   0.000     .3481088    .4192017
       1997  |   .4024802   .0153606    26.20   0.000     .3723339    .4326266
       1998  |   .3637766   .0173452    20.97   0.000     .3297353    .3978179
       1999  |   .3433219   .0166963    20.56   0.000     .3105542    .3760897
       2000  |   .3486754   .0157841    22.09   0.000     .3176979    .3796529
       2001  |   .3440891   .0138348    24.87   0.000     .3169373     .371241
       2002  |    .763991   .0163189    46.82   0.000     .7319638    .7960182
       2003  |   .8466895     .01935    43.76   0.000     .8087136    .8846655
       2004  |   .9822117   .0142081    69.13   0.000     .9543273    1.010096
       2005  |   .8044955    .013811    58.25   0.000     .7773903    .8316006
       2006  |    .709627   .0162038    43.79   0.000     .6778258    .7414283
       2007  |   .6456297   .0154351    41.83   0.000     .6153371    .6759223
       2008  |   .6515494   .0139446    46.72   0.000     .6241821    .6789168
       2009  |   .9424629   .0156343    60.28   0.000     .9117793    .9731465
       2010  |   1.400642   .0457435    30.62   0.000     1.310867    1.490417
       2011  |   1.837585   .0190695    96.36   0.000     1.800159     1.87501
       2012  |   1.845526   .0184033   100.28   0.000     1.809408    1.881644
       2013  |   1.632211   .0200518    81.40   0.000     1.592858    1.671565
       2014  |   1.280879   .0168739    75.91   0.000     1.247762    1.313995
       2015  |   .7826374   .0197796    39.57   0.000     .7438183    .8214564
             |
       _cons |   8.630541   .0086802   994.28   0.000     8.613506    8.647577
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (910 categories)
9315
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.00009e not found)
file /tmp/St32652.00009e saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.00009f not found)
file /tmp/St32652.00009f saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(1 missing value generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.00009g not found)
file /tmp/St32652.00009g saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.00009h not found)
file /tmp/St32652.00009h saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(38 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     22,744
                                                F(  25,    909)   =    1305.73
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9798
                                                Adj R-squared     =     0.9789
                                                Root MSE          =     0.2649

                                (Std. Err. adjusted for 910 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |    -.41543   .4497274    -0.92   0.356    -1.298055    .4671948
             |
        year |
       1992  |    .330055   .0129793    25.43   0.000     .3045822    .3555278
       1993  |   .6891686   .0084157    81.89   0.000     .6726521    .7056851
       1994  |   .5829011   .0118656    49.13   0.000     .5596139    .6061883
       1995  |   .2544973   .0157036    16.21   0.000     .2236778    .2853168
       1996  |   .2072518   .0153638    13.49   0.000     .1770993    .2374044
       1997  |   .2644194   .0135391    19.53   0.000     .2378479    .2909909
       1998  |   .1917592   .0150436    12.75   0.000      .162235    .2212834
       1999  |   .1859875   .0151084    12.31   0.000      .156336    .2156389
       2000  |   .2307333   .0146592    15.74   0.000     .2019635    .2595032
       2001  |   .2380416   .0134355    17.72   0.000     .2116734    .2644097
       2002  |   .5888988   .0164758    35.74   0.000     .5565639    .6212338
       2003  |   .9962943   .0173116    57.55   0.000     .9623189     1.03027
       2004  |   1.061175    .014614    72.61   0.000     1.032494    1.089856
       2005  |   .7246278   .0141842    51.09   0.000     .6967901    .7524654
       2006  |   .5793042   .0169137    34.25   0.000     .5461098    .6124986
       2007  |   .5234174   .0156894    33.36   0.000     .4926257    .5542091
       2008  |   .5801609   .0150984    38.43   0.000     .5505292    .6097926
       2009  |   .9806224    .016192    60.56   0.000     .9488444      1.0124
       2010  |   1.900892   .0352778    53.88   0.000     1.831657    1.970128
       2011  |    1.94304   .0184155   105.51   0.000     1.906898    1.979182
       2012  |   1.701415   .0181542    93.72   0.000     1.665786    1.737044
       2013  |   1.448444    .018539    78.13   0.000      1.41206    1.484828
       2014  |   1.152053   .0162515    70.89   0.000     1.120158    1.183947
       2015  |   .6298282   .0180527    34.89   0.000     .5943984    .6652581
             |
       _cons |   8.109417   .0093945   863.21   0.000      8.09098    8.127854
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (910 categories)
9320
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.00009j not found)
file /tmp/St32652.00009j saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.00009k not found)
file /tmp/St32652.00009k saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(1 missing value generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.00009l not found)
file /tmp/St32652.00009l saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.00009m not found)
file /tmp/St32652.00009m saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(31 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     22,400
                                                F(  25,    895)   =    1686.75
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9788
                                                Adj R-squared     =     0.9779
                                                Root MSE          =     0.2406

                                (Std. Err. adjusted for 896 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -7.945774   .6386271   -12.44   0.000    -9.199156   -6.692393
             |
        year |
       1992  |   .1387663   .0177548     7.82   0.000     .1039204    .1736123
       1993  |   .6765369   .0075488    89.62   0.000     .6617215    .6913523
       1994  |   .6945424    .012983    53.50   0.000     .6690617    .7200231
       1995  |   .4403424   .0190965    23.06   0.000     .4028632    .4778215
       1996  |   .3847545   .0183883    20.92   0.000     .3486654    .4208436
       1997  |   .4034345   .0155533    25.94   0.000     .3729093    .4339597
       1998  |   .3650434   .0175465    20.80   0.000     .3306063    .3994804
       1999  |   .3440279    .016903    20.35   0.000     .3108538     .377202
       2000  |   .3480323   .0159638    21.80   0.000     .3167016    .3793631
       2001  |   .3438384   .0139917    24.57   0.000      .316378    .3712988
       2002  |   .7639289   .0164589    46.41   0.000     .7316263    .7962315
       2003  |   .8428029   .0195361    43.14   0.000      .804461    .8811447
       2004  |   .9793438   .0142685    68.64   0.000     .9513401    1.007347
       2005  |   .8029378   .0139419    57.59   0.000     .7755751    .8303004
       2006  |   .7073559   .0163271    43.32   0.000      .675312    .7393998
       2007  |   .6457256   .0156102    41.37   0.000     .6150888    .6763625
       2008  |   .6518245   .0140446    46.41   0.000     .6242602    .6793887
       2009  |   .9417705   .0157152    59.93   0.000     .9109276    .9726134
       2010  |   1.394459   .0465014    29.99   0.000     1.303195    1.485724
       2011  |   1.835028   .0191588    95.78   0.000     1.797427    1.872629
       2012  |   1.845711   .0186369    99.04   0.000     1.809134    1.882288
       2013  |   1.632536   .0203351    80.28   0.000     1.592626    1.672447
       2014  |   1.281554   .0170585    75.13   0.000     1.248075    1.315034
       2015  |   .7815039   .0200885    38.90   0.000     .7420779      .82093
             |
       _cons |   8.660804   .0087344   991.58   0.000     8.643661    8.677946
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (896 categories)
9325
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.00009o not found)
file /tmp/St32652.00009o saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.00009p not found)
file /tmp/St32652.00009p saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(1 missing value generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.00009q not found)
file /tmp/St32652.00009q saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.00009r not found)
file /tmp/St32652.00009r saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(30 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     22,050
                                                F(  25,    881)   =    1664.30
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9788
                                                Adj R-squared     =     0.9779
                                                Root MSE          =     0.2402

                                (Std. Err. adjusted for 882 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.011096   .6625348   -12.09   0.000    -9.311426   -6.710765
             |
        year |
       1992  |   .1367613   .0183756     7.44   0.000     .1006962    .1728264
       1993  |   .6759507   .0075662    89.34   0.000     .6611008    .6908006
       1994  |   .6946721   .0134539    51.63   0.000     .6682668    .7210774
       1995  |   .4400645   .0198641    22.15   0.000      .401078     .479051
       1996  |   .3844541   .0190756    20.15   0.000     .3470151    .4218931
       1997  |    .403598   .0160614    25.13   0.000     .3720749    .4351211
       1998  |   .3659475   .0181671    20.14   0.000     .3302917    .4016033
       1999  |   .3452275   .0174242    19.81   0.000     .3110297    .3794253
       2000  |   .3486943   .0164196    21.24   0.000     .3164682    .3809204
       2001  |   .3460348   .0143046    24.19   0.000     .3179597    .3741099
       2002  |   .7661191   .0167208    45.82   0.000     .7333019    .7989363
       2003  |   .8438246   .0200867    42.01   0.000     .8044011     .883248
       2004  |    .979032   .0144681    67.67   0.000     .9506361    1.007428
       2005  |   .8029638   .0141145    56.89   0.000     .7752618    .8306658
       2006  |   .7081724   .0165766    42.72   0.000     .6756382    .7407066
       2007  |   .6463661   .0157908    40.93   0.000      .615374    .6773581
       2008  |   .6519928   .0141417    46.10   0.000     .6242375    .6797481
       2009  |   .9415233   .0159361    59.08   0.000     .9102462    .9728004
       2010  |   1.390074   .0482152    28.83   0.000     1.295444    1.484704
       2011  |   1.834469   .0195099    94.03   0.000     1.796178    1.872761
       2012  |   1.847686   .0189008    97.76   0.000      1.81059    1.884782
       2013  |    1.63394   .0207472    78.75   0.000     1.593221     1.67466
       2014  |   1.282745   .0173541    73.92   0.000     1.248685    1.316805
       2015  |    .781736   .0205701    38.00   0.000     .7413639    .8221081
             |
       _cons |   8.680772   .0087982   986.65   0.000     8.663504     8.69804
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (882 categories)
9330
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.00009t not found)
file /tmp/St32652.00009t saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.00009u not found)
file /tmp/St32652.00009u saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(1 missing value generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.00009v not found)
file /tmp/St32652.00009v saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.00009w not found)
file /tmp/St32652.00009w saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(32 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     21,975
                                                F(  25,    878)   =    1271.71
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9799
                                                Adj R-squared     =     0.9790
                                                Root MSE          =     0.2635

                                (Std. Err. adjusted for 879 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |   .5648376   .5873377     0.96   0.336    -.5879122    1.717587
             |
        year |
       1992  |   .3555462   .0167819    21.19   0.000     .3226088    .3884836
       1993  |   .6909454   .0086011    80.33   0.000     .6740644    .7078265
       1994  |   .5686362   .0130698    43.51   0.000     .5429845    .5942879
       1995  |   .2286533   .0183239    12.48   0.000     .1926895    .2646171
       1996  |   .1845585   .0177134    10.42   0.000     .1497929    .2193241
       1997  |    .247451   .0151496    16.33   0.000     .2177174    .2771846
       1998  |   .1714948   .0169862    10.10   0.000     .1381565    .2048331
       1999  |   .1670313   .0166809    10.01   0.000     .1342923    .1997703
       2000  |   .2166914   .0153925    14.08   0.000      .186481    .2469018
       2001  |   .2270828   .0140023    16.22   0.000     .1996008    .2545647
       2002  |   .5709808   .0177867    32.10   0.000     .5360714    .6058901
       2003  |   1.020749   .0202799    50.33   0.000     .9809466    1.060552
       2004  |   1.074169   .0159431    67.38   0.000     1.042878     1.10546
       2005  |   .7163534   .0142684    50.21   0.000     .6883492    .7443576
       2006  |   .5648228   .0171162    33.00   0.000     .5312295    .5984162
       2007  |   .5116008   .0159929    31.99   0.000      .480212    .5429895
       2008  |   .5759609   .0147838    38.96   0.000     .5469453    .6049766
       2009  |   .9909757   .0171835    57.67   0.000     .9572501    1.024701
       2010  |   1.971516    .045847    43.00   0.000     1.881534    2.061499
       2011  |   1.962801   .0205746    95.40   0.000      1.92242    2.003183
       2012  |   1.687917   .0187161    90.19   0.000     1.651184    1.724651
       2013  |    1.42768   .0195909    72.87   0.000      1.38923    1.466131
       2014  |   1.139635   .0169575    67.21   0.000     1.106353    1.172916
       2015  |   .6096799   .0195053    31.26   0.000     .5713973    .6479624
             |
       _cons |   8.103726    .009527   850.61   0.000     8.085027    8.122424
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (879 categories)
9335
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.0000a0 not found)
file /tmp/St32652.0000a0 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.0000a1 not found)
file /tmp/St32652.0000a1 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(1 missing value generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.0000a2 not found)
file /tmp/St32652.0000a2 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.0000a3 not found)
file /tmp/St32652.0000a3 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(30 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     21,650
                                                F(  25,    865)   =    1677.93
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9788
                                                Adj R-squared     =     0.9779
                                                Root MSE          =     0.2378

                                (Std. Err. adjusted for 866 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |    -8.0147   .6749297   -11.87   0.000    -9.339391   -6.690008
             |
        year |
       1992  |   .1356609   .0186964     7.26   0.000     .0989653    .1723565
       1993  |   .6745959   .0075608    89.22   0.000     .6597562    .6894356
       1994  |   .6927213   .0135954    50.95   0.000     .6660375    .7194051
       1995  |   .4371554   .0201125    21.74   0.000     .3976805    .4766303
       1996  |   .3817939   .0192857    19.80   0.000     .3439417    .4196462
       1997  |   .4003643   .0161852    24.74   0.000     .3685974    .4321311
       1998  |   .3634819   .0183349    19.82   0.000     .3274958     .399468
       1999  |   .3415097   .0175795    19.43   0.000     .3070064    .3760131
       2000  |   .3455088   .0164452    21.01   0.000     .3132317    .3777859
       2001  |   .3430963   .0143139    23.97   0.000     .3150023    .3711903
       2002  |   .7653335   .0168701    45.37   0.000     .7322224    .7984446
       2003  |   .8443219   .0202682    41.66   0.000     .8045412    .8841025
       2004  |   .9801409   .0144782    67.70   0.000     .9517243    1.008557
       2005  |   .8033758   .0141802    56.65   0.000     .7755443    .8312074
       2006  |   .7072718   .0166455    42.49   0.000     .6746016     .739942
       2007  |   .6454008   .0159544    40.45   0.000     .6140868    .6767147
       2008  |    .651721   .0141827    45.95   0.000     .6238846    .6795575
       2009  |   .9418178   .0158077    59.58   0.000     .9107919    .9728437
       2010  |   1.392064   .0487624    28.55   0.000     1.296357     1.48777
       2011  |   1.836976   .0196044    93.70   0.000     1.798498    1.875454
       2012  |   1.848686   .0190581    97.00   0.000      1.81128    1.886091
       2013  |   1.634535   .0209341    78.08   0.000     1.593448    1.675623
       2014  |   1.282852   .0174084    73.69   0.000     1.248685     1.31702
       2015  |   .7823509    .020772    37.66   0.000     .7415815    .8231203
             |
       _cons |   8.715148   .0087338   997.87   0.000     8.698006     8.73229
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (866 categories)
9340
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.0000a5 not found)
file /tmp/St32652.0000a5 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.0000a6 not found)
file /tmp/St32652.0000a6 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(1 missing value generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.0000a7 not found)
file /tmp/St32652.0000a7 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.0000a8 not found)
file /tmp/St32652.0000a8 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(30 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     21,475
                                                F(  25,    858)   =    1674.82
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9787
                                                Adj R-squared     =     0.9777
                                                Root MSE          =     0.2376

                                (Std. Err. adjusted for 859 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.039276   .6781533   -11.85   0.000     -9.37031   -6.708243
             |
        year |
       1992  |   .1349962   .0187441     7.20   0.000     .0982066    .1717858
       1993  |   .6750477   .0076119    88.68   0.000     .6601076    .6899878
       1994  |   .6933905   .0136736    50.71   0.000      .666553    .7202281
       1995  |   .4378969    .020199    21.68   0.000     .3982516    .4775422
       1996  |   .3825575   .0193194    19.80   0.000     .3446388    .4204762
       1997  |    .400963    .016243    24.69   0.000     .3690824    .4328436
       1998  |   .3644076    .018435    19.77   0.000     .3282246    .4005905
       1999  |   .3422135   .0176945    19.34   0.000     .3074839    .3769431
       2000  |   .3461444   .0164444    21.05   0.000     .3138685    .3784203
       2001  |   .3446682   .0143197    24.07   0.000     .3165624     .372774
       2002  |   .7670261   .0169169    45.34   0.000     .7338228    .8002294
       2003  |   .8451201   .0204616    41.30   0.000     .8049595    .8852807
       2004  |   .9818903   .0145948    67.28   0.000     .9532446    1.010536
       2005  |   .8053976   .0141962    56.73   0.000     .7775343    .8332609
       2006  |    .709432   .0166941    42.50   0.000     .6766658    .7421981
       2007  |   .6473943   .0160096    40.44   0.000     .6159717    .6788169
       2008  |    .652761   .0142492    45.81   0.000     .6247936    .6807283
       2009  |   .9424781   .0159153    59.22   0.000     .9112406    .9737156
       2010  |   1.391766     .04908    28.36   0.000     1.295435    1.488096
       2011  |   1.837323   .0197419    93.07   0.000     1.798575    1.876071
       2012  |     1.8497   .0190819    96.93   0.000     1.812247    1.887153
       2013  |   1.635729   .0209579    78.05   0.000     1.594594    1.676864
       2014  |   1.283903    .017392    73.82   0.000     1.249768    1.318039
       2015  |   .7831382   .0207859    37.68   0.000     .7423411    .8239354
             |
       _cons |   8.732931   .0087727   995.47   0.000     8.715712    8.750149
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (859 categories)
9345
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.0000aa not found)
file /tmp/St32652.0000aa saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.0000ab not found)
file /tmp/St32652.0000ab saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(1 missing value generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.0000ac not found)
file /tmp/St32652.0000ac saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.0000ad not found)
file /tmp/St32652.0000ad saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(30 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     21,200
                                                F(  25,    847)   =    1673.41
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9780
                                                Adj R-squared     =     0.9771
                                                Root MSE          =     0.2371

                                (Std. Err. adjusted for 848 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -7.962648   .6889243   -11.56   0.000    -9.314847   -6.610449
             |
        year |
       1992  |   .1375447   .0190595     7.22   0.000     .1001353    .1749542
       1993  |   .6753853   .0076444    88.35   0.000     .6603811    .6903894
       1994  |   .6912691   .0138088    50.06   0.000     .6641656    .7183725
       1995  |    .434375   .0204433    21.25   0.000     .3942496    .4745005
       1996  |     .37999   .0195544    19.43   0.000     .3416093    .4183707
       1997  |   .3987349   .0164341    24.26   0.000     .3664786    .4309913
       1998  |   .3605913   .0186974    19.29   0.000     .3238927    .3972899
       1999  |   .3379376   .0178923    18.89   0.000     .3028192     .373056
       2000  |   .3415612    .016558    20.63   0.000     .3090617    .3740606
       2001  |   .3407852   .0143731    23.71   0.000      .312574    .3689963
       2002  |   .7648704    .017064    44.82   0.000     .7313777    .7983631
       2003  |    .846653   .0207812    40.74   0.000     .8058642    .8874417
       2004  |   .9830867   .0147562    66.62   0.000     .9541237     1.01205
       2005  |    .803637   .0142716    56.31   0.000     .7756252    .8316489
       2006  |   .7078418   .0167987    42.14   0.000     .6748699    .7408137
       2007  |   .6462297   .0161295    40.07   0.000     .6145712    .6778882
       2008  |   .6514829   .0143358    45.44   0.000      .623345    .6796207
       2009  |    .943379   .0160692    58.71   0.000     .9118389    .9749192
       2010  |   1.398343   .0499085    28.02   0.000     1.300384    1.496302
       2011  |   1.840405    .019933    92.33   0.000     1.801281    1.879528
       2012  |   1.849751    .019259    96.05   0.000     1.811951    1.887552
       2013  |   1.634713   .0211957    77.12   0.000      1.59311    1.676315
       2014  |   1.282109   .0175228    73.17   0.000     1.247715    1.316502
       2015  |   .7800173    .020954    37.23   0.000     .7388893    .8211452
             |
       _cons |   8.768099    .008821   994.00   0.000     8.750785    8.785413
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (848 categories)
9350
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.0000af not found)
file /tmp/St32652.0000af saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.0000ag not found)
file /tmp/St32652.0000ag saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(1 missing value generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.0000ah not found)
file /tmp/St32652.0000ah saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.0000ai not found)
file /tmp/St32652.0000ai saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(30 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     20,975
                                                F(  25,    838)   =    1659.77
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9779
                                                Adj R-squared     =     0.9770
                                                Root MSE          =     0.2375

                                (Std. Err. adjusted for 839 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.046367   .6953008   -11.57   0.000    -9.411102   -6.681631
             |
        year |
       1992  |   .1373982   .0191946     7.16   0.000      .099723    .1750734
       1993  |   .6767187    .007658    88.37   0.000     .6616876    .6917497
       1994  |   .6935086   .0138987    49.90   0.000     .6662282     .720789
       1995  |   .4369997   .0206221    21.19   0.000     .3965228    .4774767
       1996  |   .3819624   .0197291    19.36   0.000     .3432382    .4206867
       1997  |   .4004994   .0165742    24.16   0.000     .3679677    .4330312
       1998  |   .3624465   .0188627    19.21   0.000     .3254228    .3994703
       1999  |   .3397492   .0180504    18.82   0.000       .30432    .3751784
       2000  |   .3425512   .0166959    20.52   0.000     .3097804    .3753219
       2001  |   .3414118   .0144869    23.57   0.000     .3129769    .3698467
       2002  |   .7675364   .0172504    44.49   0.000     .7336772    .8013956
       2003  |    .845413   .0209164    40.42   0.000     .8043582    .8864677
       2004  |   .9822076   .0148263    66.25   0.000     .9531065    1.011309
       2005  |   .8050227   .0143834    55.97   0.000      .776791    .8332544
       2006  |   .7098011   .0169519    41.87   0.000     .6765279    .7430743
       2007  |   .6479176   .0162813    39.80   0.000     .6159606    .6798745
       2008  |   .6526907   .0144488    45.17   0.000     .6243306    .6810507
       2009  |   .9437706   .0161857    58.31   0.000     .9120012    .9755399
       2010  |   1.393336   .0503101    27.69   0.000     1.294587    1.492084
       2011  |   1.839977   .0200607    91.72   0.000     1.800602    1.879352
       2012  |   1.852023   .0194026    95.45   0.000     1.813939    1.890106
       2013  |   1.637088   .0213636    76.63   0.000     1.595155     1.67902
       2014  |   1.283745   .0176376    72.78   0.000     1.249126    1.318364
       2015  |    .779849   .0211313    36.90   0.000     .7383726    .8213255
             |
       _cons |   8.786215   .0088688   990.68   0.000     8.768807    8.803622
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (839 categories)
9355
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.0000ak not found)
file /tmp/St32652.0000ak saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.0000al not found)
file /tmp/St32652.0000al saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(1 missing value generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.0000am not found)
file /tmp/St32652.0000am saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.0000an not found)
file /tmp/St32652.0000an saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(32 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     20,850
                                                F(  25,    833)   =    1199.39
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9796
                                                Adj R-squared     =     0.9787
                                                Root MSE          =     0.2638

                                (Std. Err. adjusted for 834 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |   .4108619   .4880111     0.84   0.400    -.5470142    1.368738
             |
        year |
       1992  |   .3508275   .0143709    24.41   0.000       .32262     .379035
       1993  |    .688845   .0087053    79.13   0.000     .6717581    .7059318
       1994  |   .5724043   .0118475    48.31   0.000     .5491498    .5956588
       1995  |   .2365341   .0164288    14.40   0.000     .2042873    .2687808
       1996  |   .1928335   .0159807    12.07   0.000     .1614663    .2242007
       1997  |   .2551093   .0141217    18.07   0.000      .227391    .2828277
       1998  |   .1785712   .0156773    11.39   0.000     .1477996    .2093428
       1999  |   .1736457   .0156757    11.08   0.000     .1428771    .2044143
       2000  |   .2215104   .0151132    14.66   0.000      .191846    .2511748
       2001  |   .2313057   .0141184    16.38   0.000      .203594    .2590174
       2002  |   .5727183   .0175638    32.61   0.000     .5382437    .6071929
       2003  |   1.018421   .0180853    56.31   0.000     .9829231    1.053919
       2004  |   1.073967   .0155197    69.20   0.000     1.043505     1.10443
       2005  |    .718782   .0147111    48.86   0.000     .6899069    .7476572
       2006  |   .5684365   .0176793    32.15   0.000     .5337353    .6031376
       2007  |   .5142777   .0163996    31.36   0.000     .4820882    .5464671
       2008  |   .5769727   .0153798    37.51   0.000     .5467849    .6071604
       2009  |   .9888216   .0170314    58.06   0.000     .9553921    1.022251
       2010  |   1.958645   .0383439    51.08   0.000     1.883383    2.033907
       2011  |   1.958087   .0197106    99.34   0.000     1.919399    1.996775
       2012  |   1.689699   .0187435    90.15   0.000     1.652909    1.726489
       2013  |   1.431376   .0190369    75.19   0.000      1.39401    1.468742
       2014  |   1.142753   .0168399    67.86   0.000     1.109699    1.175807
       2015  |   .6154719   .0189039    32.56   0.000     .5783669    .6525768
             |
       _cons |   8.080109   .0098265   822.28   0.000     8.060822    8.099397
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (834 categories)
9360
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.0000ap not found)
file /tmp/St32652.0000ap saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.0000aq not found)
file /tmp/St32652.0000aq saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.0000ar not found)
file /tmp/St32652.0000ar saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.0000as not found)
file /tmp/St32652.0000as saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(29 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     20,300
                                                F(  25,    811)   =    1634.06
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9783
                                                Adj R-squared     =     0.9773
                                                Root MSE          =     0.2337

                                (Std. Err. adjusted for 812 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |   -7.98664   .7259525   -11.00   0.000    -9.411607   -6.561673
             |
        year |
       1992  |    .138998    .020039     6.94   0.000     .0996636    .1783325
       1993  |   .6752235   .0077357    87.29   0.000     .6600392    .6904079
       1994  |   .6903555    .014293    48.30   0.000     .6622999    .7184112
       1995  |    .432636   .0212654    20.34   0.000     .3908943    .4743777
       1996  |   .3772253   .0203826    18.51   0.000     .3372164    .4172342
       1997  |   .3955379   .0170746    23.17   0.000     .3620222    .4290536
       1998  |   .3563605   .0194722    18.30   0.000     .3181386    .3945824
       1999  |   .3332766   .0186628    17.86   0.000     .2966435    .3699097
       2000  |   .3353817   .0170904    19.62   0.000     .3018351    .3689283
       2001  |   .3363945   .0146472    22.97   0.000     .3076436    .3651453
       2002  |   .7657949    .017447    43.89   0.000     .7315484    .8000414
       2003  |   .8475571   .0215032    39.42   0.000     .8053485    .8897656
       2004  |   .9829216   .0148968    65.98   0.000     .9536807    1.012162
       2005  |   .8039877   .0143895    55.87   0.000     .7757427    .8322326
       2006  |   .7090903   .0171055    41.45   0.000      .675514    .7426666
       2007  |   .6462942   .0163599    39.50   0.000     .6141814     .678407
       2008  |   .6521592   .0143679    45.39   0.000     .6239564    .6803619
       2009  |   .9445395   .0162022    58.30   0.000     .9127364    .9763427
       2010  |   1.399181   .0523944    26.70   0.000     1.296337    1.502026
       2011  |   1.841034   .0203724    90.37   0.000     1.801045    1.881023
       2012  |   1.849305   .0196758    93.99   0.000     1.810683    1.887926
       2013  |   1.633358   .0217766    75.01   0.000     1.590612    1.676103
       2014  |   1.280053   .0178135    71.86   0.000     1.245087    1.315019
       2015  |   .7765765   .0214449    36.21   0.000     .7344825    .8186704
             |
       _cons |   8.840941   .0087914  1005.64   0.000     8.823685    8.858198
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (812 categories)
9365
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.0000au not found)
file /tmp/St32652.0000au saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.0000av not found)
file /tmp/St32652.0000av saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.0000aw not found)
file /tmp/St32652.0000aw saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.0000ax not found)
file /tmp/St32652.0000ax saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(32 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     20,150
                                                F(  25,    805)   =    1148.55
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9797
                                                Adj R-squared     =     0.9788
                                                Root MSE          =     0.2635

                                (Std. Err. adjusted for 806 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -.6800394   .5261618    -1.29   0.197     -1.71285    .3527716
             |
        year |
       1992  |    .319861    .014865    21.52   0.000     .2906823    .3490397
       1993  |   .6860405   .0088048    77.92   0.000     .6687574    .7033237
       1994  |   .5891167    .012533    47.01   0.000     .5645155     .613718
       1995  |   .2661259    .017004    15.65   0.000     .2327485    .2995034
       1996  |   .2213574   .0169156    13.09   0.000     .1881535    .2545613
       1997  |   .2766708   .0144982    19.08   0.000     .2482121    .3051295
       1998  |   .2040411   .0163335    12.49   0.000     .1719798    .2361023
       1999  |     .19745   .0161489    12.23   0.000     .1657511     .229149
       2000  |   .2408629   .0151197    15.93   0.000     .2111842    .2705416
       2001  |   .2469278   .0140442    17.58   0.000     .2193604    .2744953
       2002  |   .5931493   .0184608    32.13   0.000     .5569123    .6293863
       2003  |    .990723   .0185646    53.37   0.000     .9542823    1.027164
       2004  |   1.059637   .0158157    67.00   0.000     1.028592    1.090682
       2005  |    .727562   .0153888    47.28   0.000     .6973552    .7577688
       2006  |    .584091   .0190167    30.71   0.000     .5467628    .6214192
       2007  |    .528005   .0171906    30.71   0.000     .4942613    .5617488
       2008  |   .5827227   .0158666    36.73   0.000      .551578    .6138674
       2009  |   .9762625   .0171731    56.85   0.000     .9425532    1.009972
       2010  |   1.879436   .0410703    45.76   0.000     1.798819    1.960054
       2011  |   1.936141   .0202736    95.50   0.000     1.896346    1.975936
       2012  |   1.704159   .0194006    87.84   0.000     1.666077     1.74224
       2013  |   1.451054   .0200658    72.31   0.000     1.411666    1.490441
       2014  |    1.15579   .0176228    65.58   0.000     1.121198    1.190382
       2015  |   .6359906   .0199505    31.88   0.000     .5968295    .6751518
             |
       _cons |   8.089065   .0100051   808.50   0.000     8.069426    8.108704
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (806 categories)
9370
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.0000b1 not found)
file /tmp/St32652.0000b1 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.0000b2 not found)
file /tmp/St32652.0000b2 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.0000b3 not found)
file /tmp/St32652.0000b3 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.0000b4 not found)
file /tmp/St32652.0000b4 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(28 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     19,850
                                                F(  25,    793)   =    1607.72
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9784
                                                Adj R-squared     =     0.9775
                                                Root MSE          =     0.2319

                                (Std. Err. adjusted for 794 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -7.858184   .7302513   -10.76   0.000    -9.291638    -6.42473
             |
        year |
       1992  |   .1435581   .0201534     7.12   0.000     .1039977    .1831184
       1993  |   .6747523   .0078231    86.25   0.000     .6593958    .6901088
       1994  |   .6865812   .0143292    47.91   0.000     .6584536    .7147089
       1995  |   .4263285   .0213485    19.97   0.000     .3844222    .4682348
       1996  |   .3706604   .0204568    18.12   0.000     .3305044    .4108163
       1997  |   .3895682   .0171359    22.73   0.000     .3559311    .4232054
       1998  |   .3500484   .0195678    17.89   0.000     .3116376    .3884591
       1999  |   .3277026   .0187387    17.49   0.000     .2909193    .3644858
       2000  |   .3303945    .017117    19.30   0.000     .2967946    .3639944
       2001  |   .3337982   .0147273    22.67   0.000     .3048891    .3627074
       2002  |   .7660357   .0175184    43.73   0.000     .7316478    .8004235
       2003  |     .85465   .0215993    39.57   0.000     .8122515    .8970485
       2004  |   .9873841   .0149357    66.11   0.000      .958066    1.016702
       2005  |   .8055611    .014538    55.41   0.000     .7770236    .8340986
       2006  |   .7111341   .0173311    41.03   0.000     .6771139    .7451543
       2007  |   .6493507   .0165579    39.22   0.000     .6168482    .6818532
       2008  |   .6562015   .0144941    45.27   0.000     .6277501    .6846529
       2009  |   .9509921   .0162524    58.51   0.000     .9190893    .9828949
       2010  |    1.41308   .0526895    26.82   0.000     1.309652    1.516507
       2011  |   1.849277    .020381    90.74   0.000      1.80927    1.889284
       2012  |   1.853354   .0198618    93.31   0.000     1.814366    1.892342
       2013  |   1.634989   .0219646    74.44   0.000     1.591874    1.678105
       2014  |   1.282005   .0179967    71.24   0.000     1.246678    1.317332
       2015  |   .7755957   .0216613    35.81   0.000     .7330753     .818116
             |
       _cons |   8.870515   .0088438  1003.02   0.000     8.853155    8.887875
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (794 categories)
9375
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.0000b6 not found)
file /tmp/St32652.0000b6 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.0000b7 not found)
file /tmp/St32652.0000b7 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.0000b8 not found)
file /tmp/St32652.0000b8 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.0000b9 not found)
file /tmp/St32652.0000b9 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(28 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     19,425
                                                F(  25,    776)   =    1640.20
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9784
                                                Adj R-squared     =     0.9775
                                                Root MSE          =     0.2308

                                (Std. Err. adjusted for 777 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.372398   .7090677   -11.81   0.000    -9.764316    -6.98048
             |
        year |
       1992  |   .1299142   .0193204     6.72   0.000     .0919876    .1678407
       1993  |   .6746983   .0079562    84.80   0.000       .65908    .6903165
       1994  |   .6947926   .0140508    49.45   0.000     .6672104    .7223747
       1995  |   .4377758   .0209653    20.88   0.000     .3966204    .4789312
       1996  |   .3813724   .0202577    18.83   0.000     .3416061    .4211386
       1997  |   .3967863   .0170582    23.26   0.000     .3633007    .4302719
       1998  |   .3602707    .019321    18.65   0.000     .3223431    .3981982
       1999  |    .337316   .0184519    18.28   0.000     .3010944    .3735376
       2000  |   .3360042   .0173235    19.40   0.000     .3019977    .3700108
       2001  |   .3388551   .0147716    22.94   0.000     .3098581    .3678521
       2002  |   .7729292   .0177718    43.49   0.000     .7380428    .8078156
       2003  |   .8399853   .0206549    40.67   0.000     .7994392    .8805313
       2004  |    .979973   .0144915    67.62   0.000     .9515257     1.00842
       2005  |   .8089555   .0148982    54.30   0.000       .77971     .838201
       2006  |   .7183696   .0176302    40.75   0.000     .6837611    .7529781
       2007  |   .6555756   .0168604    38.88   0.000     .6224782    .6886729
       2008  |   .6579302    .014775    44.53   0.000     .6289264     .686934
       2009  |   .9450969    .016063    58.84   0.000     .9135648    .9766289
       2010  |   1.377318   .0505543    27.24   0.000     1.278078    1.476557
       2011  |   1.839382   .0196704    93.51   0.000     1.800769    1.877996
       2012  |   1.861266   .0201143    92.53   0.000     1.821781    1.900751
       2013  |    1.64533   .0222615    73.91   0.000      1.60163    1.689029
       2014  |   1.288216   .0184044    69.99   0.000     1.252088    1.324345
       2015  |   .7831145   .0220345    35.54   0.000     .7398602    .8263689
             |
       _cons |   8.894664   .0089431   994.59   0.000     8.877109     8.91222
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (777 categories)
9380
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.0000bb not found)
file /tmp/St32652.0000bb saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.0000bc not found)
file /tmp/St32652.0000bc saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.0000bd not found)
file /tmp/St32652.0000bd saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.0000be not found)
file /tmp/St32652.0000be saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(28 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     19,050
                                                F(  25,    761)   =    1605.94
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9784
                                                Adj R-squared     =     0.9775
                                                Root MSE          =     0.2299

                                (Std. Err. adjusted for 762 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.400115   .7235209   -11.61   0.000    -9.820449   -6.979781
             |
        year |
       1992  |    .130844   .0196663     6.65   0.000     .0922373    .1694507
       1993  |   .6756544    .008055    83.88   0.000     .6598417    .6914671
       1994  |   .6949584   .0142614    48.73   0.000     .6669621    .7229547
       1995  |    .438039   .0213211    20.54   0.000     .3961838    .4798942
       1996  |   .3811089   .0206188    18.48   0.000     .3406324    .4215855
       1997  |   .3963329   .0173675    22.82   0.000     .3622389    .4304268
       1998  |   .3605596   .0196647    18.34   0.000     .3219562    .3991631
       1999  |   .3371032   .0187947    17.94   0.000     .3002077    .3739988
       2000  |   .3363869   .0176086    19.10   0.000     .3018197    .3709541
       2001  |   .3398692   .0150202    22.63   0.000     .3103832    .3693552
       2002  |   .7768266   .0180893    42.94   0.000     .7413158    .8123374
       2003  |    .842356   .0209311    40.24   0.000     .8012664    .8834455
       2004  |   .9834123   .0146425    67.16   0.000     .9546678    1.012157
       2005  |   .8141018   .0150023    54.27   0.000      .784651    .8435525
       2006  |   .7230549   .0178595    40.49   0.000     .6879952    .7581146
       2007  |   .6609656   .0170622    38.74   0.000      .627471    .6944601
       2008  |   .6638601    .014875    44.63   0.000     .6346591    .6930611
       2009  |   .9511565   .0161675    58.83   0.000     .9194182    .9828948
       2010  |   1.382613   .0515136    26.84   0.000     1.281488    1.483739
       2011  |   1.845677   .0199135    92.68   0.000     1.806585    1.884769
       2012  |   1.867762   .0203481    91.79   0.000     1.827817    1.907707
       2013  |   1.651009   .0225808    73.12   0.000     1.606681    1.695337
       2014  |   1.293259   .0186742    69.25   0.000       1.2566    1.329919
       2015  |   .7886571   .0223554    35.28   0.000     .7447716    .8325426
             |
       _cons |   8.918827   .0090066   990.26   0.000     8.901146    8.936507
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (762 categories)
9385
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.0000bg not found)
file /tmp/St32652.0000bg saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.0000bh not found)
file /tmp/St32652.0000bh saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.0000bi not found)
file /tmp/St32652.0000bi saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.0000bj not found)
file /tmp/St32652.0000bj saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(28 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     18,700
                                                F(  25,    747)   =    1580.72
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9782
                                                Adj R-squared     =     0.9773
                                                Root MSE          =     0.2298

                                (Std. Err. adjusted for 748 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.395262   .7419061   -11.32   0.000    -9.851731   -6.938793
             |
        year |
       1992  |   .1320137    .020145     6.55   0.000     .0924662    .1715612
       1993  |   .6759529   .0080927    83.53   0.000     .6600657    .6918401
       1994  |   .6937496   .0145249    47.76   0.000     .6652352     .722264
       1995  |   .4355229   .0217686    20.01   0.000      .392788    .4782577
       1996  |   .3790523   .0210867    17.98   0.000      .337656    .4204485
       1997  |   .3940059    .017706    22.25   0.000     .3592464    .4287654
       1998  |   .3579972   .0201018    17.81   0.000     .3185345    .3974599
       1999  |   .3339426   .0191969    17.40   0.000     .2962563     .371629
       2000  |    .332034   .0178442    18.61   0.000     .2970032    .3670648
       2001  |   .3373569   .0152739    22.09   0.000     .3073721    .3673418
       2002  |   .7768492   .0183008    42.45   0.000      .740922    .8127764
       2003  |   .8435528   .0214876    39.26   0.000     .8013696     .885736
       2004  |   .9847043   .0149507    65.86   0.000     .9553538    1.014055
       2005  |   .8145054   .0151849    53.64   0.000     .7846951    .8443156
       2006  |   .7242877   .0181238    39.96   0.000     .6887082    .7598673
       2007  |   .6628373    .017297    38.32   0.000     .6288808    .6967939
       2008  |   .6648899   .0150518    44.17   0.000     .6353409    .6944388
       2009  |   .9539298   .0164364    58.04   0.000     .9216627    .9861969
       2010  |    1.38519   .0529429    26.16   0.000     1.281256    1.489125
       2011  |   1.848445   .0203411    90.87   0.000     1.808512    1.888377
       2012  |   1.871314   .0206459    90.64   0.000     1.830783    1.911844
       2013  |   1.653204   .0229655    71.99   0.000      1.60812    1.698289
       2014  |   1.294621   .0189748    68.23   0.000     1.257371    1.331871
       2015  |   .7876828   .0227559    34.61   0.000     .7430098    .8323558
             |
       _cons |   8.946483   .0091368   979.17   0.000     8.928546    8.964419
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (748 categories)
9390
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.0000bl not found)
file /tmp/St32652.0000bl saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.0000bm not found)
file /tmp/St32652.0000bm saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.0000bn not found)
file /tmp/St32652.0000bn saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.0000bo not found)
file /tmp/St32652.0000bo saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(31 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     18,475
                                                F(  25,    738)   =    1042.85
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9799
                                                Adj R-squared     =     0.9790
                                                Root MSE          =     0.2641

                                (Std. Err. adjusted for 739 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -.1506733   .7275448    -0.21   0.836    -1.578977    1.277631
             |
        year |
       1992  |   .3330301    .020365    16.35   0.000     .2930498    .3730103
       1993  |   .6852223    .009279    73.85   0.000     .6670059    .7034388
       1994  |   .5810533   .0156531    37.12   0.000     .5503233    .6117832
       1995  |   .2540769   .0226314    11.23   0.000     .2096472    .2985065
       1996  |   .2091463    .022007     9.50   0.000     .1659425    .2523502
       1997  |   .2687719   .0183227    14.67   0.000     .2328011    .3047428
       1998  |   .1968073   .0209753     9.38   0.000      .155629    .2379857
       1999  |   .1902198   .0204989     9.28   0.000     .1499767    .2304629
       2000  |   .2364731   .0181665    13.02   0.000      .200809    .2721372
       2001  |   .2445927   .0165492    14.78   0.000     .2121036    .2770818
       2002  |   .5831135   .0203177    28.70   0.000     .5432261     .623001
       2003  |   1.002683   .0232927    43.05   0.000     .9569555    1.048411
       2004  |   1.063602   .0177711    59.85   0.000     1.028714     1.09849
       2005  |   .7220776   .0162885    44.33   0.000     .6901003    .7540549
       2006  |   .5760793   .0203645    28.29   0.000        .5361    .6160585
       2007  |   .5213583   .0186706    27.92   0.000     .4847045    .5580122
       2008  |   .5786294   .0165908    34.88   0.000     .5460587    .6112002
       2009  |   .9789734   .0193659    50.55   0.000     .9409546    1.016992
       2010  |   1.912716   .0560612    34.12   0.000     1.802657    2.022774
       2011  |   1.941218   .0235329    82.49   0.000     1.895019    1.987418
       2012  |   1.692364   .0212047    79.81   0.000     1.650735    1.733993
       2013  |   1.435658   .0228242    62.90   0.000     1.390849    1.480466
       2014  |   1.144188    .019597    58.39   0.000     1.105715    1.182661
       2015  |    .622415   .0232538    26.77   0.000     .5767635    .6680665
             |
       _cons |   8.105612   .0105999   764.69   0.000     8.084803    8.126422
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (739 categories)
9395
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.0000bq not found)
file /tmp/St32652.0000bq saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.0000br not found)
file /tmp/St32652.0000br saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.0000bs not found)
file /tmp/St32652.0000bs saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.0000bt not found)
file /tmp/St32652.0000bt saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(28 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     18,200
                                                F(  25,    727)   =    1589.42
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9782
                                                Adj R-squared     =     0.9772
                                                Root MSE          =     0.2283

                                (Std. Err. adjusted for 728 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.589164   .7188371   -11.95   0.000    -10.00041    -7.17792
             |
        year |
       1992  |   .1268193   .0193852     6.54   0.000     .0887617    .1648769
       1993  |   .6751488   .0081591    82.75   0.000     .6591307    .6911669
       1994  |   .6932177   .0143624    48.27   0.000      .665021    .7214145
       1995  |    .435503   .0212318    20.51   0.000     .3938201     .477186
       1996  |   .3794484   .0206019    18.42   0.000      .339002    .4198948
       1997  |   .3931306    .017351    22.66   0.000     .3590665    .4271946
       1998  |   .3578598   .0196463    18.22   0.000     .3192896      .39643
       1999  |   .3332985   .0187049    17.82   0.000     .2965764    .3700206
       2000  |   .3319505   .0172281    19.27   0.000     .2981278    .3657732
       2001  |   .3378274   .0148725    22.71   0.000     .3086293    .3670256
       2002  |   .7797325   .0180124    43.29   0.000     .7443699    .8150951
       2003  |   .8401509   .0212684    39.50   0.000     .7983961    .8819057
       2004  |   .9815832   .0150409    65.26   0.000     .9520543    1.011112
       2005  |   .8151617   .0152336    53.51   0.000     .7852546    .8450688
       2006  |   .7267136    .018074    40.21   0.000     .6912302    .7621969
       2007  |   .6677316   .0173605    38.46   0.000     .6336489    .7018143
       2008  |   .6688506   .0152736    43.79   0.000     .6388649    .6988363
       2009  |   .9554144   .0163702    58.36   0.000     .9232758     .987553
       2010  |   1.373148   .0511614    26.84   0.000     1.272707     1.47359
       2011  |   1.846008    .019967    92.45   0.000     1.806808    1.885208
       2012  |   1.875271   .0207868    90.21   0.000     1.834462    1.916081
       2013  |   1.657961    .023022    72.02   0.000     1.612764    1.703159
       2014  |   1.296773   .0191225    67.81   0.000     1.259232    1.334315
       2015  |     .78798   .0226922    34.72   0.000     .7434298    .8325301
             |
       _cons |   8.985684   .0092836   967.91   0.000     8.967458    9.003909
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (728 categories)
9400
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.0000bv not found)
file /tmp/St32652.0000bv saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.0000bw not found)
file /tmp/St32652.0000bw saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.0000bx not found)
file /tmp/St32652.0000bx saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.0000c0 not found)
file /tmp/St32652.0000c0 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(31 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     18,150
                                                F(  25,    725)   =    1029.97
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9801
                                                Adj R-squared     =     0.9793
                                                Root MSE          =     0.2625

                                (Std. Err. adjusted for 726 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -1.146921   .6625306    -1.73   0.084    -2.447628     .153787
             |
        year |
       1992  |   .3064708   .0190118    16.12   0.000     .2691461    .3437955
       1993  |   .6855287   .0093846    73.05   0.000     .6671045     .703953
       1994  |   .5981644   .0144251    41.47   0.000     .5698444    .6264844
       1995  |   .2818984   .0207588    13.58   0.000     .2411438     .322653
       1996  |   .2353992   .0204561    11.51   0.000      .195239    .2755594
       1997  |   .2891407   .0176563    16.38   0.000     .2544771    .3238043
       1998  |   .2208658     .02004    11.02   0.000     .1815225    .2602092
       1999  |   .2136843   .0196538    10.87   0.000     .1750991    .2522696
       2000  |   .2558356   .0176904    14.46   0.000     .2211051    .2905662
       2001  |   .2604442   .0163062    15.97   0.000     .2284312    .2924571
       2002  |   .6022828    .019895    30.27   0.000      .563224    .6413415
       2003  |   .9789311   .0222398    44.02   0.000     .9352689    1.022593
       2004  |   1.051379   .0171941    61.15   0.000     1.017623    1.085136
       2005  |    .731701   .0162264    45.09   0.000     .6998447    .7635573
       2006  |   .5910856   .0200929    29.42   0.000     .5516384    .6305327
       2007  |   .5343738   .0185444    28.82   0.000     .4979667    .5707808
       2008  |   .5851383   .0168108    34.81   0.000     .5521346     .618142
       2009  |   .9692063   .0187246    51.76   0.000     .9324454    1.005967
       2010  |   1.842435   .0507332    36.32   0.000     1.742833    1.942036
       2011  |   1.923224   .0223032    86.23   0.000     1.879438    1.967011
       2012  |   1.707596   .0212396    80.40   0.000     1.665898    1.749294
       2013  |   1.455248   .0225816    64.44   0.000     1.410915    1.499581
       2014  |   1.158198   .0192239    60.25   0.000     1.120456    1.195939
       2015  |   .6443513   .0222471    28.96   0.000     .6006749    .6880278
             |
       _cons |   8.110793   .0106315   762.90   0.000     8.089921    8.131665
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (726 categories)
9405
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.0000c2 not found)
file /tmp/St32652.0000c2 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.0000c3 not found)
file /tmp/St32652.0000c3 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.0000c4 not found)
file /tmp/St32652.0000c4 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.0000c5 not found)
file /tmp/St32652.0000c5 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(28 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     17,850
                                                F(  25,    713)   =    1570.42
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9780
                                                Adj R-squared     =     0.9770
                                                Root MSE          =     0.2286

                                (Std. Err. adjusted for 714 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.552912   .7305048   -11.71   0.000    -9.987109   -7.118714
             |
        year |
       1992  |   .1286678   .0197053     6.53   0.000     .0899805    .1673552
       1993  |    .675422   .0082671    81.70   0.000     .6591911    .6916528
       1994  |    .691215   .0145997    47.34   0.000     .6625514    .7198785
       1995  |   .4323878   .0215798    20.04   0.000     .3900202    .4747555
       1996  |   .3769864   .0209508    17.99   0.000     .3358538    .4181191
       1997  |   .3916584   .0176085    22.24   0.000     .3570878    .4262291
       1998  |   .3560184    .019956    17.84   0.000     .3168388    .3951981
       1999  |   .3322683   .0190266    17.46   0.000     .2949134    .3696232
       2000  |   .3298198   .0175027    18.84   0.000     .2954568    .3641828
       2001  |   .3364599   .0150833    22.31   0.000     .3068468     .366073
       2002  |   .7798036   .0182148    42.81   0.000     .7440425    .8155647
       2003  |   .8427899   .0216047    39.01   0.000     .8003734    .8852064
       2004  |   .9819629   .0152287    64.48   0.000     .9520645    1.011861
       2005  |   .8147085   .0154383    52.77   0.000     .7843984    .8450186
       2006  |   .7268375   .0183391    39.63   0.000     .6908324    .7628426
       2007  |   .6673271   .0175832    37.95   0.000     .6328061    .7018481
       2008  |   .6688428   .0154466    43.30   0.000     .6385165    .6991691
       2009  |   .9572369   .0166262    57.57   0.000     .9245947    .9898792
       2010  |   1.376326   .0520784    26.43   0.000      1.27408    1.478571
       2011  |   1.847768   .0202561    91.22   0.000     1.807999    1.887536
       2012  |   1.875743   .0210648    89.05   0.000     1.834387      1.9171
       2013  |   1.657294   .0233581    70.95   0.000     1.611436    1.703153
       2014  |   1.295119   .0194056    66.74   0.000      1.25702    1.333218
       2015  |    .783609   .0230397    34.01   0.000     .7383753    .8288427
             |
       _cons |   9.004951   .0094103   956.93   0.000     8.986476    9.023427
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (714 categories)
9410
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.0000c7 not found)
file /tmp/St32652.0000c7 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.0000c8 not found)
file /tmp/St32652.0000c8 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.0000c9 not found)
file /tmp/St32652.0000c9 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.0000ca not found)
file /tmp/St32652.0000ca saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(31 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     17,700
                                                F(  25,    707)   =    1014.81
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9803
                                                Adj R-squared     =     0.9794
                                                Root MSE          =     0.2634

                                (Std. Err. adjusted for 708 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |   .8183616   .8249189     0.99   0.322    -.8012224    2.437946
             |
        year |
       1992  |   .3569187   .0229627    15.54   0.000     .3118354     .402002
       1993  |    .686426   .0094339    72.76   0.000     .6679042    .7049478
       1994  |    .566574   .0172025    32.94   0.000        .5328    .6003481
       1995  |   .2304032    .025432     9.06   0.000     .1804718    .2803345
       1996  |    .186706   .0245679     7.60   0.000     .1384712    .2349408
       1997  |    .251812   .0205141    12.28   0.000     .2115362    .2920877
       1998  |   .1744893    .023603     7.39   0.000     .1281489    .2208297
       1999  |   .1720472   .0230435     7.47   0.000     .1268053    .2172891
       2000  |    .222784   .0204786    10.88   0.000     .1825778    .2629902
       2001  |   .2327343   .0185013    12.58   0.000     .1964101    .2690584
       2002  |   .5656379   .0223281    25.33   0.000     .5218006    .6094752
       2003  |   1.026406   .0247441    41.48   0.000     .9778253    1.074987
       2004  |   1.077112   .0184862    58.27   0.000     1.040817    1.113406
       2005  |   .7160192   .0169065    42.35   0.000     .6828261    .7492122
       2006  |   .5654437   .0215237    26.27   0.000     .5231858    .6077016
       2007  |   .5109109   .0199311    25.63   0.000     .4717797    .5500422
       2008  |   .5739103    .017388    33.01   0.000     .5397721    .6080486
       2009  |   .9875915   .0196221    50.33   0.000     .9490669    1.026116
       2010  |   1.982348   .0615332    32.22   0.000     1.861538    2.103157
       2011  |   1.959043   .0240041    81.61   0.000     1.911915    2.006171
       2012  |   1.676633   .0228183    73.48   0.000     1.631833    1.721432
       2013  |    1.41542   .0252413    56.08   0.000     1.365863    1.464977
       2014  |   1.130266   .0208377    54.24   0.000     1.089355    1.171178
       2015  |   .6062837   .0248677    24.38   0.000     .5574603    .6551071
             |
       _cons |   8.115427   .0106904   759.13   0.000     8.094438    8.136415
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (708 categories)
9415
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.0000cc not found)
file /tmp/St32652.0000cc saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.0000cd not found)
file /tmp/St32652.0000cd saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.0000ce not found)
file /tmp/St32652.0000ce saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.0000cf not found)
file /tmp/St32652.0000cf saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(27 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     17,175
                                                F(  25,    686)   =    1525.44
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9781
                                                Adj R-squared     =     0.9771
                                                Root MSE          =     0.2283

                                (Std. Err. adjusted for 687 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.552459   .7571996   -11.29   0.000    -10.03917   -7.065752
             |
        year |
       1992  |   .1315598   .0204223     6.44   0.000     .0914621    .1716575
       1993  |   .6778295   .0084736    79.99   0.000     .6611923    .6944668
       1994  |   .6914103   .0151154    45.74   0.000     .6617323    .7210883
       1995  |   .4304012    .022381    19.23   0.000     .3864577    .4743446
       1996  |   .3742004   .0217534    17.20   0.000     .3314892    .4169115
       1997  |   .3883985   .0182464    21.29   0.000      .352573    .4242241
       1998  |   .3531288   .0207433    17.02   0.000     .3124007    .3938568
       1999  |    .329616    .019797    16.65   0.000     .2907461    .3684859
       2000  |   .3260611   .0180838    18.03   0.000     .2905548    .3615674
       2001  |   .3330407   .0155881    21.37   0.000     .3024345    .3636468
       2002  |    .778894   .0186299    41.81   0.000     .7423154    .8154725
       2003  |   .8437082   .0222663    37.89   0.000     .7999899    .8874265
       2004  |   .9826667   .0156928    62.62   0.000      .951855    1.013478
       2005  |    .815423   .0158609    51.41   0.000     .7842812    .8465648
       2006  |   .7274873   .0187877    38.72   0.000     .6905989    .7643756
       2007  |   .6699456   .0181098    36.99   0.000     .6343884    .7055029
       2008  |   .6709319   .0158487    42.33   0.000     .6398141    .7020497
       2009  |   .9619078   .0170624    56.38   0.000      .928407    .9954086
       2010  |    1.37884   .0542016    25.44   0.000     1.272419    1.485261
       2011  |   1.850698   .0208513    88.76   0.000     1.809759    1.891638
       2012  |   1.880271    .021535    87.31   0.000     1.837989    1.922554
       2013  |   1.662091   .0239791    69.31   0.000      1.61501    1.709172
       2014  |   1.298553   .0198555    65.40   0.000     1.259568    1.337538
       2015  |   .7832927   .0236607    33.11   0.000     .7368365    .8297489
             |
       _cons |   9.050446   .0096406   938.79   0.000     9.031517    9.069374
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (687 categories)
9420
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.0000ch not found)
file /tmp/St32652.0000ch saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.0000ci not found)
file /tmp/St32652.0000ci saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.0000cj not found)
file /tmp/St32652.0000cj saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.0000ck not found)
file /tmp/St32652.0000ck saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(31 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     16,975
                                                F(  25,    678)   =     949.21
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9806
                                                Adj R-squared     =     0.9798
                                                Root MSE          =     0.2620

                                (Std. Err. adjusted for 679 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |   1.129891   .6015651     1.88   0.061    -.0512633    2.311046
             |
        year |
       1992  |   .3636735   .0172299    21.11   0.000      .329843    .3975039
       1993  |   .6872822   .0096292    71.38   0.000     .6683757    .7061888
       1994  |   .5629352   .0137485    40.95   0.000     .5359404      .58993
       1995  |   .2223273   .0183311    12.13   0.000     .1863348    .2583198
       1996  |    .178655   .0179378     9.96   0.000     .1434347    .2138754
       1997  |   .2449441   .0154104    15.89   0.000     .2146864    .2752019
       1998  |    .167326   .0175621     9.53   0.000     .1328433    .2018087
       1999  |    .165406   .0173184     9.55   0.000     .1314019    .1994101
       2000  |   .2160269   .0163423    13.22   0.000     .1839394    .2481144
       2001  |   .2274466    .015063    15.10   0.000     .1978708    .2570224
       2002  |   .5574385   .0195491    28.51   0.000     .5190545    .5958225
       2003  |   1.033417    .021169    48.82   0.000     .9918524    1.074982
       2004  |   1.080154   .0172404    62.65   0.000     1.046303    1.114005
       2005  |   .7121882   .0165474    43.04   0.000      .679698    .7446785
       2006  |   .5599024   .0203998    27.45   0.000      .519848    .5999568
       2007  |   .5040249   .0186016    27.10   0.000     .4675013    .5405485
       2008  |   .5684076   .0172417    32.97   0.000     .5345541    .6022612
       2009  |   .9877425   .0188857    52.30   0.000     .9506609    1.024824
       2010  |   2.001709   .0463932    43.15   0.000     1.910617      2.0928
       2011  |   1.963682   .0217046    90.47   0.000     1.921066    2.006299
       2012  |   1.672152   .0214578    77.93   0.000      1.63002    1.714283
       2013  |   1.409091   .0223022    63.18   0.000     1.365302    1.452881
       2014  |   1.125437   .0194387    57.90   0.000     1.087269    1.163604
       2015  |   .6004341   .0222246    27.02   0.000     .5567968    .6440714
             |
       _cons |    8.12663   .0108485   749.10   0.000      8.10533    8.147931
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (679 categories)
9425
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.0000cm not found)
file /tmp/St32652.0000cm saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.0000cn not found)
file /tmp/St32652.0000cn saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.0000co not found)
file /tmp/St32652.0000co saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.0000cp not found)
file /tmp/St32652.0000cp saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(27 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     16,625
                                                F(  25,    664)   =    1555.92
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9776
                                                Adj R-squared     =     0.9767
                                                Root MSE          =     0.2273

                                (Std. Err. adjusted for 665 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.404287   .8277241   -10.15   0.000    -10.02956   -6.779015
             |
        year |
       1992  |   .1354805   .0222645     6.09   0.000     .0917632    .1791977
       1993  |    .677578   .0085676    79.09   0.000     .6607552    .6944008
       1994  |   .6877764   .0160847    42.76   0.000     .6561935    .7193594
       1995  |   .4229008   .0241348    17.52   0.000     .3755111    .4702906
       1996  |   .3676546   .0234791    15.66   0.000     .3215524    .4137568
       1997  |   .3821548   .0195447    19.55   0.000      .343778    .4205316
       1998  |   .3473112   .0223538    15.54   0.000     .3034186    .3912039
       1999  |   .3240779   .0213096    15.21   0.000     .2822356    .3659202
       2000  |   .3213707   .0191564    16.78   0.000     .2837564    .3589851
       2001  |   .3292007   .0163544    20.13   0.000     .2970881    .3613132
       2002  |   .7785765   .0195988    39.73   0.000     .7400934    .8170596
       2003  |    .850837   .0239017    35.60   0.000     .8039051     .897769
       2004  |   .9882252   .0164437    60.10   0.000     .9559372    1.020513
       2005  |   .8173386    .016401    49.83   0.000     .7851346    .8495427
       2006  |   .7290131   .0196256    37.15   0.000     .6904774    .7675489
       2007  |   .6727677   .0188736    35.65   0.000     .6357085    .7098268
       2008  |   .6752471   .0162765    41.49   0.000     .6432875    .7072067
       2009  |   .9700419   .0175538    55.26   0.000     .9355742     1.00451
       2010  |   1.394517    .059095    23.60   0.000     1.278482    1.510553
       2011  |   1.859427   .0217824    85.36   0.000     1.816656    1.902197
       2012  |   1.884096    .022381    84.18   0.000      1.84015    1.928042
       2013  |   1.664472    .025266    65.88   0.000     1.614862    1.714083
       2014  |   1.300274   .0207635    62.62   0.000     1.259504    1.341044
       2015  |   .7824037   .0249698    31.33   0.000     .7333745     .831433
             |
       _cons |   9.084964    .009835   923.74   0.000     9.065652    9.104275
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (665 categories)
9430
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.0000cr not found)
file /tmp/St32652.0000cr saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.0000cs not found)
file /tmp/St32652.0000cs saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.0000ct not found)
file /tmp/St32652.0000ct saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.0000cu not found)
file /tmp/St32652.0000cu saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(27 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     16,425
                                                F(  25,    656)   =    1544.42
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9776
                                                Adj R-squared     =     0.9766
                                                Root MSE          =     0.2275

                                (Std. Err. adjusted for 657 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.406722   .8436214    -9.97   0.000    -10.06325   -6.750198
             |
        year |
       1992  |   .1357174   .0226814     5.98   0.000     .0911806    .1802543
       1993  |   .6780044   .0086329    78.54   0.000      .661053    .6949557
       1994  |    .687727   .0163625    42.03   0.000     .6555979    .7198562
       1995  |   .4227967   .0245972    17.19   0.000     .3744979    .4710955
       1996  |   .3673854   .0239212    15.36   0.000     .3204141    .4143568
       1997  |    .381506   .0199128    19.16   0.000     .3424055    .4206065
       1998  |   .3469628   .0227801    15.23   0.000      .302232    .3916936
       1999  |   .3241401   .0217263    14.92   0.000     .2814786    .3668017
       2000  |   .3209766   .0194846    16.47   0.000     .2827168    .3592363
       2001  |   .3294274   .0166198    19.82   0.000     .2967929    .3620618
       2002  |   .7788259   .0199515    39.04   0.000     .7396494    .8180024
       2003  |   .8520006   .0242618    35.12   0.000     .8043603    .8996408
       2004  |   .9893881     .01663    59.49   0.000     .9567336    1.022043
       2005  |   .8178503   .0166363    49.16   0.000     .7851834    .8505171
       2006  |   .7297812   .0199162    36.64   0.000     .6906741    .7688883
       2007  |   .6732431   .0191282    35.20   0.000     .6356833    .7108029
       2008  |   .6764449   .0164638    41.09   0.000     .6441168     .708773
       2009  |   .9715669    .017742    54.76   0.000      .936729    1.006405
       2010  |   1.396312   .0601546    23.21   0.000     1.278193    1.514431
       2011  |   1.861891   .0220089    84.60   0.000     1.818674    1.905107
       2012  |   1.886304    .022695    83.12   0.000     1.841741    1.930868
       2013  |   1.667117   .0256677    64.95   0.000     1.616716    1.717517
       2014  |   1.302705   .0210326    61.94   0.000     1.261406    1.344004
       2015  |   .7845006   .0252856    31.03   0.000       .73485    .8341511
             |
       _cons |   9.100922   .0099373   915.84   0.000      9.08141    9.120435
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (657 categories)
9435
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.0000cw not found)
file /tmp/St32652.0000cw saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.0000cx not found)
file /tmp/St32652.0000cx saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;
(706 missing values generated)

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.0000d0 not found)
file /tmp/St32652.0000d0 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.0000d1 not found)
file /tmp/St32652.0000d1 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(31 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     16,300
                                                F(  25,    651)   =    1002.21
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9810
                                                Adj R-squared     =     0.9802
                                                Root MSE          =     0.2559

                                (Std. Err. adjusted for 652 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -7.258538   .6232699   -11.65   0.000      -8.4824   -6.034676
             |
        year |
       1992  |   .1348825   .0180427     7.48   0.000     .0994537    .1703114
       1993  |   .6679536   .0099206    67.33   0.000     .6484734    .6874339
       1994  |   .6860005   .0142005    48.31   0.000     .6581163    .7138848
       1995  |   .4380713   .0195883    22.36   0.000     .3996075    .4765351
       1996  |    .387864   .0190644    20.34   0.000     .3504288    .4252993
       1997  |   .4084204    .016866    24.22   0.000      .375302    .4415387
       1998  |   .3646602   .0187198    19.48   0.000     .3279018    .4014187
       1999  |   .3472619   .0178059    19.50   0.000     .3122981    .3822257
       2000  |   .3607721    .017634    20.46   0.000     .3261458    .3953985
       2001  |   .3450688   .0163005    21.17   0.000     .3130608    .3770767
       2002  |   .7302699   .0188027    38.84   0.000     .6933487    .7671911
       2003  |   .8322068   .0216703    38.40   0.000     .7896548    .8747589
       2004  |    .973596   .0181163    53.74   0.000     .9380225    1.009169
       2005  |   .7899025   .0166106    47.55   0.000     .7572856    .8225194
       2006  |   .6791181   .0191601    35.44   0.000      .641495    .7167412
       2007  |   .6094442   .0185768    32.81   0.000     .5729666    .6459219
       2008  |   .6236675   .0174818    35.68   0.000       .58934    .6579949
       2009  |   .9089924   .0194436    46.75   0.000     .8708126    .9471722
       2010  |   1.410579   .0468664    30.10   0.000     1.318552    1.502607
       2011  |    1.81451   .0223678    81.12   0.000     1.770588    1.858431
       2012  |   1.803998   .0217413    82.98   0.000     1.761306    1.846689
       2013  |   1.588481   .0226369    70.17   0.000     1.544031    1.632931
       2014  |   1.246349   .0196024    63.58   0.000     1.207857     1.28484
       2015  |   .7726791   .0219999    35.12   0.000     .7294797    .8158785
             |
       _cons |   8.119783   .0113312   716.59   0.000     8.097533    8.142033
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (652 categories)
9440
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.0000d3 not found)
file /tmp/St32652.0000d3 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.0000d4 not found)
file /tmp/St32652.0000d4 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.0000d5 not found)
file /tmp/St32652.0000d5 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.0000d6 not found)
file /tmp/St32652.0000d6 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(27 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     15,825
                                                F(  25,    632)   =    1506.58
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9778
                                                Adj R-squared     =     0.9768
                                                Root MSE          =     0.2274

                                (Std. Err. adjusted for 633 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.555647   .9007033    -9.50   0.000    -10.32438   -6.786913
             |
        year |
       1992  |   .1341735   .0242157     5.54   0.000     .0866205    .1817265
       1993  |   .6778595   .0088249    76.81   0.000     .6605299    .6951891
       1994  |   .6883363   .0173421    39.69   0.000     .6542811    .7223914
       1995  |   .4248639   .0262065    16.21   0.000     .3734015    .4763263
       1996  |   .3696944   .0254784    14.51   0.000     .3196618    .4197269
       1997  |   .3824249   .0210857    18.14   0.000     .3410184    .4238314
       1998  |   .3489771   .0241738    14.44   0.000     .3015064    .3964478
       1999  |   .3254242   .0230024    14.15   0.000     .2802538    .3705945
       2000  |   .3215523   .0206113    15.60   0.000     .2810774    .3620272
       2001  |   .3312802   .0174195    19.02   0.000     .2970731    .3654874
       2002  |   .7841644   .0207264    37.83   0.000     .7434634    .8248653
       2003  |   .8548074   .0257209    33.23   0.000     .8042987    .9053161
       2004  |   .9924243   .0173519    57.19   0.000     .9583499    1.026499
       2005  |   .8231829   .0171406    48.03   0.000     .7895236    .8568423
       2006  |   .7371686   .0206094    35.77   0.000     .6966975    .7776397
       2007  |   .6814686   .0197313    34.54   0.000     .6427218    .7202155
       2008  |   .6821396    .016797    40.61   0.000      .649155    .7151242
       2009  |   .9762777   .0183212    53.29   0.000        .9403    1.012255
       2010  |   1.390139   .0642566    21.63   0.000     1.263957    1.516321
       2011  |   1.862974   .0229308    81.24   0.000     1.817944    1.908003
       2012  |   1.893234   .0234316    80.80   0.000     1.847221    1.939247
       2013  |   1.674138   .0266916    62.72   0.000     1.621723    1.726553
       2014  |   1.307501   .0217448    60.13   0.000       1.2648    1.350202
       2015  |   .7876595   .0263681    29.87   0.000     .7358798    .8394391
             |
       _cons |   9.134475   .0101705   898.13   0.000     9.114502    9.154447
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (633 categories)
9445
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.0000d8 not found)
file /tmp/St32652.0000d8 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.0000d9 not found)
file /tmp/St32652.0000d9 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.0000da not found)
file /tmp/St32652.0000da saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.0000db not found)
file /tmp/St32652.0000db saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(31 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     15,725
                                                F(  25,    628)   =     884.90
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9803
                                                Adj R-squared     =     0.9794
                                                Root MSE          =     0.2611

                                (Std. Err. adjusted for 629 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |    .243475   .6323371     0.39   0.700    -.9982763    1.485226
             |
        year |
       1992  |   .3388506   .0181515    18.67   0.000     .3032056    .3744956
       1993  |   .6838415   .0100155    68.28   0.000     .6641735    .7035095
       1994  |   .5736433   .0146932    39.04   0.000     .5447896     .602497
       1995  |   .2443033   .0199384    12.25   0.000     .2051493    .2834573
       1996  |   .1993813   .0193351    10.31   0.000      .161412    .2373505
       1997  |   .2626232   .0166317    15.79   0.000     .2299628    .2952837
       1998  |   .1911784   .0189745    10.08   0.000     .1539173    .2284395
       1999  |   .1871124   .0189273     9.89   0.000     .1499439    .2242808
       2000  |   .2322719   .0177363    13.10   0.000     .1974422    .2671017
       2001  |   .2390569    .016158    14.79   0.000     .2073266    .2707873
       2002  |   .5723492   .0203893    28.07   0.000     .5323097    .6123887
       2003  |   1.010905   .0215757    46.85   0.000      .968536    1.053274
       2004  |   1.069202   .0173166    61.74   0.000     1.035196    1.103207
       2005  |   .7225794   .0171669    42.09   0.000     .6888678    .7562909
       2006  |   .5731906   .0203896    28.11   0.000     .5331505    .6132307
       2007  |   .5113725   .0197798    25.85   0.000     .4725299    .5502151
       2008  |   .5702312   .0183129    31.14   0.000     .5342693    .6061932
       2009  |    .977186   .0192637    50.73   0.000      .939357    1.015015
       2010  |   1.939628   .0473124    41.00   0.000     1.846718    2.032537
       2011  |   1.950425   .0220583    88.42   0.000     1.907108    1.993742
       2012  |   1.692107   .0229581    73.70   0.000     1.647023    1.737191
       2013  |   1.433332   .0240027    59.72   0.000     1.386197    1.480468
       2014  |   1.143163   .0208328    54.87   0.000     1.102253    1.184073
       2015  |   .6189469   .0235651    26.27   0.000     .5726709    .6652228
             |
       _cons |    8.11791   .0112712   720.24   0.000     8.095777    8.140044
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (629 categories)
9450
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.0000dd not found)
file /tmp/St32652.0000dd saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.0000de not found)
file /tmp/St32652.0000de saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.0000df not found)
file /tmp/St32652.0000df saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.0000dg not found)
file /tmp/St32652.0000dg saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(27 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     15,450
                                                F(  25,    617)   =    1531.58
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9781
                                                Adj R-squared     =     0.9771
                                                Root MSE          =     0.2269

                                (Std. Err. adjusted for 618 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.539717   .9097417    -9.39   0.000    -10.32628   -6.753152
             |
        year |
       1992  |   .1369262   .0244151     5.61   0.000     .0889793     .184873
       1993  |   .6805291   .0089308    76.20   0.000     .6629907    .6980675
       1994  |   .6897616   .0175792    39.24   0.000     .6552393    .7242839
       1995  |   .4241301   .0265058    16.00   0.000     .3720777    .4761826
       1996  |   .3691414   .0257392    14.34   0.000     .3185944    .4196883
       1997  |   .3825344   .0213233    17.94   0.000     .3406594    .4244094
       1998  |   .3491849   .0244497    14.28   0.000     .3011702    .3971996
       1999  |     .32551   .0232612    13.99   0.000     .2798292    .3711908
       2000  |   .3218616   .0208517    15.44   0.000     .2809126    .3628106
       2001  |   .3325092   .0176338    18.86   0.000     .2978797    .3671387
       2002  |   .7862062   .0210011    37.44   0.000     .7449639    .8274484
       2003  |   .8577884   .0260284    32.96   0.000     .8066734    .9089034
       2004  |   .9934491   .0175844    56.50   0.000     .9589165    1.027982
       2005  |   .8244737   .0173816    47.43   0.000     .7903395    .8586079
       2006  |   .7385166   .0209005    35.33   0.000     .6974717    .7795614
       2007  |   .6822481   .0199812    34.14   0.000     .6430087    .7214875
       2008  |   .6838825   .0169904    40.25   0.000     .6505165    .7172485
       2009  |   .9795505   .0185126    52.91   0.000     .9431951    1.015906
       2010  |   1.393951   .0649077    21.48   0.000     1.266484    1.521418
       2011  |   1.866068   .0231573    80.58   0.000     1.820591    1.911544
       2012  |   1.896532    .023649    80.20   0.000      1.85009    1.942974
       2013  |   1.677575   .0269498    62.25   0.000     1.624651    1.730499
       2014  |   1.310041   .0220102    59.52   0.000     1.266817    1.353265
       2015  |   .7876713   .0266937    29.51   0.000     .7352498    .8400929
             |
       _cons |   9.149883    .010313   887.22   0.000      9.12963    9.170135
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (618 categories)
9455
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.0000di not found)
file /tmp/St32652.0000di saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.0000dj not found)
file /tmp/St32652.0000dj saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.0000dk not found)
file /tmp/St32652.0000dk saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.0000dl not found)
file /tmp/St32652.0000dl saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(31 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     15,275
                                                F(  25,    610)   =     877.13
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9797
                                                Adj R-squared     =     0.9788
                                                Root MSE          =     0.2615

                                (Std. Err. adjusted for 611 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -.1609027   .7478341    -0.22   0.830    -1.629545    1.307739
             |
        year |
       1992  |   .3278786   .0208269    15.74   0.000     .2869776    .3687797
       1993  |   .6812271   .0100726    67.63   0.000     .6614458    .7010084
       1994  |    .578161   .0154828    37.34   0.000     .5477549    .6085672
       1995  |   .2541183   .0220446    11.53   0.000     .2108258    .2974107
       1996  |   .2107358   .0214273     9.83   0.000     .1686556     .252816
       1997  |   .2722803   .0184076    14.79   0.000     .2361303    .3084302
       1998  |    .203565   .0208592     9.76   0.000     .1626004    .2445297
       1999  |   .1996235   .0205706     9.70   0.000     .1592258    .2400213
       2000  |   .2417131   .0190743    12.67   0.000     .2042539    .2791723
       2001  |    .249719   .0173895    14.36   0.000     .2155685    .2838695
       2002  |   .5801496   .0221376    26.21   0.000     .5366744    .6236249
       2003  |   1.001862   .0242285    41.35   0.000     .9542807    1.049444
       2004  |   1.065593   .0190314    55.99   0.000     1.028218    1.102968
       2005  |   .7275075   .0171183    42.50   0.000     .6938895    .7611255
       2006  |   .5804224   .0205669    28.22   0.000     .5400318     .620813
       2007  |   .5202564   .0200506    25.95   0.000     .4808798    .5596331
       2008  |   .5745162    .018479    31.09   0.000     .5382262    .6108063
       2009  |   .9751403   .0203546    47.91   0.000     .9351667    1.015114
       2010  |   1.912176   .0568107    33.66   0.000     1.800608    2.023744
       2011  |   1.943356   .0243418    79.84   0.000     1.895552     1.99116
       2012  |   1.697729   .0231367    73.38   0.000     1.652292    1.743167
       2013  |     1.4399   .0246878    58.32   0.000     1.391417    1.488383
       2014  |   1.147808   .0212408    54.04   0.000     1.106094    1.189522
       2015  |    .625945     .02446    25.59   0.000      .577909    .6739811
             |
       _cons |   8.112838   .0114265   710.00   0.000     8.090398    8.135278
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (611 categories)
9460
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.0000dn not found)
file /tmp/St32652.0000dn saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.0000do not found)
file /tmp/St32652.0000do saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.0000dp not found)
file /tmp/St32652.0000dp saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.0000dq not found)
file /tmp/St32652.0000dq saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(27 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     14,975
                                                F(  25,    598)   =    1484.21
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9782
                                                Adj R-squared     =     0.9773
                                                Root MSE          =     0.2261

                                (Std. Err. adjusted for 599 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.271267   .9189985    -9.00   0.000    -10.07612    -6.46641
             |
        year |
       1992  |    .145158     .02456     5.91   0.000     .0969237    .1933924
       1993  |   .6811383   .0089815    75.84   0.000     .6634993    .6987774
       1994  |   .6850717   .0178028    38.48   0.000     .6501081    .7200353
       1995  |   .4155529   .0267974    15.51   0.000     .3629244    .4681814
       1996  |   .3600277   .0259655    13.87   0.000     .3090331    .4110223
       1997  |     .37641   .0215556    17.46   0.000     .3340761     .418744
       1998  |   .3421198   .0247439    13.83   0.000     .2935243    .3907153
       1999  |   .3188702   .0235561    13.54   0.000     .2726075     .365133
       2000  |   .3164669   .0211621    14.95   0.000     .2749059    .3580279
       2001  |   .3282709   .0178843    18.36   0.000     .2931472    .3633945
       2002  |   .7834744   .0212425    36.88   0.000     .7417554    .8251935
       2003  |   .8681918   .0262783    33.04   0.000     .8165829    .9198007
       2004  |   1.000121   .0177452    56.36   0.000     .9652707    1.034972
       2005  |   .8239292   .0176089    46.79   0.000     .7893463     .858512
       2006  |   .7386567   .0211687    34.89   0.000     .6970826    .7802307
       2007  |    .681712   .0202285    33.70   0.000     .6419844    .7214396
       2008  |    .685452   .0171713    39.92   0.000     .6517288    .7191753
       2009  |   .9852436   .0186511    52.82   0.000      .948614    1.021873
       2010  |   1.414549   .0655834    21.57   0.000     1.285747    1.543351
       2011  |   1.872941   .0234077    80.01   0.000      1.82697    1.918912
       2012  |   1.894782   .0239768    79.03   0.000     1.847693    1.941871
       2013  |   1.674332   .0273198    61.29   0.000     1.620678    1.727986
       2014  |    1.30931   .0223549    58.57   0.000     1.265406    1.353213
       2015  |   .7851518   .0271271    28.94   0.000     .7318758    .8384278
             |
       _cons |   9.183496   .0104507   878.74   0.000     9.162972    9.204021
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (599 categories)
9465
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.0000ds not found)
file /tmp/St32652.0000ds saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.0000dt not found)
file /tmp/St32652.0000dt saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.0000du not found)
file /tmp/St32652.0000du saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.0000dv not found)
file /tmp/St32652.0000dv saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(31 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     14,850
                                                F(  25,    593)   =     852.93
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9797
                                                Adj R-squared     =     0.9789
                                                Root MSE          =     0.2622

                                (Std. Err. adjusted for 594 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |   .1353107   1.010314     0.13   0.894    -1.848918    2.119539
             |
        year |
       1992  |   .3369726   .0269622    12.50   0.000     .2840197    .3899255
       1993  |   .6830918   .0099872    68.40   0.000     .6634773    .7027064
       1994  |   .5746638   .0204498    28.10   0.000     .5345011    .6148266
       1995  |   .2452092   .0302676     8.10   0.000     .1857645    .3046539
       1996  |   .2030854   .0294628     6.89   0.000     .1452214    .2609495
       1997  |   .2669066   .0240576    11.09   0.000     .2196582     .314155
       1998  |   .1948976   .0278964     6.99   0.000     .1401098    .2496853
       1999  |   .1922374   .0272833     7.05   0.000     .1386538     .245821
       2000  |   .2343989   .0240588     9.74   0.000     .1871481    .2816497
       2001  |   .2405171   .0210713    11.41   0.000     .1991337    .2819004
       2002  |   .5731435    .024778    23.13   0.000     .5244803    .6218068
       2003  |   1.008478    .030428    33.14   0.000     .9487183    1.068238
       2004  |   1.067539   .0218125    48.94   0.000       1.0247    1.110378
       2005  |   .7222973   .0180647    39.98   0.000     .6868186    .7577759
       2006  |   .5713588   .0222387    25.69   0.000     .5276825    .6150351
       2007  |   .5116686   .0215818    23.71   0.000     .4692825    .5540546
       2008  |   .5701383   .0187522    30.40   0.000     .5333095    .6069671
       2009  |   .9752072   .0222883    43.75   0.000     .9314337    1.018981
       2010  |   1.934046   .0760115    25.44   0.000     1.784761     2.08333
       2011  |   1.948796   .0284394    68.52   0.000     1.892942     2.00465
       2012  |   1.692267   .0254961    66.37   0.000     1.642194    1.742341
       2013  |   1.431816   .0283033    50.59   0.000     1.376229    1.487403
       2014  |   1.140097   .0230578    49.45   0.000     1.094812    1.185382
       2015  |   .6161952   .0275129    22.40   0.000     .5621605    .6702298
             |
       _cons |   8.153695   .0116409   700.44   0.000     8.130832    8.176557
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (594 categories)
9470
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.0000dx not found)
file /tmp/St32652.0000dx saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.0000e0 not found)
file /tmp/St32652.0000e0 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.0000e1 not found)
file /tmp/St32652.0000e1 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.0000e2 not found)
file /tmp/St32652.0000e2 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(27 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     14,550
                                                F(  25,    581)   =    1437.50
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9781
                                                Adj R-squared     =     0.9772
                                                Root MSE          =     0.2257

                                (Std. Err. adjusted for 582 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.894306   .7792982   -11.41   0.000    -10.42489   -7.363721
             |
        year |
       1992  |   .1315008   .0209372     6.28   0.000     .0903789    .1726226
       1993  |   .6819012    .009087    75.04   0.000     .6640539    .6997486
       1994  |   .6940859   .0162058    42.83   0.000     .6622568     .725915
       1995  |    .430754   .0237109    18.17   0.000     .3841844    .4773236
       1996  |   .3752374   .0227991    16.46   0.000     .3304586    .4200161
       1997  |   .3878575   .0193283    20.07   0.000     .3498958    .4258193
       1998  |   .3558597   .0223286    15.94   0.000      .312005    .3997143
       1999  |    .331494   .0216373    15.32   0.000     .2889972    .3739908
       2000  |   .3264783   .0196924    16.58   0.000     .2878013    .3651553
       2001  |   .3384493   .0168348    20.10   0.000     .3053849    .3715138
       2002  |   .7956575   .0203156    39.16   0.000     .7557566    .8355584
       2003  |   .8563822   .0234449    36.53   0.000     .8103352    .9024292
       2004  |   .9949457   .0168416    59.08   0.000     .9618678    1.028024
       2005  |   .8315519   .0174329    47.70   0.000     .7973127     .865791
       2006  |   .7514246   .0203725    36.88   0.000     .7114119    .7914374
       2007  |   .6948482   .0196633    35.34   0.000     .6562283    .7334681
       2008  |   .6935748   .0173616    39.95   0.000     .6594756    .7276739
       2009  |   .9833517   .0179561    54.76   0.000      .948085    1.018618
       2010  |   1.373896   .0552082    24.89   0.000     1.265464    1.482328
       2011  |   1.865535   .0214926    86.80   0.000     1.823323    1.907748
       2012  |   1.907763   .0234014    81.52   0.000     1.861801    1.953725
       2013  |   1.691005   .0259847    65.08   0.000      1.63997     1.74204
       2014  |   1.321841    .021761    60.74   0.000     1.279101    1.364581
       2015  |    .798312   .0258152    30.92   0.000     .7476094    .8490145
             |
       _cons |   9.215302   .0106773   863.07   0.000     9.194331    9.236272
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (582 categories)
9475
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.0000e4 not found)
file /tmp/St32652.0000e4 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.0000e5 not found)
file /tmp/St32652.0000e5 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.0000e6 not found)
file /tmp/St32652.0000e6 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.0000e7 not found)
file /tmp/St32652.0000e7 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(31 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     14,350
                                                F(  25,    573)   =     836.81
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9795
                                                Adj R-squared     =     0.9786
                                                Root MSE          =     0.2616

                                (Std. Err. adjusted for 574 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |   .6195631   .9034723     0.69   0.493    -1.154958    2.394084
             |
        year |
       1992  |   .3486133   .0241341    14.44   0.000     .3012113    .3960154
       1993  |    .683089   .0101083    67.58   0.000     .6632352    .7029427
       1994  |   .5659568   .0191696    29.52   0.000     .5283055    .6036082
       1995  |   .2313226   .0276892     8.35   0.000      .176938    .2857073
       1996  |   .1900332   .0269004     7.06   0.000     .1371977    .2428687
       1997  |   .2581533   .0220797    11.69   0.000     .2147862    .3015204
       1998  |   .1842316   .0255407     7.21   0.000     .1340668    .2343963
       1999  |   .1812394    .024912     7.28   0.000     .1323094    .2301693
       2000  |   .2276117   .0224104    10.16   0.000      .183595    .2716283
       2001  |   .2371306   .0198761    11.93   0.000     .1980916    .2761696
       2002  |   .5678652   .0237016    23.96   0.000     .5213126    .6144178
       2003  |     1.0242   .0283984    36.07   0.000     .9684224    1.079978
       2004  |    1.07476     .02092    51.37   0.000      1.03367    1.115849
       2005  |    .719912   .0179765    40.05   0.000     .6846042    .7552198
       2006  |   .5669499   .0220725    25.69   0.000      .523597    .6103027
       2007  |   .5070466   .0216792    23.39   0.000     .4644663    .5496269
       2008  |   .5685064   .0191163    29.74   0.000     .5309599    .6060529
       2009  |   .9798888   .0217832    44.98   0.000     .9371042    1.022673
       2010  |   1.969915   .0682533    28.86   0.000     1.835858    2.103972
       2011  |   1.960349   .0272135    72.04   0.000     1.906899      2.0138
       2012  |   1.690007   .0249192    67.82   0.000     1.641063    1.738951
       2013  |   1.427446    .027089    52.69   0.000      1.37424    1.480652
       2014  |   1.139398   .0226834    50.23   0.000     1.094845    1.183951
       2015  |   .6136355   .0268923    22.82   0.000      .560816     .666455
             |
       _cons |   8.168703   .0117892   692.90   0.000     8.145548    8.191858
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (574 categories)
9480
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.0000e9 not found)
file /tmp/St32652.0000e9 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.0000ea not found)
file /tmp/St32652.0000ea saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.0000eb not found)
file /tmp/St32652.0000eb saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.0000ec not found)
file /tmp/St32652.0000ec saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(27 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     14,000
                                                F(  25,    559)   =    1383.82
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9780
                                                Adj R-squared     =     0.9770
                                                Root MSE          =     0.2245

                                (Std. Err. adjusted for 560 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.539362   .7964458   -10.72   0.000    -10.10375   -6.974969
             |
        year |
       1992  |   .1416111   .0212048     6.68   0.000     .0999603    .1832619
       1993  |   .6820048   .0092386    73.82   0.000     .6638581    .7001514
       1994  |   .6878457   .0165224    41.63   0.000     .6553921    .7202992
       1995  |   .4195218    .024135    17.38   0.000     .3721155    .4669281
       1996  |   .3639633   .0232855    15.63   0.000     .3182256     .409701
       1997  |   .3785024   .0198123    19.10   0.000     .3395867     .417418
       1998  |   .3446508    .022806    15.11   0.000      .299855    .3894467
       1999  |   .3198769   .0220883    14.48   0.000     .2764907     .363263
       2000  |   .3160772   .0199803    15.82   0.000     .2768316    .3553228
       2001  |   .3306127   .0170143    19.43   0.000     .2971931    .3640324
       2002  |   .7869717   .0205639    38.27   0.000     .7465797    .8273637
       2003  |    .863166   .0242418    35.61   0.000     .8155498    .9107821
       2004  |   .9953174   .0171995    57.87   0.000     .9615339    1.029101
       2005  |   .8228063    .017543    46.90   0.000      .788348    .8572647
       2006  |   .7417257   .0205283    36.13   0.000     .7014038    .7820477
       2007  |   .6852545   .0197681    34.66   0.000     .6464257    .7240833
       2008  |   .6864641   .0175799    39.05   0.000     .6519333     .720995
       2009  |   .9818112   .0184131    53.32   0.000      .945644    1.017978
       2010  |   1.394645   .0568008    24.55   0.000     1.283076    1.506215
       2011  |   1.866988   .0221007    84.48   0.000     1.823578    1.910399
       2012  |   1.898659   .0235116    80.75   0.000     1.852477    1.944841
       2013  |   1.679339   .0261039    64.33   0.000     1.628065    1.730613
       2014  |   1.311706   .0218029    60.16   0.000     1.268881    1.354532
       2015  |   .7841686   .0258352    30.35   0.000     .7334226    .8349145
             |
       _cons |   9.253834   .0107966   857.11   0.000     9.232627    9.275041
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (560 categories)
9485
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.0000ee not found)
file /tmp/St32652.0000ee saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.0000ef not found)
file /tmp/St32652.0000ef saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.0000eg not found)
file /tmp/St32652.0000eg saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.0000eh not found)
file /tmp/St32652.0000eh saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(31 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     13,825
                                                F(  25,    552)   =     805.45
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9794
                                                Adj R-squared     =     0.9785
                                                Root MSE          =     0.2617

                                (Std. Err. adjusted for 553 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |    .486719   1.034078     0.47   0.638     -1.54449    2.517928
             |
        year |
       1992  |   .3436253   .0274617    12.51   0.000     .2896831    .3975676
       1993  |   .6819512   .0103093    66.15   0.000      .661701    .7022014
       1994  |   .5675264   .0212494    26.71   0.000     .5257869    .6092659
       1995  |   .2360526    .031416     7.51   0.000      .174343    .2977622
       1996  |   .1961749     .03068     6.39   0.000      .135911    .2564387
       1997  |     .26278   .0249375    10.54   0.000     .2137961     .311764
       1998  |   .1885986   .0290163     6.50   0.000     .1316028    .2455944
       1999  |   .1858908   .0284316     6.54   0.000     .1300434    .2417382
       2000  |   .2319803   .0254523     9.11   0.000     .1819851    .2819754
       2001  |   .2412213   .0220407    10.94   0.000     .1979273    .2845152
       2002  |   .5692939   .0253484    22.46   0.000     .5195028     .619085
       2003  |   1.019876   .0312342    32.65   0.000     .9585234    1.081228
       2004  |   1.070691   .0221267    48.39   0.000     1.027228    1.114154
       2005  |   .7199567   .0187515    38.39   0.000     .6831237    .7567896
       2006  |   .5694872   .0234867    24.25   0.000     .5233529    .6156215
       2007  |    .507696   .0226168    22.45   0.000     .4632704    .5521216
       2008  |   .5663404   .0196816    28.78   0.000     .5276804    .6050005
       2009  |   .9760738   .0227779    42.85   0.000     .9313319    1.020816
       2010  |   1.958922   .0777473    25.20   0.000     1.806205    2.111639
       2011  |   1.956328   .0292001    67.00   0.000     1.898971    2.013685
       2012  |   1.690159   .0260844    64.80   0.000     1.638922    1.741396
       2013  |   1.429843   .0288611    49.54   0.000     1.373152    1.486534
       2014  |   1.141593    .023418    48.75   0.000     1.095593    1.187592
       2015  |    .616644   .0283801    21.73   0.000     .5608979    .6723902
             |
       _cons |   8.168271   .0119486   683.62   0.000       8.1448    8.191741
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (553 categories)
9490
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.0000ej not found)
file /tmp/St32652.0000ej saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.0000ek not found)
file /tmp/St32652.0000ek saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.0000el not found)
file /tmp/St32652.0000el saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.0000em not found)
file /tmp/St32652.0000em saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(26 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     13,575
                                                F(  25,    542)   =    1331.84
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9781
                                                Adj R-squared     =     0.9771
                                                Root MSE          =     0.2251

                                (Std. Err. adjusted for 543 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.425646   .8231717   -10.24   0.000    -10.04264   -6.808649
             |
        year |
       1992  |   .1440693   .0218393     6.60   0.000     .1011691    .1869694
       1993  |    .682333   .0093655    72.86   0.000     .6639359    .7007302
       1994  |   .6858849   .0170012    40.34   0.000     .6524886    .7192812
       1995  |    .415453   .0248929    16.69   0.000     .3665545    .4643514
       1996  |   .3591824   .0240081    14.96   0.000     .3120222    .4063427
       1997  |   .3733552   .0203843    18.32   0.000     .3333131    .4133972
       1998  |   .3395816   .0235236    14.44   0.000     .2933731    .3857901
       1999  |   .3140239   .0227554    13.80   0.000     .2693244    .3587234
       2000  |   .3114971   .0205784    15.14   0.000      .271074    .3519203
       2001  |   .3260074   .0174784    18.65   0.000     .2916736    .3603411
       2002  |   .7839461   .0211449    37.07   0.000       .74241    .8254821
       2003  |    .866447   .0249594    34.71   0.000      .817418     .915476
       2004  |   .9951833   .0175917    56.57   0.000     .9606271     1.02974
       2005  |   .8205776   .0178513    45.97   0.000     .7855113    .8556438
       2006  |   .7393647   .0209882    35.23   0.000     .6981364    .7805929
       2007  |   .6825237   .0202041    33.78   0.000     .6428357    .7222117
       2008  |   .6833929   .0178659    38.25   0.000     .6482979    .7184878
       2009  |   .9800371   .0188199    52.07   0.000     .9430681    1.017006
       2010  |   1.401771   .0587875    23.84   0.000     1.286292    1.517251
       2011  |   1.868757   .0226996    82.33   0.000     1.824167    1.913347
       2012  |   1.896265   .0239868    79.05   0.000     1.849147    1.943384
       2013  |   1.676842   .0266697    62.87   0.000     1.624453    1.729231
       2014  |   1.310722   .0222871    58.81   0.000     1.266942    1.354501
       2015  |   .7833844   .0263997    29.67   0.000     .7315262    .8352426
             |
       _cons |   9.269198   .0109798   844.21   0.000      9.24763    9.290766
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (543 categories)
9495
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.0000eo not found)
file /tmp/St32652.0000eo saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.0000ep not found)
file /tmp/St32652.0000ep saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.0000eq not found)
file /tmp/St32652.0000eq saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.0000er not found)
file /tmp/St32652.0000er saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(31 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     13,550
                                                F(  25,    541)   =     808.10
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9795
                                                Adj R-squared     =     0.9786
                                                Root MSE          =     0.2620

                                (Std. Err. adjusted for 542 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |   1.435359    .950256     1.51   0.132    -.4312849    3.302002
             |
        year |
       1992  |   .3684273   .0249756    14.75   0.000     .3193663    .4174883
       1993  |   .6812407   .0102473    66.48   0.000     .6611114      .70137
       1994  |   .5487678   .0197494    27.79   0.000     .5099728    .5875627
       1995  |   .2082193   .0284905     7.31   0.000     .1522537    .2641849
       1996  |   .1696677   .0278634     6.09   0.000      .114934    .2244014
       1997  |   .2412911   .0229795    10.50   0.000     .1961512    .2864311
       1998  |   .1630726   .0267889     6.09   0.000     .1104496    .2156957
       1999  |   .1619195   .0262278     6.17   0.000     .1103987    .2134402
       2000  |   .2134046   .0236394     9.03   0.000     .1669683    .2598408
       2001  |   .2251002   .0209006    10.77   0.000     .1840439    .2661564
       2002  |    .552228   .0255358    21.63   0.000     .5020665    .6023894
       2003  |   1.042698    .028359    36.77   0.000     .9869905    1.098405
       2004  |    1.08209   .0208928    51.79   0.000     1.041049    1.123131
       2005  |   .7101851   .0189533    37.47   0.000     .6729541    .7474161
       2006  |   .5553291   .0233837    23.75   0.000     .5093951    .6012631
       2007  |   .4960246   .0230071    21.56   0.000     .4508304    .5412188
       2008  |   .5622947   .0203624    27.61   0.000     .5222957    .6022937
       2009  |   .9857856   .0220101    44.79   0.000     .9425499    1.029021
       2010  |    2.02558   .0700939    28.90   0.000      1.88789     2.16327
       2011  |   1.972236   .0271394    72.67   0.000     1.918924    2.025547
       2012  |    1.67455   .0266249    62.89   0.000     1.622249    1.726851
       2013  |   1.410095   .0290953    48.46   0.000     1.352942    1.467249
       2014  |   1.128396   .0240379    46.94   0.000     1.081177    1.175615
       2015  |   .5967075   .0281889    21.17   0.000     .5413343    .6520807
             |
       _cons |   8.178751   .0120629   678.01   0.000     8.155055    8.202447
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (542 categories)
9500
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.0000et not found)
file /tmp/St32652.0000et saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.0000eu not found)
file /tmp/St32652.0000eu saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.0000ev not found)
file /tmp/St32652.0000ev saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.0000ew not found)
file /tmp/St32652.0000ew saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(26 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     13,275
                                                F(  25,    530)   =    1301.00
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9781
                                                Adj R-squared     =     0.9771
                                                Root MSE          =     0.2253

                                (Std. Err. adjusted for 531 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.368736   .8400335    -9.96   0.000    -10.01894   -6.718532
             |
        year |
       1992  |   .1471354   .0222153     6.62   0.000     .1034945    .1907763
       1993  |    .684513    .009499    72.06   0.000     .6658527    .7031732
       1994  |   .6859048   .0173377    39.56   0.000     .6518457     .719964
       1995  |   .4139387   .0253512    16.33   0.000     .3641375    .4637399
       1996  |    .356966   .0243833    14.64   0.000     .3090663    .4048657
       1997  |     .37085   .0206928    17.92   0.000     .3302001       .4115
       1998  |   .3369904   .0238897    14.11   0.000     .2900603    .3839205
       1999  |   .3104154   .0231182    13.43   0.000     .2650009    .3558299
       2000  |   .3079635   .0209219    14.72   0.000     .2668636    .3490634
       2001  |   .3223802   .0177123    18.20   0.000     .2875854    .3571751
       2002  |     .78244   .0215875    36.24   0.000     .7400324    .8248477
       2003  |   .8677255   .0252792    34.33   0.000     .8180659    .9173852
       2004  |   .9958283   .0177779    56.02   0.000     .9609046    1.030752
       2005  |   .8201538     .01814    45.21   0.000     .7845187    .8557888
       2006  |   .7400725   .0213485    34.67   0.000     .6981344    .7820107
       2007  |   .6835172   .0205312    33.29   0.000     .6431848    .7238497
       2008  |    .683785   .0181964    37.58   0.000      .648039     .719531
       2009  |   .9828994   .0191174    51.41   0.000     .9453443    1.020455
       2010  |   1.407638   .0598505    23.52   0.000     1.290064    1.525211
       2011  |   1.872069   .0229995    81.40   0.000     1.826888    1.917251
       2012  |   1.897624   .0244735    77.54   0.000     1.849547    1.945701
       2013  |   1.678523   .0272095    61.69   0.000     1.625072    1.731975
       2014  |   1.312814   .0226853    57.87   0.000      1.26825    1.357378
       2015  |   .7820145   .0268767    29.10   0.000     .7292166    .8348125
             |
       _cons |   9.280233    .011133   833.58   0.000     9.258363    9.302103
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (531 categories)
9505
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.0000f0 not found)
file /tmp/St32652.0000f0 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.0000f1 not found)
file /tmp/St32652.0000f1 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.0000f2 not found)
file /tmp/St32652.0000f2 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.0000f3 not found)
file /tmp/St32652.0000f3 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(31 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     13,100
                                                F(  25,    523)   =     775.30
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9794
                                                Adj R-squared     =     0.9785
                                                Root MSE          =     0.2599

                                (Std. Err. adjusted for 524 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -.5481346    .808694    -0.68   0.498    -2.136822    1.040553
             |
        year |
       1992  |   .3173805   .0226506    14.01   0.000     .2728831    .3618778
       1993  |   .6806817     .01053    64.64   0.000     .6599954    .7013681
       1994  |   .5799386    .017516    33.11   0.000     .5455282     .614349
       1995  |    .259098   .0245414    10.56   0.000     .2108862    .3073098
       1996  |    .218902   .0236331     9.26   0.000     .1724746    .2653294
       1997  |   .2812902   .0196741    14.30   0.000     .2426402    .3199402
       1998  |   .2133956   .0225526     9.46   0.000     .1690908    .2577004
       1999  |   .2103737   .0222885     9.44   0.000     .1665877    .2541597
       2000  |   .2505012   .0203655    12.30   0.000      .210493    .2905094
       2001  |   .2532182   .0180774    14.01   0.000      .217705    .2887315
       2002  |   .5866789   .0216646    27.08   0.000     .5441187    .6292392
       2003  |   .9912815   .0277317    35.75   0.000     .9368023    1.045761
       2004  |   1.053002   .0217287    48.46   0.000     1.010315    1.095688
       2005  |   .7236154   .0171795    42.12   0.000     .6898662    .7573647
       2006  |   .5765786   .0205854    28.01   0.000     .5361385    .6170187
       2007  |   .5164989   .0199835    25.85   0.000      .477241    .5557568
       2008  |   .5713781   .0188654    30.29   0.000     .5343169    .6084393
       2009  |   .9633597   .0228737    42.12   0.000     .9184241    1.008295
       2010  |   1.880706   .0638435    29.46   0.000     1.755285    2.006128
       2011  |   1.932076   .0277317    69.67   0.000     1.877597    1.986555
       2012  |   1.700728   .0233892    72.71   0.000      1.65478    1.746677
       2013  |     1.4476   .0247353    58.52   0.000     1.399007    1.496193
       2014  |   1.154278   .0217237    53.13   0.000     1.111601    1.196954
       2015  |   .6356178   .0260131    24.43   0.000     .5845149    .6867207
             |
       _cons |   8.204214   .0120257   682.22   0.000      8.18059    8.227839
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (524 categories)
9510
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.0000f5 not found)
file /tmp/St32652.0000f5 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.0000f6 not found)
file /tmp/St32652.0000f6 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.0000f7 not found)
file /tmp/St32652.0000f7 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.0000f8 not found)
file /tmp/St32652.0000f8 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(26 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     12,775
                                                F(  25,    510)   =    1272.88
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9783
                                                Adj R-squared     =     0.9773
                                                Root MSE          =     0.2229

                                (Std. Err. adjusted for 511 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.546801   .8374882   -10.21   0.000    -10.19215   -6.901449
             |
        year |
       1992  |   .1434557    .022129     6.48   0.000     .0999805    .1869309
       1993  |   .6840715   .0097286    70.32   0.000     .6649584    .7031846
       1994  |   .6882332   .0174147    39.52   0.000     .6540198    .7224466
       1995  |   .4163568   .0255702    16.28   0.000      .366121    .4665926
       1996  |   .3605465   .0244007    14.78   0.000     .3126083    .4084846
       1997  |   .3740589   .0206784    18.09   0.000     .3334336    .4146842
       1998  |   .3414749   .0237644    14.37   0.000     .2947868    .3881631
       1999  |   .3144111    .023007    13.67   0.000     .2692109    .3596113
       2000  |   .3128095   .0208989    14.97   0.000      .271751     .353868
       2001  |     .32644   .0175636    18.59   0.000     .2919341    .3609459
       2002  |   .7883587   .0213965    36.85   0.000     .7463226    .8303949
       2003  |   .8646072   .0253452    34.11   0.000     .8148133    .9144011
       2004  |   .9935449   .0178563    55.64   0.000     .9584639    1.028626
       2005  |   .8229227   .0181458    45.35   0.000     .7872731    .8585723
       2006  |    .744962   .0212728    35.02   0.000     .7031689    .7867552
       2007  |   .6883386   .0203763    33.78   0.000     .6483068    .7283704
       2008  |    .685878   .0180882    37.92   0.000     .6503415    .7214146
       2009  |   .9813975   .0191218    51.32   0.000     .9438302    1.018965
       2010  |   1.395421   .0598923    23.30   0.000     1.277755    1.513087
       2011  |   1.869424   .0232792    80.30   0.000     1.823689    1.915159
       2012  |   1.900743   .0241019    78.86   0.000     1.853391    1.948094
       2013  |   1.682787   .0268339    62.71   0.000     1.630069    1.735506
       2014  |   1.317517   .0223482    58.95   0.000     1.273611    1.361422
       2015  |   .7857384   .0266043    29.53   0.000     .7334708     .838006
             |
       _cons |   9.325262   .0111431   836.87   0.000      9.30337    9.347154
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (511 categories)
9515
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.0000fa not found)
file /tmp/St32652.0000fa saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.0000fb not found)
file /tmp/St32652.0000fb saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.0000fc not found)
file /tmp/St32652.0000fc saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.0000fd not found)
file /tmp/St32652.0000fd saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(31 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     12,725
                                                F(  25,    508)   =     760.05
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9796
                                                Adj R-squared     =     0.9787
                                                Root MSE          =     0.2604

                                (Std. Err. adjusted for 509 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -1.264783   .9224858    -1.37   0.171     -3.07714    .5475738
             |
        year |
       1992  |   .2980428   .0253476    11.76   0.000     .2482438    .3478417
       1993  |   .6801358   .0108623    62.61   0.000     .6587952    .7014765
       1994  |   .5936011   .0180363    32.91   0.000     .5581662    .6290361
       1995  |   .2836808   .0271851    10.44   0.000     .2302717    .3370899
       1996  |   .2434077    .026569     9.16   0.000      .191209    .2956064
       1997  |   .3007582   .0220304    13.65   0.000     .2574763    .3440401
       1998  |   .2368895   .0255357     9.28   0.000      .186721    .2870581
       1999  |   .2317204   .0246921     9.38   0.000     .1832093    .2802316
       2000  |   .2659299   .0218113    12.19   0.000     .2230784    .3087814
       2001  |   .2690416   .0191775    14.03   0.000     .2313646    .3067187
       2002  |    .598681   .0234346    25.55   0.000     .5526404    .6447216
       2003  |   .9730646    .029982    32.45   0.000     .9141606    1.031969
       2004  |   1.044012   .0232759    44.85   0.000     .9982835    1.089741
       2005  |   .7314316   .0185431    39.44   0.000      .695001    .7678622
       2006  |   .5889623   .0226526    26.00   0.000     .5444579    .6334667
       2007  |   .5278272   .0215638    24.48   0.000     .4854621    .5701924
       2008  |   .5771042   .0197831    29.17   0.000     .5382375    .6159708
       2009  |     .95792   .0232253    41.24   0.000     .9122904     1.00355
       2010  |   1.829481   .0710138    25.76   0.000     1.689964    1.968998
       2011  |   1.920009   .0294282    65.24   0.000     1.862193    1.977825
       2012  |   1.715155   .0249088    68.86   0.000     1.666218    1.764092
       2013  |   1.466202   .0268995    54.51   0.000     1.413353     1.51905
       2014  |   1.168696   .0224985    51.95   0.000     1.124494    1.212898
       2015  |   .6569981   .0265011    24.79   0.000     .6049329    .7090632
             |
       _cons |   8.214232   .0122895   668.39   0.000     8.190087    8.238376
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (509 categories)
9520
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.0000ff not found)
file /tmp/St32652.0000ff saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.0000fg not found)
file /tmp/St32652.0000fg saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.0000fh not found)
file /tmp/St32652.0000fh saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.0000fi not found)
file /tmp/St32652.0000fi saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(26 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     12,275
                                                F(  25,    490)   =    1222.84
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9784
                                                Adj R-squared     =     0.9774
                                                Root MSE          =     0.2235

                                (Std. Err. adjusted for 491 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.663825   .8633819   -10.03   0.000    -10.36021   -6.967437
             |
        year |
       1992  |   .1426015   .0227113     6.28   0.000      .097978    .1872249
       1993  |   .6862383   .0100315    68.41   0.000     .6665283    .7059483
       1994  |   .6925505   .0179656    38.55   0.000     .6572515    .7278496
       1995  |   .4213215   .0263664    15.98   0.000     .3695163    .4731267
       1996  |   .3644598   .0251179    14.51   0.000     .3151077    .4138119
       1997  |   .3769461   .0212581    17.73   0.000     .3351778    .4187144
       1998  |   .3456695   .0244678    14.13   0.000     .2975948    .3937442
       1999  |    .318578   .0236527    13.47   0.000     .2721048    .3650512
       2000  |   .3162456   .0214589    14.74   0.000     .2740827    .3584084
       2001  |   .3286876   .0179598    18.30   0.000     .2933999    .3639753
       2002  |   .7931752   .0221888    35.75   0.000     .7495782    .8367721
       2003  |   .8634364   .0260081    33.20   0.000     .8123352    .9145376
       2004  |     .99307   .0182978    54.27   0.000     .9571181    1.029022
       2005  |   .8236598   .0187192    44.00   0.000       .78688    .8604396
       2006  |   .7440198    .021793    34.14   0.000     .7012006     .786839
       2007  |   .6895925   .0210039    32.83   0.000     .6483236    .7308614
       2008  |    .688213   .0186718    36.86   0.000     .6515263    .7248997
       2009  |   .9826007    .019701    49.88   0.000      .943892     1.02131
       2010  |   1.390505   .0615851    22.58   0.000     1.269502    1.511509
       2011  |   1.868812   .0239551    78.01   0.000     1.821744    1.915879
       2012  |   1.904555   .0248841    76.54   0.000     1.855662    1.953447
       2013  |   1.688314   .0276898    60.97   0.000     1.633909     1.74272
       2014  |   1.322916   .0230866    57.30   0.000     1.277555    1.368277
       2015  |   .7902335   .0274355    28.80   0.000     .7363277    .8441393
             |
       _cons |   9.358247   .0114838   814.91   0.000     9.335684    9.380811
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (491 categories)
9525
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.0000fk not found)
file /tmp/St32652.0000fk saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.0000fl not found)
file /tmp/St32652.0000fl saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.0000fm not found)
file /tmp/St32652.0000fm saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.0000fn not found)
file /tmp/St32652.0000fn saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(31 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     12,175
                                                F(  25,    486)   =     714.18
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9795
                                                Adj R-squared     =     0.9786
                                                Root MSE          =     0.2609

                                (Std. Err. adjusted for 487 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |   .9451947   .9721054     0.97   0.331    -.9648536    2.855243
             |
        year |
       1992  |   .3545506   .0260827    13.59   0.000     .3033019    .4057994
       1993  |   .6788591   .0108613    62.50   0.000     .6575182    .7001999
       1994  |   .5581675   .0198922    28.06   0.000     .5190823    .5972528
       1995  |   .2264553   .0292198     7.75   0.000     .1690426    .2838679
       1996  |   .1884421   .0283283     6.65   0.000      .132781    .2441032
       1997  |   .2573834   .0236965    10.86   0.000     .2108233    .3039436
       1998  |    .183967    .027275     6.74   0.000     .1303754    .2375586
       1999  |    .181761   .0260686     6.97   0.000     .1305398    .2329821
       2000  |   .2213583   .0235841     9.39   0.000      .175019    .2676976
       2001  |   .2387634   .0209048    11.42   0.000     .1976884    .2798384
       2002  |   .5627804   .0257793    21.83   0.000     .5121277    .6134331
       2003  |   1.029993   .0305162    33.75   0.000     .9700329    1.089953
       2004  |   1.070922   .0226452    47.29   0.000     1.026427    1.115416
       2005  |   .7115739   .0191962    37.07   0.000      .673856    .7492917
       2006  |   .5589134   .0239098    23.38   0.000     .5119341    .6058928
       2007  |   .4992615   .0235075    21.24   0.000     .4530726    .5454504
       2008  |   .5669461   .0208753    27.16   0.000     .5259291    .6079632
       2009  |   .9837836   .0236134    41.66   0.000     .9373866    1.030181
       2010  |   1.985582   .0730477    27.18   0.000     1.842054    2.129111
       2011  |   1.960379   .0290269    67.54   0.000     1.903345    2.017413
       2012  |   1.682661   .0270493    62.21   0.000     1.629513     1.73581
       2013  |   1.421154   .0292172    48.64   0.000     1.363747    1.478562
       2014  |   1.135716    .024728    45.93   0.000     1.087129    1.184303
       2015  |   .6111779   .0296257    20.63   0.000     .5529676    .6693882
             |
       _cons |    8.24471   .0127429   647.01   0.000     8.219672    8.269747
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (487 categories)
9530
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.0000fp not found)
file /tmp/St32652.0000fp saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.0000fq not found)
file /tmp/St32652.0000fq saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.0000fr not found)
file /tmp/St32652.0000fr saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.0000fs not found)
file /tmp/St32652.0000fs saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(26 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     11,875
                                                F(  25,    474)   =    1189.82
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9784
                                                Adj R-squared     =     0.9774
                                                Root MSE          =     0.2244

                                (Std. Err. adjusted for 475 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.604306   .8783294    -9.80   0.000    -10.33021   -6.878405
             |
        year |
       1992  |   .1454875   .0230605     6.31   0.000     .1001741    .1908009
       1993  |   .6866755   .0101782    67.47   0.000     .6666755    .7066754
       1994  |   .6903873   .0182832    37.76   0.000     .6544611    .7263135
       1995  |   .4182171   .0268399    15.58   0.000     .3654772    .4709571
       1996  |   .3613465   .0255583    14.14   0.000     .3111249    .4115682
       1997  |   .3744774   .0216075    17.33   0.000     .3320189    .4169358
       1998  |   .3432237   .0249605    13.75   0.000     .2941766    .3922707
       1999  |   .3148126   .0240955    13.07   0.000     .2674653    .3621599
       2000  |   .3131829   .0218738    14.32   0.000     .2702013    .3561646
       2001  |   .3283229   .0182687    17.97   0.000     .2924252    .3642207
       2002  |   .7946717   .0225807    35.19   0.000      .750301    .8390424
       2003  |    .869292   .0264638    32.85   0.000      .817291     .921293
       2004  |   .9973502   .0186408    53.50   0.000     .9607214    1.033979
       2005  |    .826592    .019069    43.35   0.000     .7891217    .8640623
       2006  |   .7491537   .0222203    33.71   0.000     .7054911    .7928162
       2007  |   .6942736    .021369    32.49   0.000     .6522839    .7362633
       2008  |   .6905761   .0188935    36.55   0.000     .6534507    .7277015
       2009  |   .9855398   .0199373    49.43   0.000     .9463633    1.024716
       2010  |   1.396428   .0627111    22.27   0.000     1.273202    1.519654
       2011  |   1.870918   .0244584    76.49   0.000     1.822857    1.918978
       2012  |   1.906255   .0253948    75.06   0.000     1.856354    1.956155
       2013  |    1.68955   .0282295    59.85   0.000      1.63408    1.745021
       2014  |   1.323616   .0235661    56.17   0.000     1.277309    1.369922
       2015  |   .7898258    .028041    28.17   0.000     .7347257    .8449259
             |
       _cons |   9.363678   .0116681   802.50   0.000      9.34075    9.386606
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (475 categories)
9535
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.0000fu not found)
file /tmp/St32652.0000fu saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.0000fv not found)
file /tmp/St32652.0000fv saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.0000fw not found)
file /tmp/St32652.0000fw saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.0000fx not found)
file /tmp/St32652.0000fx saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(31 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     11,825
                                                F(  25,    472)   =     669.57
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9796
                                                Adj R-squared     =     0.9787
                                                Root MSE          =     0.2604

                                (Std. Err. adjusted for 473 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -.2357662   .9306634    -0.25   0.800    -2.064522     1.59299
             |
        year |
       1992  |    .323929   .0249684    12.97   0.000     .2748661    .3729919
       1993  |   .6769469   .0110505    61.26   0.000     .6552326    .6986613
       1994  |   .5742758   .0195655    29.35   0.000     .5358295    .6127222
       1995  |   .2555286   .0285174     8.96   0.000     .1994917    .3115654
       1996  |    .213442   .0276699     7.71   0.000     .1590706    .2678134
       1997  |   .2759376   .0233665    11.81   0.000     .2300223    .3218528
       1998  |   .2092934   .0265004     7.90   0.000     .1572201    .2613668
       1999  |   .2055033   .0262446     7.83   0.000     .1539327     .257074
       2000  |   .2385064   .0238068    10.02   0.000     .1917258    .2852869
       2001  |   .2553797   .0212426    12.02   0.000      .213638    .2971215
       2002  |   .5829403   .0262077    22.24   0.000     .5314421    .6344384
       2003  |   .9992221   .0285504    35.00   0.000     .9431204    1.055324
       2004  |   1.052697   .0215108    48.94   0.000     1.010429    1.094966
       2005  |   .7193317   .0198753    36.19   0.000     .6802767    .7583868
       2006  |   .5739655   .0241858    23.73   0.000     .5264403    .6214907
       2007  |   .5138767   .0231336    22.21   0.000     .4684191    .5593343
       2008  |   .5733637   .0208484    27.50   0.000     .5323966    .6143309
       2009  |   .9710602   .0234093    41.48   0.000      .925061     1.01706
       2010  |   1.898418   .0707521    26.83   0.000      1.75939    2.037446
       2011  |   1.933571   .0286199    67.56   0.000     1.877333    1.989809
       2012  |   1.696148   .0270587    62.68   0.000     1.642978    1.749319
       2013  |   1.440985   .0291162    49.49   0.000     1.383771    1.498198
       2014  |   1.149403   .0246506    46.63   0.000     1.100965    1.197842
       2015  |   .6343155   .0286154    22.17   0.000     .5780862    .6905448
             |
       _cons |   8.266266   .0128683   642.37   0.000      8.24098    8.291552
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (473 categories)
9540
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.0000g1 not found)
file /tmp/St32652.0000g1 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.0000g2 not found)
file /tmp/St32652.0000g2 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.0000g3 not found)
file /tmp/St32652.0000g3 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.0000g4 not found)
file /tmp/St32652.0000g4 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(26 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     11,575
                                                F(  25,    462)   =    1166.79
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9784
                                                Adj R-squared     =     0.9775
                                                Root MSE          =     0.2254

                                (Std. Err. adjusted for 463 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.566574   .8968506    -9.55   0.000    -10.32899   -6.804163
             |
        year |
       1992  |   .1467342   .0234913     6.25   0.000     .1005711    .1928973
       1993  |   .6879562   .0103357    66.56   0.000     .6676454    .7082669
       1994  |   .6915106   .0187597    36.86   0.000     .6546457    .7283755
       1995  |   .4188218   .0275154    15.22   0.000      .364751    .4728927
       1996  |   .3609986   .0261866    13.79   0.000      .309539    .4124581
       1997  |   .3739486   .0221517    16.88   0.000     .3304181    .4174792
       1998  |   .3417133   .0255469    13.38   0.000     .2915109    .3919158
       1999  |    .314425   .0247052    12.73   0.000     .2658765    .3629735
       2000  |   .3142841   .0224535    14.00   0.000     .2701605    .3584077
       2001  |   .3287189   .0186948    17.58   0.000     .2919815    .3654563
       2002  |   .7945281   .0230603    34.45   0.000     .7492121    .8398441
       2003  |   .8738848   .0268572    32.54   0.000     .8211073    .9266622
       2004  |   1.000925   .0189421    52.84   0.000     .9637012    1.038148
       2005  |   .8285883   .0194395    42.62   0.000     .7903876    .8667891
       2006  |    .750797   .0226198    33.19   0.000     .7063466    .7952475
       2007  |   .6939734   .0217454    31.91   0.000     .6512412    .7367057
       2008  |   .6895599   .0192529    35.82   0.000     .6517258     .727394
       2009  |   .9856357   .0203658    48.40   0.000     .9456147    1.025657
       2010  |   1.400417   .0640216    21.87   0.000     1.274608    1.526227
       2011  |   1.874793   .0248883    75.33   0.000     1.825885    1.923702
       2012  |   1.908543   .0258492    73.83   0.000     1.857747     1.95934
       2013  |   1.692018    .028768    58.82   0.000     1.635486     1.74855
       2014  |   1.325961   .0240636    55.10   0.000     1.278674    1.373249
       2015  |   .7927705   .0285939    27.73   0.000     .7365804    .8489606
             |
       _cons |   9.363261   .0118958   787.10   0.000     9.339884    9.386638
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (463 categories)
9545
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.0000g6 not found)
file /tmp/St32652.0000g6 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.0000g7 not found)
file /tmp/St32652.0000g7 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.0000g8 not found)
file /tmp/St32652.0000g8 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.0000g9 not found)
file /tmp/St32652.0000g9 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(31 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     11,450
                                                F(  25,    457)   =     670.92
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9798
                                                Adj R-squared     =     0.9789
                                                Root MSE          =     0.2571

                                (Std. Err. adjusted for 458 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -.5937553   .7896813    -0.75   0.453    -2.145612    .9581016
             |
        year |
       1992  |   .3161708   .0214022    14.77   0.000     .2741118    .3582297
       1993  |   .6763685   .0105642    64.02   0.000     .6556081    .6971289
       1994  |   .5787749   .0176966    32.71   0.000     .5439981    .6135518
       1995  |   .2638759   .0258432    10.21   0.000     .2130896    .3146621
       1996  |   .2224084   .0250376     8.88   0.000     .1732053    .2716114
       1997  |   .2815941   .0213561    13.19   0.000     .2396258    .3235624
       1998  |   .2158139   .0244929     8.81   0.000     .1676812    .2639466
       1999  |   .2115596    .023835     8.88   0.000     .1647198    .2583994
       2000  |   .2479915   .0220616    11.24   0.000     .2046369    .2913462
       2001  |   .2636598   .0195208    13.51   0.000     .2252981    .3020215
       2002  |   .5971723   .0244974    24.38   0.000     .5490308    .6453138
       2003  |   .9946025   .0260536    38.18   0.000     .9434027    1.045802
       2004  |    1.04837   .0212832    49.26   0.000     1.006545    1.090195
       2005  |   .7220811   .0200389    36.03   0.000     .6827014    .7614609
       2006  |   .5799239   .0245517    23.62   0.000     .5316758    .6281721
       2007  |   .5219118    .023712    22.01   0.000     .4753138    .5685098
       2008  |   .5779572   .0215304    26.84   0.000     .5356463    .6202681
       2009  |   .9703476   .0226788    42.79   0.000     .9257799    1.014915
       2010  |   1.876596   .0598218    31.37   0.000     1.759036    1.994156
       2011  |   1.926599   .0270866    71.13   0.000     1.873369    1.979828
       2012  |   1.699632   .0271292    62.65   0.000     1.646318    1.752945
       2013  |   1.446306   .0286035    50.56   0.000     1.390095    1.502516
       2014  |   1.149516   .0249167    46.13   0.000      1.10055    1.198481
       2015  |   .6349086   .0287495    22.08   0.000     .5784109    .6914062
             |
       _cons |   8.306328   .0130497   636.51   0.000     8.280683    8.331973
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (458 categories)
9550
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.0000gb not found)
file /tmp/St32652.0000gb saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.0000gc not found)
file /tmp/St32652.0000gc saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.0000gd not found)
file /tmp/St32652.0000gd saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.0000ge not found)
file /tmp/St32652.0000ge saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(26 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     11,125
                                                F(  25,    444)   =    1114.37
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9788
                                                Adj R-squared     =     0.9778
                                                Root MSE          =     0.2251

                                (Std. Err. adjusted for 445 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.208028   .9042847    -9.08   0.000    -9.985238   -6.430818
             |
        year |
       1992  |   .1578769   .0235447     6.71   0.000      .111604    .2041497
       1993  |   .6888599   .0105634    65.21   0.000     .6680995    .7096203
       1994  |   .6864306   .0189207    36.28   0.000     .6492454    .7236158
       1995  |   .4098605   .0277133    14.79   0.000     .3553949    .4643262
       1996  |   .3508888    .026561    13.21   0.000      .298688    .4030896
       1997  |   .3669806   .0223901    16.39   0.000     .3229768    .4109845
       1998  |   .3332873   .0258328    12.90   0.000     .2825175     .384057
       1999  |   .3054265   .0248818    12.28   0.000     .2565258    .3543272
       2000  |   .3064713   .0223508    13.71   0.000     .2625447    .3503978
       2001  |   .3242614    .019051    17.02   0.000     .2868201    .3617027
       2002  |   .7889599   .0234414    33.66   0.000     .7428901    .8350297
       2003  |   .8866887   .0269611    32.89   0.000     .8337015    .9396759
       2004  |   1.008796   .0191509    52.68   0.000     .9711587    1.046434
       2005  |   .8266783    .019828    41.69   0.000     .7877099    .8656466
       2006  |   .7479438   .0230928    32.39   0.000      .702559    .7933286
       2007  |   .6916307   .0222723    31.05   0.000     .6478584    .7354029
       2008  |   .6900776   .0197759    34.89   0.000     .6512116    .7289436
       2009  |   .9905603   .0207358    47.77   0.000     .9498078    1.031313
       2010  |   1.427793   .0644216    22.16   0.000     1.301184    1.554403
       2011  |   1.883675   .0253685    74.25   0.000     1.833818    1.933532
       2012  |   1.903295   .0263754    72.16   0.000     1.851459    1.955131
       2013  |   1.685034   .0293018    57.51   0.000     1.627447    1.742622
       2014  |   1.323171   .0245836    53.82   0.000     1.274856    1.371485
       2015  |   .7902631    .029052    27.20   0.000     .7331667    .8473596
             |
       _cons |   9.385419   .0121937   769.70   0.000     9.361454    9.409383
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (445 categories)
9555
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.0000gg not found)
file /tmp/St32652.0000gg saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.0000gh not found)
file /tmp/St32652.0000gh saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.0000gi not found)
file /tmp/St32652.0000gi saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.0000gj not found)
file /tmp/St32652.0000gj saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(31 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     11,100
                                                F(  25,    443)   =     657.15
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9796
                                                Adj R-squared     =     0.9787
                                                Root MSE          =     0.2560

                                (Std. Err. adjusted for 444 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |   -.512274   .9334681    -0.55   0.583     -2.34685    1.322302
             |
        year |
       1992  |   .3179071   .0252756    12.58   0.000     .2682321     .367582
       1993  |   .6767089   .0106919    63.29   0.000     .6556956    .6977221
       1994  |   .5782703   .0194899    29.67   0.000     .5399661    .6165745
       1995  |   .2621803   .0288085     9.10   0.000      .205562    .3187985
       1996  |   .2195785   .0278615     7.88   0.000     .1648214    .2743357
       1997  |   .2785745   .0234053    11.90   0.000     .2325753    .3245737
       1998  |   .2139436   .0272887     7.84   0.000     .1603121     .267575
       1999  |   .2102137   .0267494     7.86   0.000     .1576421    .2627852
       2000  |   .2465865   .0243209    10.14   0.000     .1987879    .2943851
       2001  |   .2630941    .021472    12.25   0.000     .2208944    .3052938
       2002  |   .5928412   .0256285    23.13   0.000     .5424726    .6432098
       2003  |   .9919618    .029481    33.65   0.000     .9340218    1.049902
       2004  |   1.046985   .0226633    46.20   0.000     1.002444    1.091526
       2005  |   .7186894    .020033    35.88   0.000     .6793179     .758061
       2006  |   .5746873   .0240233    23.92   0.000     .5274735     .621901
       2007  |   .5154667   .0235847    21.86   0.000     .4691149    .5618185
       2008  |   .5721592    .021299    26.86   0.000     .5302995    .6140188
       2009  |   .9645046   .0240055    40.18   0.000     .9173259    1.011683
       2010  |    1.87536   .0698401    26.85   0.000     1.738101    2.012619
       2011  |   1.921024   .0296917    64.70   0.000      1.86267    1.979378
       2012  |   1.692459   .0271915    62.24   0.000     1.639019      1.7459
       2013  |   1.437758   .0293879    48.92   0.000     1.380001    1.495515
       2014  |    1.14402    .024699    46.32   0.000     1.095479    1.192562
       2015  |   .6348417   .0287456    22.08   0.000     .5783471    .6913364
             |
       _cons |   8.306231   .0131974   629.38   0.000     8.280294    8.332168
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (444 categories)
9560
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.0000gl not found)
file /tmp/St32652.0000gl saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.0000gm not found)
file /tmp/St32652.0000gm saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.0000gn not found)
file /tmp/St32652.0000gn saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.0000go not found)
file /tmp/St32652.0000go saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(26 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     10,800
                                                F(  25,    431)   =    1098.29
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9787
                                                Adj R-squared     =     0.9778
                                                Root MSE          =     0.2250

                                (Std. Err. adjusted for 432 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -7.950634   .9227724    -8.62   0.000    -9.764328    -6.13694
             |
        year |
       1992  |    .165373   .0239823     6.90   0.000     .1182362    .2125098
       1993  |   .6897155   .0107463    64.18   0.000     .6685939     .710837
       1994  |    .682856   .0192864    35.41   0.000     .6449489    .7207631
       1995  |   .4026828   .0282172    14.27   0.000     .3472223    .4581432
       1996  |   .3431174    .027069    12.68   0.000     .2899137    .3963211
       1997  |   .3623545   .0228242    15.88   0.000     .3174939     .407215
       1998  |   .3298239   .0263363    12.52   0.000     .2780603    .3815876
       1999  |   .3012942   .0253072    11.91   0.000     .2515533    .3510352
       2000  |   .3022237   .0227158    13.30   0.000     .2575761    .3468713
       2001  |    .323618   .0194342    16.65   0.000     .2854204    .3618157
       2002  |   .7883768   .0237921    33.14   0.000     .7416139    .8351397
       2003  |   .8981276   .0274346    32.74   0.000     .8442053    .9520499
       2004  |    1.01601   .0194087    52.35   0.000     .9778628    1.054158
       2005  |   .8293257   .0201205    41.22   0.000     .7897791    .8688723
       2006  |   .7510693   .0234304    32.06   0.000     .7050174    .7971213
       2007  |   .6949384   .0225842    30.77   0.000     .6505495    .7393274
       2008  |   .6944666   .0200527    34.63   0.000     .6550535    .7338798
       2009  |   .9999288   .0209637    47.70   0.000     .9587251    1.041133
       2010  |   1.452233     .06559    22.14   0.000     1.323317    1.581149
       2011  |   1.895245   .0257351    73.64   0.000     1.844663    1.945827
       2012  |   1.906354   .0268639    70.96   0.000     1.853553    1.959154
       2013  |   1.685398   .0299077    56.35   0.000     1.626615    1.744181
       2014  |   1.325974   .0251021    52.82   0.000     1.276637    1.375312
       2015  |   .7903681   .0296354    26.67   0.000     .7321201     .848616
             |
       _cons |   9.403213   .0123702   760.15   0.000       9.3789    9.427526
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (432 categories)
9565
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.0000gq not found)
file /tmp/St32652.0000gq saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.0000gr not found)
file /tmp/St32652.0000gr saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.0000gs not found)
file /tmp/St32652.0000gs saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.0000gt not found)
file /tmp/St32652.0000gt saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(31 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     10,575
                                                F(  25,    422)   =     623.39
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9798
                                                Adj R-squared     =     0.9789
                                                Root MSE          =     0.2532

                                (Std. Err. adjusted for 423 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -.5582187   .9098071    -0.61   0.540    -2.346537    1.230099
             |
        year |
       1992  |   .3140876   .0241884    12.99   0.000     .2665428    .3616324
       1993  |   .6752717   .0110589    61.06   0.000     .6535344     .697009
       1994  |   .5788649   .0196174    29.51   0.000     .5403049    .6174249
       1995  |   .2615929   .0286481     9.13   0.000     .2052822    .3179036
       1996  |   .2187599   .0277181     7.89   0.000     .1642772    .2732427
       1997  |   .2762999   .0236449    11.69   0.000     .2298235    .3227763
       1998  |   .2110448   .0272825     7.74   0.000     .1574183    .2646713
       1999  |   .2049568   .0269083     7.62   0.000     .1520659    .2578478
       2000  |   .2411146    .023956    10.06   0.000     .1940266    .2882025
       2001  |   .2581384   .0208561    12.38   0.000     .2171437    .2991331
       2002  |   .5840091    .025882    22.56   0.000     .5331354    .6348829
       2003  |   .9796587   .0289072    33.89   0.000     .9228387    1.036479
       2004  |   1.036838   .0224126    46.26   0.000     .9927841    1.080892
       2005  |   .7069564   .0199551    35.43   0.000     .6677325    .7461802
       2006  |   .5643044   .0246634    22.88   0.000     .5158259    .6127828
       2007  |   .5038706   .0236657    21.29   0.000     .4573533    .5503879
       2008  |   .5616323   .0213299    26.33   0.000     .5197063    .6035584
       2009  |   .9517924   .0235646    40.39   0.000     .9054737    .9981111
       2010  |   1.857952   .0685999    27.08   0.000     1.723112    1.992793
       2011  |    1.90325   .0294192    64.69   0.000     1.845424    1.961077
       2012  |   1.675813    .027601    60.72   0.000     1.621561    1.730066
       2013  |   1.424774   .0294474    48.38   0.000     1.366892    1.482656
       2014  |   1.135199   .0251334    45.17   0.000     1.085797    1.184601
       2015  |   .6302769   .0284233    22.17   0.000     .5744081    .6861457
             |
       _cons |   8.309469   .0132389   627.65   0.000     8.283447    8.335492
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (423 categories)
9570
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.0000gv not found)
file /tmp/St32652.0000gv saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.0000gw not found)
file /tmp/St32652.0000gw saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.0000gx not found)
file /tmp/St32652.0000gx saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.0000h0 not found)
file /tmp/St32652.0000h0 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(26 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     10,375
                                                F(  25,    414)   =    1038.11
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9785
                                                Adj R-squared     =     0.9776
                                                Root MSE          =     0.2265

                                (Std. Err. adjusted for 415 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.212738   .9533761    -8.61   0.000     -10.0868   -6.338677
             |
        year |
       1992  |     .15943   .0247944     6.43   0.000     .1106913    .2081686
       1993  |   .6892909   .0110456    62.40   0.000     .6675784    .7110034
       1994  |   .6865246   .0197902    34.69   0.000     .6476228    .7254263
       1995  |   .4112979   .0290551    14.16   0.000      .354184    .4684118
       1996  |   .3516309   .0279174    12.60   0.000     .2967534    .4065085
       1997  |     .36898   .0235755    15.65   0.000     .3226373    .4153227
       1998  |    .337505   .0272449    12.39   0.000     .2839494    .3910606
       1999  |   .3103203   .0261144    11.88   0.000     .2589869    .3616538
       2000  |   .3093828   .0234609    13.19   0.000     .2632655    .3555001
       2001  |   .3307269   .0200442    16.50   0.000     .2913258    .3701281
       2002  |   .7952356   .0246254    32.29   0.000     .7468292     .843642
       2003  |   .8927683   .0280274    31.85   0.000     .8376746     .947862
       2004  |   1.013779   .0196857    51.50   0.000     .9750827    1.052476
       2005  |   .8348116   .0207574    40.22   0.000     .7940086    .8756146
       2006  |   .7588868   .0242629    31.28   0.000      .711193    .8065807
       2007  |   .7004122   .0233884    29.95   0.000     .6544373    .7463871
       2008  |   .6978008   .0206903    33.73   0.000     .6571296     .738472
       2009  |   1.000502   .0216314    46.25   0.000     .9579809    1.043023
       2010  |   1.434398   .0676551    21.20   0.000     1.301408    1.567389
       2011  |   1.893248   .0265562    71.29   0.000     1.841046    1.945449
       2012  |   1.915145    .027699    69.14   0.000     1.860696    1.969593
       2013  |   1.694807   .0308326    54.97   0.000     1.634199    1.755415
       2014  |   1.331756   .0258783    51.46   0.000     1.280886    1.382625
       2015  |   .7951278   .0306234    25.96   0.000     .7349311    .8553246
             |
       _cons |   9.406656   .0126943   741.01   0.000     9.381703     9.43161
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (415 categories)
9575
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.0000h2 not found)
file /tmp/St32652.0000h2 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.0000h3 not found)
file /tmp/St32652.0000h3 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.0000h4 not found)
file /tmp/St32652.0000h4 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.0000h5 not found)
file /tmp/St32652.0000h5 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(26 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     10,250
                                                F(  25,    409)   =    1019.69
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9788
                                                Adj R-squared     =     0.9779
                                                Root MSE          =     0.2260

                                (Std. Err. adjusted for 410 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.186175   .9550908    -8.57   0.000    -10.06367   -6.308676
             |
        year |
       1992  |   .1609896   .0248362     6.48   0.000     .1121672    .2098121
       1993  |   .6903799   .0111301    62.03   0.000     .6685006    .7122592
       1994  |   .6859949   .0198851    34.50   0.000     .6469053    .7250846
       1995  |   .4096307   .0290703    14.09   0.000     .3524848    .4667765
       1996  |   .3499253   .0279305    12.53   0.000       .29502    .4048306
       1997  |   .3671129   .0235382    15.60   0.000      .320842    .4133837
       1998  |   .3354166   .0272169    12.32   0.000     .2819142     .388919
       1999  |   .3082031   .0260875    11.81   0.000     .2569208    .3594854
       2000  |   .3067286   .0234042    13.11   0.000     .2607211    .3527361
       2001  |    .328336   .0199439    16.46   0.000     .2891305    .3675414
       2002  |   .7929981   .0245211    32.34   0.000      .744795    .8412011
       2003  |   .8918392   .0281717    31.66   0.000     .8364598    .9472186
       2004  |   1.012091   .0197567    51.23   0.000     .9732534    1.050928
       2005  |   .8326526   .0206787    40.27   0.000     .7920027    .8733025
       2006  |   .7580731   .0241739    31.36   0.000     .7105525    .8055937
       2007  |   .6994003   .0232536    30.08   0.000     .6536887    .7451118
       2008  |   .6966555   .0206055    33.81   0.000     .6561497    .7371613
       2009  |   .9998475   .0216862    46.11   0.000     .9572171    1.042478
       2010  |   1.434028   .0679334    21.11   0.000     1.300486     1.56757
       2011  |    1.89176   .0267192    70.80   0.000     1.839236    1.944284
       2012  |   1.913579   .0276991    69.08   0.000     1.859128    1.968029
       2013  |   1.693111   .0308071    54.96   0.000     1.632551    1.753671
       2014  |   1.330564   .0258802    51.41   0.000     1.279689    1.381439
       2015  |   .7921397   .0306319    25.86   0.000     .7319241    .8523553
             |
       _cons |   9.409789   .0126721   742.56   0.000     9.384879      9.4347
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (410 categories)
9580
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.0000h7 not found)
file /tmp/St32652.0000h7 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.0000h8 not found)
file /tmp/St32652.0000h8 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.0000h9 not found)
file /tmp/St32652.0000h9 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.0000ha not found)
file /tmp/St32652.0000ha saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(31 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     10,250
                                                F(  25,    409)   =     620.91
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9797
                                                Adj R-squared     =     0.9788
                                                Root MSE          =     0.2516

                                (Std. Err. adjusted for 410 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -1.609779   1.478844    -1.09   0.277    -4.516862    1.297304
             |
        year |
       1992  |   .2864935   .0383625     7.47   0.000     .2110813    .3619057
       1993  |   .6688458     .01111    60.20   0.000      .647006    .6906857
       1994  |   .5904912   .0279409    21.13   0.000     .5355655     .645417
       1995  |   .2841837   .0437586     6.49   0.000     .1981639    .3702035
       1996  |   .2416472   .0420137     5.75   0.000     .1590574     .324237
       1997  |   .2944807   .0345511     8.52   0.000     .2265609    .3624006
       1998  |   .2326258   .0405058     5.74   0.000     .1530002    .3122514
       1999  |   .2235086   .0390335     5.73   0.000     .1467773    .3002398
       2000  |   .2510584   .0335253     7.49   0.000      .185155    .3169617
       2001  |   .2680961   .0288553     9.29   0.000     .2113728    .3248194
       2002  |   .6026512    .033222    18.14   0.000      .537344    .6679585
       2003  |   .9507669   .0413466    23.00   0.000     .8694887    1.032045
       2004  |   1.017641   .0272185    37.39   0.000     .9641354    1.071147
       2005  |   .7116024   .0231288    30.77   0.000     .6661363    .7570685
       2006  |   .5760489   .0300984    19.14   0.000      .516882    .6352157
       2007  |   .5171056   .0280932    18.41   0.000     .4618805    .5723307
       2008  |   .5694022   .0227773    25.00   0.000      .524627    .6141774
       2009  |   .9419619   .0272465    34.57   0.000     .8884012    .9955226
       2010  |   1.781308   .1098532    16.22   0.000     1.565361    1.997255
       2011  |   1.880877   .0375968    50.03   0.000      1.80697    1.954784
       2012  |   1.690871   .0321497    52.59   0.000     1.627672     1.75407
       2013  |   1.446382   .0382699    37.79   0.000     1.371151    1.521612
       2014  |   1.147342   .0297306    38.59   0.000     1.088899    1.205786
       2015  |   .6452316   .0377788    17.08   0.000     .5709667    .7194964
             |
       _cons |   8.335038    .013456   619.43   0.000     8.308586     8.36149
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (410 categories)
9585
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.0000hc not found)
file /tmp/St32652.0000hc saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.0000hd not found)
file /tmp/St32652.0000hd saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.0000he not found)
file /tmp/St32652.0000he saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.0000hf not found)
file /tmp/St32652.0000hf saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(26 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     10,050
                                                F(  25,    401)   =     986.78
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9791
                                                Adj R-squared     =     0.9782
                                                Root MSE          =     0.2252

                                (Std. Err. adjusted for 402 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.381738   .9754223    -8.59   0.000    -10.29932   -6.464157
             |
        year |
       1992  |   .1580772    .025242     6.26   0.000     .1084541    .2077003
       1993  |    .692478   .0112886    61.34   0.000     .6702858    .7146702
       1994  |    .692803   .0202857    34.15   0.000     .6529235    .7326825
       1995  |    .418057   .0295931    14.13   0.000       .35988     .476234
       1996  |   .3566675   .0284318    12.54   0.000     .3007736    .4125614
       1997  |   .3730414   .0239335    15.59   0.000     .3259905    .4200922
       1998  |   .3421722   .0275765    12.41   0.000     .2879597    .3963847
       1999  |   .3148386   .0263651    11.94   0.000     .2630075    .3666697
       2000  |   .3127145   .0237863    13.15   0.000      .265953    .3594759
       2001  |   .3329663   .0202096    16.48   0.000     .2932362    .3726963
       2002  |   .7994104   .0248777    32.13   0.000     .7505035    .8483174
       2003  |   .8938995   .0285694    31.29   0.000     .8377349    .9500641
       2004  |   1.015646   .0199675    50.86   0.000     .9763918      1.0549
       2005  |   .8398261   .0206241    40.72   0.000     .7992813    .8803709
       2006  |   .7640438   .0242077    31.56   0.000      .716454    .8116335
       2007  |    .705754   .0231169    30.53   0.000     .6603086    .7511995
       2008  |   .7025661   .0205624    34.17   0.000     .6621426    .7429897
       2009  |   1.002252   .0217872    46.00   0.000     .9594209    1.045084
       2010  |   1.425642   .0693498    20.56   0.000     1.289308    1.561977
       2011  |   1.892414   .0271456    69.71   0.000     1.839049    1.945779
       2012  |   1.919612   .0279331    68.72   0.000     1.864698    1.974525
       2013  |   1.699478   .0312124    54.45   0.000     1.638117    1.760838
       2014  |   1.337503   .0261961    51.06   0.000     1.286005    1.389002
       2015  |   .8022508    .031008    25.87   0.000     .7412923    .8632092
             |
       _cons |   9.423843   .0127284   740.38   0.000     9.398821    9.448866
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (402 categories)
9590
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.0000hh not found)
file /tmp/St32652.0000hh saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.0000hi not found)
file /tmp/St32652.0000hi saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.0000hj not found)
file /tmp/St32652.0000hj saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.0000hk not found)
file /tmp/St32652.0000hk saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(26 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =     10,000
                                                F(  25,    399)   =     979.68
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9791
                                                Adj R-squared     =     0.9782
                                                Root MSE          =     0.2255

                                (Std. Err. adjusted for 400 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.399536   .9769392    -8.60   0.000    -10.32013   -6.478944
             |
        year |
       1992  |   .1579316   .0252833     6.25   0.000     .1082265    .2076367
       1993  |   .6925437   .0113449    61.04   0.000     .6702405    .7148469
       1994  |   .6932868   .0203555    34.06   0.000     .6532693    .7333043
       1995  |   .4191544   .0296657    14.13   0.000     .3608337    .4774751
       1996  |   .3580251   .0284771    12.57   0.000     .3020412     .414009
       1997  |   .3747288   .0239752    15.63   0.000     .3275953    .4218623
       1998  |   .3441087   .0276178    12.46   0.000      .289814    .3984033
       1999  |    .316602   .0264166    11.98   0.000      .264669    .3685351
       2000  |    .314406   .0238525    13.18   0.000     .2675138    .3612983
       2001  |   .3343768   .0202722    16.49   0.000     .2945231    .3742305
       2002  |   .8014301   .0249609    32.11   0.000     .7523589    .8505013
       2003  |   .8951611   .0286088    31.29   0.000     .8389183    .9514038
       2004  |   1.017288   .0199985    50.87   0.000      .977972    1.056603
       2005  |   .8415805   .0206879    40.68   0.000     .8009096    .8822513
       2006  |   .7660041   .0242788    31.55   0.000     .7182736    .8137345
       2007  |   .7075405    .023182    30.52   0.000     .6619662    .7531147
       2008  |    .704279   .0206271    34.14   0.000     .6637276    .7448304
       2009  |   1.003734   .0218535    45.93   0.000     .9607711    1.046696
       2010  |   1.426192   .0694556    20.53   0.000     1.289647    1.562736
       2011  |    1.89411   .0272106    69.61   0.000     1.840616    1.947604
       2012  |   1.921834   .0279994    68.64   0.000     1.866789    1.976879
       2013  |   1.701091   .0313004    54.35   0.000     1.639557    1.762625
       2014  |   1.339047   .0262691    50.97   0.000     1.287404     1.39069
       2015  |   .8041943   .0310921    25.86   0.000     .7430696     .865319
             |
       _cons |   9.418001   .0127578   738.21   0.000      9.39292    9.443082
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (400 categories)
9595
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.0000hm not found)
file /tmp/St32652.0000hm saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.0000hn not found)
file /tmp/St32652.0000hn saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.0000ho not found)
file /tmp/St32652.0000ho saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.0000hp not found)
file /tmp/St32652.0000hp saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(31 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =      9,825
                                                F(  25,    392)   =     578.97
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9796
                                                Adj R-squared     =     0.9787
                                                Root MSE          =     0.2505

                                (Std. Err. adjusted for 393 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |   .1946128   .8687988     0.22   0.823    -1.513475    1.902701
             |
        year |
       1992  |     .33393   .0231567    14.42   0.000     .2884032    .3794568
       1993  |   .6702924   .0113255    59.18   0.000      .648026    .6925587
       1994  |   .5595335   .0195107    28.68   0.000     .5211749    .5978921
       1995  |   .2324498   .0283101     8.21   0.000     .1767911    .2881085
       1996  |   .1913106   .0274479     6.97   0.000     .1373472    .2452741
       1997  |   .2537469   .0238059    10.66   0.000     .2069436    .3005501
       1998  |   .1841625    .026823     6.87   0.000     .1314275    .2368975
       1999  |   .1779915   .0265984     6.69   0.000     .1256982    .2302848
       2000  |   .2144905   .0252134     8.51   0.000     .1649201    .2640608
       2001  |   .2371064    .021822    10.87   0.000     .1942036    .2800093
       2002  |   .5695576    .027023    21.08   0.000     .5164295    .6226857
       2003  |   .9954689   .0271814    36.62   0.000     .9420293    1.048909
       2004  |   1.042495   .0215683    48.33   0.000     1.000091    1.084899
       2005  |   .6937542   .0210996    32.88   0.000     .6522717    .7352368
       2006  |   .5476869   .0260342    21.04   0.000     .4965028     .598871
       2007  |   .4922916   .0249513    19.73   0.000     .4432364    .5413467
       2008  |    .557422   .0220035    25.33   0.000     .5141623    .6006816
       2009  |   .9610216   .0239061    40.20   0.000     .9140214    1.008022
       2010  |   1.914251   .0657215    29.13   0.000      1.78504    2.043462
       2011  |   1.919121   .0291161    65.91   0.000     1.861878    1.976364
       2012  |   1.666994   .0279314    59.68   0.000      1.61208    1.721909
       2013  |   1.412812    .029541    47.83   0.000     1.354733     1.47089
       2014  |   1.123823   .0260995    43.06   0.000     1.072511    1.175136
       2015  |   .6092309   .0301613    20.20   0.000     .5499328    .6685289
             |
       _cons |   8.367167   .0137332   609.27   0.000     8.340167    8.394167
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (393 categories)
9600
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.0000hr not found)
file /tmp/St32652.0000hr saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.0000hs not found)
file /tmp/St32652.0000hs saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.0000ht not found)
file /tmp/St32652.0000ht saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.0000hu not found)
file /tmp/St32652.0000hu saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(26 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =      9,650
                                                F(  25,    385)   =     975.59
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9794
                                                Adj R-squared     =     0.9785
                                                Root MSE          =     0.2258

                                (Std. Err. adjusted for 386 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.209686   1.019707    -8.05   0.000    -10.21458   -6.204795
             |
        year |
       1992  |   .1647053   .0261857     6.29   0.000     .1132204    .2161901
       1993  |    .693704    .011541    60.11   0.000     .6710127    .7163952
       1994  |   .6905744   .0210056    32.88   0.000     .6492743    .7318745
       1995  |   .4150438    .030775    13.49   0.000     .3545356    .4755519
       1996  |   .3542309    .029544    11.99   0.000     .2961431    .4123187
       1997  |   .3717021   .0248447    14.96   0.000     .3228539    .4205503
       1998  |   .3399117   .0286705    11.86   0.000     .2835414    .3962819
       1999  |   .3138281   .0273626    11.47   0.000     .2600294    .3676269
       2000  |   .3116481   .0246227    12.66   0.000     .2632362      .36006
       2001  |   .3332828   .0209341    15.92   0.000     .2921234    .3744422
       2002  |   .8032958   .0256964    31.26   0.000     .7527729    .8538186
       2003  |   .9077782    .029584    30.68   0.000     .8496117    .9659448
       2004  |   1.026506   .0205675    49.91   0.000     .9860677    1.066945
       2005  |   .8453376   .0212226    39.83   0.000     .8036109    .8870644
       2006  |   .7663711   .0247779    30.93   0.000     .7176541    .8150881
       2007  |   .7100678   .0239181    29.69   0.000     .6630414    .7570941
       2008  |   .7078782     .02126    33.30   0.000     .6660779    .7496785
       2009  |   1.012292   .0225111    44.97   0.000     .9680319    1.056552
       2010  |   1.448599   .0724359    20.00   0.000     1.306179    1.591018
       2011  |   1.906985   .0280336    68.02   0.000     1.851867    1.962103
       2012  |   1.928586   .0286372    67.35   0.000     1.872281    1.984891
       2013  |   1.706844   .0321213    53.14   0.000     1.643689    1.769999
       2014  |   1.342775   .0270349    49.67   0.000      1.28962     1.39593
       2015  |   .8041691     .03202    25.11   0.000     .7412132     .867125
             |
       _cons |   9.430625    .013025   724.04   0.000     9.405016    9.456234
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (386 categories)
9605
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.0000hw not found)
file /tmp/St32652.0000hw saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.0000hx not found)
file /tmp/St32652.0000hx saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.0000i0 not found)
file /tmp/St32652.0000i0 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.0000i1 not found)
file /tmp/St32652.0000i1 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(31 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =      9,550
                                                F(  25,    381)   =     558.78
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9798
                                                Adj R-squared     =     0.9789
                                                Root MSE          =     0.2480

                                (Std. Err. adjusted for 382 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |   1.385758   1.076348     1.29   0.199    -.7305682    3.502083
             |
        year |
       1992  |   .3633034   .0281719    12.90   0.000     .3079115    .4186954
       1993  |   .6669783    .011227    59.41   0.000     .6449037    .6890529
       1994  |   .5347891   .0216095    24.75   0.000     .4923003    .5772778
       1995  |   .1931517   .0316459     6.10   0.000     .1309292    .2553742
       1996  |   .1507661    .030507     4.94   0.000      .090783    .2107492
       1997  |   .2212577    .026061     8.49   0.000     .1700163    .2724991
       1998  |   .1469222   .0297166     4.94   0.000     .0884932    .2053512
       1999  |   .1431299   .0290282     4.93   0.000     .0860543    .2002054
       2000  |   .1842233    .026045     7.07   0.000     .1330134    .2354331
       2001  |   .2124687   .0228473     9.30   0.000     .1675461    .2573912
       2002  |   .5492151   .0281851    19.49   0.000     .4937972     .604633
       2003  |   1.021072   .0323615    31.55   0.000     .9574425    1.084702
       2004  |   1.053732   .0241177    43.69   0.000     1.006311    1.101152
       2005  |   .6799774    .020355    33.41   0.000     .6399553    .7199996
       2006  |   .5287588   .0253267    20.88   0.000     .4789613    .5785563
       2007  |   .4764783   .0246316    19.34   0.000     .4280475    .5249092
       2008  |   .5495428   .0215207    25.54   0.000     .5072286    .5918571
       2009  |   .9733826   .0248587    39.16   0.000     .9245052     1.02226
       2010  |   1.996445   .0808489    24.69   0.000     1.837479    2.155411
       2011  |   1.939347   .0321637    60.30   0.000     1.876107    2.002588
       2012  |   1.647034    .028567    57.66   0.000     1.590866    1.703203
       2013  |   1.385346   .0309926    44.70   0.000     1.324408    1.446284
       2014  |   1.102814   .0258595    42.65   0.000     1.051969    1.153659
       2015  |    .578641   .0309226    18.71   0.000     .5178406    .6394413
             |
       _cons |   8.396074   .0130165   645.03   0.000     8.370481    8.421667
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (382 categories)
9610
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.0000i3 not found)
file /tmp/St32652.0000i3 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.0000i4 not found)
file /tmp/St32652.0000i4 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.0000i5 not found)
file /tmp/St32652.0000i5 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.0000i6 not found)
file /tmp/St32652.0000i6 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(26 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =      9,350
                                                F(  25,    373)   =     945.54
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9795
                                                Adj R-squared     =     0.9786
                                                Root MSE          =     0.2272

                                (Std. Err. adjusted for 374 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.253681   1.038023    -7.95   0.000    -10.29479    -6.21257
             |
        year |
       1992  |   .1646224   .0266101     6.19   0.000     .1122979     .216947
       1993  |   .6936343   .0116762    59.41   0.000     .6706749    .7165937
       1994  |   .6915241    .021389    32.33   0.000      .649466    .7335821
       1995  |   .4180169   .0313251    13.34   0.000      .356421    .4796128
       1996  |   .3559421   .0300563    11.84   0.000     .2968412     .415043
       1997  |    .373001   .0253293    14.73   0.000     .3231949    .4228071
       1998  |   .3411457     .02925    11.66   0.000     .2836301    .3986614
       1999  |   .3158272   .0278622    11.34   0.000     .2610405    .3706138
       2000  |   .3142508   .0250907    12.52   0.000     .2649138    .3635877
       2001  |   .3343965   .0213334    15.67   0.000     .2924476    .3763453
       2002  |   .8057725   .0263418    30.59   0.000     .7539755    .8575695
       2003  |   .9098044   .0301697    30.16   0.000     .8504804    .9691284
       2004  |   1.028941   .0210101    48.97   0.000     .9876283    1.070255
       2005  |   .8486391   .0216981    39.11   0.000     .8059731     .891305
       2006  |   .7668807   .0252721    30.34   0.000     .7171871    .8165743
       2007  |   .7112457   .0244171    29.13   0.000     .6632334    .7592581
       2008  |   .7104273   .0217035    32.73   0.000     .6677507    .7531038
       2009  |   1.014405    .022942    44.22   0.000     .9692928    1.059516
       2010  |   1.449359   .0737335    19.66   0.000     1.304374    1.594345
       2011  |   1.908752   .0285952    66.75   0.000     1.852524     1.96498
       2012  |   1.931176    .029311    65.89   0.000      1.87354    1.988811
       2013  |   1.710511   .0328189    52.12   0.000     1.645977    1.775044
       2014  |   1.345281   .0276074    48.73   0.000     1.290996    1.399567
       2015  |   .8064496   .0326922    24.67   0.000     .7421655    .8707337
             |
       _cons |   9.441458   .0133035   709.70   0.000     9.415299    9.467617
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (374 categories)
9615
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.0000i8 not found)
file /tmp/St32652.0000i8 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.0000i9 not found)
file /tmp/St32652.0000i9 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.0000ia not found)
file /tmp/St32652.0000ia saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.0000ib not found)
file /tmp/St32652.0000ib saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(31 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =      9,225
                                                F(  25,    368)   =     566.93
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9794
                                                Adj R-squared     =     0.9785
                                                Root MSE          =     0.2477

                                (Std. Err. adjusted for 369 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -.3589747     .91762    -0.39   0.696    -2.163411    1.445462
             |
        year |
       1992  |   .3231525   .0245668    13.15   0.000     .2748436    .3714614
       1993  |   .6687146   .0113476    58.93   0.000     .6464004    .6910287
       1994  |   .5642178    .019829    28.45   0.000     .5252254    .6032102
       1995  |   .2380896   .0292277     8.15   0.000     .1806153    .2955639
       1996  |   .1929911   .0280483     6.88   0.000      .137836    .2481462
       1997  |   .2549078   .0239086    10.66   0.000     .2078932    .3019225
       1998  |   .1851826   .0275778     6.71   0.000     .1309528    .2394124
       1999  |   .1797507   .0275358     6.53   0.000     .1256035    .2338979
       2000  |   .2133971   .0245971     8.68   0.000     .1650285    .2617657
       2001  |   .2362801   .0212236    11.13   0.000     .1945454    .2780149
       2002  |   .5855039   .0264245    22.16   0.000     .5335419    .6374659
       2003  |   .9832544    .028611    34.37   0.000     .9269928    1.039516
       2004  |   1.039331   .0215536    48.22   0.000     .9969473    1.081715
       2005  |    .694946   .0208859    33.27   0.000     .6538752    .7360168
       2006  |   .5532255   .0258364    21.41   0.000       .50242     .604031
       2007  |   .5020402   .0240984    20.83   0.000     .4546523     .549428
       2008  |   .5594458    .021565    25.94   0.000     .5170397    .6018519
       2009  |   .9575249   .0245882    38.94   0.000     .9091739    1.005876
       2010  |   1.875077   .0702471    26.69   0.000     1.736941    2.013213
       2011  |    1.90941   .0306456    62.31   0.000     1.849148    1.969673
       2012  |   1.674705   .0276752    60.51   0.000     1.620284    1.729127
       2013  |    1.42129   .0291715    48.72   0.000     1.363927    1.478654
       2014  |   1.125191   .0251916    44.67   0.000     1.075654    1.174729
       2015  |   .6087228   .0299896    20.30   0.000     .5497503    .6676953
             |
       _cons |   8.409043    .013213   636.42   0.000      8.38306    8.435025
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (369 categories)
9620
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.0000id not found)
file /tmp/St32652.0000id saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.0000ie not found)
file /tmp/St32652.0000ie saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.0000if not found)
file /tmp/St32652.0000if saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.0000ig not found)
file /tmp/St32652.0000ig saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(26 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =      9,000
                                                F(  25,    359)   =     907.68
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9799
                                                Adj R-squared     =     0.9790
                                                Root MSE          =     0.2264

                                (Std. Err. adjusted for 360 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -7.838425   1.032111    -7.59   0.000    -9.868169   -5.808681
             |
        year |
       1992  |   .1760012   .0264777     6.65   0.000     .1239302    .2280721
       1993  |   .6977074   .0119163    58.55   0.000     .6742728     .721142
       1994  |   .6884067   .0215447    31.95   0.000      .646037    .7307765
       1995  |   .4093056   .0313478    13.06   0.000     .3476572    .4709541
       1996  |   .3447214    .030077    11.46   0.000      .285572    .4038707
       1997  |   .3631156   .0254278    14.28   0.000     .3131094    .4131218
       1998  |   .3297796   .0293523    11.24   0.000     .2720555    .3875036
       1999  |   .3050464   .0279697    10.91   0.000     .2500414    .3600514
       2000  |   .3058741    .025253    12.11   0.000     .2562116    .3555365
       2001  |   .3268438   .0215191    15.19   0.000     .2845245     .369163
       2002  |   .7986163   .0264898    30.15   0.000     .7465215    .8507111
       2003  |   .9230439   .0299285    30.84   0.000     .8641866    .9819012
       2004  |   1.034641    .020958    49.37   0.000     .9934256    1.075857
       2005  |     .84446   .0217894    38.76   0.000     .8016091    .8873109
       2006  |   .7608535   .0253822    29.98   0.000      .710937    .8107701
       2007  |   .7046024   .0244556    28.81   0.000     .6565081    .7526967
       2008  |   .7058134   .0217947    32.38   0.000      .662952    .7486748
       2009  |   1.016242   .0230466    44.10   0.000     .9709185    1.061565
       2010  |   1.477041   .0732504    20.16   0.000     1.332987    1.621095
       2011  |   1.915286   .0285808    67.01   0.000     1.859079    1.971493
       2012  |   1.922505   .0294334    65.32   0.000     1.864622    1.980389
       2013  |   1.698915   .0328401    51.73   0.000     1.634332    1.763498
       2014  |   1.337891   .0276707    48.35   0.000     1.283474    1.392308
       2015  |   .7987677   .0327309    24.40   0.000     .7343992    .8631361
             |
       _cons |   9.462758   .0133713   707.69   0.000     9.436462    9.489054
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (360 categories)
9625
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.0000ii not found)
file /tmp/St32652.0000ii saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.0000ij not found)
file /tmp/St32652.0000ij saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.0000ik not found)
file /tmp/St32652.0000ik saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.0000il not found)
file /tmp/St32652.0000il saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(31 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =      8,900
                                                F(  25,    355)   =     562.14
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9793
                                                Adj R-squared     =     0.9783
                                                Root MSE          =     0.2466

                                (Std. Err. adjusted for 356 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -1.691163   .9229164    -1.83   0.068    -3.506234    .1239078
             |
        year |
       1992  |   .2911503   .0252122    11.55   0.000     .2415663    .3407343
       1993  |   .6673254   .0116167    57.45   0.000     .6444793    .6901716
       1994  |    .583158   .0204893    28.46   0.000     .5428623    .6234536
       1995  |   .2693613   .0305363     8.82   0.000     .2093065     .329416
       1996  |   .2233382   .0291593     7.66   0.000     .1659914     .280685
       1997  |   .2785616   .0256983    10.84   0.000     .2280216    .3291016
       1998  |   .2136129   .0292636     7.30   0.000      .156061    .2711648
       1999  |   .2049583   .0286597     7.15   0.000     .1485942    .2613223
       2000  |   .2344452   .0261977     8.95   0.000     .1829229    .2859675
       2001  |    .253681   .0233158    10.88   0.000     .2078265    .2995354
       2002  |   .6119843   .0266506    22.96   0.000     .5595713    .6643973
       2003  |   .9498023   .0302244    31.43   0.000     .8903609    1.009244
       2004  |   1.021662   .0224936    45.42   0.000     .9774243    1.065899
       2005  |   .7019007   .0207866    33.77   0.000     .6610205     .742781
       2006  |   .5631461    .025442    22.13   0.000     .5131102    .6131821
       2007  |   .5186133   .0247858    20.92   0.000     .4698677    .5673588
       2008  |   .5679863   .0221048    25.70   0.000     .5245135    .6114592
       2009  |   .9464789   .0251699    37.60   0.000     .8969782    .9959797
       2010  |   1.785027   .0712212    25.06   0.000     1.644958    1.925096
       2011  |   1.885227   .0313706    60.10   0.000     1.823531    1.946923
       2012  |   1.694032   .0278403    60.85   0.000     1.639279    1.748785
       2013  |   1.446566     .02965    48.79   0.000     1.388254    1.504877
       2014  |   1.142189   .0253831    45.00   0.000     1.092269     1.19211
       2015  |   .6308634    .029977    21.04   0.000     .5719086    .6898181
             |
       _cons |   8.437213   .0134031   629.50   0.000     8.410854    8.463572
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (356 categories)
9630
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.0000in not found)
file /tmp/St32652.0000in saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.0000io not found)
file /tmp/St32652.0000io saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.0000ip not found)
file /tmp/St32652.0000ip saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.0000iq not found)
file /tmp/St32652.0000iq saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(26 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =      8,700
                                                F(  25,    347)   =     864.89
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9794
                                                Adj R-squared     =     0.9785
                                                Root MSE          =     0.2280

                                (Std. Err. adjusted for 348 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -8.025625   1.104081    -7.27   0.000    -10.19716   -5.854092
             |
        year |
       1992  |   .1701241   .0279697     6.08   0.000     .1151127    .2251356
       1993  |   .6980413   .0120295    58.03   0.000     .6743813    .7217012
       1994  |   .6928109   .0226812    30.55   0.000      .648201    .7374207
       1995  |   .4160098   .0333387    12.48   0.000     .3504383    .4815812
       1996  |   .3523035   .0320026    11.01   0.000       .28936     .415247
       1997  |   .3697223     .02685    13.77   0.000     .3169131    .4225316
       1998  |   .3370575   .0310683    10.85   0.000     .2759516    .3981633
       1999  |   .3134039   .0295634    10.60   0.000     .2552578      .37155
       2000  |   .3153609   .0265633    11.87   0.000     .2631155    .3676062
       2001  |   .3333587   .0225214    14.80   0.000      .289063    .3776544
       2002  |   .8073436   .0279153    28.92   0.000     .7524391    .8622481
       2003  |   .9234077   .0316278    29.20   0.000     .8612014    .9856141
       2004  |    1.03814   .0217892    47.64   0.000     .9952841    1.080995
       2005  |   .8519695   .0225508    37.78   0.000      .807616    .8963231
       2006  |   .7695124    .026346    29.21   0.000     .7176943    .8213304
       2007  |   .7110319    .025478    27.91   0.000     .6609212    .7611425
       2008  |   .7094768    .022553    31.46   0.000     .6651191    .7538345
       2009  |   1.017247     .02393    42.51   0.000     .9701805    1.064313
       2010  |   1.467511   .0783784    18.72   0.000     1.313355    1.621668
       2011  |   1.917594   .0299143    64.10   0.000     1.858758     1.97643
       2012  |   1.931581   .0304644    63.40   0.000     1.871663    1.991499
       2013  |   1.708117   .0343535    49.72   0.000     1.640549    1.775684
       2014  |    1.34505   .0287761    46.74   0.000     1.288453    1.401648
       2015  |   .8070016   .0340705    23.69   0.000     .7399908    .8740123
             |
       _cons |   9.465339   .0136812   691.85   0.000      9.43843    9.492247
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (348 categories)
9635
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.0000is not found)
file /tmp/St32652.0000is saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.0000it not found)
file /tmp/St32652.0000it saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.0000iu not found)
file /tmp/St32652.0000iu saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.0000iv not found)
file /tmp/St32652.0000iv saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(31 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =      8,625
                                                F(  25,    344)   =     580.18
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9795
                                                Adj R-squared     =     0.9785
                                                Root MSE          =     0.2460

                                (Std. Err. adjusted for 345 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |   .5780701   .9462839     0.61   0.542    -1.283161    2.439301
             |
        year |
       1992  |   .3498427   .0248796    14.06   0.000     .3009073     .398778
       1993  |   .6699208   .0118267    56.64   0.000     .6466591    .6931826
       1994  |   .5464534   .0210039    26.02   0.000     .5051411    .5877657
       1995  |   .2077596   .0299855     6.93   0.000     .1487815    .2667376
       1996  |   .1646006   .0284558     5.78   0.000     .1086312    .2205699
       1997  |   .2335317   .0241409     9.67   0.000     .1860493    .2810141
       1998  |   .1592372   .0276725     5.75   0.000     .1048086    .2136657
       1999  |   .1529747   .0272851     5.61   0.000     .0993081    .2066413
       2000  |   .1920418   .0256943     7.47   0.000     .1415041    .2425795
       2001  |   .2179019   .0211861    10.29   0.000     .1762313    .2595724
       2002  |   .5687377   .0267885    21.23   0.000     .5160478    .6214276
       2003  |   1.004278   .0306821    32.73   0.000     .9439301    1.064626
       2004  |    1.05106   .0235908    44.55   0.000     1.004659     1.09746
       2005  |   .6828829   .0205922    33.16   0.000     .6423804    .7233854
       2006  |   .5325498   .0255149    20.87   0.000     .4823649    .5827347
       2007  |   .4904703   .0243676    20.13   0.000      .442542    .5383986
       2008  |   .5550381   .0225098    24.66   0.000      .510764    .5993123
       2009  |   .9701734    .025493    38.06   0.000     .9200316    1.020315
       2010  |    1.95172   .0725437    26.90   0.000     1.809035    2.094405
       2011  |   1.931563   .0314565    61.40   0.000     1.869692    1.993435
       2012  |   1.663141   .0280219    59.35   0.000     1.608025    1.718256
       2013  |   1.403997    .029343    47.85   0.000     1.346282    1.461711
       2014  |   1.113626   .0256961    43.34   0.000     1.063085    1.164167
       2015  |   .5873067   .0309653    18.97   0.000     .5264016    .6482118
             |
       _cons |   8.442509   .0136489   618.55   0.000     8.415663    8.469355
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (345 categories)
9640
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.0000ix not found)
file /tmp/St32652.0000ix saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.0000j0 not found)
file /tmp/St32652.0000j0 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.0000j1 not found)
file /tmp/St32652.0000j1 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.0000j2 not found)
file /tmp/St32652.0000j2 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(26 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =      8,400
                                                F(  25,    335)   =     824.97
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9794
                                                Adj R-squared     =     0.9784
                                                Root MSE          =     0.2286

                                (Std. Err. adjusted for 336 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -7.937927   1.159587    -6.85   0.000    -10.21892   -5.656938
             |
        year |
       1992  |   .1725888   .0292143     5.91   0.000     .1151222    .2300554
       1993  |    .699385   .0123347    56.70   0.000     .6751218    .7236483
       1994  |   .6921517    .023774    29.11   0.000     .6453866    .7389168
       1995  |   .4142492   .0349557    11.85   0.000      .345489    .4830095
       1996  |   .3502875   .0334888    10.46   0.000     .2844127    .4161624
       1997  |   .3669761   .0280308    13.09   0.000     .3118374    .4221147
       1998  |   .3339612    .032496    10.28   0.000     .2700393    .3978832
       1999  |   .3100934   .0309018    10.03   0.000     .2493074    .3708794
       2000  |   .3131308   .0277756    11.27   0.000     .2584943    .3677673
       2001  |   .3332003   .0234791    14.19   0.000     .2870152    .3793854
       2002  |   .8060017    .028982    27.81   0.000     .7489921    .8630113
       2003  |   .9282506   .0328251    28.28   0.000     .8636813      .99282
       2004  |   1.041727   .0224253    46.45   0.000     .9976144    1.085839
       2005  |   .8517045   .0232367    36.65   0.000     .8059963    .8974127
       2006  |   .7642316    .027048    28.25   0.000     .7110263    .8174369
       2007  |   .7095573   .0262528    27.03   0.000     .6579161    .7611984
       2008  |   .7088416   .0231321    30.64   0.000      .663339    .7543441
       2009  |   1.019234   .0247084    41.25   0.000     .9706304    1.067837
       2010  |   1.476056    .082264    17.94   0.000     1.314237    1.637875
       2011  |   1.920646   .0310659    61.82   0.000     1.859538    1.981755
       2012  |   1.931762   .0314637    61.40   0.000     1.869871    1.993654
       2013  |   1.708473   .0355568    48.05   0.000      1.63853    1.778415
       2014  |   1.347414   .0297192    45.34   0.000     1.288955    1.405874
       2015  |   .8102245   .0353502    22.92   0.000     .7406882    .8797608
             |
       _cons |   9.460113   .0140726   672.24   0.000     9.432432    9.487795
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (336 categories)
9645
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.0000j4 not found)
file /tmp/St32652.0000j4 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.0000j5 not found)
file /tmp/St32652.0000j5 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.0000j6 not found)
file /tmp/St32652.0000j6 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.0000j7 not found)
file /tmp/St32652.0000j7 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(26 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =      8,325
                                                F(  25,    332)   =     825.30
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9795
                                                Adj R-squared     =     0.9786
                                                Root MSE          =     0.2288

                                (Std. Err. adjusted for 333 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |   -7.73746   1.156158    -6.69   0.000    -10.01178   -5.463141
             |
        year |
       1992  |   .1777772   .0291499     6.10   0.000     .1204355    .2351189
       1993  |   .6999918   .0124192    56.36   0.000     .6755615    .7244222
       1994  |   .6890347   .0238225    28.92   0.000     .6421727    .7358967
       1995  |   .4089884   .0349499    11.70   0.000     .3402372    .4777397
       1996  |   .3452477   .0335658    10.29   0.000     .2792192    .4112762
       1997  |   .3630795   .0281253    12.91   0.000     .3077532    .4184058
       1998  |   .3287732   .0325612    10.10   0.000      .264721    .3928254
       1999  |   .3047808   .0309685     9.84   0.000     .2438615    .3657001
       2000  |   .3087777   .0279089    11.06   0.000     .2538771    .3636783
       2001  |   .3296835   .0235523    14.00   0.000      .283353    .3760141
       2002  |   .8017387   .0289697    27.68   0.000     .7447515    .8587259
       2003  |   .9337367   .0327951    28.47   0.000     .8692243    .9982492
       2004  |   1.045296   .0223885    46.69   0.000     1.001254    1.089337
       2005  |   .8516784   .0233715    36.44   0.000     .8057036    .8976532
       2006  |   .7622356   .0271625    28.06   0.000     .7088033    .8156679
       2007  |   .7070364   .0263443    26.84   0.000     .6552137    .7588592
       2008  |   .7073739   .0232515    30.42   0.000     .6616351    .7531127
       2009  |   1.022862    .024717    41.38   0.000     .9742403    1.071484
       2010  |   1.492608   .0818587    18.23   0.000     1.331581    1.653635
       2011  |   1.927504   .0309098    62.36   0.000       1.8667    1.988308
       2012  |   1.932162   .0316205    61.10   0.000      1.86996    1.994363
       2013  |   1.706946   .0356957    47.82   0.000     1.636728    1.777165
       2014  |     1.3456   .0298705    45.05   0.000     1.286841     1.40436
       2015  |   .8054377   .0354295    22.73   0.000     .7357431    .8751323
             |
       _cons |   9.456636   .0141323   669.15   0.000     9.428836    9.484436
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (333 categories)
9650
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.0000j9 not found)
file /tmp/St32652.0000j9 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.0000ja not found)
file /tmp/St32652.0000ja saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.0000jb not found)
file /tmp/St32652.0000jb saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.0000jc not found)
file /tmp/St32652.0000jc saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(31 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =      8,325
                                                F(  25,    332)   =     566.49
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9800
                                                Adj R-squared     =     0.9791
                                                Root MSE          =     0.2401

                                (Std. Err. adjusted for 333 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |   .0042864     .96372     0.00   0.996    -1.891481    1.900054
             |
        year |
       1992  |   .3366094   .0255341    13.18   0.000     .2863803    .3868384
       1993  |   .6672455    .012139    54.97   0.000     .6433664    .6911246
       1994  |   .5509378   .0213907    25.76   0.000     .5088594    .5930163
       1995  |   .2186559   .0305741     7.15   0.000     .1585126    .2787992
       1996  |   .1745841   .0288283     6.06   0.000      .117875    .2312932
       1997  |   .2393772   .0247249     9.68   0.000     .1907399    .2880145
       1998  |   .1675398   .0281818     5.94   0.000     .1121023    .2229772
       1999  |   .1611764   .0278597     5.79   0.000     .1063727    .2159802
       2000  |   .1960198   .0262653     7.46   0.000     .1443525    .2476871
       2001  |   .2200394   .0227557     9.67   0.000     .1752758    .2648031
       2002  |   .5802493   .0271874    21.34   0.000      .526768    .6337306
       2003  |   .9949943   .0304942    32.63   0.000     .9350082     1.05498
       2004  |   1.046455   .0232284    45.05   0.000     1.000762    1.092149
       2005  |   .6866668   .0208551    32.93   0.000      .645642    .7276917
       2006  |   .5439902   .0241122    22.56   0.000     .4965582    .5914222
       2007  |    .497799    .023581    21.11   0.000      .451412    .5441859
       2008  |    .557362   .0221031    25.22   0.000     .5138821    .6008418
       2009  |   .9702429   .0249417    38.90   0.000     .9211791    1.019307
       2010  |   1.915666   .0728095    26.31   0.000      1.77244    2.058892
       2011  |   1.925362   .0313445    61.43   0.000     1.863704    1.987021
       2012  |   1.675724   .0285383    58.72   0.000     1.619585    1.731862
       2013  |    1.41431   .0303678    46.57   0.000     1.354572    1.474047
       2014  |   1.120072   .0261111    42.90   0.000     1.068708    1.171436
       2015  |   .5944779   .0313045    18.99   0.000     .5328977    .6560581
             |
       _cons |   8.494958   .0136313   623.19   0.000     8.468143    8.521772
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (333 categories)
9655
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.0000je not found)
file /tmp/St32652.0000je saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.0000jf not found)
file /tmp/St32652.0000jf saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.0000jg not found)
file /tmp/St32652.0000jg saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.0000jh not found)
file /tmp/St32652.0000jh saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(26 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =      8,075
                                                F(  25,    322)   =     794.63
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9796
                                                Adj R-squared     =     0.9787
                                                Root MSE          =     0.2299

                                (Std. Err. adjusted for 323 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -7.753503   1.175255    -6.60   0.000    -10.06565   -5.441354
             |
        year |
       1992  |   .1779694   .0295981     6.01   0.000     .1197393    .2361995
       1993  |   .6987196   .0125236    55.79   0.000     .6740812     .723358
       1994  |   .6885308   .0241729    28.48   0.000      .640974    .7360876
       1995  |   .4098439   .0353966    11.58   0.000     .3402061    .4794816
       1996  |   .3466147   .0339914    10.20   0.000     .2797414    .4134879
       1997  |   .3662298   .0285341    12.83   0.000     .3100931    .4223666
       1998  |    .331711   .0331028    10.02   0.000     .2665859    .3968361
       1999  |   .3088013    .031457     9.82   0.000      .246914    .3706885
       2000  |   .3125035   .0283585    11.02   0.000     .2567121     .368295
       2001  |   .3345033    .023979    13.95   0.000     .2873281    .3816785
       2002  |   .8063977   .0295175    27.32   0.000     .7483262    .8644692
       2003  |   .9381333   .0335002    28.00   0.000     .8722264     1.00404
       2004  |   1.050585   .0227732    46.13   0.000     1.005782    1.095388
       2005  |   .8588273   .0236843    36.26   0.000     .8122317    .9054228
       2006  |   .7700961   .0276245    27.88   0.000     .7157488    .8244434
       2007  |   .7129921   .0268584    26.55   0.000      .660152    .7658322
       2008  |   .7123976   .0237387    30.01   0.000     .6656951       .7591
       2009  |   1.024548   .0253485    40.42   0.000     .9746785    1.074418
       2010  |   1.493409   .0833499    17.92   0.000      1.32943    1.657389
       2011  |   1.930046   .0316364    61.01   0.000     1.867806    1.992286
       2012  |   1.935889   .0322928    59.95   0.000     1.872358    1.999421
       2013  |   1.711048   .0363317    47.10   0.000     1.639571    1.782526
       2014  |   1.350314   .0304082    44.41   0.000      1.29049    1.410138
       2015  |   .8074426   .0360284    22.41   0.000     .7365618    .8783234
             |
       _cons |   9.474483   .0143909   658.37   0.000     9.446171    9.502795
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (323 categories)
9660
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.0000jj not found)
file /tmp/St32652.0000jj saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.0000jk not found)
file /tmp/St32652.0000jk saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.0000jl not found)
file /tmp/St32652.0000jl saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.0000jm not found)
file /tmp/St32652.0000jm saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(25 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =      7,925
                                                F(  25,    316)   =     782.33
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9795
                                                Adj R-squared     =     0.9786
                                                Root MSE          =     0.2297

                                (Std. Err. adjusted for 317 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -7.649124   1.175574    -6.51   0.000    -9.962066   -5.336181
             |
        year |
       1992  |    .178242   .0295652     6.03   0.000     .1200725    .2364115
       1993  |   .6954175   .0125195    55.55   0.000     .6707854    .7200496
       1994  |   .6850358   .0242441    28.26   0.000     .6373356     .732736
       1995  |     .40563   .0354566    11.44   0.000      .335869    .4753909
       1996  |   .3425444   .0340708    10.05   0.000     .2755101    .4095787
       1997  |   .3626037   .0285224    12.71   0.000     .3064859    .4187215
       1998  |   .3288642   .0331232     9.93   0.000     .2636943     .394034
       1999  |   .3050125   .0314562     9.70   0.000     .2431224    .3669026
       2000  |   .3079962   .0283115    10.88   0.000     .2522932    .3636991
       2001  |   .3306608   .0238663    13.85   0.000     .2837039    .3776176
       2002  |   .8018998   .0294513    27.23   0.000     .7439542    .8598453
       2003  |   .9363564   .0334995    27.95   0.000     .8704461    1.002267
       2004  |   1.046943   .0226461    46.23   0.000     1.002387    1.091499
       2005  |   .8538707   .0237254    35.99   0.000     .8071911    .9005504
       2006  |   .7662087   .0277521    27.61   0.000     .7116065     .820811
       2007  |   .7086068   .0270275    26.22   0.000     .6554302    .7617834
       2008  |   .7068124   .0239481    29.51   0.000     .6596944    .7539304
       2009  |   1.019049   .0254931    39.97   0.000     .9688912    1.069207
       2010  |   1.493731   .0832554    17.94   0.000     1.329926    1.657536
       2011  |   1.924938   .0316658    60.79   0.000     1.862635     1.98724
       2012  |   1.928571   .0324845    59.37   0.000     1.864658    1.992484
       2013  |   1.703841   .0365271    46.65   0.000     1.631974    1.775708
       2014  |   1.346227   .0306091    43.98   0.000     1.286003     1.40645
       2015  |   .8047338   .0363074    22.16   0.000      .733299    .8761687
             |
       _cons |   9.474613     .01439   658.42   0.000       9.4463    9.502925
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (317 categories)
9665
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.0000jo not found)
file /tmp/St32652.0000jo saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.0000jp not found)
file /tmp/St32652.0000jp saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.0000jq not found)
file /tmp/St32652.0000jq saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.0000jr not found)
file /tmp/St32652.0000jr saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(31 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =      7,875
                                                F(  25,    314)   =     566.21
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9798
                                                Adj R-squared     =     0.9789
                                                Root MSE          =     0.2386

                                (Std. Err. adjusted for 315 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |    .116001   .9744962     0.12   0.905    -1.801367    2.033369
             |
        year |
       1992  |   .3389169   .0255649    13.26   0.000     .2886168    .3892171
       1993  |   .6623469   .0124944    53.01   0.000     .6377636    .6869303
       1994  |     .54039   .0219207    24.65   0.000       .49726      .58352
       1995  |    .207082     .03167     6.54   0.000     .1447698    .2693942
       1996  |   .1650471   .0305218     5.41   0.000      .104994    .2251003
       1997  |   .2316789   .0266232     8.70   0.000     .1792965    .2840613
       1998  |   .1601893   .0302877     5.29   0.000     .1005968    .2197817
       1999  |   .1533195   .0300527     5.10   0.000     .0941893    .2124496
       2000  |   .1831133   .0280738     6.52   0.000     .1278767    .2383498
       2001  |   .2137024   .0240372     8.89   0.000     .1664081    .2609966
       2002  |   .5856989    .028881    20.28   0.000     .5288742    .6425237
       2003  |   1.002919   .0292192    34.32   0.000     .9454289    1.060409
       2004  |   1.047941    .022747    46.07   0.000     1.003185    1.092696
       2005  |   .6859884   .0223409    30.71   0.000     .6420316    .7299452
       2006  |   .5450864   .0258533    21.08   0.000     .4942187    .5959541
       2007  |   .4995392    .025159    19.86   0.000     .4500376    .5490408
       2008  |   .5582832   .0226714    24.63   0.000     .5136762    .6028901
       2009  |   .9742834   .0249743    39.01   0.000     .9251453    1.023421
       2010  |    1.92609   .0720092    26.75   0.000     1.784408    2.067771
       2011  |   1.929421   .0307057    62.84   0.000     1.869006    1.989836
       2012  |   1.674209   .0301854    55.46   0.000     1.614818      1.7336
       2013  |   1.409572   .0322458    43.71   0.000     1.346127    1.473017
       2014  |   1.117217   .0278131    40.17   0.000     1.062494    1.171941
       2015  |   .5943732   .0328944    18.07   0.000     .5296519    .6590945
             |
       _cons |   8.524976   .0139998   608.94   0.000     8.497431    8.552521
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (315 categories)
9670
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.0000jt not found)
file /tmp/St32652.0000jt saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.0000ju not found)
file /tmp/St32652.0000ju saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.0000jv not found)
file /tmp/St32652.0000jv saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.0000jw not found)
file /tmp/St32652.0000jw saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(25 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =      7,725
                                                F(  25,    308)   =     840.72
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9797
                                                Adj R-squared     =     0.9788
                                                Root MSE          =     0.2294

                                (Std. Err. adjusted for 309 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -7.678294   1.223543    -6.28   0.000    -10.08585   -5.270734
             |
        year |
       1992  |   .1790299   .0304822     5.87   0.000     .1190502    .2390096
       1993  |   .6968324    .012631    55.17   0.000     .6719785    .7216863
       1994  |   .6870009   .0251342    27.33   0.000     .6375444    .7364574
       1995  |    .407166   .0367762    11.07   0.000     .3348017    .4795303
       1996  |   .3426446   .0352563     9.72   0.000     .2732709    .4120183
       1997  |   .3642766   .0294583    12.37   0.000     .3063115    .4222416
       1998  |   .3288777    .034278     9.59   0.000      .261429    .3963264
       1999  |   .3057799   .0325036     9.41   0.000     .2418227     .369737
       2000  |   .3089848   .0292576    10.56   0.000     .2514147    .3665548
       2001  |   .3297629    .024601    13.40   0.000     .2813557    .3781701
       2002  |   .8031567   .0305035    26.33   0.000     .7431352    .8631782
       2003  |   .9373354   .0344611    27.20   0.000     .8695265    1.005144
       2004  |   1.047853   .0231763    45.21   0.000     1.002249    1.093457
       2005  |   .8527299   .0242906    35.11   0.000     .8049333    .9005264
       2006  |   .7626248   .0283133    26.94   0.000     .7069129    .8183367
       2007  |   .7068108   .0276509    25.56   0.000     .6524022    .7612195
       2008  |   .7059038   .0244028    28.93   0.000     .6578866     .753921
       2009  |    1.01799   .0259491    39.23   0.000       .96693     1.06905
       2010  |   1.495341   .0863085    17.33   0.000     1.325513     1.66517
       2011  |   1.927945   .0324072    59.49   0.000     1.864178    1.991713
       2012  |   1.932359   .0332002    58.20   0.000     1.867031    1.997687
       2013  |   1.708801   .0374983    45.57   0.000     1.635016    1.782587
       2014  |   1.353103   .0313363    43.18   0.000     1.291442    1.414763
       2015  |   .8101213   .0373537    21.69   0.000     .7366206     .883622
             |
       _cons |   9.500867   .0146102   650.29   0.000     9.472118    9.529615
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (309 categories)
9675
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.0000k0 not found)
file /tmp/St32652.0000k0 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.0000k1 not found)
file /tmp/St32652.0000k1 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.0000k2 not found)
file /tmp/St32652.0000k2 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.0000k3 not found)
file /tmp/St32652.0000k3 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(31 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =      7,725
                                                F(  25,    308)   =     553.00
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9791
                                                Adj R-squared     =     0.9782
                                                Root MSE          =     0.2396

                                (Std. Err. adjusted for 309 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -.2171539   1.161637    -0.19   0.852    -2.502902    2.068594
             |
        year |
       1992  |   .3331665   .0304825    10.93   0.000     .2731861    .3931469
       1993  |   .6645136   .0125459    52.97   0.000     .6398271    .6892001
       1994  |   .5465801   .0241526    22.63   0.000     .4990551    .5941051
       1995  |   .2165766   .0348555     6.21   0.000     .1479915    .2851617
       1996  |   .1742436   .0330708     5.27   0.000     .1091704    .2393168
       1997  |   .2389129   .0272796     8.76   0.000     .1852349     .292591
       1998  |   .1708875   .0314495     5.43   0.000     .1090046    .2327705
       1999  |    .163538   .0305195     5.36   0.000     .1034848    .2235912
       2000  |   .1921512   .0274208     7.01   0.000     .1381953     .246107
       2001  |   .2211279   .0232255     9.52   0.000     .1754272    .2668286
       2002  |   .5936265   .0280184    21.19   0.000     .5384948    .6487582
       2003  |   .9963145   .0360873    27.61   0.000     .9253056    1.067323
       2004  |   1.046027   .0259002    40.39   0.000     .9950638    1.096991
       2005  |   .6910204   .0213991    32.29   0.000     .6489135    .7331274
       2006  |   .5520433   .0251036    21.99   0.000     .5026471    .6014396
       2007  |   .5058317   .0243599    20.76   0.000     .4578987    .5537646
       2008  |   .5624023   .0223745    25.14   0.000     .5183761    .6064284
       2009  |   .9730166   .0274395    35.46   0.000      .919024    1.027009
       2010  |   1.905273   .0877741    21.71   0.000      1.73256    2.077986
       2011  |   1.925295   .0352139    54.67   0.000     1.856005    1.994585
       2012  |   1.680303   .0300305    55.95   0.000     1.621212    1.739394
       2013  |   1.416837   .0328569    43.12   0.000     1.352185     1.48149
       2014  |   1.122267    .027833    40.32   0.000       1.0675    1.177034
       2015  |   .6014286   .0338125    17.79   0.000      .534896    .6679613
             |
       _cons |   8.513694   .0141613   601.20   0.000     8.485828    8.541559
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (309 categories)
9680
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.0000k5 not found)
file /tmp/St32652.0000k5 saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.0000k6 not found)
file /tmp/St32652.0000k6 saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.0000k7 not found)
file /tmp/St32652.0000k7 saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.0000k8 not found)
file /tmp/St32652.0000k8 saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(25 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =      7,600
                                                F(  25,    303)   =     825.83
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9798
                                                Adj R-squared     =     0.9789
                                                Root MSE          =     0.2302

                                (Std. Err. adjusted for 304 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -7.736543   1.258099    -6.15   0.000    -10.21226   -5.260826
             |
        year |
       1992  |   .1783475   .0311961     5.72   0.000     .1169589     .239736
       1993  |   .6968655   .0126868    54.93   0.000     .6719002    .7218308
       1994  |   .6885162    .025745    26.74   0.000     .6378546    .7391779
       1995  |   .4093504   .0377545    10.84   0.000     .3350562    .4836445
       1996  |   .3444774    .036188     9.52   0.000     .2732657    .4156891
       1997  |   .3653257    .030226    12.09   0.000     .3058463    .4248052
       1998  |   .3300412   .0351838     9.38   0.000     .2608055    .3992768
       1999  |    .307354   .0333715     9.21   0.000     .2416847    .3730232
       2000  |   .3119235    .029992    10.40   0.000     .2529045    .3709425
       2001  |   .3312568   .0251674    13.16   0.000     .2817318    .3807818
       2002  |   .8048785   .0312021    25.80   0.000     .7434783    .8662787
       2003  |   .9377763   .0352347    26.62   0.000     .8684407    1.007112
       2004  |   1.049661    .023581    44.51   0.000     1.003258    1.096064
       2005  |   .8560059   .0246598    34.71   0.000     .8074797    .9045322
       2006  |   .7666601   .0288114    26.61   0.000     .7099643    .8233559
       2007  |   .7102092    .028145    25.23   0.000     .6548248    .7655936
       2008  |    .707434   .0247472    28.59   0.000      .658736    .7561321
       2009  |   1.017549   .0263081    38.68   0.000     .9657794    1.069319
       2010  |   1.491957   .0886651    16.83   0.000      1.31748    1.666435
       2011  |   1.927807   .0329736    58.47   0.000     1.862921    1.992694
       2012  |   1.933265   .0337156    57.34   0.000     1.866919    1.999611
       2013  |   1.711367    .038157    44.85   0.000     1.636281    1.786454
       2014  |   1.355133   .0318094    42.60   0.000     1.292538    1.417729
       2015  |   .8137693   .0380071    21.41   0.000     .7389781    .8885605
             |
       _cons |   9.508287   .0147672   643.88   0.000     9.479228    9.537346
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (304 categories)
9685
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.0000ka not found)
file /tmp/St32652.0000ka saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.0000kb not found)
file /tmp/St32652.0000kb saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.0000kc not found)
file /tmp/St32652.0000kc saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.0000kd not found)
file /tmp/St32652.0000kd saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(31 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =      7,525
                                                F(  25,    300)   =     556.56
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9787
                                                Adj R-squared     =     0.9778
                                                Root MSE          =     0.2398

                                (Std. Err. adjusted for 301 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |   2.115295   1.061485     1.99   0.047     .0263965    4.204194
             |
        year |
       1992  |   .3913437   .0278231    14.07   0.000     .3365904    .4460969
       1993  |   .6617359   .0125522    52.72   0.000     .6370343    .6864374
       1994  |   .5038039   .0225155    22.38   0.000     .4594955    .5481123
       1995  |   .1486693   .0330335     4.50   0.000     .0836624    .2136761
       1996  |   .1076105   .0315205     3.41   0.001     .0455813    .1696396
       1997  |   .1826079   .0272627     6.70   0.000     .1289576    .2362582
       1998  |    .108683   .0306864     3.54   0.000     .0482951    .1690708
       1999  |   .1045663    .030702     3.41   0.001     .0441478    .1649848
       2000  |   .1412783   .0283796     4.98   0.000       .08543    .1971267
       2001  |   .1805917   .0250506     7.21   0.000     .1312946    .2298888
       2002  |   .5476405   .0314329    17.42   0.000     .4857835    .6094975
       2003  |   1.052075   .0300057    35.06   0.000     .9930269    1.111124
       2004  |   1.075675    .022528    47.75   0.000     1.031342    1.120008
       2005  |   .6712342   .0237066    28.31   0.000     .6245819    .7178864
       2006  |   .5212819    .027909    18.68   0.000     .4663597     .576204
       2007  |   .4760346   .0271772    17.52   0.000     .4225524    .5295167
       2008  |   .5477404   .0242317    22.60   0.000     .5000548     .595426
       2009  |   .9963267   .0252665    39.43   0.000     .9466047    1.046049
       2010  |   2.071219   .0761291    27.21   0.000     1.921405    2.221034
       2011  |   1.969834   .0313485    62.84   0.000     1.908143    2.031524
       2012  |   1.647698    .032215    51.15   0.000     1.584302    1.711094
       2013  |   1.370375   .0346865    39.51   0.000     1.302116    1.438635
       2014  |    1.08889   .0293997    37.04   0.000     1.031035    1.146746
       2015  |   .5537322    .034782    15.92   0.000     .4852845    .6221799
             |
       _cons |   8.539525   .0142786   598.06   0.000     8.511426    8.567624
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (301 categories)
9690
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.0000kf not found)
file /tmp/St32652.0000kf saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.0000kg not found)
file /tmp/St32652.0000kg saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.0000kh not found)
file /tmp/St32652.0000kh saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.0000ki not found)
file /tmp/St32652.0000ki saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(25 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =      7,400
                                                F(  25,    295)   =     820.79
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9800
                                                Adj R-squared     =     0.9791
                                                Root MSE          =     0.2294

                                (Std. Err. adjusted for 296 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |  -7.644338    1.28007    -5.97   0.000    -10.16357   -5.125111
             |
        year |
       1992  |   .1817936   .0315368     5.76   0.000     .1197279    .2438593
       1993  |   .6975596   .0129031    54.06   0.000     .6721658    .7229534
       1994  |   .6859872    .026291    26.09   0.000     .6342455    .7377289
       1995  |   .4068689   .0383713    10.60   0.000     .3313528     .482385
       1996  |   .3424873   .0368622     9.29   0.000      .269941    .4150336
       1997  |   .3621558   .0307816    11.77   0.000     .3015763    .4227352
       1998  |    .326629    .035834     9.12   0.000     .2561063    .3971518
       1999  |   .3041548   .0339822     8.95   0.000     .2372765    .3710331
       2000  |   .3060585   .0305448    10.02   0.000     .2459452    .3661719
       2001  |   .3272187   .0256268    12.77   0.000     .2767842    .3776531
       2002  |   .8041905   .0317901    25.30   0.000     .7416264    .8667547
       2003  |   .9411546   .0355136    26.50   0.000     .8712626    1.011047
       2004  |   1.050639   .0236354    44.45   0.000     1.004124    1.097155
       2005  |   .8530397   .0251538    33.91   0.000      .803536    .9025434
       2006  |   .7648512   .0293801    26.03   0.000     .7070301    .8226722
       2007  |   .7089783   .0287226    24.68   0.000     .6524511    .7655056
       2008  |   .7074424   .0252153    28.06   0.000     .6578178     .757067
       2009  |   1.019756   .0264976    38.48   0.000     .9676079    1.071905
       2010  |    1.50144   .0894142    16.79   0.000     1.325469     1.67741
       2011  |   1.931448   .0330509    58.44   0.000     1.866403    1.996494
       2012  |   1.933175   .0343439    56.29   0.000     1.865585    2.000765
       2013  |   1.710698   .0389043    43.97   0.000     1.634133    1.787263
       2014  |   1.355875   .0324621    41.77   0.000     1.291989    1.419762
       2015  |   .8132898   .0387603    20.98   0.000     .7370081    .8895715
             |
       _cons |   9.520197   .0149761   635.69   0.000     9.490724    9.549671
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (296 categories)
9695
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.0000kk not found)
file /tmp/St32652.0000kk saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.0000kl not found)
file /tmp/St32652.0000kl saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.0000km not found)
file /tmp/St32652.0000km saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.0000kn not found)
file /tmp/St32652.0000kn saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(31 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =      7,425
                                                F(  25,    296)   =     542.63
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9793
                                                Adj R-squared     =     0.9784
                                                Root MSE          =     0.2399

                                (Std. Err. adjusted for 297 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |   1.701072   1.023131     1.66   0.097    -.3124609    3.714605
             |
        year |
       1992  |   .3807397   .0264376    14.40   0.000     .3287103    .4327692
       1993  |   .6626001   .0126613    52.33   0.000     .6376825    .6875176
       1994  |   .5104313   .0223742    22.81   0.000     .4663986    .5544641
       1995  |   .1587832   .0337458     4.71   0.000     .0923711    .2251953
       1996  |   .1170897   .0322304     3.63   0.000     .0536599    .1805194
       1997  |   .1898176   .0286122     6.63   0.000     .1335084    .2461268
       1998  |   .1163839   .0324645     3.58   0.000     .0524934    .1802744
       1999  |   .1107916   .0329518     3.36   0.001      .045942    .1756411
       2000  |   .1466553   .0299577     4.90   0.000     .0876983    .2056124
       2001  |   .1848927   .0261432     7.07   0.000     .1334426    .2363428
       2002  |   .5559977    .031404    17.70   0.000     .4941944    .6178011
       2003  |   1.044741    .029905    34.94   0.000     .9858873    1.103594
       2004  |    1.07047   .0225281    47.52   0.000     1.026134    1.114805
       2005  |   .6720533   .0237687    28.27   0.000     .6252762    .7188304
       2006  |   .5240362   .0279171    18.77   0.000     .4690949    .5789774
       2007  |   .4777358   .0274375    17.41   0.000     .4237386    .5317331
       2008  |   .5467842   .0243106    22.49   0.000     .4989407    .5946276
       2009  |   .9898322   .0250619    39.50   0.000       .94051    1.039154
       2010  |   2.041632   .0736476    27.72   0.000     1.896693    2.186571
       2011  |   1.962481   .0318761    61.57   0.000     1.899748    2.025213
       2012  |   1.655823   .0316502    52.32   0.000     1.593535    1.718111
       2013  |   1.381525      .0337    40.99   0.000     1.315203    1.447847
       2014  |   1.098654   .0286716    38.32   0.000     1.042228     1.15508
       2015  |   .5662951   .0334869    16.91   0.000     .5003924    .6321977
             |
       _cons |   8.563588   .0143208   597.98   0.000     8.535404    8.591771
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (297 categories)
9700
file /ssgprojects/project0002/MobZ.new/data/interwrk/czones_cutoff.dta saved
(note: file /tmp/St32652.0000kp not found)
file /tmp/St32652.0000kp saved

. #delimit ; 
delimiter now ;
. /*******************************************
> 
> globals set above - this will be "include"-d
> 
> ********************************************/
> 
>  /* important tempfiles:
> 
> masterdata - data to which things will get merged
> $czone_iteration - the czone definition being used right now
>    (already sorted by FIPS)
> qcewdata - sorted by fips
> industry_by_year - sorted by naics2 year (employment growth);
> shell - a naics-year-czone dataset for merging into ;
> 
> */
>     
> use `qcewdata', clear;

. //destring naics2, force replace;  
> sort fips ;

.  merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. drop _merge ;

. tempfile mergefile;

. save `mergefile', replace;
(note: file /tmp/St32652.0000kq not found)
file /tmp/St32652.0000kq saved

. /************** BASE YEAR ***********************/
> bys naics2 czone: egen L_ij1990 = sum(annual_avg_emplvl*(year==1990)) ;

. bys czone: egen L_1990 = sum(annual_avg_emplvl*(year==1990)) ;

. gen gamma_ij1990 = L_ij1990 / L_1990 ;

. collapse (first) gamma_ij1990, by(czone naics2) ;

. sort czone naics2;

. tempfile base_year ;

. save `base_year', replace;
(note: file /tmp/St32652.0000kr not found)
file /tmp/St32652.0000kr saved

. /************** merging into bartik  *****************/
> 
> use `shell2', clear ;

. sort czone naics2 ;

. merge czone naics2 using `base_year' ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables czone naics2 do not uniquely identify observations in the master
    data

. drop _merge ;

. sort naics2 year ;

. merge naics2 year using `industry_by_year', keep(delta_emp_jt) ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variables naics2 year do not uniquely identify observations in the master
    data

. bys czone year: egen bartik_it = sum(delta_emp_jt*gamma_ij1990) ;

. collapse (first) bartik_it, by(czone year) ;

. keep czone year bartik_it ;

. tempfile bartik ;

. save `bartik', replace;
(note: file /tmp/St32652.0000ks not found)
file /tmp/St32652.0000ks saved

. /************** NOW, COLLAPSE EARNINGS TO CZONE **********/
> 
> use "$interwrk/bea_table30.dta", clear;

.   sort fips ;

. merge fips using $czone_iteration ;
(note: you are using old merge syntax; see [D] merge for new syntax)
variable fips does not uniquely identify observations in the master data
(note: variable fips was str5, now str10 to accommodate using data's values)

. collapse (sum) uireceipt , by(czone year) ;

.  gen log_uireceipt = log(uireceipt) ;
(25 missing values generated)

. sort czone year ;

. merge czone year using `bartik' ;
(note: you are using old merge syntax; see [D] merge for new syntax)

. drop _merge ;

.  tempfile mergedfile ;

. /* then will merge this outside this file, to */
       panel variable:  czone (unbalanced)
        time variable:  year, 1990 to 2016
                delta:  1 unit

Linear regression, absorbing indicators         Number of obs     =      7,225
                                                F(  25,    288)   =     853.00
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9805
                                                Adj R-squared     =     0.9796
                                                Root MSE          =     0.2285

                                (Std. Err. adjusted for 289 clusters in czone)
------------------------------------------------------------------------------
             |               Robust
log_uirece~t |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   bartik_it |
         L1. |   -7.39924   1.285485    -5.76   0.000    -9.929377   -4.869104
             |
        year |
       1992  |   .1867772   .0316938     5.89   0.000     .1243965     .249158
       1993  |   .6992138   .0130218    53.70   0.000      .673584    .7248437
       1994  |    .683413    .026562    25.73   0.000     .6311327    .7356934
       1995  |   .4010085    .038707    10.36   0.000     .3248239     .477193
       1996  |    .336448   .0371866     9.05   0.000     .2632561    .4096399
       1997  |   .3570375   .0311256    11.47   0.000      .295775       .4183
       1998  |   .3200557   .0361823     8.85   0.000     .2488405     .391271
       1999  |   .2984298   .0343428     8.69   0.000      .230835    .3660245
       2000  |   .3012181   .0308639     9.76   0.000     .2404706    .3619656
       2001  |   .3241978   .0258475    12.54   0.000     .2733239    .3750717
       2002  |   .7994475   .0321092    24.90   0.000     .7362491     .862646
       2003  |   .9459511   .0358446    26.39   0.000     .8754005    1.016502
       2004  |   1.052591   .0239053    44.03   0.000      1.00554    1.099643
       2005  |   .8499147   .0252734    33.63   0.000     .8001708    .8996587
       2006  |   .7611272   .0295487    25.76   0.000     .7029684    .8192861
       2007  |   .7048203   .0288493    24.43   0.000      .648038    .7616025
       2008  |    .704528   .0253893    27.75   0.000      .654556       .7545
       2009  |   1.021913   .0268877    38.01   0.000     .9689913    1.074834
       2010  |    1.51844   .0899194    16.89   0.000     1.341457    1.695423
       2011  |   1.936329   .0332825    58.18   0.000     1.870821    2.001836
       2012  |   1.929931   .0344398    56.04   0.000     1.862145    1.997716
       2013  |   1.707652   .0390877    43.69   0.000     1.630718    1.784586
       2014  |   1.355734   .0327076    41.45   0.000     1.291357     1.42011
       2015  |   .8126886   .0392492    20.71   0.000     .7354369    .8899403
             |
       _cons |   9.514955   .0151716   627.16   0.000     9.485093    9.544816
-------------+----------------------------------------------------------------
       czone |   absorbed                                     (289 categories)

.                         postclose `czoneresults' ;

. use `bartik_regs', clear ;

. sum beta se cutoff ;

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
        beta |        141   -4.661666     3.81507  -8.894306   2.115295
          se |        141    .7021853     .254896   .3404321   1.478844
      cutoff |        141        .935    .0204236         .9        .97

. save "$interwrk/bartik_results_cutoff.dta", replace;
(note: file /ssgprojects/project0002/MobZ.new/data/interwrk/bartik_results_cuto
> ff.dta not found)
file /ssgprojects/project0002/MobZ.new/data/interwrk/bartik_results_cutoff.dta 
> saved

. 
end of do-file
