
  ___  ____  ____  ____  ____ (R)
 /__    /   ____/   /   ____/
___/   /   /___/   /   /___/   14.2   Copyright 1985-2015 StataCorp LLC
  Statistics/Data Analysis            StataCorp
                                      4905 Lakeway Drive
                                      College Station, Texas 77845 USA
                                      800-STATA-PC        http://www.stata.com
                                      979-696-4600        stata@stata.com
                                      979-696-4601 (fax)

8-user Stata network perpetual license:
       Serial number:  501406244326
         Licensed to:  ECCO Cornell University
                       Ithaca, NY

Notes:
      1.  Stata is running in batch mode.
      2.  Unicode is supported; see help unicode_advice.

. do 00_qcew_post_extraction.do 

. 
. include "../config.do"

. /*  config.do */
. 
. 
. 
. if ( "`c(hostname)'" == "ecco.vrdc.cornell.edu" ) {
. global root "/ssgprojects/project0002/MobZ.new"
. }

. 
. if ( "`c(username)'" == "vilhuber" ) {
. global root "/home/vilhuber/Workspace/git/larsvilhuber/MobZ"
. }

. 
. if ( "`c(hostname)'" == "some.server.at.census" ) {
. global root "/made/up/path/Mobz"
. }

. 
. /* check if the author creates a log file. If not, adjust the following code 
> fragment */
. 
. local c_date = c(current_date)

. local cdate = subinstr("`c_date'", " ", "_", .)

. local c_time = c(current_time)

. local ctime = subinstr("`c_time'", ":", "_", .)

. 
. // log using "${root}/logfile_`cdate'-`ctime'.log", replace text
. 
. /* It will provide some info about how and when the program was run */
. /* See https://www.stata.com/manuals13/pcreturn.pdf#pcreturn */
. local variant = cond(c(MP),"MP",cond(c(SE),"SE",c(flavor)) )  

. // alternatively, you could use 
. // local variant = cond(c(stata_version)>13,c(real_flavor),"NA")  
. 
. di "=== SYSTEM DIAGNOSTICS ==="
=== SYSTEM DIAGNOSTICS ===

. di "Stata version: `c(stata_version)'"
Stata version: 14.2

. di "Updated as of: `c(born_date)'"
Updated as of: 19 Dec 2017

. di "Variant:       `variant'"
Variant:       IC

. di "Processors:    `c(processors)'"
Processors:    1

. di "OS:            `c(os)' `c(osdtl)'"
OS:            Unix 

. di "Machine type:  `c(machine_type)'"
Machine type:  PC (64-bit x86-64)

. di "=========================="
==========================

. 
. 
. 
. 
. /* define relative libraries */
. 
. global paperdir "${root}/paper"

. global interwrk "${root}/data/interwrk"

. global raw "${root}/raw"

. global temp "${root}/temp"

. global outputs "${root}/data"

. global programs "${root}/programs"

. global outgraphs "${root}/figures"

. global logdir "${programs}/logs"

. 
. cap mkdir "$logdir"

. log using "${logdir}/logfile_`cdate'-`ctime'.log", replace text
(note: file /ssgprojects/project0002/MobZ.new/programs/logs/logfile_17_Jul_2020
> -09_20_56.log not found)
-------------------------------------------------------------------------------
      name:  <unnamed>
       log:  /ssgprojects/project0002/MobZ.new/programs/logs/logfile_17_Jul_202
> 0-09_20_56.log
  log type:  text
 opened on:  17 Jul 2020, 09:20:56

. cap mkdir "$temp"

. cap mkdir "${root}/data"

. cap mkdir "$interwrk"

. cap mkdir "$raw"

. cap mkdir "$outputs"

. 
. /* install any packages locally */
. capture mkdir "${programs}/ado"

. sysdir set PERSONAL "${programs}/ado/personal"

. sysdir set PLUS     "${programs}/ado/plus"

. sysdir set SITE     "${programs}/ado/site"

. sysdir
   STATA:  /usr/local/stata14/
    BASE:  /usr/local/stata14/ado/base/
    SITE:  /ssgprojects/project0002/MobZ.new/programs/ado/site/
    PLUS:  /ssgprojects/project0002/MobZ.new/programs/ado/plus/
PERSONAL:  /ssgprojects/project0002/MobZ.new/programs/ado/personal/
OLDPLACE:  ~/ado/

. 
. /* define data sources */
. 
. /* QCEW */
. /* data/working/mobz/qcew */
.     global qcewdata "${raw}/qcew"  

. /* /data/working/mobz/outputs */
.     global czonedata "$outputs"  

. 
. /* ADH */
.     global adhdata "${raw}/adh_data/Public Release Data/dta"

. /* CZONE */
.     global czonedata "${raw}/adh_data/"

. 
. /* CBP */
.     /* this is where the raw Stata versions of CBP data reside */
.    global cbpdata "/data/clean/cbp"

. 
. 
. 
. /* compress and create summary stats */
. /*=================== Employment file ==================*/
.  
. use "$outputs/qcew_county.dta", clear

. compress
  variable year was double now int
  variable fips was str6 now str5
  variable naics2 was str6 now str5
  (10,506,864 bytes saved)

. save "$outputs/qcew_county.dta", replace
file /ssgprojects/project0002/MobZ.new/data/qcew_county.dta saved

. sum 

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
        year |  1,313,358    2004.661    7.426107       1990       2016
        fips |          0
      naics2 |          0
annual_avg~l |  1,313,358    2089.099    9472.836          0   836339.3

. codebook

-------------------------------------------------------------------------------
year                                                                       Year
-------------------------------------------------------------------------------

                  type:  numeric (int)

                 range:  [1990,2016]                  units:  1
         unique values:  27                       missing .:  0/1,313,358

                  mean:   2004.66
              std. dev:   7.42611

           percentiles:        10%       25%       50%       75%       90%
                              1993      1999      2005      2011      2014

-------------------------------------------------------------------------------
fips                                                                (unlabeled)
-------------------------------------------------------------------------------

                  type:  string (str5)

         unique values:  3,282                    missing "":  0/1,313,358

              examples:  "17085"
                         "26097"
                         "37079"
                         "48089"

-------------------------------------------------------------------------------
naics2                                                              (unlabeled)
-------------------------------------------------------------------------------

                  type:  string (str5)

         unique values:  19                       missing "":  0/1,313,358

              examples:  "31-33"
                         "48-49"
                         "54"
                         "62"

-------------------------------------------------------------------------------
annual_avg_emplvl                                                   (unlabeled)
-------------------------------------------------------------------------------

                  type:  numeric (double)

                 range:  [0,836339.25]                units:  .01
         unique values:  84,067                   missing .:  0/1,313,358

                  mean:    2089.1
              std. dev:   9472.84

           percentiles:        10%       25%       50%       75%       90%
                                 0     30.75    188.25    927.75   3874.25

. 
. /*=================== Mostly raw BLS QCEW file ==================*/
. 
. use "$interwrk/bls_us_county.dta", clear

. compress
  variable year was double now int
  variable quarter was double now byte
  variable emp_month1 was double now long
  variable fips was str6 now str5
  variable naics2 was str6 now str5
  (99,815,208 bytes saved)

. save "$interwrk/bls_us_county.dta", replace
file /ssgprojects/project0002/MobZ.new/data/interwrk/bls_us_county.dta saved

. sum 

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
        year |  5,253,432    2004.661    7.426105       1990       2016
     quarter |  5,253,432         2.5    1.118034          1          4
  emp_month1 |  5,253,432    2089.099    9480.037          0     844348
        fips |          0
      naics2 |          0

. codebook

-------------------------------------------------------------------------------
year                                                                       Year
-------------------------------------------------------------------------------

                  type:  numeric (int)

                 range:  [1990,2016]                  units:  1
         unique values:  27                       missing .:  0/5,253,432

                  mean:   2004.66
              std. dev:    7.4261

           percentiles:        10%       25%       50%       75%       90%
                              1993      1999      2005      2011      2014

-------------------------------------------------------------------------------
quarter                                                                 Quarter
-------------------------------------------------------------------------------

                  type:  numeric (byte)

                 range:  [1,4]                        units:  1
         unique values:  4                        missing .:  0/5,253,432

            tabulation:  Freq.  Value
                     1,313,358  1
                     1,313,358  2
                     1,313,358  3
                     1,313,358  4

-------------------------------------------------------------------------------
emp_month1                                                  Employment, Month 1
-------------------------------------------------------------------------------

                  type:  numeric (long)

                 range:  [0,844348]                   units:  1
         unique values:  69,707                   missing .:  0/5,253,432

                  mean:    2089.1
              std. dev:   9480.04

           percentiles:        10%       25%       50%       75%       90%
                                 0        27       186       929      3882

-------------------------------------------------------------------------------
fips                                                                (unlabeled)
-------------------------------------------------------------------------------

                  type:  string (str5)

         unique values:  3,282                    missing "":  0/5,253,432

              examples:  "17085"
                         "26097"
                         "37079"
                         "48089"

-------------------------------------------------------------------------------
naics2                                                              (unlabeled)
-------------------------------------------------------------------------------

                  type:  string (str5)

         unique values:  19                       missing "":  0/5,253,432

              examples:  "31-33"
                         "48-49"
                         "54"
                         "62"

. 
. 
end of do-file
