1                                                          The SAS System                                09:19 Friday, July 17, 2020

NOTE: Copyright (c) 2002-2012 by SAS Institute Inc., Cary, NC, USA. 
NOTE: SAS (r) Proprietary Software 9.4 (TS1M0) 
      Licensed to CORNELL UNIVERSITY-T&R, Site 70084769.
NOTE: This session is executing on the Linux 2.6.32-696.18.7.el6.x86_64 (LIN X64) platform.



NOTE: Updated analytical products:
      
      SAS/STAT 12.3 (maintenance)
      SAS/ETS 12.3 (maintenance)
      SAS/OR 12.3 (maintenance)
      SAS/IML 12.3 (maintenance)
      SAS/QC 12.3 (maintenance)

WARNING: Your system is scheduled to expire on August 12, 2020, which is 26 days from now. The SAS System will no longer function 
         on or after that date. Please contact your SAS Installation Representative to obtain your updated SAS Installation Data 
         (SID) file, which includes SETINIT information.
To locate the name of your SAS Installation Representative go to http://support.sas.com/repfinder and provide your site number 
70084769 and company name as CORNELL UNIVERSITY-T&R. On the SAS REP list provided, locate the REP for operating system LIN X64.
NOTE: Additional host information:

 Linux LIN X64 2.6.32-696.18.7.el6.x86_64 #1 SMP Thu Jan 4 17:31:22 UTC 2018 x86_64 CentOS release 6.3 (Final) 

You are running SAS 9. Some SAS 8 files will be automatically converted 
by the V9 engine; others are incompatible.  Please see 
http://support.sas.com/rnd/migration/planning/platform/64bit.html

PROC MIGRATE will preserve current SAS file attributes and is 
recommended for converting all your SAS libraries from any 
SAS 8 release to SAS 9.  For details and examples, please see
http://support.sas.com/rnd/migration/index.html


This message is contained in the SAS news file, and is presented upon
initialization.  Edit the file "news" in the "misc/base" directory to
display site-specific news and information in the program log.
The command line option "-nonews" will prevent this display.




NOTE: SAS initialization used:
      real time           0.04 seconds
      cpu time            0.02 seconds
      

NOTE: AUTOEXEC processing beginning; file is /home/fs01/lv39/autoexec.sas.

NOTE: Libref OPMQA was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: /home/lv39/Desktop/opm-qa
NOTE: Libref HERE was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: /ssgprojects/project0002/MobZ.new/programs/06_qcew
=========== running on ecco.vrdc.cornell.edu ============

NOTE: AUTOEXEC processing completed.
2 The SAS System                                                                                         09:19 Friday, July 17, 2020


1          /* convert the concatenated QCEW data to Stata */
2          
3          %include "../config.sas";
NOTE: Libref OUTPUTS was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: /ssgprojects/project0002/MobZ.new/data
NOTE: Libref INTERWRK was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: /ssgprojects/project0002/MobZ.new/data/interwrk
NOTE: Libref GEO refers to the same physical library as OUTPUTS.
NOTE: Libref GEO was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: /ssgprojects/project0002/MobZ.new/data
NOTE: Libref INPUTS was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: /ssgprojects/project0002/MobZ.new/raw
40         
41         
42         %macro extract ;
43         
44         
45         data bls_us_county (keep = fips naics2 /*annual_avg_emplvl*/ emp_month1 year quarter) ;
46             set INPUTS.bls_us_county (where=(
47                                     ownership_code ='5'
48                                     and aggregation_level='74' and naicssec ne '99')) ;
49             fips = state||county ;
50             naics2 = naicssec;
51             if year >= 1990 and year <= 2016;
52         run;
53         
54         /* sort by info */
55         proc sort data=bls_us_county nodupkey;
56         by fips naics2 year quarter;
57         run;
58         
59         data qcew_county (keep = fips naics2 annual_avg_emplvl year);
60           set bls_us_county;
61           by fips naics2 year quarter;
62           retain annual_empl n_recs;
63           if first.year then do;
64         	annual_empl = .;
65                 n_recs = 0;
66           end;
67           annual_empl + emp_month1;
68           n_recs+1;
69           if last.year then do;
70              annual_avg_emplvl = annual_empl/n_recs;
71              output;
72           end;
73         run;
74         
75         proc export data=qcew_county
76                           outfile = "&diroutputs./qcew_county.dta" replace
77                           dbms=dta ;
78         run;
79         
80         /* intermediate file, for debugging */
81         proc export data=bls_us_county
82                           outfile = "&dirinterwrk./bls_us_county.dta" replace
83                           dbms=dta ;
84         run;
85         
86         
87         %mend extract ;
88         
89         %extract;
WARNING: The Base SAS Software product with which DATASTEP is associated will be expiring soon, and is currently in warning mode to 
         indicate this upcoming expiration. Please run PROC SETINIT to obtain more information on your warning period.

NOTE: There were 5959008 observations read from the data set INPUTS.BLS_US_COUNTY.
      WHERE (ownership_code='5') and (aggregation_level='74') and (naicssec not = '99');
NOTE: The data set WORK.BLS_US_COUNTY has 5253432 observations and 5 variables.
NOTE: DATA statement used (Total process time):
      real time           2.20 seconds
      user cpu time       1.48 seconds
      system cpu time     0.56 seconds
      memory              943.84k
      OS Memory           6296.00k
      Timestamp           07/17/2020 09:19:44 AM
      Step Count                        1  Switch Count  0
      Page Faults                       0
      Page Reclaims                     802
      Page Swaps                        0
      Voluntary Context Switches        16
      Involuntary Context Switches      773
      Block Input Operations            1390624
      Block Output Operations           329992
      


NOTE: There were 5253432 observations read from the data set WORK.BLS_US_COUNTY.
NOTE: 0 observations with duplicate key values were deleted.
NOTE: The data set WORK.BLS_US_COUNTY has 5253432 observations and 5 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           3.41 seconds
      user cpu time       3.01 seconds
      system cpu time     0.40 seconds
      memory              373043.65k
      OS Memory           378860.00k
      Timestamp           07/17/2020 09:19:47 AM
      Step Count                        2  Switch Count  0
      Page Faults                       0
      Page Reclaims                     92912
      Page Swaps                        0
      Voluntary Context Switches        0
      Involuntary Context Switches      8
      Block Input Operations            0
      Block Output Operations           329992
      


NOTE: There were 5253432 observations read from the data set WORK.BLS_US_COUNTY.
NOTE: The data set WORK.QCEW_COUNTY has 1313358 observations and 4 variables.
NOTE: DATA statement used (Total process time):
      real time           1.14 seconds
      user cpu time       1.09 seconds
      system cpu time     0.05 seconds
      memory              579.81k
      OS Memory           6808.00k
      Timestamp           07/17/2020 09:19:49 AM
      Step Count                        3  Switch Count  0
      Page Faults                       0
      Page Reclaims                     34
      Page Swaps                        0
      Voluntary Context Switches        0
      Involuntary Context Switches      2
      Block Input Operations            0
      Block Output Operations           61960
      


NOTE: The export data set has 1313358 observations and 4 variables.
NOTE: "/ssgprojects/project0002/MobZ.new/data/qcew_county.dta" file was successfully created.
NOTE: PROCEDURE EXPORT used (Total process time):
      real time           0.27 seconds
      user cpu time       0.15 seconds
      system cpu time     0.04 seconds
      memory              541.28k
      OS Memory           6808.00k
      Timestamp           07/17/2020 09:19:49 AM
      Step Count                        4  Switch Count  0
      Page Faults                       0
      Page Reclaims                     95
      Page Swaps                        0
      Voluntary Context Switches        750
      Involuntary Context Switches      38
      Block Input Operations            0
      Block Output Operations           71832
      


NOTE: The export data set has 5253432 observations and 5 variables.
NOTE: "/ssgprojects/project0002/MobZ.new/data/interwrk/bls_us_county.dta" file was successfully created.
NOTE: PROCEDURE EXPORT used (Total process time):
      real time           1.05 seconds
      user cpu time       0.62 seconds
      system cpu time     0.18 seconds
      memory              336.21k
      OS Memory           6808.00k
      Timestamp           07/17/2020 09:19:50 AM
      Step Count                        5  Switch Count  0
      Page Faults                       0
      Page Reclaims                     6
      Page Swaps                        0
      Voluntary Context Switches        2836
      Involuntary Context Switches      193
      Block Input Operations            0
      Block Output Operations           369384
      


NOTE: SAS Institute Inc., SAS Campus Drive, Cary, NC USA 27513-2414
NOTE: The SAS System used:
      real time           8.15 seconds
      user cpu time       6.38 seconds
      system cpu time     1.26 seconds
      memory              377340.25k
      OS Memory           378860.00k
      Timestamp           07/17/2020 09:19:50 AM
      Step Count                        5  Switch Count  16
      Page Faults                       0
      Page Reclaims                     98618
      Page Swaps                        0
      Voluntary Context Switches        3683
      Involuntary Context Switches      1019
      Block Input Operations            1390640
      Block Output Operations           1163288
      
