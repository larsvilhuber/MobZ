---
title: "README and Guidance"
author: "Andrew Foote, Mark Kutzbach, Lars Vilhuber"
date: "`r Sys.Date()`"
output:
  html_document: 
    keep_md: yes
    self_contained: no
    toc: yes
    toc_depth: 4
    toc_float: yes
    df_print: paged
    lib_dir: _aux/libs
  pdf_document:
    toc: yes
editor_options:
  chunk_output_type: console
bibliography: [data.bib]
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
knitr::opts_chunk$set(warning = FALSE)
knitr::opts_chunk$set(cache = TRUE)
knitr::opts_chunk$set(include = FALSE)
options(dplyr.summarise.inform = FALSE)
```
```{r config_libs,include=FALSE,message=FALSE,cache=FALSE}
source(file.path(rprojroot::find_root(rprojroot::has_file("pathconfig.R")),"pathconfig.R"),echo=TRUE)
source(file.path(aux,"config.R"),echo=TRUE)
source(file.path(aux,"common-functions.R"),echo=TRUE)
source(file.path(aux,"global-libraries.R"),echo=TRUE)
config <- config::get()
```

This README describes the data inputs and processing stream for our paper `r config$papertitle`. 

Data Availability and Provenance Statements
----------------------------

### Commuting Zone Data

@usda_cz_ers

- Source https://www.ers.usda.gov/data-products/commuting-zones-and-labor-market-areas/
- Actual file: https://www.ers.usda.gov/webdocs/DataFiles/48457/czlma903.xls?v=6997.1
- Provided as part of this replication package 

CZ data were produced by an agency of the US Government and are in the public domain.

### Journey-to-Work (JTW) data

Most of the JTW data can be found at https://www.census.gov/topics/employment/commuting/guidance/flows.html. The data were produced by an agency of the US Government and are in the public domain. 

Because the US Census Bureau does not provide robust (permanent) URLs, we archived the data on openICPSR/DataLumos, or searched for permanent locations elsewhere on ICPSR. As of 2020-09-01, the source URLs were still functional, though. Our scripts pull the data from the source URL.

#### 1990 JTW

@u.s.censusbureau_1990_2017

- Source: https://www2.census.gov/programs-surveys/commuting/datasets/1990/worker-flow/usresco.txt
- Permanent source: http://doi.org/10.3886/E100617V1
- Not provided
- Renamed to: `1990jtw_raw.txt`

#### 2000 JTW

@u.s.censusbureau_census_2003


- Source: https://www.census.gov/population/www/cen2000/commuting/files/2KRESCO_US.txt
- Permanent source: http://doi.org/10.3886/ICPSR13405.v1
- Not provided
- Renamed to : `jtw2000_raw.txt`

#### 2009-2013 ACS flows

@u.s.censusbureau_20092013_2017


- Source: https://www2.census.gov/programs-surveys/commuting/tables/time-series/commuting-flows/table1.xlsx
- Permanent source: http://doi.org/10.3886/E100616V1
- Renamed to: `jtw2009_2013.csv`
- Not provided


#### BEA data

Data on National Income and Product Accounts (NIPA).

@bea_table30_2019

- Note: Data can be downloaded from https://apps.bea.gov/regional/downloadzip.cfm, under "Personal Income (State and Local)", select CAINC30: Economic Profile by County, then download. A direct download is also possible, see next line. The file is regularly updated.
- Source:  https://apps.bea.gov/regional/zip/CAINC30.zip.
- Datafile:  `CAINC30__ALL_AREAS_1969_2018.csv`
- The datafile is provided as part of this package.

The data were produced by an agency of the US Government and are in the public domain. 



### Dataset list

The following files are provided in `$raw` directory:

```{r list_data,include=TRUE}
bind_rows(enframe(list.files(raw,recursive=FALSE,full.names=FALSE,
                   pattern="*.csv")),
          enframe(list.files(raw,recursive=FALSE,full.names=FALSE,
                   pattern="*.dta")),
          enframe(list.files(raw,recursive=FALSE,full.names=FALSE,
                   pattern="*.xlsx"))
          ) %>%
    arrange(value) %>%
    select(filename=value) %>% 
  kable()
```





```{r child = 'programs/README.md'}
```



## References
